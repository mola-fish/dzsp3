!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.ZMap=i():e.ZMap=i()}(window,(function(){return function(e){var i={};function o(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=e,o.c=i,o.d=function(e,i,t){o.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,i){if(1&i&&(e=o(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var s in e)o.d(t,s,function(i){return e[i]}.bind(null,s));return t},o.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(i,"a",i),i},o.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},o.p="",o(o.s=24)}({24:function(e,i,o){"use strict";o.r(i);var t=o(6);i.default={version:"1.0.0",WebglMapWidget:t.a}},6:function(e,i,o){"use strict";class t{constructor(e){const i=e.map;this.map3d=i,this.cesium=i.GetMap(),this.style=e.style?e.style:{top:0,left:0},this.init()}init(){this._createBar(),this._registerEvent()}_createBar(){const e=this.style,i=e.top,o=e.left,t=(parseInt($("canvas").css("height")),'<div id="bottom" class="gmap-mouse-position" style="height:18px; bottom:0; left:'+o+'px;" border="0" cellspacing="0" cellpadding="0"></div>');$("#"+this.map3d.divID).append(t)}_registerEvent(){const e=this.cesium;new Cesium.ScreenSpaceEventHandler(e.scene._canvas).setInputAction((function(i){const o=e.scene.camera.getPickRay(i.endPosition),t=e.scene.globe.pick(o,e.viewer.scene);if(!t)return void $("#bottom").html("");const s=e.ellipsoid.cartesianToCartographic(t);let n="经度: "+(s.longitude/Math.PI*180).toFixed(6)+" ";n+="纬度: "+(s.latitude/Math.PI*180).toFixed(6)+" ",n+="高度: "+s.height.toFixed(2)+" （米）",$("#bottom").html(n)}),Cesium.ScreenSpaceEventType.MOUSE_MOVE)}}Cesium.MousePositionCtl=t;var s=t;class n{constructor(e){this.map3dTool=e,this.viewer=e.GetView(),this.tilesList={}}get tileslist(){return this.tilesList}set tileslist(e){this.tilesList=e}add3dTiles(e,i,o,t){let s=null,n=null;e.position&&(s=e.position,n=Cesium.Matrix4.multiplyByTranslation(Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(s[0],s[1],s[2])),new Cesium.Cartesian3(0,0,0),new Cesium.Matrix4));const l=this.viewer.scene.primitives.add(new Cesium.Cesium3DTileset({url:e.url,baseScreenSpaceError:1024,skipLevelOfDetail:!0,skipScreenSpaceErrorFactor:e.fskipScreenSpaceErrorFactor?e.fskipScreenSpaceErrorFactor:16,skipLevels:e.fskipLevels?e.fskipLevels:1,immediatelyLoadDesiredLevelOfDetail:!1,loadSiblings:!1,cullWithChildrenBounds:!0,dynamicScreenSpaceError:!0,dynamicScreenSpaceErrorDensity:.00278,dynamicScreenSpaceErrorFactor:4,dynamicScreenSpaceErrorHeightFalloff:.25,debugColorizeTiles:!1,debugWireframe:!1,debugShowBoundingVolume:!1,modelMatrix:n||Cesium.Matrix4.IDENTITY}));l.readyPromise.then(()=>{const i=l.boundingSphere,o=this.viewer.camera;l.style=e.style,o.viewBoundingSphere(i,new Cesium.HeadingPitchRange(0,-.5,i.radius)),o.lookAtTransform(Cesium.Matrix4.IDENTITY)}).otherwise((function(e){throw e})),i&&this.viewer.zoomTo(l),l.allTilesLoaded.addEventListener((function(){"function"==typeof o&&o(l)})),setTimeout(()=>{"function"==typeof t&&t(l)},0);const r=e.modelid?e.modelid:e.url;return this.tilesList[r]=l,l}get3dTilesById(e){return this.tilesList[e]}deleteTilesById(e){const i=this.tilesList[e];i&&this.deletedTiles(i)}deletedTiles(e){if(!e)return" The tiles doesn't exist  ";if("string"==typeof e)return void this.deleteTilesById(e);if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";for(let i in this.tilesList)if(this.tilesList[i]==e){delete this.tilesList[i];break}this.viewer.scene.primitives.remove(e)}show(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.show=!0}unshow(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.show=!1}showDebugShowUrl(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.debugShowUrl=!0}unshowDebugShowUrl(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.debugShowUrl=!1}showDebugShowMemoryUsage(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.debugShowMemoryUsage=!0}unshowDebugShowMemoryUsage(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.debugShowMemoryUsage=!1}unshowDebugShowRenderingStatistics(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.debugShowRenderingStatistics=!1}showDebugShowRenderingStatistics(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.debugShowRenderingStatistics=!0}showDebugShowContentBoundingVolume(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.debugShowContentBoundingVolume=!0}unshowDebugShowContentBoundingVolume(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.debugShowContentBoundingVolume=!1}showDebugShowBoundingVolume(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.debugShowBoundingVolume=!0}unshowDebugShowBoundingVolume(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.debugShowBoundingVolume=!1}showDebugWireframe(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.debugWireframe=!0}unshowDebugWireframe(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.debugWireframe=!1}showDebugColorizeTiles(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.debugColorizeTiles=!0}unshowDebugColorizeTiles(e){if(!e)return" The tiles doesn't exist  ";if(!this.viewer.scene.primitives.contains(e))return" The tiles is useless ";e.debugColorizeTiles=!1}colorByHeight(e,i){e.style=new Cesium.Cesium3DTileStyle({color:{conditions:i}})}colorByLatitudeDefine(e,i){e.style=new Cesium.Cesium3DTileStyle({defines:{latitudeRadians:"radians(${latitude})"},color:{conditions:i}})}colorByLongitudeDefined(e,i){e.style=new Cesium.Cesium3DTileStyle({defines:{LongitudeRadians:"radians(${Longitude})"},color:{conditions:i}})}colorByDistance(e,i,o){e.style=new Cesium.Cesium3DTileStyle({defines:{distance:"distance(vec2(radians(${longitude}), radians(${latitude})), vec2(radians("+o[0]+"),radians("+o[1]+")))"},color:{conditions:i}})}colorByNameRegex(e,i){e.style=new Cesium.Cesium3DTileStyle({color:i})}hideByHeight(e,i){e.style=new Cesium.Cesium3DTileStyle({show:"${height} "+i})}getTilesStyle(e,i){if(!e)return" The tiles doesn't exist  ";return this.viewer.scene.primitives.contains(e)?i.style?i.style._color._conditions:" no style":" The tiles is useless "}removeTilesStyle(e,i){if(!e)return" The tiles doesn't exist  ";return this.viewer.scene.primitives.contains(e)?i.style?void(e.style=null):" no style":" The tiles is useless "}}window.ZMAP3DTILES=n;var l=n;class r{constructor(e){this.map3dTool=e,this.viewer=e.GetView(),this.gifImage={}}getModel(e){if(null==e||""==e)return null;let i=this.viewer.entities.getById(e);return i&&null!=i&&null!=i||(i=null),i}getEntity(e){if(null==e||""==e)return null;let i=this.viewer.entities.getById(e);return i&&null!=i&&null!=i||(i=null),i}removeEntity(e){if(!e||null==e||""==e)return" The model doesn't exist  ";return this.viewer.entities.contains(e)?this.removeEntityById(e._id):" The entity is useless "}removeEntityById(e){if(!e||null==e||""==e)return" The modelId doesn't exist  ";const i=this.getModel(e);if(!i||null==i)return" The model doesn't exist  ";return this.viewer.entities.removeById(e)}removeAll(){this.viewer.entities.removeAll()}showEntity(e){if(!this.viewer.entities.contains(e))return" The entity is useless ";e.show=!0}unshowEntity(e){if(!this.viewer.entities.contains(e))return" The entity is useless ";e.show=!1}addPoint(e,i=!1){if(!e.id)return"you have to give a id ";const o=this.getModel(e.id);if(null!=o||null!=o)return" The id already exists ";let t=[];if(e.position){const i=e.position;t[0]=parseFloat(i[0]),t[1]=parseFloat(i[1]),t[2]=i[2]?parseFloat(i[2]):0}else t=[110.05254,25.002073,0];const s=Cesium.Cartesian3.fromDegrees(t[0],t[1],t[2]),n=this.viewer.entities.add({id:e.id,name:e.name||e.id,position:s,show:null==e.show||e.show,point:{color:e.dcolor?this.map3dTool.colorTransform(e.dcolor):Cesium.Color.WHITE,pixelSize:e.dpixelSize?e.dpixelSize:1,outlineColor:e.doutlineColor?this.map3dTool.colorTransform(e.doutlineColor):Cesium.Color.BLACK,outlineWidth:e.doutlineWidth?e.doutlineWidth:1,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8),scaleByDistance:e.fscaleByDistance?new Cesium.NearFarScalar(e.fscaleByDistance[0],e.fscaleByDistance[1],e.fscaleByDistance[2],e.fscaleByDistance[3]):new Cesium.NearFarScalar(0,1,1e8,1),disableDepthTestDistance:null==e.ddisableDepthTestDistance?0:e.ddisableDepthTestDistance}});return i&&this.viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(t[0],t[1],t[2]+1e3)}),n}addPoints(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position||0==e.position.length)return" please provide points ";const o=[];for(let i=0;i<e.position.length;i++){const t=e.position[i],s=Cesium.Cartesian3.fromDegrees(t[0],t[1],t[2]),n=this.viewer.entities.add({id:e.id+i,name:e.name||e.id,position:s,show:null==e.show||e.show,point:{color:e.dcolor?this.map3dTool.colorTransform(e.dcolor):Cesium.Color.WHITE,pixelSize:e.dpixelSize?e.dpixelSize:1,outlineColor:e.doutlineColor?this.map3dTool.colorTransform(e.doutlineColor):Cesium.Color.BLACK,outlineWidth:e.doutlineWidth?e.doutlineWidth:1,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8),scaleByDistance:e.fscaleByDistance?new Cesium.NearFarScalar(e.fscaleByDistance[0],e.fscaleByDistance[1],e.fscaleByDistance[2],e.fscaleByDistance[3]):new Cesium.NearFarScalar(0,1,1e8,1),disableDepthTestDistance:null==e.ddisableDepthTestDistance?0:e.ddisableDepthTestDistance}});o.push(n)}return o}addPolyline(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position||e.position.length<2)return" please provide points ";const o=[];for(let i=0;i<e.position.length;i++){const t=e.position[i];o.push(t[0]),o.push(t[1]),o.push(t[2])}return this.viewer.entities.add({id:e.id,name:e.name||e.id,show:null==e.show||e.show,polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(o),followSurface:!!e.dfollowSurface&&e.dfollowSurface,clampToGround:!!e.dclampToGround&&e.dclampToGround,width:e.dwidth?e.dwidth:1,material:e.fcolor?this.map3dTool.colorTransform(e.fcolor):Cesium.Color.WHITE,shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,zIndex:e.fzIndex?e.fzIndex:0,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})}addPolylineOutline(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position||e.position.length<2)return" please provide points ";const o=[];for(let i=0;i<e.position.length;i++){const t=e.position[i];o.push(t[0]),o.push(t[1]),o.push(t[2])}return this.viewer.entities.add({id:e.id,name:e.name||e.id,position:Cesium.Cartesian3.fromDegreesArrayHeights(o),show:null==e.show||e.show,polyline:{followSurface:!!e.dfollowSurface&&e.dfollowSurface,clampToGround:!!e.dclampToGround&&e.dclampToGround,width:e.dwidth?e.dwidth:1,material:new Cesium.PolylineOutlineMaterialProperty({color:e.fcolor?this.map3dTool.colorTransform(e.fcolor):Cesium.Color.WHITE,outlineWidth:e.foutlineWidth?e.foutlineWidth:1,outlineColor:e.foutlineColor?this.map3dTool.colorTransform(e.foutlineColor):Cesium.Color.WHITE}),shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,zIndex:e.fzIndex?e.fzIndex:0,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})}addPolylineArrow(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position||e.position.length<2)return" please provide points ";const o=[];for(let i=0;i<e.position.length;i++){const t=e.position[i];o.push(t[0]),o.push(t[1]),o.push(t[2])}return this.viewer.entities.add({id:e.id,name:e.name||e.id,position:Cesium.Cartesian3.fromDegreesArrayHeights(o),show:null==e.show||e.show,polyline:{followSurface:!!e.dfollowSurface&&e.dfollowSurface,clampToGround:!!e.dclampToGround&&e.dclampToGround,width:e.dwidth?e.dwidth:1,material:new Cesium.PolylineArrowMaterialProperty(e.fcolor?this.map3dTool.colorTransform(e.fcolor):Cesium.Color.WHITE),shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,zIndex:e.fzIndex?e.fzIndex:0,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})}addPolylineDash(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position||e.position.length<2)return" please provide points ";const o=[];for(let i=0;i<e.position.length;i++){const t=e.position[i];o.push(t[0]),o.push(t[1]),o.push(t[2])}return this.viewer.entities.add({id:e.id,name:e.name||e.id,position:Cesium.Cartesian3.fromDegreesArrayHeights(o),show:null==e.show||e.show,polyline:{followSurface:!!e.dfollowSurface&&e.dfollowSurface,clampToGround:!!e.dclampToGround&&e.dclampToGround,width:e.dwidth?e.dwidth:1,material:new Cesium.PolylineDashMaterialProperty({color:e.fcolor?this.map3dTool.colorTransform(e.fcolor):Cesium.Color.WHITE,gapColor:e.fgapColor?this.map3dTool.colorTransform(e.fgapColor):Cesium.Color.TRANSPARENT,dashLength:e.fdashLength?e.fdashLength:1,dashPattern:e.ddashPattern?e.ddashPattern:255}),shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,zIndex:e.fzIndex?e.fzIndex:0,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})}setAssistMaterial(e){let i=null;const o=e;if(o){const e=o.materialName;if("dColorMaterial"===e)i=new Cesium.ColorMaterialProperty({color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):Cesium.Color.WHITE});else if("dGridMaterial"===e)i=new Cesium.GridMaterialProperty({color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):Cesium.Color.WHITE,cellAlpha:o.dcellAlpha?Number(o.dcellAlpha):.1,lineCount:o.dlineCount?new Cesium.Cartesian2(Number(o.dlineCount[0]),Number(o.dlineCount[1])):new Cesium.Cartesian2(8,8),lineThickness:o.dlineThickness?new Cesium.Cartesian2(Number(o.dlineThickness[0]),Number(o.dlineThickness[1])):new Cesium.Cartesian2(1,1),lineOffset:o.dlineOffset?new Cesium.Cartesian2(Number(o.dlineOffset[0]),Number(o.dlineOffset[1])):new Cesium.Cartesian2(0,0)});else if("dImageMaterial"===e)o.dimage&&(i=new Cesium.ImageMaterialProperty({image:o.dimage,repeat:o.drepeat?new Cesium.Cartesian2(Number(o.drepeat[0]),Number(o.drepeat[1])):new Cesium.Cartesian2(1,1),color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):Cesium.Color.WHITE,transparent:!!o.dtransparent&&o.dtransparent}));else if("dPolylineGlowMaterial"===e)i=new Cesium.PolylineGlowMaterialProperty({glowPower:o.dglowPower?Number(o.dglowPower):.25,color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):Cesium.Color.WHITE});else if("dPolylineOutlineMaterial"===e)i=new Cesium.PolylineGlowMaterialProperty({color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):Cesium.Color.WHITE,outlineColor:o.doutlineColor?this.map3dTool.colorTransform(o.doutlineColor):Cesium.Color.BLACK,outlineWidth:o.doutlineWidth?Number(o.doutlineWidth):1});else if("dPolylineOutlineMaterialProperty"===e)i=new Cesium.PolylineOutlineMaterialProperty({color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):Cesium.Color.WHITE,outlineColor:o.doutlineColor?this.map3dTool.colorTransform(o.doutlineColor):Cesium.Color.BLACK,outlineWidth:o.doutlineWidth?Number(o.doutlineWidth):1});else if("dStripeMaterial"===e){const e=o.drotation?180*Number(o.drotation)/Math.PI:0;i=new Cesium.StripeMaterialProperty({evenColor:o.devenColor?this.map3dTool.colorTransform(o.devenColor):Cesium.Color.WHITE,oddColor:o.doddColor?this.map3dTool.colorTransform(o.doddColor):Cesium.Color.WHITE,repeat:o.drepeat?Number(o.drepeat):1,offset:o.doffset?Number(o.doffset):0,orientation:e})}else i=o instanceof Cesium.PolylineArrowMaterialProperty?o:new Cesium.ColorMaterialProperty({color:Cesium.Color.WHITE})}else i=new Cesium.ColorMaterialProperty({color:Cesium.Color.WHITE});return i}getAssistMaterial(e){const i=e.constructor.name;let o=null;if("ColorMaterialProperty"===i)o={materialname:"dColorMaterial",color:e.color._value};else if("GridMaterialProperty"===i)o={materialname:"dGridMaterial",dcolor:e.color._value,dcellAlpha:e.cellAlpha._value,dlineCount:[e.lineCount._value.x,e.lineCount._value.y],dlineThickness:[e.lineThickness._value.x,e.lineThickness._value.y],dlineOffset:[e.lineOffset._value.x,e.lineOffset._value.y]};else if("ImageMaterialProperty"===i)o={materialname:"dImageMaterial",dimage:e.image._value,drepeat:[e.repeat._value.x,e.repeat._value.y],dcolor:e.color._value,dtransparent:e.transparent._value};else if("PolylineGlowMaterialProperty"===i)o={materialname:"dPolylineGlowMaterial",dglowPower:e.glowPower._value,dcolor:e.color._value};else if("PolylineOutlineMaterialProperty"===i)o={materialname:"dPolylineOutlineMaterial",dcolor:e.color._value,doutlineColor:e.outlineColor._value,doutlineWidth:e.outlineWidth._value};else if("StripeMaterialProperty"===i){const i=new Number(e.orientation._value*Math.PI/180).toFixed(2);o={materialname:"dStripeMaterial",devenColor:e.evenColor._value,doddColor:e.oddColor._value,drepeat:e.repeat._value,doffset:e.offset._value,drotation:i}}else o={materialname:"dColorMaterial",color:e.color._value};return o}addPlane(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position)return" please provide points ";const o=e.position;return this.viewer.entities.add({id:e.id,name:e.name||e.id,position:Cesium.Cartesian3.fromDegrees(o[0],o[1],o[2]),show:null==e.show||e.show,plane:{plane:e.dplan?new Cesium.Plane(Cesium.Cartesian3.normalize(new Cesium.Cartesian3(e.dplan[0],e.dplan[1],e.dplan[2])),e.dplan[3]):new Cesium.Plane(Cesium.Cartesian3.UNIT_Y,0),dimensions:e.ddimensions?new Cesium.Cartesian2(e.ddimensions[0],e.ddimensions[1]):new Cesium.Cartesian2(4e5,3e5),fill:!e.dfill||e.dfill,material:e.fcolor?this.map3dTool.colorTransform(e.fcolor):Cesium.Color.WHITE,outline:!!e.doutline&&e.doutline,outlineColor:e.doutlineColor?this.map3dTool.colorTransform(e.doutlineColor):Cesium.Color.WHITE,outlineWidth:e.doutlineWidth?e.doutlineWidth:1,shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})}addBox(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position)return" please provide points ";const o=e.position,t=Cesium.Cartesian3.fromDegrees(o[0],o[1],o[2]);return this.viewer.entities.add({id:e.id,name:e.name||e.id,position:t,orientation:window.modelOrientation,show:null==e.show||e.show,box:{dimensions:e.ddimensions?new Cesium.Cartesian3(e.ddimensions[0],e.ddimensions[1],e.ddimensions[2]):new Cesium.Cartesian3(4e5,3e5,5e5),fill:!e.dfill||e.dfill,material:e.fcolor?this.map3dTool.colorTransform(e.fcolor):Cesium.Color.WHITE,outline:!!e.doutline&&e.doutline,outlineColor:e.doutlineColor?this.map3dTool.colorTransform(e.doutlineColor):Cesium.Color.WHITE,outlineWidth:e.doutlineWidth?e.doutlineWidth:1,shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})}addcorridor(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position||e.position.length<2)return" please provide points ";const o=[];for(let i=0;i<e.position.length;i++){const t=e.position[i];o.push(t[0]),o.push(t[1])}return this.viewer.entities.add({id:e.id,name:e.name||e.id,position:Cesium.Cartesian3.fromDegreesArray(o),show:null==e.show||e.show,corridor:{width:e.dwidth?e.dwidth:1e5,cornerType:e.dcornerType?Cesium.CornerType[e.dcornerType.toUpperCase()]:Cesium.CornerType.MITERED,height:e.dheight?e.dheight:1e4,extrudedHeight:e.dextrudedHeight?e.dextrudedHeight:1e4,fill:!e.dfill||e.dfill,material:e.fcolor?this.map3dTool.colorTransform(e.fcolor):Cesium.Color.WHITE,outline:!!e.doutline&&e.doutline,outlineColor:e.doutlineColor?this.map3dTool.colorTransform(e.doutlineColor):Cesium.Color.WHITE,outlineWidth:e.doutlineWidth?e.doutlineWidth:1,shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})}addellipse(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position||0==e.position.length)return" please provide points ";const o=[];for(let i=0;i<e.position.length;i++){const t=e.position[i];o.push(t[0]),o.push(t[1])}const t=this.setAssistMaterial(e.dmaterial);return this.viewer.entities.add({id:e.id,name:e.name||e.id,position:Cesium.Cartesian3.fromDegrees(o[0],o[1]),show:null==e.show||e.show,ellipse:{semiMajorAxis:e.dsemiMajorAxis?e.dsemiMajorAxis:3e4,semiMinorAxis:e.dsemiMinorAxis?e.dsemiMinorAxis:3e4,height:e.dheight?e.dheight:1e4,extrudedHeight:e.dextrudedHeight?e.dextrudedHeight:1e4,fill:!e.dfill||e.dfill,material:t,outline:!!e.doutline&&e.doutline,outlineColor:e.doutlineColor?this.map3dTool.colorTransform(e.doutlineColor):Cesium.Color.WHITE,outlineWidth:e.doutlineWidth?e.doutlineWidth:1,numberOfVerticalLines:e.dnumberOfVerticalLines?e.dnumberOfVerticalLines:16,shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})}addellipsoid(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position||0==e.position.length)return" please provide points ";const o=[];for(let i=0;i<e.position.length;i++){const t=e.position[i];o.push(t[0]),o.push(t[1]),o.push(t[2])}return this.viewer.entities.add({id:e.id,name:e.name||e.id,position:Cesium.Cartesian3.fromDegrees(o[0],o[1],o[2]),show:null==e.show||e.show,ellipsoid:{radii:e.dradii?new Cesium.Cartesian3(e.dradii[0],e.dradii[1],e.dradii[2]):new Cesium.Cartesian3(2e5,2e5,3e5),fill:!e.dfill||e.dfill,material:e.fcolor?this.map3dTool.colorTransform(e.fcolor):Cesium.Color.WHITE,outline:!!e.doutline&&e.doutline,outlineColor:e.doutlineColor?this.map3dTool.colorTransform(e.doutlineColor):Cesium.Color.WHITE,outlineWidth:e.doutlineWidth?e.doutlineWidth:1,subdivisions:e.dsubdivisions?e.dsubdivisions:128,shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})}AddTextLabel(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position||0==e.position.length)return" please provide points ";let o=[109.234,34.24,0];e.position&&(o=e.position,o[2]||(o[2]=0));const t=this.viewer.entities.add({id:e.id,name:e.name||e.id,position:Cesium.Cartesian3.fromDegrees(o[0],o[1],o[2]),show:null==e.show||e.show,label:{show:!0,text:e.dtext?e.dtext:"请配置内容",font:e.dfont?e.dfont:"13px 宋体",style:e.dstyle?Cesium.LabelStyle[e.dstyle.toUpperCase()]:Cesium.LabelStyle.FILL_AND_OUTLINE,pixelOffset:e.dpixelOffset?new Cesium.Cartesian2(e.dpixelOffset[0],e.dpixelOffset[1]):new Cesium.Cartesian2(0,0),fillColor:e.dfillColor?this.map3dTool.colorTransform(e.dfillColor):Cesium.Color.WHITE,outlineColor:e.doutlineColor?this.map3dTool.colorTransform(e.doutlineColor):Cesium.Color.BLACK,outlineWidth:e.doutlineWidth?e.doutlineWidth:1,showBackground:!!e.dshowBackground&&e.dshowBackground,scale:e.dscale?e.dscale:1,backgroundColor:e.dbackgroundColor?this.map3dTool.colorTransform(e.dbackgroundColor):new Cesium.Color(.165,.165,.165,.8),backgroundPadding:e.dbackgroundPadding?new Cesium.Cartesian2(e.dbackgroundPadding[0],e.dbackgroundPadding[1]):new Cesium.Cartesian2(7,5),horizontalOrigin:e.dhorizontalOrigin?Cesium.HorizontalOrigin[e.dhorizontalOrigin.toUpperCase()]:Cesium.HorizontalOrigin.CENTER,verticalOrigin:e.dverticalOrigin?Cesium.VerticalOrigin[e.dverticalOrigin.toUpperCase()]:Cesium.VerticalOrigin.CENTER,eyeOffset:e.deyeOffset?new Cesium.Cartesian3(e.deyeOffset[0],e.deyeOffset[1],e.deyeOffset[2]):new Cesium.Cartesian3(0,0,0),distanceDisplayCondition:e.ddistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.ddistanceDisplayCondition[0],e.ddistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8),scaleByDistance:e.dscaleByDistance?new Cesium.NearFarScalar(e.dscaleByDistance[0],e.dscaleByDistance[1],e.dscaleByDistance[2],e.dscaleByDistance[3]):new Cesium.NearFarScalar(0,1,1e8,0),disableDepthTestDistance:null==e.ddisableDepthTestDistance?0:e.ddisableDepthTestDistance}});return t.callfun=e.callfun,t}setTextProperties(e,i){if(!this.viewer.entities.contains(e))return" The entity is useless ";if(!i)return" No need to set ";for(const o in i){let t;"position"!==o?"dtext"!==o?"dfont"!==o?"dstyle"!==o?"dfillColor"!==o?"doutlineColor"!==o?"doutlineWidth"!==o?"dshowBackground"!==o?"dbackgroundColor"!==o?"dscale"!==o?"dhorizontalOrigin"!==o?"dverticalOrigin"!==o?"dpixelOffset"!==o?"dscaleByDistance"!==o?"ddistanceDisplayCondition"!==o||i[o]&&2===i[o].length&&(e.label.distanceDisplayCondition=new Cesium.DistanceDisplayCondition(i.ddistanceDisplayCondition[0],i.ddistanceDisplayCondition[1])):i[o]&&4===i[o].length&&(e.label.scaleByDistance=new Cesium.NearFarScalar(i.dscaleByDistance[0],i.dscaleByDistance[1],i.dscaleByDistance[2],i.dscaleByDistance[3])):t&&t.length>1&&(e.label.pixelOffset=new Cesium.Cartesian2(i.dpixelOffset[0],i.dpixelOffset[1])):i[o]&&(e.label.verticalOrigin=Cesium.VerticalOrigin[i.dverticalOrigin.toUpperCase()]):i[o]&&(e.label.horizontalOrigin=Cesium.HorizontalOrigin[i.dhorizontalOrigin.toUpperCase()]):i[o]&&(e.label.scale=i.dscale):i[o]&&(e.label.backgroundColor=this.map3dTool.colorTransform(i.dbackgroundColor)):i[o]&&(e.label.showBackground=i.dshowBackground):i[o]&&(e.label.outlineWidth=i.doutlineWidth):i[o]&&(e.label.outlineColor=this.map3dTool.colorTransform(i.doutlineColor)):i[o]&&(e.label.fillColor=this.map3dTool.colorTransform(i.dfillColor)):i[o]&&(e.label.style=Cesium.LabelStyle[i.dstyle.toUpperCase()]):i[o]&&(e.label.font=i.dfont):i[o]&&(e.label.text=i.dtext):(t=i.position,t&&t.length>1&&(3===t.length?e.position=Cesium.Cartesian3.fromDegrees(i.position[0],i.position[1],i.position[2]):e.position=Cesium.Cartesian3.fromDegrees(i.position[0],i.position[1])))}}getTextProperties(e,i){if(!this.viewer.entities.contains(e))return" The entity is useless ";if(!i)return" No need to get ";const o={};for(let t=0;t<i.length;t++){const s=i[t];if("id"!==s)if("name"!==s)if("position"!==s)if("dtext"!==s)if("dfont"!==s)if("dstyle"!==s)if("dfillColor"!==s)if("doutlineColor"!==s)if("doutlineWidth"!==s)if("dshowBackground"!==s)if("dbackgroundColor"!==s)if("dscale"!==s)if("dhorizontalOrigin"!==s)if("dverticalOrigin"!==s)if("dpixelOffset"!==s)if("dscaleByDistance"!==s)if("ddistanceDisplayCondition"!==s);else{const i=e.label.distanceDisplayCondition._value;o.ddistanceDisplayCondition=[i._near,i._far]}else{const i=e.label.scaleByDistance._value;o.dscaleByDistance=[i.near,i.nearValue,i.far,i.farValue]}else{let i=e.label.pixelOffset;i&&(i=e.label.pixelOffset._value,o.dpixelOffset=[i.x,i.y])}else{let i=e.label.verticalOrigin;i&&(i=e.label.verticalOrigin._value,0!==i&&"0"!==i||(o.dverticalOrigin="CENTER"),1!==i&&"1"!==i||(o.dverticalOrigin="LEFT"),-1!==i&&"-1"!==i||(o.dverticalOrigin="RIGHT"))}else{let i=e.label.horizontalOrigin;i&&(i=e.label.horizontalOrigin._value,0!==i&&"0"!==i||(o.dhorizontalOrigin="CENTER"),1!==i&&"1"!==i||(o.dhorizontalOrigin="LEFT"),-1!==i&&"-1"!==i||(o.dhorizontalOrigin="RIGHT"))}else o.dscale=e.label.scale._value;else o.dbackgroundColor=e.label.backgroundColor._value;else o.dshowBackground=e.label.showBackground._value;else o.doutlineWidth=e.label.outlineWidth._value;else o.doutlineColor=e.label.outlineColor._value;else o.dfillColor=e.label.fillColor._value;else{let i=e.label.style;i&&(i=e.label.style._value,0!==i&&"0"!==i||(o.dstyle="FILL"),1!==i&&"1"!==i||(o.dstyle="OUTLINE"),2!==i&&"2"!==i||(o.dstyle="FILL_AND_OUTLINE"))}else o.dfont=e.label.font._value;else o.dtext=e.label.text._value;else{const i=this.map3dTool.cartesianTo2MapCoord(e.position._value);o.position=i}else o.name=e.name;else o.id=e.id}return o}addLine(e,i=!1){if(!e.id)return"you have to give a id ";const o=this.getModel(e.id);if(null!=o||null!=o)return" The id already exists ";if(!e.position||e.position.length<2)return" please provide points ";const t=[];for(let i=0;i<e.position.length;i++){const o=e.position[i];t.push(o[0]),t.push(o[1]),Number(o[2])?t.push(o[2]):t.push(0)}const s=this.LineMaterial(e.dmaterial),n=this.viewer.entities.add({id:e.id,name:e.name||e.id,show:null==e.show||e.show,polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(t),followSurface:!!e.dfollowSurface&&e.dfollowSurface,clampToGround:!!e.dclampToGround&&e.dclampToGround,width:e.dwidth?e.dwidth:1,material:s||Cesium.Color.RED,shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,zIndex:e.fzIndex?e.fzIndex:0,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}});return i&&this.viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(t[0],t[1],t[2]+1e3)}),n}LineMaterial(e){let i=null;const o=e;if(o){const e=o.materialName;i="dColorMaterial"===e?o.dcolor?this.map3dTool.colorTransform(o.dcolor):Cesium.Color.WHITE:"dPolylineGlowMaterial"===e?new Cesium.PolylineGlowMaterialProperty({glowPower:o.dglowPower?Number(o.dglowPower):.25,color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):Cesium.Color.WHITE}):"dPolylineOutlineMaterial"===e?new Cesium.PolylineOutlineMaterialProperty({color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):Cesium.Color.WHITE,outlineColor:o.doutlineColor?this.map3dTool.colorTransform(o.doutlineColor):Cesium.Color.BLACK,outlineWidth:o.doutlineWidth?Number(o.doutlineWidth):1}):"dPolylineArrowMaterial"===e?new Cesium.PolylineArrowMaterialProperty(o.dcolor?this.map3dTool.colorTransform(o.dcolor):Cesium.Color.WHITE):"dPolylineDashMaterial"===e?new Cesium.PolylineDashMaterialProperty({color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):Cesium.Color.WHITE,gapColor:o.dgapColor?o.dgapColor:Cesium.Color.TRANSPARENT,dashLength:o.ddashLength?o.ddashLength:16,dashPattern:o.ddashPattern?o.ddashPattern:255}):Cesium.Color.WHITE}else i=Cesium.Color.WHITE;return i}Addpolygon(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position||e.position.length<3)return" please provide points ";const o=[],t=[];for(let i=0;i<e.position.length;i++){const s=e.position[i];o.push(s[0]),t.push(s[0]),o.push(s[1]),t.push(s[1]),Number(s[2])?o.push(s[2]):o.push(0)}let s=null,n=null;e.dheight?(s=e.dheight,n=Cesium.Cartesian3.fromDegreesArray(t),e.dperPositionHeight&&(e.dperPositionHeight=!1)):n=Cesium.Cartesian3.fromDegreesArrayHeights(o);const l=e.dstRotation?Cesium.Math.toRadians(Number(e.dstRotation)):0,r=this.setAssistMaterial(e.dmaterial),a=this.viewer.entities.add({id:e.id,name:e.name?e.name:e.id,show:null==e.show||e.show,polygon:{hierarchy:n,height:s,extrudedHeight:e.dextrudedHeight?e.dextrudedHeight:null,fill:!e.dfill||e.dfill,material:r,outline:!!e.doutline&&e.doutline,outlineColor:e.doutlineColor?this.map3dTool.colorTransform(e.doutlineColor):Cesium.Color.WHITE,outlineWidth:e.doutlineWidth?e.doutlineWidth:1,stRotation:l,shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,distanceDisplayCondition:e.ddistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.ddistanceDisplayCondition[0],e.ddistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e9),perPositionHeight:!!e.dperPositionHeight&&e.dperPositionHeight,closeTop:!e.dcloseTop||e.dcloseTop,closeBottom:!e.dcloseBottom||e.dcloseBottom}});return a.callfun=e.callfun,a}setPolygonProperties(e,i){if(!this.viewer.entities.contains(e))return" The entity is useless ";if(!i)return" No need to set ";for(const o in i){if("dmaterial"===o&&i[o]){const o=this.setAssistMaterial(i.dmaterial);e.polygon.material=o}"dheight"!==o?"dextrudedHeight"!==o?"dfill"!==o?"doutline"!==o?"doutlineColor"!==o?"doutlineWidth"!==o?"dstRotation"!==o?"dperPositionHeight"!==o?"ddistanceDisplayCondition"!==o||i[o]&&2===i[o].length&&(e.polygon.distanceDisplayCondition=new Cesium.DistanceDisplayCondition(i.ddistanceDisplayCondition[0],i.ddistanceDisplayCondition[1])):null!=i[o]&&(e.polygon.perPositionHeight=i.dperPositionHeight):i[o]&&(e.polygon.stRotation=Cesium.Math.toRadians(Number(i.dstRotation))):i[o]&&(e.polygon.outlineWidth=i.doutlineWidth):i[o]&&(e.polygon.outlineColor=this.map3dTool.colorTransform(i.doutlineColor)):null!=i[o]&&(e.polygon.outline=i.doutline):null!=i[o]&&(e.polygon.fill=i.dfill):i[o]&&(e.polygon.extrudedHeight=i.dextrudedHeight):i[o]&&(e.polygon.height=i.dheight)}}getPolygonProperties(e,i){if(!this.viewer.entities.contains(e))return" The entity is useless ";if(!i)return" No need to get ";const o={};for(let t=0;t<i.length;t++){const s=i[t];if("dmaterial"===s){const i=this.getAssistMaterial(e.polygon.material);o.dmaterial=i}if("dheight"!==s)if("dextrudedHeight"!==s)if("dfill"!==s)if("doutline"!==s)if("doutlineColor"!==s)if("doutlineWidth"!==s)if("dstRotation"!==s)if("dperPositionHeight"!==s)if("ddistanceDisplayCondition"!==s);else{const i=e.polygon.distanceDisplayCondition._value;o.ddistanceDisplayCondition=[i._near,i._far]}else o.dperPositionHeight=e.polygon.perPositionHeight._value;else o.dstRotation=Cesium.Math.toDegrees(e.polygon.stRotation._value);else o.doutlineWidth=e.polygon.outlineWidth._value;else o.doutlineColor=e.polygon.outlineColor._value;else o.doutline=e.polygon.outline._value;else o.dfill=e.polygon.fill._value;else o.dextrudedHeight=e.polygon.extrudedHeight._value;else o.dheight=e.polygon.height._value}return o}AddPolylineVolume(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position||e.position.length<2)return" please provide points ";const o=[];for(let i=0;i<e.position.length;i++){const t=e.position[i];o.push(t[0]),o.push(t[1]),Number(t[2])?o.push(t[2]):o.push(0)}return this.viewer.entities.add({id:e.id,name:e.name||e.id,show:null==e.show||e.show,position:Cesium.Cartesian3.fromDegreesArrayHeights(o),polylineVolume:{shape:e.dshape?e.dshape:[new Cesium.Cartesian2(-5e4,-5e4),new Cesium.Cartesian2(5e4,-5e4),new Cesium.Cartesian2(5e4,5e4),new Cesium.Cartesian2(-5e4,5e4)],cornerType:e.dcornerType?Cesium.CornerType[e.dcornerType.toUpperCase()]:Cesium.CornerType.MITERED,fill:!e.dfill||e.dfill,material:e.fcolor?this.map3dTool.colorTransform(e.fcolor):Cesium.Color.WHITE,outline:!!e.doutline&&e.doutline,outlineColor:e.doutlineColor?this.map3dTool.colorTransform(e.doutlineColor):Cesium.Color.WHITE,outlineWidth:e.doutlineWidth?e.doutlineWidth:1,shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})}AddRectangle(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position||2!=e.position.length)return" please provide points more than 2";const o=[];for(let i=0;i<e.position.length;i++){const t=e.position[i];o.push(t[0]),o.push(t[1])}return this.viewer.entities.add({id:e.id,name:e.name||e.id,show:null==e.show||e.show,rectangle:{coordinates:Cesium.Rectangle.fromDegrees(o[0],o[1],o[2],o[3]),height:e.dheight?e.dheight:0,extrudedHeight:e.dextrudedHeight?e.dextrudedHeight:0,fill:!e.dfill||e.dfill,material:e.fcolor?this.map3dTool.colorTransform(e.fcolor):Cesium.Color.WHITE,outline:!!e.doutline&&e.doutline,outlineColor:e.doutlineColor?this.map3dTool.colorTransform(e.doutlineColor):Cesium.Color.WHITE,outlineWidth:e.doutlineWidth?e.doutlineWidth:1,shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})}AddWall(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.dmaximumHeights||!e.dminimumHeights)return" please give dmaximumHeights and dminimumHeights ";if(!e.position||e.position.length<1)return" please provide points more than 1";const o=[];for(let i=0;i<e.position.length;i++){const t=e.position[i];o.push(t[0]),o.push(t[1])}if(e.dmaximumHeights.length!=e.position.length||e.dminimumHeights.length!=e.position.length)return"  dmaximumHeights length and dminimumHeights length must equal to point length";return this.viewer.entities.add({id:e.id,name:e.name||e.id,show:null==e.show||e.show,wall:{positions:Cesium.Cartesian3.fromDegreesArray(o),maximumHeights:e.dmaximumHeights,minimumHeights:e.dminimumHeights,fill:!e.dfill||e.dfill,material:e.fcolor?this.map3dTool.colorTransform(e.fcolor):Cesium.Color.WHITE,outline:!!e.doutline&&e.doutline,outlineColor:e.doutlineColor?this.map3dTool.colorTransform(e.doutlineColor):Cesium.Color.WHITE,outlineWidth:e.doutlineWidth?e.doutlineWidth:1,shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})}AddCylinder(e){if(!e.id)return"you have to give a id ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position)return" please provide points ";const o=[];for(let i=0;i<e.position.length;i++){const t=e.position[i];o.push(t[0]),o.push(t[1]),o.push(t[2])}return this.viewer.entities.add({id:e.id,name:e.name||e.id,show:null==e.show||e.show,position:Cesium.Cartesian3.fromDegrees(o[0],o[1],o[2]),cylinder:{length:e.dlength?e.dlength:1e4,topRadius:e.dtopRadius?e.dtopRadius:0,bottomRadius:e.dbottomRadius?e.dbottomRadius:1e4,fill:!e.dfill||e.dfill,material:e.fcolor?this.map3dTool.colorTransform(e.fcolor):Cesium.Color.WHITE,outline:!!e.doutline&&e.doutline,outlineColor:e.doutlineColor?this.map3dTool.colorTransform(e.doutlineColor):Cesium.Color.WHITE,outlineWidth:e.doutlineWidth?e.doutlineWidth:1,numberOfVerticalLines:e.dnumberOfVerticalLines?e.dnumberOfVerticalLines:16,shadows:e.dshadows?Cesium.ShadowMode[e.dshadows.toUpperCase()]:Cesium.ShadowMode.DISABLED,distanceDisplayCondition:e.fdistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.fdistanceDisplayCondition[0],e.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})}addbillboard(e){if(!e.id)return"you have to give a id ";if(!e.imageUrl)return"you have to give a imageUrl ";const i=this.getModel(e.id);if(null!=i||null!=i)return" The id already exists ";if(!e.position||0==e.position.length)return" please provide points ";let o=e.imageUrl?e.imageUrl:"./images/Cesium_Logo_overlay.png";e.imageUrl&&"string"==typeof e.imageUrl&&e.imageUrl.indexOf(".gif")>-1&&(this.gifImage[e.imageUrl]=this.gifImage[e.imageUrl]||new Cesium.GifImageProperty({url:e.imageUrl}),o=this.gifImage[e.imageUrl]);const t=e.drotation?180*Number(e.drotation)/Math.PI:0,s=Cesium.Cartesian3.fromDegrees(e.position[0],e.position[1],e.position[2]),n={image:o,rotation:t,alignedAxis:Cesium.Cartesian3.ZERO,color:e.dcolor?this.map3dTool.colorTransform(e.dcolor):Cesium.Color.WHITE,scale:e.dscale?e.dscale:1,pixelOffset:e.dpixelOffset?new Cesium.Cartesian2(e.dpixelOffset[0],e.dpixelOffset[1]):new Cesium.Cartesian2(0,0),horizontalOrigin:e.dhorizontalOrigin?Cesium.HorizontalOrigin[e.dhorizontalOrigin.toUpperCase()]:Cesium.HorizontalOrigin.CENTER,verticalOrigin:e.dverticalOrigin?Cesium.VerticalOrigin[e.dverticalOrigin.toUpperCase()]:Cesium.VerticalOrigin.CENTER,distanceDisplayCondition:e.ddistanceDisplayCondition?new Cesium.DistanceDisplayCondition(e.ddistanceDisplayCondition[0],e.ddistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8),scaleByDistance:e.dscaleByDistance?new Cesium.NearFarScalar(e.dscaleByDistance[0],e.dscaleByDistance[1],e.dscaleByDistance[2],e.dscaleByDistance[3]):new Cesium.NearFarScalar(10,2,1e6,0),translucencyByDistance:e.dtranslucencyByDistance?new Cesium.NearFarScalar(e.dtranslucencyByDistance[0],e.dtranslucencyByDistance[1],e.dtranslucencyByDistance[2],e.dtranslucencyByDistance[3]):new Cesium.NearFarScalar(10,2,1e7,0),disableDepthTestDistance:null==e.ddisableDepthTestDistance?0:e.ddisableDepthTestDistance};e.dheight&&(n.height=e.dheight?Number(e.dheight):1),e.dwidth&&(n.width=e.dwidth?Number(e.dwidth):1);const l=this.viewer.entities.add({id:e.id,name:e.name||e.id,show:null==e.show||e.show,position:s,billboard:n});return l.callfun=e.callfun,l}setbillboardProperties(e,i){if(!this.viewer.entities.contains(e))return" The entity is useless ";if(!i)return" No need to set ";for(const o in i){let t;if("position"!==o)if("imageUrl"!==o)if("dscale"!==o)if("dhorizontalOrigin"!==o)if("dverticalOrigin"!==o)if("dpixelOffset"!==o){if("drotation"!==o)"dwidth"!==o?"dheight"!==o?"dcolor"!==o?"dscaleByDistance"!==o?"dtranslucencyByDistance"!==o?"ddistanceDisplayCondition"!==o||i[o]&&2===i[o].length&&(e.billboard.distanceDisplayCondition=new Cesium.DistanceDisplayCondition(i.ddistanceDisplayCondition[0],i.ddistanceDisplayCondition[1])):i[o]&&4===i[o].length&&(e.billboard.translucencyByDistance=new Cesium.NearFarScalar(i.dtranslucencyByDistance[0],i.dtranslucencyByDistance[1],i.dtranslucencyByDistance[2],i.dtranslucencyByDistance[3])):i[o]&&4===i[o].length&&(e.billboard.scaleByDistance=new Cesium.NearFarScalar(i.dscaleByDistance[0],i.dscaleByDistance[1],i.dscaleByDistance[2],i.dscaleByDistance[3])):i[o]&&(e.billboard.color=this.map3dTool.colorTransform(i.dcolor)):i[o]&&(e.billboard.height=i.dheight):i[o]&&(e.billboard.width=i.dwidth);else if(i[o]){const o=Cesium.Math.toRadians(Number(i.drotation));e.billboard.rotation=o}}else t&&t.length>1&&(e.billboard.pixelOffset=new Cesium.Cartesian2(i.dpixelOffset[0],i.dpixelOffset[1]));else i[o]&&(e.billboard.verticalOrigin=Cesium.VerticalOrigin[i.dverticalOrigin.toUpperCase()]);else i[o]&&(e.billboard.horizontalOrigin=Cesium.HorizontalOrigin[i.dhorizontalOrigin.toUpperCase()]);else i[o]&&(e.billboard.scale=i.dscale);else i[o]&&(e.billboard.image=i.imageUrl);else t=i.position,t&&t.length>1&&(3===t.length?e.position=Cesium.Cartesian3.fromDegrees(i.position[0],i.position[1],i.position[2]):e.position=Cesium.Cartesian3.fromDegrees(i.position[0],i.position[1]))}}getbillboardProperties(e,i){if(!this.viewer.entities.contains(e))return" The entity is useless ";if(!i)return" No need to get ";const o={};for(let t=0;t<i.length;t++){const s=i[t];if("id"!==s)if("name"!==s)if("position"!==s)if("imageUrl"!==s)if("dscale"!==s)if("dhorizontalOrigin"!==s)if("dverticalOrigin"!==s)if("dpixelOffset"!==s)if("drotation"!==s)if("dwidth"!==s)if("dheight"!==s)if("dcolor"!==s)if("dscaleByDistance"!==s)if("dtranslucencyByDistance"!==s)if("ddistanceDisplayCondition"!==s);else{const i=e.billboard.distanceDisplayCondition._value;o.ddistanceDisplayCondition=[i._near,i._far]}else{const i=e.billboard.translucencyByDistance._value;o.dtranslucencyByDistance=[i.near,i.nearValue,i.far,i.farValue]}else{const i=e.billboard.scaleByDistance._value;o.dscaleByDistance=[i.near,i.nearValue,i.far,i.farValue]}else o.dcolor=e.billboard.color._value;else o.dheight=e.billboard.height._value;else o.dwidth=e.billboard.width._value;else o.drotation=Cesium.Math.toDegrees(e.billboard.rotation._value);else{const i=e.billboard.pixelOffset._value;o.dpixelOffset=[i.x,i.y]}else{const i=e.label.verticalOrigin._value;0!==i&&"0"!==i||(o.dverticalOrigin="CENTER"),1!==i&&"1"!==i||(o.dverticalOrigin="LEFT"),-1!==i&&"-1"!==i||(o.dverticalOrigin="RIGHT")}else{const i=e.label.horizontalOrigin._value;0!==i&&"0"!==i||(o.dhorizontalOrigin="CENTER"),1!==i&&"1"!==i||(o.dhorizontalOrigin="LEFT"),-1!==i&&"-1"!==i||(o.dhorizontalOrigin="RIGHT")}else o.dscale=e.billboard.scale._value;else o.imageUrl=e.billboard.image._value;else{const i=this.map3dTool.cartesianTo2MapCoord(e.position._value);o.position=i}else o.name=e.name;else o.id=e.id}return o}}window.ZMAPGEOMETRY=r;var a=r;i.a=class extends class{constructor(){this._drawing=!1,this.entityIds=[]}preDrawing(){return this.drawingPromise=new Promise(e=>{this.drawingResolve=e}),this._drawing=!0,this.drawingPromise}postDrawing(...e){this._drawing=!1;const i=e[0];return this.entityIds.push(i.id),this.drawingResolve(...e)}}{constructor(e,i,o,t={}){super(),this.zmap3dview="string"==typeof e?new ZMap3D.Map(e,i,o):e,this.zmap3dview.AddControl(new s({map:this.zmap3dview})),this.zmap3dview.RegisterKeyBoard(),this.zmap3dtool=new ZMap3DLib.Input3DTool(this.zmap3dview),this.entityGeo=this.zmap3dview.zmapGeometry=this.zmap3dview.zmapGeometry||new a(this.zmap3dview),this.center=[105,36],this.zoom=5,this.zmap3dview.CenterAndZoom(this.center,this.zoom),this.onlyTip=void 0,this.zmap3DTilesModel=new l(this.zmap3dview),this.message=t.message||this.addFlashTipDefault,this.closeMessage=t.closeMessage||this.closeFlashTipDefault}setMessageFunction(e){this.message=e}setCloseMessageFunction(e){this.closeMessage=e}removeLayer(e){const i=this.zmap3dview.GetUnkLayer(e);i&&this.zmap3dview.RemoveLayer(i)}addMapLayer(e){if(!e.name)return;this.removeLayer(e.name);let i=new Cegore.ImageLayer({name:e.name||"tdtAnnoLayer",type:e.maptype||"UrlTemplate",url:e.url||"http://t0.tianditu.com/cia_w/wmts?service=WMTS&version=1.0.0&request=GetTile&Tilematrix={TileMatrix}&layer=cia&style=default&TileRow={TileRow}&TileCol={TileCol}&tilematrixset=w&format=tiles",visible:e.visible||!0,maximumLevel:e.maxZoom||18,customTags:{TileMatrix:function(e,i,o,t){return t},TileRow:function(e,i,o){return o},TileCol:function(e,i){return i}},scheme:"Geographic-level-0"});return this.zmap3dview.AddLayer(i),i}Add3DTileMapLayer(){return this.add3DTileMapLayer(...arguments)}add3DTileMapLayer(e){if(!e.name)return;this.removeLayer(e.name);let i=new Cegore.ImageLayer({name:e.name,type:e.maptype,url:e.url,visible:e.visible||!0,maximumLevel:e.maxZoom||18,scheme:"Geographic-level-0"});return this.zmap3dview.AddLayer(i),i}AddRadarLayer(){return this.addRadarLayer(...arguments)}addRadarLayer(e){if(!e.name)return null;this.removeLayer(e.name);const i=new Cegore.NetCDFImageLayer({name:e.name,type:"ZMapNetCDFImage",url:e.url,visible:e.visible||!0,maximumLevel:e.maxZoom||18,scheme:"Geographic-level-0"});return this.zmap3dview.AddLayer(i),i}PointQuery(){return this.pointQuery(...arguments)}pointQuery(e,i){const{startText:o,endText:t}=e;return this.addFlashTip(o||"左键单击开始画点",2e3),this.zmap3dtool.StartPointTool(()=>{},o=>{const t="testPoint";let s=void 0;this.entityGeo.removeEntityById(t);let n=o.geometry;n&&(s=this.addPoint({id:t,dcolor:e.color,doutlineColor:e.color,position:n,dpixelSize:e.pixelSize||5}),i&&"function"==typeof i&&i(n)),this.zmap3dtool.ClearAll(),this.postDrawing({id:t,entity:s,point:n})}),this.preDrawing()}CircleQuery(){return this.circleQuery(...arguments)}circleQuery(e,i){const{startText:o,endText:t}=e,s=e.id||"testCircle";this.entityGeo.removeEntityById(s);this.addFlashTip(o||"左键开始画圆形，左键双击结束画圆形",2e3);let n={material:new Cesium.Material({fabric:{type:"Color",uniforms:{color:e.color?this.zmap3dview.colorTransform(e.color):Cesium.Color.WHITE}}})};return this.zmap3dtool.StartCircleTool(()=>{},o=>{let t=o.geometry,n=void 0;if(t){let o=Cesium.Math.toRadians(t.radius)*Cesium.Ellipsoid.WGS84.maximumRadius,l=this.addEllipse({id:s,position:[t.center],dheight:t.height||t.center[2]||.1,dextrudedHeight:t.height||t.center[2]||.1,doutlineColor:e.outlineColor||"red",dsemiMajorAxis:o,dsemiMinorAxis:o,dmaterial:{materialName:"dGridMaterial",dcolor:e.color||"rgba(255,255,0,1)",dcellAlpha:e.dcellAlpha||.5,dlineThickness:[1,1]}});n=l,this.zmap3dtool.ClearAll(),i&&"function"==typeof i&&i(t,l,e)}this.postDrawing({id:s,entity:n,point:t,option:e})},n),this.preDrawing()}PolyQuery(){return this.polyQuery(...arguments)}polyQuery(e,i){const{startText:o,endText:t}=e;let s="",n=void 0;this.addFlashTip(o||"左键开始画多边形，左键双击结束画多边形",2e3);const l={materialName:"dGridMaterial",dcolor:e.color||"rgba(255,255,0,1)",doutlineColor:e.outlineColor||"rgba(255,255,0,1)",dcellAlpha:e.dcellAlpha||.5,dlineThickness:[1,1],dlineCount:void 0,dlineOffset:void 0},r={lineWidth:e.outlineWidth||1,material:new Cesium.Material({fabric:{type:"Grid",uniforms:{color:l.dcolor?this.zmap3dview.colorTransform(l.dcolor):Cesium.Color.WHITE,cellAlpha:l.dcellAlpha?Number(l.dcellAlpha):.1,lineCount:l.dlineCount?new Cesium.Cartesian2(Number(l.dlineCount[0]),Number(l.dlineCount[1])):new Cesium.Cartesian2(8,8),lineThickness:l.dlineThickness?new Cesium.Cartesian2(Number(l.dlineThickness[0]),Number(l.dlineThickness[1])):new Cesium.Cartesian2(1,1),lineOffset:l.dlineOffset?new Cesium.Cartesian2(Number(l.dlineOffset[0]),Number(l.dlineOffset[1])):new Cesium.Cartesian2(0,0)}}})};return this.zmap3dtool.StartPolygonTool(()=>{},o=>{let l=o.geometry;const r="testPolygon";if(this.entityGeo.removeEntityById(r),l){s=l[0].join(",")+";",s+=l[1].join(","),this.addFlashTip(t||"结束画多边形",1e3);for(let e=0;e<l.length;e++)l[e][2]=l[e][2]||1;let o={id:r,position:l,doutline:!0,dperPositionHeight:!0,doutlineColor:e.outlineColor||"rgba(255,255,0,1)",doutlineWidth:2,dmaterial:{materialName:"dGridMaterial",dcolor:e.color||"rgba(255,255,0,1)",dcellAlpha:e.dcellAlpha||.5,dlineThickness:[1,1]}};n=this.addPolygon(o),i&&"function"==typeof i&&i(l)}this.postDrawing({id:r,entity:n,point:l})},r),this.preDrawing()}RectQuery(){return this.rectQuery(...arguments)}rectQuery(e,i){const{startText:o,endText:t}=e;let s=void 0;this.addFlashTip(o||"左键按下开始画矩形，左键抬起结束画矩形",2e3);let n={materialName:"dGridMaterial",dcolor:e.color||"rgba(255,255,0,1)",doutlineColor:e.outlineColor||"rgba(255,255,0,1)",dcellAlpha:e.dcellAlpha||.65,dlineThickness:[1,1],dlineCount:void 0,dlineOffset:void 0},l={lineWidth:e.outlineWidth||1,material:new Cesium.Material({fabric:{type:"Grid",uniforms:{color:n.dcolor?this.zmap3dview.colorTransform(n.dcolor):Cesium.Color.WHITE,cellAlpha:n.dcellAlpha?Number(n.dcellAlpha):.1,lineCount:n.dlineCount?new Cesium.Cartesian2(Number(n.dlineCount[0]),Number(n.dlineCount[1])):new Cesium.Cartesian2(8,8),lineThickness:n.dlineThickness?new Cesium.Cartesian2(Number(n.dlineThickness[0]),Number(n.dlineThickness[1])):new Cesium.Cartesian2(1,1),lineOffset:n.dlineOffset?new Cesium.Cartesian2(Number(n.dlineOffset[0]),Number(n.dlineOffset[1])):new Cesium.Cartesian2(0,0)}}})};return this.zmap3dtool.StartRectTool(()=>{},o=>{let n="testRectangle";this.entityGeo.removeEntityById(n);let l=o.geometry,r=[];r.push([l[0],l[1],o.height||0]),r.push([l[2],l[1],o.height||0]),r.push([l[2],l[3],o.height||0]),r.push([l[0],l[3],o.height||0]),r.push([l[0],l[1],o.height||0]),this.addFlashTip(t||"结束画矩形",1e3);for(let e=0;e<r.length;e++)r[e][2]=r[e][2]||1;let a={id:n,position:r,doutline:!0,dperPositionHeight:!0,doutlineColor:e.outlineColor||"rgba(255,255,0,1)",doutlineWidth:2,dmaterial:{materialName:"dGridMaterial",dcolor:e.color||"rgba(255,255,0,1)",dcellAlpha:e.dcellAlpha||.5,dlineThickness:[1,1]}};s=this.addPolygon(a),this.zmap3dtool.ClearAll(),i&&"function"==typeof i&&i(l),this.postDrawing({id:n,entity:s,extent:l})},l),this.preDrawing()}LineQuery(){return this.lineQuery(...arguments)}lineQuery(e,i){const{startText:o,endText:t}=e;let s=void 0;this.addFlashTip(o||"左键单击开始画线，双击结束画线",2e3);let n={material:new Cesium.Material({fabric:{type:"Color",uniforms:{color:e.color?this.zmap3dview.colorTransform(e.color):Cesium.Color.RED}}})};return this.zmap3dtool.StartLineTool(()=>{},o=>{let n=o.geometry;const l="testLine";if(n){this.addFlashTip(t||"结束画线",1e3);for(let e=0;e<n.length;e++)n[e][2]=n[e][2]||0;this.entityGeo.removeEntityById(l),s=this.addLine({id:l,position:n,dfollowSurface:!0,dclampToGround:!0,dwidth:e.lineWidth?e.lineWidth:3,dmaterial:{materialName:"dPolylineOutlineMaterial",dcolor:e.color||"rgba(255,255,0,1)",doutlineColor:e.outlineColor||"rgba(255,255,0,1)",doutlineWidth:0}}),this.zmap3dtool.ClearAll(),i&&"function"==typeof i&&i(n),this.postDrawing({id:l,entity:s,point:n})}this.postDrawing({id:l,entity:s,point:n})},n),this.preDrawing()}arrowLineQuery(e,i){const{startText:o,endText:t}=e;let s=void 0;this.addFlashTip(o||"左键单击开始画线，双击结束画线",2e3);let n={material:new Cesium.Material({fabric:{type:"Color",uniforms:{color:e.color?this.zmap3dview.colorTransform(e.color):Cesium.Color.RED}}})};return this.zmap3dtool.StartLineTool(()=>{},o=>{let n=o.geometry;const l="testArrowLine";if(n){this.addFlashTip(t||"结束画线",1e3);for(let e=0;e<n.length;e++)n[e][2]=n[e][2]||0;this.entityGeo.removeEntityById(l),s=this.addLine({id:l,position:n,dfollowSurface:!0,dclampToGround:!0,dwidth:e.lineWidth?3*e.lineWidth:9,dmaterial:{materialName:"dPolylineArrowMaterial",dcolor:e.color||"rgba(255,255,0,1)",doutlineColor:e.outlineColor||"rgba(255,255,0,1)",doutlineWidth:0}}),this.zmap3dtool.ClearAll(),i&&"function"==typeof i&&i(n),this.postDrawing({id:l,entity:s,point:n})}this.postDrawing({id:l,entity:s,point:n})},n),this.preDrawing()}ellipseQuery(e,i){const{startText:o,endText:t}=e,s=e.id||"testEllipse";let n=void 0;this.entityGeo.removeEntityById(s);this.addFlashTip(o||"左键开始画椭圆，请先绘制短轴，然后绘制长轴",2e3);let l={material:new Cesium.Material({fabric:{type:"Color",uniforms:{color:e.color?this.zmap3dview.colorTransform(e.color):Cesium.Color.WHITE}}})};return this.zmap3dtool.startEllipseTool(()=>{},o=>{let t=o.geometry;if(t){let o=Cesium.Math.toRadians(t.radius[0])*Cesium.Ellipsoid.WGS84.maximumRadius,l=Cesium.Math.toRadians(t.radius[1])*Cesium.Ellipsoid.WGS84.maximumRadius,r=this.addEllipse({id:s,position:[t.center],dheight:t.height||t.center[2]||.1,dextrudedHeight:t.height||t.center[2]||.1,doutlineColor:e.outlineColor||"red",dsemiMajorAxis:l,dsemiMinorAxis:o,dmaterial:{materialName:"dGridMaterial",dcolor:e.color||"rgba(255,255,0,1)",dcellAlpha:e.dcellAlpha||.5,dlineThickness:[1,1]},dgranularity:t.granularity});n=r,this.zmap3dtool.ClearAll(),i&&"function"==typeof i&&i(t,r,e)}this.postDrawing({id:s,entity:n,point:t})},l),this.preDrawing()}dcDistance(e,i,o){const{startText:t,endText:s}=e;o=o||"testdistance";let n=void 0;this.addFlashTip(t||"左键单击开始画线，右击结束画线",2e3);let l={material:new Cesium.Material({fabric:{type:"Color",uniforms:{color:e.color?this.zmap3dview.colorTransform(e.color):Cesium.Color.RED}}})};return this.zmap3dtool.StartLineTool(()=>{},t=>{let l=t.geometry;if(l){console.log(l),this.addFlashTip(s||"结束画线",1e3);for(let e=0;e<l.length;e++)l[e][2]=l[e][2]||0;this.entityGeo.removeEntityById(o),n=this.addLine({id:o,position:l,dfollowSurface:!0,dclampToGround:!0,dwidth:e.lineWidth?e.lineWidth:3,dmaterial:e.material||{materialName:"dPolylineOutlineMaterialProperty",dcolor:e.color||"rgba(255,255,0,1)",doutlineColor:e.outlineColor||"rgba(255,255,0,1)",doutlineWidth:0}}),this.zmap3dtool.ClearAll(),i&&"function"==typeof i&&i(l)}this.postDrawing({id:o,entity:n,point:l})},l),this.preDrawing()}addPoint(e){return this.entityGeo.addPoint(e)}addPoints(e){return this.entityGeo.addPoints(e)}addLine(e){return this.entityGeo.addLine(e)}addPolygon(e){return this.entityGeo.Addpolygon(e)}addEllipse(e){return this.entityGeo.addellipse(e)}toolClearAll(){this.entityIds.map(e=>{this.entityGeo.removeEntityById(e)}),this.closeFlashTip(),this.zmap3dtool.ClearAll()}getCenter(){return this.zmap3dview.GetViewCenter()}getZoom(){return this.zmap3dview.GetZoom()}getCegore(){return this.zmap3dview.GetCegore()}getCesium(){return this.zmap3dview.GetCesium()}addModel(e){let i=e.id||"testModel",o={position:e.position||[110.05254,25.002073,0],rotate:e.rotate||[0,0,0],shadows:e.shadows||!0,url:e.url||"./gltf/WoodTower/Wood_Tower.gltf"};this.zmap3dview.AddModel(i,o)}removeModel(e){this.zmap3dview.RemoveModel(e)}rotateModel(e,i){this.zmap3dview.RotateModel(e,i)}getModel(e){return this.zmap3dview.GetModel(e)}pickModel(e){return this.zmap3dview.PickModel(e)}dztModel(e,i,o,t,s){return this.zmap3dview.addZmapModel(e,i,o,t,s)}add3DTiless(e,i,o,t){this.zmap3DTilesModel.add3dTiles(e,i,o,t)}moveRotateModel(){}getCamera(){return this.zmap3dview.getCamera()}setCamera(e){this.zmap3dview.setCamera(e)}AddFlashTip(){return this.addFlashTip(...arguments)}addFlashTip(e,i){return this.message(e,i)}closeFlashTip(){return this.closeMessage()}addFlashTipDefault(e,i){let o=this.onlyTip;if(this.closeFlashTip(),null==o){null==i&&(i=3e3);let o=this.zmap3dview.GetViewCenter();if(null==o)return void this.closeFlashTip();this.zmap3dview.AddTextLabel("only-tip",o[0],o[1],e,{id:"TextLabel",position:[119.345,23.4546,0],dtext:"测试文字标注",dfont:"15px 宋体",dstyle:"FILL_AND_OUTLINE",dfillColor:"rgba23,34,34,0",doutlineColor:"red",doutlineWidth:1,dshowBackground:!1,dscale:1,dhorizontalOrigin:"CENTER",dverticalOrigin:"CENTER",deyeOffset:[0,0,0],ddistanceDisplayCondition:[10,2e7],dscaleByDistance:[10,2,8e6,0]}),this.onlyTip=window.setInterval(()=>{this.closeFlashTip()},i)}}closeFlashTipDefault(){let e=this.onlyTip;null!=e&&(this.zmap3dview.RemoveLabel("only-tip"),window.clearInterval(e),e=null)}closeDrawing(){this.zmap3dtool.stopDrawing(),this._drawing=!1}get drawing(){return this._drawing}}}}).default}));