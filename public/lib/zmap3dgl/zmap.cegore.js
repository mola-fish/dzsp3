var Cegore,__extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){e.Version=103}(Cegore||(Cegore={})),function(e){var t=function(){function e(){}return e.defaultValue=function(e,t){return null!=e?e:t},e.isDefined=function(e){return null!=e},e.isNull=function(e){return null===e},e.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var i=Object.prototype.toString.call(e);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},e.isFunction=function(e){return"function"==typeof e},e.isString=function(e){return"string"==typeof e},e.isNumber=function(e){return"number"==typeof e},e.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},e.isBool=function(e){return"boolean"==typeof e},e.isArray=function(t){return"array"==e.typeOf(t)},e.isInstanceOf=function(e,t){return e instanceof t},e.freezeObject=function(t){return e._freezeObject(t)},e._freezeObject=Object.freeze?Object.freeze:function(e){return e},e}();e.TypeCheck=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(e){this._data={},this._creator=null,this._creator=e}return t.prototype.getOrCreate=function(t,i){var n=this._data[t];return e.TypeCheck.isDefined(n)?n.val:e.TypeCheck.isDefined(i)?(n={val:i},this._data[t]=n,n.val):e.TypeCheck.isDefined(this._creator)?(n={val:this._creator()},this._data[t]=n,n.val):void 0},t.prototype.get=function(t){var i=this._data[t];if(e.TypeCheck.isDefined(i))return i.val},t.prototype.put=function(e,t){this._data[e]={val:t}},t.prototype.key=function(e){for(var t in this._data)if(this._data[t].val===e)return t},t.prototype.keys=function(){var e=[];for(var t in this._data)e.push(t);return e},t.prototype.exist=function(t){return e.TypeCheck.isDefined(this._data[t])},t.prototype.remove=function(e){delete this._data[e]},t.prototype.clear=function(){this._data={}},t.prototype.removeAll=function(){this.clear()},t}();e.HashMap=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(){}return t.startsWidth=function(e,t,i){var n=this.length,r=t.length;if(n<r||0==r)return!1;var o=e.substr(0,r);return i&&(o=o.toLowerCase(),t=t.toLowerCase()),o===t},t.endsWidth=function(e,t,i){var n=this.length,r=t.length;if(n<r||0==r)return!1;var o=e.substr(n-r,r);return i&&(o=o.toLowerCase(),t=t.toLowerCase()),o===t},t.parseInt=function(t,i,n){var r=parseInt(t,n);return isNaN(r)?e.TypeCheck.isDefined(i)?i:0:r},t.parseFloat=function(t,i){var n=parseFloat(t);return isNaN(n)?e.TypeCheck.isDefined(i)?i:0:n},t.toPostFormBody=function(e){var t=[];for(var i in e)t.push(i+"="+encodeURIComponent(e[i]));return t.join("&")},t}();e.StringUtil=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(){}return t.indexOf=function(t,i,n){if(!e.TypeCheck.isFunction(n))throw"cmp must be function.";for(var r=0;r<i.length;++r)if(n(i[r],t))return r;return-1},t.EmptyArray=e.TypeCheck.freezeObject([]),t}();e.ArrayUtil=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(){}return t.loadWithXhr=function(e){t.onPromise(Cesium.Resource.fetch(e),e)},t.loadJSON=function(e){t.onPromise(Cesium.Resource.fetchJson(e.url),e)},t.onPromise=function(t,i){e.TypeCheck.isDefined(t)&&(e.TypeCheck.isFunction(i.success)&&t.then(i.success),e.TypeCheck.isFunction(i.error)&&t.otherwise(i.error))},t}();e.LoadWithXhr=t}(Cegore||(Cegore={})),function(e){var t=function(){function e(){}return e.createContext2D=function(e,t){var i=document.createElement("CANVAS");return e&&(i.width=e),t&&(i.height=t),i.getContext("2d")},e}();e.DOM=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(e,t){this.x=0,this.y=0,this.set(e,t)}return Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"magnitude",{get:function(){return this.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"squaredLength",{get:function(){return this.x*this.x+this.y*this.y},enumerable:!0,configurable:!0}),t.prototype.set=function(t,i){var n,r;switch(e.TypeCheck.typeOf(t)){case"number":n=t,r=i;break;case"array":n=t[0],r=t[1];break;case"object":n=t.x,r=t.y}this.x=e.StringUtil.parseFloat(n),this.y=e.StringUtil.parseFloat(r)},t.prototype.clone=function(e){return t.clone(this,e)},t.prototype.equals=function(e){return t.equals(this,e)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.prototype._asCzVector2=function(){return new Cesium.Cartesian2(this.x,this.y)},t.distance=function(e,i){return Math.sqrt(t.squaredDistance(e,i))},t.squaredDistance=function(e,t){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},t.clone=function(e,i){return t.newOrResult(e.x,e.y,i)},t.equals=function(t,i){return t===i||e.TypeCheck.isDefined(t)&&e.TypeCheck.isDefined(i)&&t.x===i.x&&t.y===i.y},t.add=function(e,i,n){return t.newOrResult(e.x+i.x,e.y+i.y,n)},t.sub=function(e,i,n){return t.newOrResult(e.x-i.x,e.y-i.y,n)},t.mul=function(i,n,r){if(e.TypeCheck.isNumber(n))return t.newOrResult(i.x*n,i.y*n,r);if(e.TypeCheck.isInstanceOf(n,t))return t.newOrResult(i.x*n.x,i.y*n.y,r);throw"unknown param right."},t.div=function(i,n,r){if(e.TypeCheck.isNumber(n))return t.newOrResult(i.x/n,i.y/n,r);if(e.TypeCheck.isInstanceOf(n,t))return t.newOrResult(i.x/n.x,i.y/n.y,r);throw"unknown param right."},t.negate=function(e,i){return t.newOrResult(-e.x,-e.y,i)},t.dot=function(e,t){return e.x*t.x+e.y*t.y},t.cross=function(e,i,n){return t.newOrResult(-i.y,i.x,n)},t.normalize=function(e,i){var n=e.length,r=e.x,o=e.y;return n>1e-8&&(r*=n=1/n,o*=n),t.newOrResult(r,o,i)},t.middle=function(e,i,n){return t.newOrResult(.5*(e.x+i.x),.5*(e.y+i.y),n)},t.floor=function(e,i,n){var r=e.x<i.x?e.x:i.x,o=e.y<i.y?e.y:i.y;return t.newOrResult(r,o,n)},t.ceil=function(e,i,n){var r=e.x>i.x?e.x:i.x,o=e.y>i.y?e.y:i.y;return t.newOrResult(r,o,n)},t.lerp=function(i,n,r,o){return r=e.GeoMath.clamp(r,0,1),t.mul(i,1-r,t._LerpStart),t.mul(n,r,t._LerpEnd),t.add(t._LerpStart,t._LerpEnd,o)},t.angle=function(i,n){return t.normalize(i,t._AngleStart),t.normalize(n,t._AngleEnd),e.GeoMath.acosClamped(t.dot(t._AngleStart,t._AngleEnd))},t.newOrResult=function(i,n,r){return e.TypeCheck.isInstanceOf(r,t)?(r.x=i,r.y=n,r):new t(i,n)},t._LerpStart=new t,t._LerpEnd=new t,t.ZERO=e.TypeCheck.freezeObject(new t(0,0)),t.UNIT=e.TypeCheck.freezeObject(new t(1,1)),t.UNIT_X=e.TypeCheck.freezeObject(new t(1,0)),t.UNIT_Y=e.TypeCheck.freezeObject(new t(0,1)),t}();e.Vector2=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(e,t,i){this.x=0,this.y=0,this.z=0,this.set(e,t,i)}return Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"magnitude",{get:function(){return this.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"squaredLength",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z},enumerable:!0,configurable:!0}),t.prototype.set=function(t,i,n){var r,o,a;switch(e.TypeCheck.typeOf(t)){case"number":r=t,o=i,a=n;break;case"array":r=t[0],o=t[1],a=t[2];break;case"object":r=t.x,o=t.y,a=t.z}this.x=e.StringUtil.parseFloat(r),this.y=e.StringUtil.parseFloat(o),this.z=e.StringUtil.parseFloat(a)},t.prototype.clone=function(e){return t.clone(this,e)},t.prototype.equals=function(e){return t.equals(this,e)},t.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+")"},t.prototype._asCzVector3=function(){return new Cesium.Cartesian3(this.x,this.y,this.z)},t.distance=function(e,i){return Math.sqrt(t.squaredDistance(e,i))},t.squaredDistance=function(e,t){var i=e.x-t.x,n=e.y-t.y,r=e.z-t.z;return i*i+n*n+r*r},t.clone=function(e,i){return t.newOrResult(e.x,e.y,e.z,i)},t.equals=function(t,i){return t===i||e.TypeCheck.isDefined(t)&&e.TypeCheck.isDefined(i)&&t.x===i.x&&t.y===i.y&&t.z===i.z},t.add=function(e,i,n){return t.newOrResult(e.x+i.x,e.y+i.y,e.z+i.z,n)},t.sub=function(e,i,n){return t.newOrResult(e.x-i.x,e.y-i.y,e.z-i.z,n)},t.mul=function(i,n,r){if(e.TypeCheck.isNumber(n))return t.newOrResult(i.x*n,i.y*n,i.z*n,r);if(e.TypeCheck.isInstanceOf(n,t))return t.newOrResult(i.x*n.x,i.y*n.y,i.z*n.z,r);throw"unknown param right."},t.div=function(i,n,r){if(e.TypeCheck.isNumber(n))return t.newOrResult(i.x/n,i.y/n,i.z/n,r);if(e.TypeCheck.isInstanceOf(n,t))return t.newOrResult(i.x/n.x,i.y/n.y,i.z/n.z,r);throw"unknown param right."},t.negate=function(e,i){return t.newOrResult(-e.x,-e.y,-e.z,i)},t.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},t.cross=function(e,i,n){var r=e.y*i.z-e.z*i.y,o=e.z*i.x-e.x*i.z,a=e.x*i.y-e.y*i.x;return t.newOrResult(r,o,a,n)},t.normalize=function(e,i){var n=e.length,r=e.x,o=e.y,a=e.z;return n>1e-8&&(r*=n=1/n,o*=n,a*=n),t.newOrResult(r,o,a,i)},t.middle=function(e,i,n){return t.newOrResult(.5*(e.x+i.x),.5*(e.y+i.y),.5*(e.z+i.z),n)},t.floor=function(e,i,n){var r=e.x<i.x?e.x:i.x,o=e.y<i.y?e.y:i.y,a=e.z<i.z?e.z:i.z;return t.newOrResult(r,o,a,n)},t.ceil=function(e,i,n){var r=e.x>i.x?e.x:i.x,o=e.y>i.y?e.y:i.y,a=e.z>i.z?e.z:i.z;return t.newOrResult(r,o,a,n)},t.lerp=function(i,n,r,o){return r=e.GeoMath.clamp(r,0,1),t.mul(i,1-r,t._LerpStart),t.mul(n,r,t._LerpEnd),t.add(t._LerpStart,t._LerpEnd,o)},t.angle=function(e,i){t.normalize(e,t._AngleStart),t.normalize(i,t._AngleEnd);var n=t.dot(t._AngleStart,t._AngleEnd),r=t.cross(t._AngleStart,t._AngleEnd,t._AngleCross).length;return Math.atan2(r,n)},t.newOrResult=function(i,n,r,o){return e.TypeCheck.isInstanceOf(o,t)?(o.x=i,o.y=n,o.z=r,o):new t(i,n,r)},t._LerpStart=new t,t._LerpEnd=new t,t.ZERO=e.TypeCheck.freezeObject(new t(0,0,0)),t.UNIT=e.TypeCheck.freezeObject(new t(1,1,1)),t.UNIT_X=e.TypeCheck.freezeObject(new t(1,0,0)),t.UNIT_Y=e.TypeCheck.freezeObject(new t(0,1,0)),t.UNIT_Z=e.TypeCheck.freezeObject(new t(0,0,1)),t}();e.Vector3=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(e,t,i){this.set(e,t,i)}return Object.defineProperty(t.prototype,"lon",{get:function(){return this._x},set:function(t){this._x=e.StringUtil.parseFloat(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lat",{get:function(){return this._y},set:function(t){this._y=e.StringUtil.parseFloat(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"altitude",{get:function(){return this._z},set:function(t){this._z=e.StringUtil.parseFloat(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.lon},set:function(e){this.lon=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.lat},set:function(e){this.lat=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this.altitude},set:function(e){this.altitude=e},enumerable:!0,configurable:!0}),t.prototype.set=function(t,i,n){var r,o,a;if(e.TypeCheck.isInstanceOf(t,Cesium.Cartographic))r=e.GeoMath.toDegree(t.longitude),o=e.GeoMath.toDegree(t.latitude),a=t.height;else switch(e.TypeCheck.typeOf(t)){case"array":r=t[0],o=t[1],a=t[2];break;case"object":r=t.x,o=t.y,a=t.z;break;case"number":case"string":r=t,o=i,a=n}this.lon=e.TypeCheck.defaultValue(r,0),this.lat=e.TypeCheck.defaultValue(o,0),this.altitude=e.TypeCheck.defaultValue(a,0)},t.from=function(i,n,r){return e.TypeCheck.isInstanceOf(i,t)?i:new t(i,n,r)},t.parsePoints=function(e){for(var t=[],i=e.split("|"),n=0;n<i.length;++n){var r=i.split(",");t.push(r[0],r[1],r[2])}return t},t}();e.Position=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t,i,n,r,o){this._minx=0,this._miny=0,this._maxx=0,this._maxy=0,this._isEmpty=!0,this._isGeographical=!0;var a=e.TypeCheck.typeOf(t);if("number"===a);else if("array"===a){var s=t;o=i,t=s[0],i=s[1],n=s[2],r=s[3]}else if(e.TypeCheck.isInstanceOf(t,Cesium.Rectangle)){var c=t;t=e.GeoMath.toDegree(c.west),i=e.GeoMath.toDegree(c.south),n=e.GeoMath.toDegree(c.east),r=e.GeoMath.toDegree(c.north)}else if("object"===a){var u=t;o=i,e.TypeCheck.isDefined(t.minx)?(t=u.minx,i=u.miny,n=u.maxx,r=u.maxy):e.TypeCheck.isDefined(t.west)?(t=u.west,i=u.south,n=u.east,r=u.north):e.TypeCheck.isDefined(t.left)&&(t=u.left,i=u.bottom,n=u.right,r=u.top)}else{if("boolean"!==a)return;o=t}this._minx=e.TypeCheck.defaultValue(t,0),this._miny=e.TypeCheck.defaultValue(i,0),this._maxx=e.TypeCheck.defaultValue(n,0),this._maxy=e.TypeCheck.defaultValue(r,0),this._isGeographical=e.TypeCheck.defaultValue(o,!0),this._isEmpty=!1}return Object.defineProperty(t.prototype,"minx",{get:function(){return this._isEmpty?0:this._minx},set:function(e){this._minx=this._isGeographical?t.normalizeLongitude(e):e,this._isEmpty=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxx",{get:function(){return this._isEmpty?0:this._maxx},set:function(e){this._maxx=this._isGeographical?t.normalizeLongitude(e):e,this._isEmpty=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"miny",{get:function(){return this._isEmpty?0:this._miny},set:function(e){this._miny=this._isGeographical?t.normalizeLatitude(e):e,this._isEmpty=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxy",{get:function(){return this._isEmpty?0:this._maxy},set:function(e){this._maxy=this._isGeographical?t.normalizeLatitude(e):e,this._isEmpty=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._isEmpty},set:function(e){this._isEmpty=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGeographical",{get:function(){return this._isGeographical},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.maxx-this.minx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.maxy-this.miny},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"west",{get:function(){return this.minx},set:function(e){this.minx=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"east",{get:function(){return this.maxx},set:function(e){this.maxx=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"south",{get:function(){return this.miny},set:function(e){this.miny=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"north",{get:function(){return this.maxy},set:function(e){this.maxy=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.minx},set:function(e){this.minx=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.maxx},set:function(e){this.maxx=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.miny},set:function(e){this.miny=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.maxy},set:function(e){this.maxy=e},enumerable:!0,configurable:!0}),t.prototype.center=function(t){if(e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position),this._isGeographical){var i=this.minx,n=this.maxx;n<i&&(n+=360),t.x=e.GeoMath.stdAngle((n+i)/2)}else t.x=(this.minx+this.maxx)/2;return t.y=(this.miny+this.maxy)/2,t},t.prototype.min=function(t){return e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position),t.x=this.minx,t.y=this.miny,t},t.prototype.max=function(t){return e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position),t.x=this.maxx,t.y=this.maxy,t},t.prototype.leftBottom=function(e){return this.min(e)},t.prototype.leftTop=function(t){return e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position),t.x=this.minx,t.y=this.maxy,t},t.prototype.rightTop=function(e){return this.max(e)},t.prototype.rightBottom=function(t){return e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position),t.x=this.maxx,t.y=this.miny,t},t.prototype.southWest=function(e){return this.leftBottom(e)},t.prototype.southEast=function(e){return this.rightBottom(e)},t.prototype.northWest=function(e){return this.leftTop(e)},t.prototype.northEast=function(e){return this.rightTop(e)},t.prototype.inflate=function(t,i){if(e.TypeCheck.isNumber(t))e.TypeCheck.isNumber(i)||(i=t);else if(e.TypeCheck.isInstanceOf(t,e.Vector2)){t=(n=t).x,i=n.y}else if(e.TypeCheck.isInstanceOf(t,e.Position)){var n;t=(n=t).x,i=n.y}this.minx-=t,this.maxx+=t,this.miny-=i,this.maxy+=i},t.prototype.merge=function(i,n){if(e.TypeCheck.isArray(i))for(var r=0;r<i.length;++r)this.merge(i[r]);else{if(e.TypeCheck.isNumber(i)){var o=i,a=n;if(this.empty)return this.minx=this.maxx=o,this.miny=this.maxy=a,void(this.empty=!1);if(this._isGeographical)(c=e.GeoMath.innerAngle(o,this.minx))<=(u=e.GeoMath.innerAngle(o,this.maxx))&&o<this.minx&&(this.minx=o),c>=u&&o>this.maxx&&(this.maxx=o);else o<this.minx&&(this.minx=o),o>this.maxx&&(this.maxx=o);return a<this.miny&&(this.miny=a),void(a>this.maxy&&(this.maxy=a))}if(e.TypeCheck.isInstanceOf(i,e.Position))this.merge(i.x,i.y);else if(e.TypeCheck.isInstanceOf(i,t)){var s=i;if(this.empty)return this.minx=s.minx,this.miny=s.miny,this.maxx=s.maxx,this.maxy=s.maxy,void(this.empty=!1);if(this._isGeographical){var c,u,l=this.center();(c=e.GeoMath.innerAngle(l.x,this.minx))<=(u=e.GeoMath.innerAngle(l.x,this.maxx))&&s.minx<this.minx&&(this.minx=s.minx),c>=u&&s.maxx>this.maxx&&(this.maxx=s.maxx)}else s.minx<this.minx&&(this.minx=s.minx),s.maxx>this.maxx&&(this.maxx=s.maxx);return s.miny<this.miny&&(this.miny=s.miny),void(s.maxy>this.maxy&&(this.maxy=s.maxy))}}},t.prototype.asArray=function(t){return e.TypeCheck.isArray(t)||(t=[]),t[0]=this.minx,t[1]=this.miny,t[2]=this.maxx,t[3]=this.maxy,t},t.prototype.clone=function(i){return e.TypeCheck.isInstanceOf(i,t)||(i=new t),i.minx=this.minx,i.miny=this.miny,i.maxx=this.maxx,i.maxy=this.maxy,i},t.prototype.contains=function(i){if(e.TypeCheck.isInstanceOf(i,e.Position)){var n=i;if(this.isGeographical){var r=n.x,o=this.miny,a=this.maxx;if(a<o&&(a+=360),r<o&&(r+=360),r<o||r>a)return!1}else if(n.x<this.minx||n.x>this.maxx)return!1;return!(n.y<this.miny||n.y>this.maxy)}if(e.TypeCheck.isInstanceOf(i,t)){var s=i;return this.contains(s.min())&&this.contains(s.max())}throw"unknow param v, v must be a Position or Rectangle."},t.prototype.intersection=function(i,n){var r,o,a,s;if(this._isGeographical){var c=this.minx,u=this.maxx,l=i.minx,h=i.maxx;if(u<c?(h<l?l+=360:l<u&&(l+=360,h+=360),u+=360):h<l&&(c<h&&(c+=360,u+=360),h+=360),(r=c>l?c:l)>(o=u<h?u:h))return}else if((r=this.minx>i.minx?this.minx:i.minx)>(o=this.maxx<i.maxx?this.maxx:i.maxx))return;if(!((a=this.miny>i.miny?this.miny:i.miny)>(s=this.maxy<i.maxy?this.maxy:i.maxy)))return e.TypeCheck.isInstanceOf(n,t)||(n=new t),n.minx=r,n.maxx=o,n.miny=a,n.maxy=s,n},t.prototype.toCZRectangle=function(){return Cesium.Rectangle.fromDegrees(this._minx,this.miny,this.maxx,this.maxy)},t.toCZRectangle=function(e){if(e)return e instanceof t?e.toCZRectangle():new t(e).toCZRectangle()},t.normalizeLongitude=function(t){return e.GeoMath.stdAngle(t)},t.normalizeLatitude=function(t){return e.GeoMath.clamp(t,-90,90)},t}();e.Rectangle=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(e,t,i){this._heading=0,this._pitch=0,this._roll=0,this.set(e,t,i)}return Object.defineProperty(t.prototype,"heading",{get:function(){return this._heading},set:function(e){this._heading=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return this._pitch},set:function(e){this._pitch=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roll",{get:function(){return this._roll},set:function(e){this._roll=e},enumerable:!0,configurable:!0}),t.prototype.set=function(t,i,n){var r,o,a;if(e.TypeCheck.isArray(t))r=(s=t)[0],o=s[1],a=s[2];else if(e.TypeCheck.isObject(t)){var s;r=(s=t).heading,o=s.pitch,a=s.roll}else e.TypeCheck.isNumber(t)&&(r=t,o=i,a=n);this.heading=e.TypeCheck.defaultValue(r,0),this.pitch=e.TypeCheck.defaultValue(o,0),this.roll=e.TypeCheck.defaultValue(a,0)},t.prototype.setFromRadius=function(t,i,n){var r,o,a;if(e.TypeCheck.isArray(t))r=(s=t)[0],o=s[1],a=s[2];else if(e.TypeCheck.isObject(t)){var s;r=(s=t).heading,o=s.pitch,a=s.roll}else e.TypeCheck.isNumber(t)&&(r=t,o=i,a=n);this.heading=e.GeoMath.toDegree(e.TypeCheck.defaultValue(r,0)),this.pitch=e.GeoMath.toDegree(e.TypeCheck.defaultValue(o,0)),this.roll=e.GeoMath.toDegree(e.TypeCheck.defaultValue(a,0))},t}();e.HeadingPitchRoll=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(e,t,i){this.heading=0,this.pitch=0,this.distance=0,this.set(e,t,i)}return t.prototype.set=function(t,i,n){var r,o,a;switch(e.TypeCheck.typeOf(t)){case"number":r=t,o=i,a=n;break;case"array":r=t[0],o=t[1],a=t[2];break;case"object":r=t.heading,o=t.pitch,a=t.distance}this.heading=e.TypeCheck.defaultValue(r,0),this.pitch=e.TypeCheck.defaultValue(o,0),this.distance=e.TypeCheck.defaultValue(a,0)},t.prototype._asCzObject=function(t){return e.TypeCheck.isInstanceOf(t,Cesium.HeadingPitchRange)||(t=new Cesium.HeadingPitchRange),t.heading=e.GeoMath.toRadian(this.heading),t.pitch=e.GeoMath.toRadian(this.pitch),t.range=this.distance,t},t}();e.HeadingPitchDistance=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(){}return t.toRadian=function(e){return e*this._degree2radian},t.toDegree=function(e){return e*this._radian2degree},t.clamp=function(e,t,i){return e<t&&(e=t),e>i&&(e=i),e},t.acosClamped=function(e){return Math.acos(t.clamp(e,-1,1))},t.asinClamped=function(e){return Math.asin(t.clamp(e,-1,1))},t.random=function(t,i){var n=Math.random(),r=e.TypeCheck.defaultValue(t,0);return r+(e.TypeCheck.defaultValue(i,1)-r)*n},t.surfaceDistance=function(i,n,r){if(e.TypeCheck.isArray(i)){for(var o=0,a=1;a<i.length;++a)o+=t.surfaceDistance(i[a-1],i[a],r);return o}e.TypeCheck.isInstanceOf(i,e.Position)||(i=new e.Position(i)),e.TypeCheck.isInstanceOf(n,e.Position)||(n=new e.Position(n)),e.TypeCheck.isDefined(r)||(r=6378137);var s=t.toRadian(i.lat),c=t.toRadian(n.lat),u=t.toRadian(i.lon),l=t.toRadian(n.lon),h=Math.cos(s)*Math.cos(c)*Math.cos(u-l),p=Math.sin(s)*Math.sin(c),f=t.clamp(h+p,-1,1);return Math.acos(f)*r},t.innerAngle=function(e,i){e=t.stdAngle(e),i=t.stdAngle(i);var n=Math.abs(e-i);return n>180&&(n=360-n),n},t.stdAngle=function(e){var t=e%360;return t>180&&(t-=360),t<-180&&(t+=360),t},t.surfaceArea=function(i,n){for(var r=[],o=new e.Rectangle,a=0;a<i.length;++a)o.merge(i[a]);var s=o.min();for(a=0;a<i.length;++a){var c=new e.Position(i[a]),u=t.surfaceDistance(new e.Position(c.x,c.y),new e.Position(c.x,s.y),n),l=t.surfaceDistance(new e.Position(c.x,c.y),new e.Position(s.x,c.y),n);r.push(new e.Position(u,l))}return t.area(r)},t.area=function(e){return Math.abs(t.signedArea(e))},t.signedArea=function(e){if(null==e||e.length<3)return 0;for(var t=e.length,i=e[t-1],n=e[0],r=e[1],o=n.y*(i.x-r.x),a=1;a<t;++a)i=n,n=r,r=e[(a+1)%t],o+=n.y*(i.x-r.x);return o/2},t._degree2radian=Math.PI/180,t._radian2degree=180/Math.PI,t}();e.GeoMath=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t,i){this._begin=t,this._end=i,this._interp=new e.Vector2}return t.prototype.interp=function(t){return e.Vector2.lerp(this._begin,this._end,t,this._interp)},t}(),i=function(){function e(e,i){this._segments=[];for(var n=e.length<i.length?e.length:i.length,r=0;r<n;++r)this._segments[r]=new t(e[r],i[r]);this._interp=[]}return e.prototype.interp=function(e){for(var t=0;t<this._segments.length;++t)this._interp[t]=this._segments[t].interp(e);return this._interp},e}(),n=(function(){function t(){}t.nearPoint=function(t,i){for(var n=0,r=e.Vector2.squaredDistance(t,i[0]),o=1;o<i.length;++o){var a=e.Vector2.squaredDistance(t,i[o]);a<r&&(r=a,n=o)}return n}}(),function(){function t(t){for(var n=t.lines.slice(),r=0;r<n.length;++r)for(var o=n[r],a=0;a<o.length;++a)e.TypeCheck.isInstanceOf(o[a],e.Vector2)||(o[a]=new e.Vector2(o[a]));this._bridges=[];for(r=1;r<n.length;++r){var s=n[r-1],c=n[r];this._bridges.push(new i(s,c))}}return t.prototype.interp=function(t){var i,n,r=(t=e.GeoMath.clamp(t,0,1))*this._bridges.length;return 1==t?(i=this._bridges.length-1,n=1):n=r-(i=Math.floor(r)),this._bridges[i].interp(n)},t}());e.MultiLineInterp=n}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){var i=e.TypeCheck.defaultValue(t.width,512),n=e.TypeCheck.defaultValue(t.height,512);this._ctx=this.createCanvasContext2D(t.canvas,i,n),this._canvas=this._ctx.canvas}return Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._canvas.height},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._ctx.clearRect(0,0,this.width,this.height)},t.prototype.calcRect=function(t){e.TypeCheck.isDefined(this._rect)?this._rect.empty=!0:this._rect=new e.Rectangle,function t(i,n){for(var r=0;r<i.length;++r){var o=i[r];e.TypeCheck.isInstanceOf(o,e.Vector2)?n.merge(o.x,o.y):e.TypeCheck.isNumber(o[0])?(i[r]=new e.Vector2(o),n.merge(o[0],o[1])):t(o,n)}}(t,this._rect),this._geoWidth=this._rect.width,this._getHeight=this._rect.height},t.prototype.convertX=function(e){return(e-this._rect.minx)/this._geoWidth*this.width},t.prototype.convertY=function(e){return(this._rect.maxy-e)/this._getHeight*this.height},t.prototype.createCanvasContext2D=function(t,i,n){var r;return e.TypeCheck.isDefined(t)&&(e.TypeCheck.isString(t)?r=document.getElementById(t):e.TypeCheck.isInstanceOf(t,HTMLCanvasElement)&&(r=t)),r||(r=document.createElement("CANVAS")),i&&(r.width=i),n&&(r.height=n),r.getContext("2d")},t}();e.CanvasDraw=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(i,n){var r=t.call(this,n)||this;return r.calcRect(i),r._interp=new e.MultiLineInterp({lines:i}),r}return __extends(i,t),i.prototype.draw=function(e){var t=this.context;t.fillStyle="#FF0000";var i=this._interp.interp(e);this.clear(),t.beginPath(),t.moveTo(this.convertX(i[0].x),this.convertY(i[0].y));for(var n=1;n<i.length;++n)t.lineTo(this.convertX(i[n].x),this.convertY(i[n].y));t.closePath(),t.fill()},i}(e.CanvasDraw);e.PolygonMask=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(e,i){var n=t.call(this,i)||this;return n._fill=!0,n._ctx1=n.createCanvasContext2D(null,n.width,n.height),n._canvas1=n._ctx1.canvas,n._ctx2=n.createCanvasContext2D(null,n.width,n.height),n._canvas2=n._ctx2.canvas,n._lines=e,n.calcRect(e),n}return __extends(i,t),i.prototype.draw=function(t){this.clear(),this.context.fillStyle="#FF0000",this.context.strokeStyle="#FF0000";var i=(t=e.GeoMath.clamp(t,0,1))*(this._lines.length-1),n=Math.floor(i);n===this._lines.length-1&&n--;var r=n+1,o=i-n;this.drawLine(this._ctx1,this._lines[n]),this.drawLine(this._ctx2,this._lines[r]),this.drawMix(this._ctx1,this._ctx2,o)},i.prototype.drawLine=function(t,i){this._fill;t.fillStyle="#FFFFFF",t.strokeStyle="#FFFFFF",t.clearRect(0,0,this.width,this.height),t.beginPath();var n=this;!function i(r){if(!e.TypeCheck.isInstanceOf(r[0],e.Vector2))for(var o=0;o<r.length;++o)i(r[o]);t.moveTo(n.convertX(r[0].x),n.convertY(r[0].y));for(var a=1;a<r.length;++a)t.lineTo(n.convertX(r[a].x),n.convertY(r[a].y))}(i),this._fill?t.fill():t.stroke()},i.prototype.drawMix=function(e,t,i){for(var n=this.width,r=this.height,o=e.getImageData(0,0,n,r),a=t.getImageData(0,0,n,r),s=this.context.getImageData(0,0,n,r),c=o.data,u=a.data,l=s.data,h=n*r*4,p=0;p<h;p+=4)l[p]=255,l[p+1]=l[p+2]=0,0!=c[p+3]&&0!=u[p+3]?l[p+3]=(c[p]+u[p])/2:0!=c[p+3]?l[p+3]=(1-i)*c[p+3]:0!=u[p+3]?l[p+3]=i*u[p+3]:l[p+3]=0,l[p]=l[p+3];this.context.putImageData(s,0,0)},i}(e.CanvasDraw);e.PolylineGradual=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){this._viewer=t.viewer;var i=e.TypeCheck.defaultValue(t.textureSize,{});var n={isEquel:!1,isSimple:!0},r=t.lines.slice();!function t(i,n,r){if(0!=i.length){for(var o=!0,a=i[0].length,s=0;s<i.length;++s){var c=i[s];e.TypeCheck.isNumber(c[0])?i[s]=new e.Vector2(c):t(c,n+1,r),a!=c.length&&(o=!1)}0==n&&(r.isEquel=o),n>1&&(r.isSimple=!1)}}(r,0,n),this._polygonMask=n.isEquel&&n.isSimple?new e.PolygonMask(r,{canvas:t.canvas,width:i.width,height:i.height}):new e.PolylineGradual(r,{canvas:t.canvas,width:i.width,height:i.height}),this._material=new Cesium.Material({fabric:{type:"Water",uniforms:{specularMap:this._polygonMask.canvas,normalMap:"../../build/dep.debug/Assets/Textures/waterNormals.jpg",frequency:1e4,animationSpeed:.01,amplitude:1}}}),this._appearance=new Cesium.EllipsoidSurfaceAppearance({aboveGround:!0,faceForward:!1,material:this._material,renderState:{fog:{enabled:!0,density:.01}}}),this._geometry=new Cesium.RectangleGeometry({rectangle:this._polygonMask.rect.toCZRectangle(),vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,height:t.height,extrudedHeight:t.extrudedHeight,granularity:Math.PI/5e3}),this._primitive=t.viewer._czdata.viewer.scene.primitives.add(new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:this._geometry}),appearance:this._appearance,show:!0}))}return t.prototype.draw=function(e){this._polygonMask.draw(e);var t=this._material._textures.specularMap,i=this._polygonMask.canvas;t&&t.width==i.width&&t.height==i.height&&t.copyFrom(i)},Object.defineProperty(t.prototype,"visible",{get:function(){return!!this._primitive&&this._primitive.show},set:function(e){this._primitive&&(this._primitive.show=e)},enumerable:!0,configurable:!0}),t.prototype.remove=function(){this._viewer._czdata.viewer.scene.primitives.remove(this._primitive),this._primitive=this._primitive.destroy(),this._appearance=null,this._material=this._material.destroy(),this._geometry=null,this._polygonMask=null},t}();e.DynamicArea=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(e,t,i,n){this._r=0,this._g=0,this._b=0,this._a=0,this.set(e,t,i,n)}return t.prototype.set=function(i,n,r,o){if(e.TypeCheck.isInstanceOf(i,Cesium.Color))i=(a=i).red,n=a.green,r=a.blue,o=a.alpha;else if(e.TypeCheck.isString(i)){var a;i=(a=t.fromCssColor(i)).r,n=a.g,r=a.b,o=a.a}else if(e.TypeCheck.isArray(i)){var s=i;i=s[0],n=s[1],r=s[2],o=s[3]}else if(e.TypeCheck.isObject(i)){var c=i;i=c.r,n=c.g,r=c.b,o=c.a}this.r=i,this.g=n,this.b=r,this.a=o},Object.defineProperty(t.prototype,"red",{get:function(){return this._r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"green",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blue",{get:function(){return this._b},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"r",{get:function(){return this._r},set:function(t){this._r=e.GeoMath.clamp(e.TypeCheck.defaultValue(t,0),0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this._g},set:function(t){this._g=e.GeoMath.clamp(e.TypeCheck.defaultValue(t,0),0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this._b},set:function(t){this._b=e.GeoMath.clamp(e.TypeCheck.defaultValue(t,0),0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"a",{get:function(){return this._a},set:function(t){this._a=e.GeoMath.clamp(e.TypeCheck.defaultValue(t,0),0,1)},enumerable:!0,configurable:!0}),t.fromCssColor=function(e){return new t(Cesium.Color.fromCssColorString(e))},t.fromBytes=function(i,n,r,o,a){return e.TypeCheck.isInstanceOf(a,t)||(a=t.BLACK),a.r=i/255,a.g=n/255,a.b=r/255,a.a=o/255,a},t.fromRGBA32=function(e,i){return t.UnionUint32[0]=e,t.fromBytes(t.UnionUint8[0],t.UnionUint8[1],t.UnionUint8[2],t.UnionUint8[3],i)},t.fromRandom=function(i,n){function r(t,i,n){return e.TypeCheck.isNumber(t)?t:(i=e.TypeCheck.defaultValue(i,0),n=e.TypeCheck.defaultValue(n,1),e.GeoMath.random(i,n))}return e.TypeCheck.isInstanceOf(n,t)||(n=t.BLACK),n.r=r(i.red,i.minRed,i.maxRed),n.g=r(i.green,i.minGreen,i.maxGreen),n.b=r(i.blue,i.minBlue,i.maxBlue),n.a=r(i.alpha,i.minAlpha,i.maxAlpha),n},t.prototype.toCssColor=function(){return new Cesium.Color(this._r,this._g,this._b,this._a).toCssColorString()},t.prototype.toBytes=function(t){return e.TypeCheck.isArray(t)||(t=[]),t[0]=Math.floor(255*this._r),t[1]=Math.floor(255*this._g),t[2]=Math.floor(255*this._b),t[3]=Math.floor(255*this._a),t},t.prototype.toRGBA32=function(){var e=this.toBytes();return t.UnionUint8[0]=e[0],t.UnionUint8[1]=e[1],t.UnionUint8[2]=e[2],t.UnionUint8[3]=e[3],t.UnionUint32[0]},t.prototype.toCZColor=function(){return new Cesium.Color(this._r,this._g,this._b,this._a)},t.RED=e.TypeCheck.freezeObject(t.fromCssColor("#FF0000")),t.GREEN=e.TypeCheck.freezeObject(t.fromCssColor("#00FF00")),t.BLUE=e.TypeCheck.freezeObject(t.fromCssColor("#0000FF")),t.BLACK=e.TypeCheck.freezeObject(t.fromCssColor("#000000")),t.WHITE=e.TypeCheck.freezeObject(t.fromCssColor("#FFFFFF")),t.YELLOW=e.TypeCheck.freezeObject(t.fromCssColor("#FFFF00")),t.AUQA=e.TypeCheck.freezeObject(t.fromCssColor("#00FFFF")),t.FUCHSIA=e.TypeCheck.freezeObject(t.fromCssColor("#FF00FF")),t.GRAY=e.TypeCheck.freezeObject(t.fromCssColor("#808080")),t.ScratchArrayBuffer=new ArrayBuffer(4),t.UnionUint32=new Uint32Array(t.ScratchArrayBuffer),t.UnionUint8=new Uint8Array(t.ScratchArrayBuffer),t}();e.Color=t}(Cegore||(Cegore={})),function(e){var t=function(){};e.Material=t;var i=function(t){function i(i){var n=t.call(this)||this;return n._color=new e.Color(e.Color.WHITE),e.TypeCheck.isInstanceOf(i,e.Color)||(i=new e.Color(i)),n._czmat=new Cesium.ColorMaterialProperty(i.toCZColor()),n}return __extends(i,t),Object.defineProperty(i.prototype,"type",{get:function(){return"Color"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"czmat",{get:function(){return this._czmat},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(e){this._color.set(e),this._czmat.color=this._color.toCZColor()},enumerable:!0,configurable:!0}),i}(t);e.ColorMaterial=i;var n=function(t){function i(i){var n=t.call(this)||this;return n._color=new e.Color(e.Color.WHITE),n._repeat=new e.Vector2(1,1),n._transparent=!1,n._czmat=new Cesium.ImageMaterialProperty,n.color=i.color,n.image=i.image,n.repeat=i.repeat,n.transparent=i.transparent,n}return __extends(i,t),Object.defineProperty(i.prototype,"type",{get:function(){return"Image"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"czmat",{get:function(){return this._czmat},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(e){this._color.set(e),this._czmat.color=this._color.toCZColor()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"image",{get:function(){return this._image},set:function(e){this._image=e,this._czmat.image=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"repeat",{get:function(){return this._repeat},set:function(e){this._repeat.set(e),this._czmat.repeat=this._repeat._asCzVector2()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"transparent",{get:function(){return this._transparent},set:function(e){this._transparent=e,this._czmat.transparent=e},enumerable:!0,configurable:!0}),i}(t);e.ImageMaterial=n}(Cegore||(Cegore={})),function(e){var t=function(){function e(e,t){this._callback=e,this._self=t}return e.equal=function(e,t){return e._callback===t._callback&&e._self===t._self},e.prototype.fire=function(e){try{this._callback.apply(this._self,e)}catch(e){console.error("fire event error.")}},e}(),i=function(){function i(){this._listeners=[]}return i.prototype.on=function(i,n){if(!e.TypeCheck.isFunction(i))throw"need param 'callback' is Function.";var r=new t(i,n);-1===e.ArrayUtil.indexOf(r,this._listeners,t.equal)&&this._listeners.push(r)},i.prototype.off=function(i,n){var r=new t(i,n),o=e.ArrayUtil.indexOf(r,this._listeners,t.equal);-1!==o&&this._listeners.splice(o)},i.prototype.fire=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0;i<this._listeners.length;++i)this._listeners[i].fire(e)},i.prototype.addEventListener=function(e,t){this.on(e,t)},i.prototype.removeEventListener=function(e,t){this.off(e,t)},i}();e.Event=i}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){if(this._events=new e.HashMap((function(){return new e.Event})),e.TypeCheck.isArray(t))for(var i=0;i<t.length;++i){var n=t[i];e.TypeCheck.isString(n.type)&&e.TypeCheck.isFunction(n.callback)&&this.on(n.type,n.callback,n.self)}else if(e.TypeCheck.isObject(t))for(var r in t){var o=t[r];e.TypeCheck.isFunction(o)&&this.on(r,o)}}return t.prototype.on=function(t,i,n){if(!e.TypeCheck.isString(t))throw"need param 'type' is string.";if(!e.TypeCheck.isFunction(i))throw"need param 'callback' is Function.";this._events.getOrCreate(t).on(i,n)},t.prototype.off=function(t,i,n){var r=this._events.get(t);e.TypeCheck.isDefined(r)&&r.off(i,n)},t.prototype.fire=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var r=this._events.get(t);e.TypeCheck.isDefined(r)&&r.fire.apply(r,i)},t}();e.EventHandle=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(){}return t.genName=function(i,n){return e.TypeCheck.isDefined(i)?i:e.TypeCheck.isDefined(n)?n+"-"+t.NextIndex++:"AutoName-"+t.NextIndex++},t.NextIndex=0,t}();e.AutoNames=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){var i=this;this._onTick=new e.Event,this._czClock=t._czdata.viewer.clock,this._czClock.onTick.addEventListener((function(){i._onTick.fire(i)}))}return Object.defineProperty(t.prototype,"onTick",{get:function(){return this._onTick},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return Cesium.JulianDate.toDate(this._czClock.currentTime)},set:function(e){this._czClock.currentTime=Cesium.JulianDate.fromDate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return Cesium.JulianDate.toDate(this._czClock.startTime)},set:function(e){this._czClock.startTime=Cesium.JulianDate.fromDate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stopTime",{get:function(){return Cesium.JulianDate.toDate(this._czClock.stopTime)},set:function(e){this._czClock.stopTime=Cesium.JulianDate.fromDate(e)},enumerable:!0,configurable:!0}),t}();e.Clock=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){var i=this;this._position=new e.Position,this._orientation=new e.HeadingPitchRoll,this._eventChanged=new e.Event,this._eventMoveStart=new e.Event,this._eventMoveEnd=new e.Event,this._viewer=t,this._czData=t._czdata,this._czCamera=this._czData.camera,this._czCamera.changed.addEventListener((function(){i._eventChanged.fire(i)})),this._czCamera.moveStart.addEventListener((function(){i._eventMoveStart.fire(i)})),this._czCamera.moveEnd.addEventListener((function(){i._eventMoveEnd.fire(i)}))}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position.set(this._czData.camera.positionCartographic),this._position},set:function(t){e.TypeCheck.isInstanceOf(t,e.Position)||(this._position.set(t),t=this._position),this.setView({position:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orientation.setFromRadius(this._czData.camera.heading,this._czData.camera.pitch,this._czData.camera.roll),this._orientation},set:function(t){e.TypeCheck.isInstanceOf(t,e.HeadingPitchRoll)||(this._orientation.set(t),t=this._orientation),this.setView({orientation:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changed",{get:function(){return this._eventChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"moveStart",{get:function(){return this._eventMoveStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"moveEnd",{get:function(){return this._eventMoveEnd},enumerable:!0,configurable:!0}),t.prototype.flyTo=function(t){var i,n;if(e.TypeCheck.isDefined(t.position))i=this.fromPosition(t.position);else{if(!e.TypeCheck.isDefined(t.rect))throw"position or rect is need.";i=this.fromRectange(t.rect)}return e.TypeCheck.isDefined(t.orientation)&&(n=this.fromOrientation(t.orientation)),this._czCamera.flyTo({destination:i,orientation:n,duration:t.duration,complete:t.complete,cancel:t.cancel,endTransform:Cesium.Matrix4.IDENTITY})},t.prototype.flyToSphere=function(t){var i=t.center,n=t.offset;e.TypeCheck.isInstanceOf(i,e.Position)||(i=new e.Position(i)),e.TypeCheck.isInstanceOf(n,e.HeadingPitchDistance)||(n=new e.HeadingPitchDistance(n));var r,o=new Cesium.BoundingSphere(this.fromPosition(i),t.radius);e.TypeCheck.isDefined(t.offset)&&(r=n._asCzObject()),this._czCamera.flyToBoundingSphere(o,{offset:r,duration:t.duration,complete:t.complete,cancel:t.cancel,endTransform:Cesium.Matrix4.IDENTITY})},t.prototype.stopFly=function(){this._czData.camera.cancelFlight()},t.prototype.setView=function(t){var i,n;if(e.TypeCheck.isDefined(t.position))i=this.fromPosition(t.position);else{if(!e.TypeCheck.isDefined(t.rect))throw"position or rect is need.";i=this.fromRectange(t.rect)}return e.TypeCheck.isDefined(t.orientation)&&(n=this.fromOrientation(t.orientation)),this._czData.camera.setView({destination:i,orientation:n,endTransform:Cesium.Matrix4.IDENTITY})},t.prototype.getView=function(){return{position:this.position,orientation:this.orientation}},t.prototype.lookAt=function(t,i){e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position(t)),e.TypeCheck.isInstanceOf(i,e.HeadingPitchDistance)||(i=new e.HeadingPitchDistance(i)),this._czCamera.lookAt(this.fromPosition(t),i._asCzObject())},t.prototype.lookAtFromTo=function(t,i){e.TypeCheck.isInstanceOf(i,e.Position)||(i=new e.Position(i)),e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position(t));var n=this.fromPosition(t),r=this.fromPosition(i),o=Cesium.Transforms.eastNorthUpToFixedFrame(r,Cesium.Ellipsoid.WGS84),a=Cesium.Matrix4.inverse(o,new Cesium.Matrix4),s=Cesium.Matrix4.multiplyByPoint(a,n,new Cesium.Cartesian3);this._czCamera.lookAtTransform(o,s)},t.prototype.clearLookAt=function(){this._czCamera.lookAtTransform(Cesium.Matrix4.IDENTITY)},t.prototype.fromRectange=function(t){return e.TypeCheck.isInstanceOf(t,e.Rectangle)||(t=new e.Rectangle(t)),Cesium.Rectangle.fromDegrees(t.minx,t.miny,t.maxx,t.maxy)},t.prototype.fromPosition=function(t){return e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position(t)),Cesium.Cartesian3.fromDegrees(t.x,t.y,t.z,this._czData.ellipsoid)},t.prototype.fromOrientation=function(t){return e.TypeCheck.isInstanceOf(t,e.HeadingPitchRoll)||(t=new e.HeadingPitchRoll(t)),{heading:e.GeoMath.toRadian(t.heading),pitch:e.GeoMath.toRadian(t.pitch),roll:e.GeoMath.toRadian(t.roll)}},t}();e.Camera=t}(Cegore||(Cegore={})),function(e){var t=function(){function e(e){if(this.enableInputs=!0,this.enableTranslate=!0,this.enableZoom=!0,this.enableRotate=!0,this.enableTilt=!0,this.enableUpDown=!0,this.enableLook=!0,this.inertiaSpin=.9,this.inertiaTranslate=.9,this.inertiaZoom=.8,this.maximumMovementRatio=.1,this.bounceAnimationTime=3,this.minimumZoomDistance=1,this.maximumZoomDistance=2e7,this.minimumPitch=Cesium.Math.toRadians(0),this.maximumPitch=Cesium.Math.toRadians(90),this.lookViewMinimumPitch=Cesium.Math.toRadians(0),this.lookViewMaximumPitch=Cesium.Math.toRadians(90),this.translateEventTypes=Cesium.CameraEventType.LEFT_DRAG,this.zoomEventTypes=[Cesium.CameraEventType.WHEEL,Cesium.CameraEventType.PINCH],this.rotateEventTypes=Cesium.CameraEventType.LEFT_DRAG,this.tiltEventTypes=[Cesium.CameraEventType.RIGHT_DRAG,Cesium.CameraEventType.PINCH,{eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.CTRL}],this.upDownEventTypes={eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.ALT},this.lookEventTypes={eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.SHIFT},this.enableCollisionDetection=!0,this.enableFlatMode=!1,this.flatModeHeight=0,this.flatModeOffset=0,this._lastInertiaSpinMovement=void 0,this._lastInertiaZoomMovement=void 0,this._lastInertiaTranslateMovement=void 0,this._lastInertiaTiltMovement=void 0,this._horizontalRotationAxis=void 0,this._tiltCenterMousePosition=new Cesium.Cartesian2(-1,-1),this._tiltCenter=new Cesium.Cartesian3,this._lastPickPosition=new Cesium.Cartesian3,this._zoomFactor=5,this._maximumRotateRate=1.77,this._minimumRotateRate=2e-4,this._minimumZoomRate=20,this._maximumZoomRate=5906376272e3,!Cesium.defined(e))throw new Cesium.DeveloperError("scene is required.");this._scene=e,this._aggregator=new Cesium.CameraEventAggregator(e.canvas)}return Object.defineProperty(e.prototype,"viewRectange",{get:function(){return this._viewRectange},set:function(e){if(this._viewRectange=e.clone(this._viewRectange),e){var t=Cesium.Rectangle.center(e);t.height=0,this._viewCenter=Cesium.Cartographic.toCartesian(t,void 0,this._viewCenter)}},enumerable:!0,configurable:!0}),e.prototype.isDestroyed=function(){return!1},e.prototype.destroy=function(){return this._aggregator=this._aggregator&&this._aggregator.destroy(),Cesium.destroyObject(this)},e.prototype.update=function(){var e=this._scene.mode;e===Cesium.SceneMode.SCENE2D?this.update2D():e===Cesium.SceneMode.COLUMBUS_VIEW?(this._horizontalRotationAxis=Cesium.Cartesian3.UNIT_Z,this.updateCV()):e===Cesium.SceneMode.SCENE3D&&(this._horizontalRotationAxis=void 0,this.update3D()),this._aggregator.reset()},e.prototype.onMap=function(){return!0},e.prototype._checkLimit=function(e,t,i,n,r){var o=this._scene.globe;if(this.enableCollisionDetection&&o&&o.show){var a=m,s=i.clone(a.direction);Cesium.Cartesian3.normalize(s,s);var c=o.pick(a,this._scene,y);if(Cesium.defined(c)&&Cesium.Cartesian3.magnitudeSquared(i)<Cesium.Cartesian3.magnitudeSquared(c))return!1}if(this._viewRectange&&!Cesium.Cartesian3.equals(t,i)&&e===this.spin3D){var u=Cesium.Cartographic.fromCartesian(t,void 0,this._temp_view_c0),l=Cesium.Cartographic.fromCartesian(i,void 0,this._temp_view_c1);if(Cesium.Rectangle.contains(this._viewRectange,l))return console.info("范围内"),!0;u.height=0,l.height=0;var h=Cesium.Cartographic.toCartesian(u,void 0,this._temp_view_p0),p=Cesium.Cartographic.toCartesian(l,void 0,this._temp_view_p1),f=Cesium.Cartesian3.distanceSquared(this._viewCenter,h),d=Cesium.Cartesian3.distanceSquared(this._viewCenter,p);if(console.info("范围外",d-f),d>f)return!1}return!0},e.prototype.getEllipsoid=function(){return Cesium.defined(this._scene.globe)?this._scene.globe.ellipsoid:this._scene.mapProjection.ellipsoid},e.prototype.update2D=function(){},e.prototype.updateCV=function(){},e.prototype.update3D=function(){this.reactToInput(this.enableRotate,this.rotateEventTypes,this.spin3D,this.inertiaSpin,"_lastInertiaSpinMovement"),this.reactToInput(this.enableZoom,this.zoomEventTypes,this.zoom3D,this.inertiaZoom,"_lastInertiaZoomMovement"),this.reactToInput(this.enableTilt,this.tiltEventTypes,this.tilt3D,this.inertiaSpin,"_lastInertiaTiltMovement"),this.reactToInput(this.enableLook,this.lookEventTypes,this.look3D),this.reactToInput(this.enableUpDown,this.upDownEventTypes,this.upDown)},e.prototype.reactToInput=function(e,t,n,r,o){if(Cesium.defined(t)&&this.enableInputs&&e){var a=this._aggregator,s=this._scene,u=s.camera,l=t;Array.isArray(l)||(i[0]=t,l=i);for(var p=Cesium.Cartesian3.clone(u.positionWC,d),f=h(s,u,C),m=l.length,y=0;y<m;++y){var b=l[y],v=Cesium.defined(b.eventType)?b.eventType:b,P=b.modifier,x=a.isMoving(v,P)&&a.getMovement(v,P),T=a.getStartMousePosition(v,P);if(x)try{n.call(this,T,x)}catch(e){}else r<1&&c(a,v,P,r,n,this,o)}var w=Cesium.Cartesian3.clone(u.positionWC,g),O=h(s,u,_);this._checkLimit(n,p,w,f,O)||u.setView({destination:p,orientation:f})}},e.prototype.pickReal=function(e,t){var i,r,o=this._scene,c=o.globe,u=o.camera,l=u.getPickRay(e,n);o.pickPositionSupported&&o.pick(e)&&(i=o.pickPosition(e,a)),c&&c.show&&(r=c.pick(l,o,s));var h=Cesium.defined(i)?Cesium.Cartesian3.distance(i,u.positionWC):Number.POSITIVE_INFINITY,p=Cesium.defined(r)?Cesium.Cartesian3.distance(r,u.positionWC):Number.POSITIVE_INFINITY;return h<p?Cesium.Cartesian3.clone(i,t):p!=Number.POSITIVE_INFINITY?Cesium.Cartesian3.clone(r,t):void 0},e.prototype.pickFlat=function(e,t){var i=this._scene.camera.getPickRay(e,n),a=this.getEllipsoid(),s=1+(this.flatModeHeight+this.flatModeOffset)/a.maximumRadius,c=Cesium.Cartesian3.multiplyByScalar(a.radii,s,r),u=Cesium.Ellipsoid.fromCartesian3(c,o),l=Cesium.IntersectionTests.rayEllipsoid(i,u);if(Cesium.defined(l)){if(l.start>0)return Cesium.Ray.getPoint(i,l.start,t);if(0==l.start){var h=a.oneOverRadii,p=Cesium.Cartesian3.multiplyComponents(h,i.origin,c);return Cesium.Cartesian3.magnitudeSquared(p)<1?Cesium.Ray.getPoint(i,l.stop,t):Cesium.Ray.getPoint(i,1,t)}}},e.prototype.pickPosition=function(e,t){return this.enableFlatMode?this.pickFlat(e,t):this.pickReal(e,t)},e.prototype.rotate3D=function(e,t,i){i=Cesium.defaultValue(i,{});var n=Cesium.defaultValue(i.onlyVertical,!1),r=Cesium.defaultValue(i.onlyHorizontal,!1),o=Cesium.defaultValue(i.minimumPitch,-180),a=Cesium.defaultValue(i.maximumPitch,180),s=this._scene,c=s.camera,u=s.canvas,l=c.direction,h=Cesium.Cartesian3.cross(Cesium.Cartesian3.UNIT_Z,c.right,new Cesium.Cartesian3),p=Cesium.Cartesian3.dot(h,l),f=Math.sqrt(l.x*l.x+l.y*l.y);p<0&&(f=-f);var m=-Math.atan2(l.z,f),y=this._maximumRotateRate,d=(t.startPosition.x-t.endPosition.x)/u.clientWidth,g=(t.startPosition.y-t.endPosition.y)/u.clientHeight;d=Math.min(d,this.maximumMovementRatio),g=Math.min(g,this.maximumMovementRatio);var C=y*d*Math.PI*2,_=y*g*Math.PI;m-_>a&&(_=m-a),m-_<o&&(_=m-o),n||c.rotate(Cesium.Cartesian3.UNIT_Z,-C),r||c.rotate(c.right,-_)},e.prototype.spin3D=function(e,t){var i=this._scene.camera;Cesium.Matrix4.equals(i.transform,Cesium.Matrix4.IDENTITY)?this.pan3D(e,t):this.rotate3D(e,t,{minimumPitch:this.lookViewMinimumPitch,maximumPitch:this.lookViewMaximumPitch})},e.prototype.pan3D=function(e,t){var i,n,r=this._scene.camera,o=Cesium.Cartesian2.clone(t.startPosition,z),a=Cesium.Cartesian2.clone(t.endPosition,k);if(i=this.pickPosition(o,b),Cesium.defined(i)){this._lastPickPosition=Cesium.Cartesian3.fromElements(i.x,i.y,i.z,f);var s=r.getPickRay(a,P);if(n=function(e,t,i){var n=p;n.radius=e;var r=Cesium.IntersectionTests.raySphere(t,n);if(!Cesium.defined(r))return;if(r.start>0)return Cesium.Ray.getPoint(t,r.start,i);if(0==r.start)return Cesium.Ray.getPoint(t,r.stop,i);return}(Cesium.Cartesian3.magnitude(i),s,v),Cesium.defined(n))if(i=r.worldToCameraCoordinates(i,i),n=r.worldToCameraCoordinates(n,n),Cesium.defined(r.constrainedAxis)){var c=r.constrainedAxis,u=Cesium.Cartesian3.mostOrthogonalAxis(c,x);Cesium.Cartesian3.cross(u,c,u),Cesium.Cartesian3.normalize(u,u);var l=Cesium.Cartesian3.cross(c,u,T),h=Cesium.Cartesian3.magnitude(i),m=Cesium.Cartesian3.dot(c,i),y=Math.acos(m/h),d=Cesium.Cartesian3.multiplyByScalar(c,m,w);Cesium.Cartesian3.subtract(i,d,d),Cesium.Cartesian3.normalize(d,d);var g=Cesium.Cartesian3.magnitude(n),C=Cesium.Cartesian3.dot(c,n),_=Math.acos(C/g),E=Cesium.Cartesian3.multiplyByScalar(c,C,O);Cesium.Cartesian3.subtract(n,E,E),Cesium.Cartesian3.normalize(E,E);var M=Math.acos(Cesium.Cartesian3.dot(d,u));Cesium.Cartesian3.dot(d,l)<0&&(M=Cesium.Math.TWO_PI-M);var S=Math.acos(Cesium.Cartesian3.dot(E,u));Cesium.Cartesian3.dot(E,l)<0&&(S=Cesium.Math.TWO_PI-S);var j=M-S,R=void 0;R=Cesium.Cartesian3.equalsEpsilon(c,r.position,Cesium.Math.EPSILON2)?r.right:Cesium.Cartesian3.cross(c,r.position,x);var I=Cesium.Cartesian3.cross(c,R,x),D=Cesium.Cartesian3.dot(I,Cesium.Cartesian3.subtract(i,c,T)),L=Cesium.Cartesian3.dot(I,Cesium.Cartesian3.subtract(n,c,T)),A=void 0;A=D>0&&L>0?_-y:D>0&&L<=0?Cesium.Cartesian3.dot(r.position,c)>0?-y-_:y+_:y-_,r.rotateRight(j),r.rotateUp(A)}else{Cesium.Cartesian3.normalize(i,i),Cesium.Cartesian3.normalize(n,n);var F=Cesium.Cartesian3.dot(i,n),V=Cesium.Cartesian3.cross(i,n,x);if(F<1&&!Cesium.Cartesian3.equalsEpsilon(V,Cesium.Cartesian3.ZERO,Cesium.Math.EPSILON14)){var G=Math.acos(F);r.rotate(V,G)}}}},e.prototype.zoom3D=function(e,t){Cesium.defined(t.distance)&&(t=t.distance);var i,n=this._scene,r=n.camera,o=n.canvas,a=Cesium.Matrix4.equals(r.transform,Cesium.Matrix4.IDENTITY);if(a){if((i=this.pickReal(e,M))&&(this._lastPickPosition=i),this.enableFlatMode)if(i){var s=this.getEllipsoid(),c=Cesium.Cartographic.fromCartesian(i,s,j);this.flatModeHeight=c.height}else i=this.pickFlat(e,M)}else i=Cesium.Matrix4.getTranslation(r.transform,M);if(i){var u=Cesium.Cartesian3.subtract(i,r.positionWC,S);Cesium.Cartesian3.normalize(u,u);var l=Cesium.Cartesian3.distance(r.positionWC,i),p=this.minimumZoomDistance,f=(this.maximumZoomDistance,l-p),m=this._zoomFactor*f;m=Cesium.Math.clamp(m,this._minimumZoomRate,this._maximumZoomRate);var y=t.endPosition.y-t.startPosition.y,d=m*Math.min(y/o.clientHeight,this.maximumMovementRatio);if(l-d<this.minimumZoomDistance&&(d=l-this.minimumZoomDistance),l-d>this.maximumZoomDistance&&(d=l-this.maximumZoomDistance),a){Cesium.Cartesian3.multiplyByScalar(u,d,E);var g=Cesium.Cartesian3.add(E,r.positionWC,E),C=h(n,r,R);r.setView({destination:g,orientation:C,endTransform:r.transform})}else r.zoomIn(d)}},e.prototype.tilt3D=function(e,t){var i=this._scene,n=i.camera;if(Cesium.Matrix4.equals(n.transform,Cesium.Matrix4.IDENTITY)){Cesium.defined(t.angleAndHeight)&&(t=t.angleAndHeight);var r,o=i.canvas,a=this.getEllipsoid();if(Cesium.Cartesian2.equals(this._tiltCenterMousePosition,e))r=this._tiltCenter;else{var s=L;s.x=.5*o.width,s.y=.5*o.height,r=this.pickPosition(s,this._tiltCenter),Cesium.defined(r)||(r=this.pickPosition(e,this._tiltCenter)),r||(r=this._tiltCenter),Cesium.defined(r)&&e.clone(this._tiltCenterMousePosition)}if(this._lastPickPosition=r,Cesium.defined(r)){var c=Cesium.Transforms.eastNorthUpToFixedFrame(r,a,I),u=Cesium.Matrix4.clone(n.transform,D);n._setTransform(c),this.rotate3D(e,t,{minimumPitch:this.minimumPitch,maximumPitch:this.maximumPitch}),n._setTransform(u)}}},e.prototype.look3D=function(e,t,i){var n=this._scene.camera,r=A;r.x=t.startPosition.x,r.y=0;var o=F;o.x=t.endPosition.x,o.y=0;var a,s,c=n.getPickRay(r,V),u=n.getPickRay(o,G),l=0;n.frustum instanceof Cesium.OrthographicFrustum?(a=c.origin,s=u.origin,Cesium.Cartesian3.add(n.direction,a,a),Cesium.Cartesian3.add(n.direction,s,s),Cesium.Cartesian3.subtract(a,n.position,a),Cesium.Cartesian3.subtract(s,n.position,s),Cesium.Cartesian3.normalize(a,a),Cesium.Cartesian3.normalize(s,s)):(a=c.direction,s=u.direction);var h=Cesium.Cartesian3.dot(a,s);h<1&&(l=Math.acos(h)),l=t.startPosition.x>t.endPosition.x?-l:l;var p=this._horizontalRotationAxis;if(Cesium.defined(i)?n.look(i,-l):Cesium.defined(p)?n.look(p,-l):n.lookLeft(l),r.x=0,r.y=t.startPosition.y,o.x=0,o.y=t.endPosition.y,c=n.getPickRay(r,V),u=n.getPickRay(o,G),l=0,n.frustum instanceof Cesium.OrthographicFrustum?(a=c.origin,s=u.origin,Cesium.Cartesian3.add(n.direction,a,a),Cesium.Cartesian3.add(n.direction,s,s),Cesium.Cartesian3.subtract(a,n.position,a),Cesium.Cartesian3.subtract(s,n.position,s),Cesium.Cartesian3.normalize(a,a),Cesium.Cartesian3.normalize(s,s)):(a=c.direction,s=u.direction),(h=Cesium.Cartesian3.dot(a,s))<1&&(l=Math.acos(h)),l=t.startPosition.y>t.endPosition.y?-l:l,i=Cesium.defaultValue(i,p),Cesium.defined(i)){var f=n.direction,m=Cesium.Cartesian3.negate(i,N),y=Cesium.Cartesian3.equalsEpsilon(f,i,Cesium.Math.EPSILON2),d=Cesium.Cartesian3.equalsEpsilon(f,m,Cesium.Math.EPSILON2);if(y||d)(y&&l<0||d&&l>0)&&n.look(n.right,-l);else{h=Cesium.Cartesian3.dot(f,i);var g=Cesium.Math.acosClamped(h);l>0&&l>g&&(l=g-Cesium.Math.EPSILON4),h=Cesium.Cartesian3.dot(f,m),g=Cesium.Math.acosClamped(h),l<0&&-l>g&&(l=-g+Cesium.Math.EPSILON4);var C=Cesium.Cartesian3.cross(i,f,H);n.look(C,l)}}else n.lookUp(l)},e.prototype.upDown=function(e,t){Cesium.defined(t.distance)&&(t=t.distance);var i,n=this._scene,r=n.camera,o=n.canvas;if(Cesium.Matrix4.equals(r.transform,Cesium.Matrix4.IDENTITY)&&(i=Cesium.Matrix4.equals(r.transform,Cesium.Matrix4.IDENTITY)?this.pickPosition(e,M):Cesium.Matrix4.getTranslation(r.transform,M))){var a=W;r.positionWC.clone(a.origin);var s=a.direction;Cesium.Cartesian3.subtract(Cesium.Cartesian3.ZERO,r.positionWC,s),Cesium.Cartesian3.normalize(s,s);var c=this.minimumZoomDistance,u=(this.maximumZoomDistance,Cesium.Cartesian3.subtract(i,r.positionWC,S));Cesium.Cartesian3.normalize(u,u);var l=Cesium.Cartesian3.distance(r.positionWC,i)-c,h=this._zoomFactor*l;h=Cesium.Math.clamp(h,this._minimumZoomRate,this._maximumZoomRate);var p=t.endPosition.y-t.startPosition.y,f=h*Math.min(p/o.clientHeight,this.maximumMovementRatio);r.move(s,-f),this.enableFlatMode&&(this.flatModeHeight+=f)}},e}();e.CameraController=t;var i=[],n=new Cesium.Ray,r=new Cesium.Cartesian3,o=new Cesium.Ellipsoid,a=(new Cesium.Interval,new Cesium.Cartesian3),s=new Cesium.Cartesian3;function c(e,t,i,n,r,o,a){var s=o[a];Cesium.defined(s)||(s=o[a]={startPosition:new Cesium.Cartesian2,endPosition:new Cesium.Cartesian2,motion:new Cesium.Cartesian2,active:!1});var c,u=e.getButtonPressTime(t,i),l=e.getButtonReleaseTime(t,i),h=u&&l&&(l.getTime()-u.getTime())/1e3,p=new Date,f=l&&(p.getTime()-l.getTime())/1e3;if(u&&l&&h<.4){var m=function(e,t){if(e<0)return 0;var i=25*(1-t);return Math.exp(-i*e)}(f,n);if(s.active)s.startPosition=Cesium.Cartesian2.clone(s.endPosition,s.startPosition),s.endPosition=Cesium.Cartesian2.multiplyByScalar(s.motion,m,s.endPosition),s.endPosition=Cesium.Cartesian2.add(s.startPosition,s.endPosition,s.endPosition),s.motion=Cesium.Cartesian2.clone(Cesium.Cartesian2.ZERO,s.motion);else{var y=e.getLastMovement(t,i);if(!Cesium.defined(y)||(c=y,Cesium.Cartesian2.equalsEpsilon(c.startPosition,c.endPosition,Cesium.Math.EPSILON14)))return;s.motion.x=.5*(y.endPosition.x-y.startPosition.x),s.motion.y=.5*(y.endPosition.y-y.startPosition.y),s.startPosition=Cesium.Cartesian2.clone(y.startPosition,s.startPosition),s.endPosition=Cesium.Cartesian2.multiplyByScalar(s.motion,m,s.endPosition),s.endPosition=Cesium.Cartesian2.add(s.startPosition,s.endPosition,s.endPosition),s.active=!0}if(isNaN(s.endPosition.x)||isNaN(s.endPosition.y)||Cesium.Cartesian2.distance(s.startPosition,s.endPosition)<.5)return void(s.active=!1);if(!e.isButtonDown(t,i)){var d=e.getStartMousePosition(t,i);r.call(o,d,s)}}else s.active=!1}var u=new Cesium.Matrix4,l=new Cesium.Matrix4;function h(e,t,i){if(e.mode!==Cesium.SceneMode.MORPHING){var n=e.mapProjection.ellipsoid,r=Cesium.Matrix4.clone(t.transform,u),o=Cesium.Transforms.eastNorthUpToFixedFrame(t.positionWC,n,l);return t._setTransform(o),i instanceof Cesium.HeadingPitchRoll||(i=new Cesium.HeadingPitchRoll),i.heading=(a=t.direction,s=t.up,c=0,c=Cesium.Math.equalsEpsilon(Math.abs(a.z),1,Cesium.Math.EPSILON3)?Math.atan2(s.y,s.x)-Cesium.Math.PI_OVER_TWO:Math.atan2(a.y,a.x)-Cesium.Math.PI_OVER_TWO,Cesium.Math.TWO_PI-Cesium.Math.zeroToTwoPi(c)),i.pitch=function(e){return Cesium.Math.PI_OVER_TWO-Cesium.Math.acosClamped(e.z)}(t.direction),i.roll=function(e,t,i){var n=0;return Cesium.Math.equalsEpsilon(Math.abs(e.z),1,Cesium.Math.EPSILON3)||(n=Math.atan2(-i.z,t.z),n=Cesium.Math.zeroToTwoPi(n+Cesium.Math.TWO_PI)),n}(t.direction,t.up,t.right),t._setTransform(r),i}var a,s,c}var p=new Cesium.BoundingSphere;var f=new Cesium.Cartesian3,m=new Cesium.Ray,y=new Cesium.Cartesian3,d=new Cesium.Cartesian3,g=new Cesium.Cartesian3,C=new Cesium.HeadingPitchRoll,_=new Cesium.HeadingPitchRoll,b=Cesium.Cartesian4.clone(Cesium.Cartesian4.UNIT_W),v=Cesium.Cartesian4.clone(Cesium.Cartesian4.UNIT_W),P=new Cesium.Ray,x=new Cesium.Cartesian3,T=new Cesium.Cartesian3,w=new Cesium.Cartesian3,O=new Cesium.Cartesian3,z=new Cesium.Cartesian2,k=new Cesium.Cartesian2,E=new Cesium.Cartesian3,M=new Cesium.Cartesian3,S=new Cesium.Cartesian3,j=new Cesium.Cartographic,R=new Cesium.HeadingPitchRoll,I=new Cesium.Matrix4,D=new Cesium.Matrix4,L=new Cesium.Cartesian2,A=new Cesium.Cartesian2,F=new Cesium.Cartesian2,V=new Cesium.Ray,G=new Cesium.Ray,N=new Cesium.Cartesian3,H=new Cesium.Cartesian3,W=new Cesium.Ray;new Cesium.Ray,new Cesium.Cartesian3}(Cegore||(Cegore={})),function(e){var t=function(){function t(){this._position=new e.Position,this._orientation=new e.HeadingPitchRoll}return t.applyProps=function(t,i,n){for(var r=0;r<i.length;++r){var o=n[i[r]];e.TypeCheck.isDefined(o)&&(t[i[r]]=o)}},t.prototype.applyProps=function(e){t.applyProps(this,t.RenderablePropList,e)},Object.defineProperty(t.prototype,"id",{get:function(){return this._czRenderable.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._czRenderable.show},set:function(e){this._czRenderable.show=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this._position.set(e),this.applyPose()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orientation},set:function(e){this._orientation.set(e),this.applyPose()},enumerable:!0,configurable:!0}),t.prototype.applyPose=function(){var e=Cesium.Cartesian3.fromDegrees(this._position.lon,this._position.lat,this._position.altitude),t=new Cesium.HeadingPitchRoll(Cesium.Math.toRadians(this._orientation.heading),Cesium.Math.toRadians(this._orientation.pitch),Cesium.Math.toRadians(this._orientation.roll)),i=Cesium.Transforms.headingPitchRollQuaternion(e,t);this._czRenderable.position=e,this._czRenderable.orientation=i},t.RenderablePropList=["visible","position","orientation"],t}();e.Renderable=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){this.mFactories=new e.HashMap,this.mDefaultFac=t}return t.prototype.regFactory=function(e,t){this.mFactories.put(e,t)},t.prototype.unregFactory=function(e){this.mFactories.remove(e)},t.prototype.createProvider=function(t,i){t=e.TypeCheck.defaultValue(t,this.mDefaultFac);var n=this.mFactories.get(t);if(n)return n.createProvider(i)},t}();e.ProviderCollection=t;var i=function(){function e(){}return e.TerrainProviders=new t("ZMapTerrain"),e.ImageProviders=new t("ZMapImage"),e}();e.Providers=i}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){if(!e.TypeCheck.isObject(t))throw"Invalid iamge info";var i=this.createProvider(t);if(!e.TypeCheck.isDefined(i))throw'Can not create image layer by type : "'+t.type+'"';this._name=e.AutoNames.genName(t.name,"ImageLayer"),this._type=t.type,this._provider=i,this._czLayer=new Cesium.ImageryLayer(i,{rectangle:e.Rectangle.toCZRectangle(t.rectangle),show:e.TypeCheck.defaultValue(t.visible,!0),alpha:e.TypeCheck.defaultValue(t.alpha,1),brightness:e.TypeCheck.defaultValue(t.brightness,1)}),this._czLayer.brightness=e.TypeCheck.defaultValue(t.brightness,1),this._czLayer._ZMapLayer=this}return Object.defineProperty(t.prototype,"_czlayer",{get:function(){return this._czLayer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._czLayer.show},set:function(e){this._czLayer.show=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._czLayer.alpha},set:function(e){this._czLayer.alpha=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"brightness",{get:function(){return this._czLayer.brightness},set:function(e){this._czLayer.brightness=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"provider",{get:function(){return this._provider},enumerable:!0,configurable:!0}),t.prototype.createProvider=function(t){var i={};for(var n in t)this.hasOwnProperty(n)||(i[n]=t[n]);return e.Providers.ImageProviders.createProvider(t.type,i)},t}();e.ImageLayer=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){this._layers=new e.HashMap,this._globe=t,this._czLayers=this._globe._czglobe.imageryLayers}return Object.defineProperty(t.prototype,"length",{get:function(){return this._czLayers.length},enumerable:!0,configurable:!0}),t.prototype.add=function(t,i){if(e.TypeCheck.isInstanceOf(t,e.ImageLayer)||(t=new e.ImageLayer(t)),this._layers.exist(t.name))throw"image layer named :"+t.name+" allready exist.";this._czLayers.add(t._czlayer,i),this._layers.put(t.name,t)},t.prototype.get=function(t){if(!e.TypeCheck.isNumber(t)){if(e.TypeCheck.isString(t))return this._layers.get(t);throw"id must be string or number"}var i=this._czLayers.get(t);if(i)return i._ZMapLayer},t.prototype.remove=function(t){if(e.TypeCheck.isNumber(t)||e.TypeCheck.isString(t))this.remove(this.get(t));else{if(!e.TypeCheck.isInstanceOf(t,e.ImageLayer))throw"id must be string or number or ImageLayer";var i=t;this._czLayers.remove(i._czlayer),this._layers.remove(t.name)}},t.prototype.removeAll=function(){this._czLayers.removeAll(),this._layers.removeAll()},t.prototype.clear=function(){this.removeAll()},t}();e.ImageLayerCollection=t}(Cegore||(Cegore={})),function(e){var t,i=function(){function t(t){this._scene=t,this._czData=t._czdata,this._czGlobe=this._czData.globe,this._images=new e.ImageLayerCollection(this)}return t.prototype.setTerrain=function(e){var t=this.createProvider(e);if(null==t)throw"Invalid terrain info";this._czData.globe.terrainProvider=t},Object.defineProperty(t.prototype,"_czglobe",{get:function(){return this._czGlobe},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"images",{get:function(){return this._images},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseColor",{get:function(){return new e.Color(this._czGlobe.baseColor)},set:function(t){e.TypeCheck.isInstanceOf(t,e.Color)||(t=new e.Color(t)),this._czGlobe.baseColor=t.toCZColor()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableDepthTest",{get:function(){return this._czGlobe.depthTestAgainstTerrain},set:function(e){this._czGlobe.depthTestAgainstTerrain=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableLighting",{get:function(){return this._czGlobe.enableLighting},set:function(e){this._czGlobe.enableLighting=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableWaterEffect",{get:function(){return this._czGlobe.showWaterEffect},set:function(e){this._czGlobe.showWaterEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileCacheSize",{get:function(){return this._czGlobe.tileCacheSize},set:function(e){this._czGlobe.tileCacheSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileLoadProgress",{get:function(){var t=this;return e.TypeCheck.isDefined(this._tileLoadProgress)||(this._tileLoadProgress=new e.Event,this._czGlobe.tileLoadProgressEvent.addEventListener((function(e){t._tileLoadProgress.fire(e)}))),this._tileLoadProgress},enumerable:!0,configurable:!0}),t.prototype.createProvider=function(t){return e.Providers.TerrainProviders.createProvider(t.type,t)},t}();e.Globe=i,t=new Cesium.Cartesian3,Cesium.EllipsoidalOccluder.prototype.isScaledSpacePointVisibleOld=Cesium.EllipsoidalOccluder.prototype.isScaledSpacePointVisible,Cesium.EllipsoidalOccluder.prototype.isScaledSpacePointVisible=function(e){return Cesium.Cartesian3.multiplyByScalar(e,1.001,t),this.isScaledSpacePointVisibleOld(t)}}(Cegore||(Cegore={})),function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.applyProps=function(e){t.prototype.applyProps.call(this,e)},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return e.ArrayUtil.EmptyArray},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype.onAdded=function(e){this._parent=e},i.prototype.onRemoved=function(){this._parent=null},i.prototype.onAttachRoot=function(){this._parent.models._onAddModel(this)},i.prototype.onDetachRoot=function(){this._parent.models._onRemoveModel(this)},i.ModelPropList=["name"],i}(e.Renderable);e.Model=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){this._children=[],t=e.TypeCheck.defaultValue(t,{}),this._name=e.TypeCheck.defaultValue(t.name,"未命名")}return Object.defineProperty(t.prototype,"models",{get:function(){return this._models},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLeaf",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.add=function(e){e.parent!==this&&(e.parent&&e.parent.remove(e),this._children.push(e),e.onAdded(this),this._models&&e.onAttachRoot())},t.prototype.remove=function(e){if(e.parent===this){var t=this._children.indexOf(e);this._children.splice(t),e.onDetachRoot(),e.onRemoved()}},t.prototype.removeAll=function(){for(var e=0;e<this._children.length;++e)this._children[e].onDetachRoot(),this._children[e].onRemoved();this._children=[]},t.prototype.setModelCollection=function(e){this._models=e},t.prototype.onAdded=function(e){this._parent=e,this._models=e._models,this._models&&this.onAttachRoot()},t.prototype.onRemoved=function(){this._models&&this.onDetachRoot(),this._parent=null,this._models=null},t.prototype.onAttachRoot=function(){for(var e=0;e<this._children.length;++e)this._children[e].onAttachRoot()},t.prototype.onDetachRoot=function(){for(var e=0;e<this._children.length;++e)this._children[e].onDetachRoot()},t.getAllModels=function(i,n){for(var r=0;r<i.children.length;++r){var o=i.children[r];e.TypeCheck.isInstanceOf(o,t)?t.getAllModels(o,n):n.push(o)}return n},t}();e.ModelGroup=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){this._models=new e.HashMap,this._czData=t._czdata,this._DataSource=new Cesium.CustomDataSource("ModelCollection"),this._czData.viewer.dataSources.add(this._DataSource),this._entities=this._DataSource.entities,this._root=new e.ModelGroup({name:"根节点"}),this._root.setModelCollection(this)}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.add=function(e){this._root.add(e)},t.prototype.remove=function(e){this._root.remove(e)},t.prototype._onAddModel=function(e){this._models.put(e.id,e),this._entities.add(e._czRenderable)},t.prototype._onRemoveModel=function(e){this._models.remove(e.id),this._entities.remove(e._czRenderable)},t}();e.ModelCollection=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(i){var n=t.call(this)||this;return n._enablePcik=!0,n._color=new e.Color(e.Color.WHITE),n._outlineColor=new e.Color(e.Color.BLACK),n._outlineSize=0,n._czEntity=new Cesium.Entity,n._czModel=new Cesium.ModelGraphics,n._czEntity.model=n._czModel,n.applyProps(i),n}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.GltfModelPropList,n)},Object.defineProperty(i.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return"GltfModel"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"uri",{get:function(){return this._uri},set:function(e){this._uri=e,this._czModel.uri=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enablePick",{get:function(){return this._enablePcik},set:function(e){this._enablePcik=e,this._czModel.allowPicking=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minPixelSize",{get:function(){return this._minPixelSize},set:function(e){this._minPixelSize=e,this._czModel.minimumPixelSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(e){this._color.set(e),this._czModel.color=this._color.toCZColor()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"outlineColor",{get:function(){return this._outlineColor},set:function(e){this._outlineColor.set(e),this._czModel.silhouetteColor=this._outlineColor.toCZColor()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"outlineSize",{get:function(){return this._outlineSize},set:function(e){this._outlineSize=e,this._czModel.silhouetteSize=e},enumerable:!0,configurable:!0}),i.GltfModelPropList=["uri","enablePick","minPixelSize","color","outlineColor","outlineSize"],i}(e.Model);e.GltfModel=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(){var i=t.call(this)||this;return i._fill=!0,i._outline=!1,i._outlineColor=new e.Color(e.Color.BLACK),i._outlineWidth=1,i._shadows=e.ShadowMode.DISABLED,i}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.ShapePropList,n)},Object.defineProperty(i.prototype,"fill",{get:function(){return this._fill},set:function(e){this._fill=e,this._czShape.fill=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"material",{get:function(){return this._material},set:function(t){var i=t;e.TypeCheck.isInstanceOf(i,e.Material)?this._material=i:e.TypeCheck.isInstanceOf(i,e.Color)?this._material=new e.ColorMaterial(i):e.TypeCheck.isString(i)||e.TypeCheck.isInstanceOf(i,HTMLImageElement)||e.TypeCheck.isInstanceOf(i,HTMLCanvasElement)||e.TypeCheck.isInstanceOf(i,HTMLVideoElement)?this._material=new e.ImageMaterial({image:i}):e.TypeCheck.isObject(i)&&(this._material=new e.ImageMaterial(i)),this._czShape.material=this._material.czmat},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"outline",{get:function(){return this._outline},set:function(e){this._outline=e,this._czShape.outline=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"outlineColor",{get:function(){return new e.Color(this._czShape.outlineColor)},set:function(e){this._outlineColor.set(e),this._czShape.outlineColor=this._outlineColor.toCZColor()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"outlineWidth",{get:function(){return this._czShape.outlineWidth},set:function(e){this._outlineWidth=e,this._czShape.outlineWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadows",{get:function(){return this._czShape.shadows},set:function(e){this._shadows=e,this._czShape.shadows=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayDistance",{get:function(){return this._displayDistance},set:function(e){this._displayDistance=e,this._czShape.distanceDisplayCondition=e},enumerable:!0,configurable:!0}),i.ShapePropList=["material","fill","outline","outlineColor","outlineWidth","shadows","displayDistance"],i}(e.Model);e.Shape=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(e){return t.call(this)||this}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.ShapeExtrudedPropList,n)},Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._czShape.height=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"extrudedHeight",{get:function(){return this._extrudedHeight},set:function(e){this._extrudedHeight=e,this._czShape.extrudedHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this._czShape.rotation=e.GeoMath.toRadian(t)},enumerable:!0,configurable:!0}),i.ShapeExtrudedPropList=["height","extrudedHeight","rotation"],i}(e.Shape);e.ShapeExtruded=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(i){var n=t.call(this)||this;return n._dimensions=new e.Vector3,n._czEntity=new Cesium.Entity,n._czBox=new Cesium.BoxGraphics,n._czEntity.box=n._czBox,n.applyProps(i),n}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.BoxPropList,n)},Object.defineProperty(i.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_czShape",{get:function(){return this._czBox},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return"BoxModel"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dimensions",{get:function(){return this._dimensions},set:function(e){this._dimensions.set(e),this._czBox.dimensions=this._dimensions._asCzVector3()},enumerable:!0,configurable:!0}),i.BoxPropList=["dimensions"],i}(e.Shape);e.BoxModel=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(e){var i=t.call(this)||this;return i._czEntity=new Cesium.Entity,i._czCylinder=new Cesium.CylinderGraphics,i._czEntity.cylinder=i._czCylinder,i.applyProps(e),i}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.CylinderPropList,n)},Object.defineProperty(i.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_czShape",{get:function(){return this._czCylinder},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return"CylinderModel"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this._length},set:function(e){this._length=e,this._czCylinder.length=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topRadius",{get:function(){return this._topRadius},set:function(e){this._topRadius=e,this._czCylinder.topRadius=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottomRadius",{get:function(){return this._bottomRadius},set:function(e){this._bottomRadius=e,this._czCylinder.bottomRadius=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slices",{get:function(){return this._slices},set:function(e){this._slices=e,this._czCylinder.slices=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalLines",{get:function(){return this._verticalLines},set:function(e){this._verticalLines=e,this._czCylinder.numberOfVerticalLines=e},enumerable:!0,configurable:!0}),i.CylinderPropList=["length","topRadius","bottomRadius","slices","verticalLines"],i}(e.Shape);e.CylinderModel=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(e){var i=t.call(this)||this;return i._czEntity=new Cesium.Entity,i._czEllipse=new Cesium.EllipseGraphics,i._czEntity.ellipse=i._czEllipse,i.applyProps(e),i}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.EllipsePropList,n)},Object.defineProperty(i.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_czShape",{get:function(){return this._czEllipse},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return"EllipseModel"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"semiMajorAxis",{get:function(){return this._semiMajorAxis},set:function(e){this._semiMajorAxis=e,this._czEllipse.semiMajorAxis=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"semiMinorAxis",{get:function(){return this._semiMinorAxis},set:function(e){this._semiMinorAxis=e,this._czEllipse.semiMinorAxis=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slices",{get:function(){return this._slices},set:function(e){this._slices=e,this._czEllipse.granularity=Math.PI/4/e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalLines",{get:function(){return this._verticalLines},set:function(e){this._verticalLines=e,this._czEllipse.numberOfVerticalLines=e},enumerable:!0,configurable:!0}),i.EllipsePropList=["semiMajorAxis","semiMinorAxis","slices","verticalLines"],i}(e.ShapeExtruded);e.EllipseModel=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(e){var i=t.call(this)||this;return i._czEntity=new Cesium.Entity,i._czEllipsoid=new Cesium.EllipsoidGraphics,i._czEntity.ellipsoid=i._czEllipsoid,i.applyProps(e),i}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.EllipsoidPropList,n)},Object.defineProperty(i.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_czShape",{get:function(){return this._czEllipsoid},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return"EllipsoidModel"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"semiMajorAxis",{get:function(){return this._semiMajorAxis},set:function(e){this._semiMajorAxis=e,this._czEllipsoid.semiMajorAxis=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"semiMinorAxis",{get:function(){return this._semiMinorAxis},set:function(e){this._semiMinorAxis=e,this._czEllipsoid.semiMinorAxis=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._czEllipsoid.height=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"extrudedHeight",{get:function(){return this._extrudedHeight},set:function(e){this._extrudedHeight=e,this._czEllipsoid.extrudedHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this._czEllipsoid.rotation=e.GeoMath.toRadian(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slices",{get:function(){return this._slices},set:function(e){this._slices=e,this._czEllipsoid.granularity=Math.PI/4/e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalLines",{get:function(){return this._verticalLines},set:function(e){this._verticalLines=e,this._czEllipsoid.numberOfVerticalLines=e},enumerable:!0,configurable:!0}),i.EllipsoidPropList=["semiMajorAxis","semiMinorAxis","height","extrudedHeight","slices","rotation","verticalLines"],i}(e.Shape);e.EllipsoidModel=t}(Cegore||(Cegore={})),function(e){var t;!function(e){e[e.NONE=0]="NONE",e[e.GLOW=1]="GLOW",e[e.OUTLINE=2]="OUTLINE",e[e.DASH=3]="DASH",e[e.ARROW=4]="ARROW"}(t=e.PolylineStyle||(e.PolylineStyle={}));var i=function(i){function n(n){var r=i.call(this)||this;return r._dynamic=!1,r._color=new e.Color(e.Color.WHITE),r._style=t.NONE,r._outlineColor=new e.Color(e.Color.BLACK),r._outlineWidth=1,r._shadows=e.ShadowMode.DISABLED,r._czEntity=new Cesium.Entity,r._czPolyline=new Cesium.PolylineGraphics,r._czEntity.polyline=r._czPolyline,r._dynamic=e.TypeCheck.defaultValue(n.dynamic,!1),r.applyProps(n),r}return __extends(n,i),n.prototype.applyProps=function(t){i.prototype.applyProps.call(this,t),e.Renderable.applyProps(this,n.PolylinePropList,t)},Object.defineProperty(n.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_czShape",{get:function(){return this._czPolyline},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return"PolylineModel"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"positions",{get:function(){return this._positions},set:function(t){this._positions=[],this._czPositions=[];for(var i=0;i<t.length;++i){var n=new e.Position(t[i]);this._positions.push(n),this._czPositions.push(Cesium.Cartesian3.fromDegrees(n.lon,n.lat,n.altitude))}var r=this._czPositions;this._dynamic&&!e.TypeCheck.isInstanceOf(this._czShape.positions,Cesium.CallbackProperty)?this._czShape.positions=new Cesium.CallbackProperty((function(e,t){return r}),!1):this._czShape.positions=r},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"followSurface",{get:function(){return this._followSurface},set:function(e){this._followSurface=e,this._czShape.followSuface=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(e){this._color.set(e),this._style==t.NONE?this._czShape.material=e.toCZColor():this._czShape.material.color=e.toCZColor()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"color2",{get:function(){return this._color2},set:function(t){this._color2||(this._color2=new e.Color(e.Color.WHITE)),this._color2.set(t),this._czShape.depthFailMaterial=t.toCZColor()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._czShape.width=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this._style},set:function(e){if(this._style!=e){this._style=e;var i=this._color.toCZColor();switch(e){case t.GLOW:this._czShape.material=new Cesium.PolylineGlowMaterialProperty({color:i,glowPower:this._glow});break;case t.DASH:this._czShape.material=new Cesium.PolylineDashMaterialProperty({color:i});break;case t.ARROW:this._czShape.material=new Cesium.PolylineArrowMaterialProperty(i);break;case t.OUTLINE:this._czShape.material=new Cesium.PolylineOutlineMaterialProperty({color:i,outlineWidth:this._outlineWidth,outlineColor:this._outlineColor.toCZColor()});break;case t.NONE:default:this._czShape.material=this._color.toCZColor()}}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"glow",{get:function(){return this._glow},set:function(e){this._style==t.GLOW&&(this._czShape.material.glowPower=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"outlineColor",{get:function(){return this._outlineColor},set:function(e){this._outlineColor.set(e),this._style==t.OUTLINE&&(this._czShape.material.outlineColor=this._outlineColor.toCZColor())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"outlineWidth",{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth=e,this._style==t.OUTLINE&&(this._czShape.material.outlineWidth=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"shadows",{get:function(){return this._shadows},set:function(e){this._shadows=e,this._czShape.shadows=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"displayDistance",{get:function(){return this._displayDistance},set:function(e){this._displayDistance=e,this._czShape.distanceDisplayCondition=e},enumerable:!0,configurable:!0}),n.PolylinePropList=["positions","followSurface","width","style","color","color2","glow","outlineWidth","outlineColor","shadows","displayDistance"],n}(e.Model);e.PolylineModel=i}(Cegore||(Cegore={})),function(e){var t=function(){};e.PolygonHierarchy=t;var i=function(t){function i(i){var n=t.call(this)||this;return n._dynamic=!1,n._usePositionHeight=!1,n._closeTop=!0,n._closeBottom=!0,n._czEntity=new Cesium.Entity,n._czPolygon=new Cesium.PolygonGraphics,n._czEntity.polygon=n._czPolygon,n._dynamic=e.TypeCheck.defaultValue(i.dynamic,!1),n.applyProps(i),n}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.PolygonPropList,n)},Object.defineProperty(i.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_czShape",{get:function(){return this._czPolygon},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return"PolygonModel"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"positions",{get:function(){return this._positions},set:function(t){this._positions=[];for(var i,n=[],r=0;r<t.length;++r){for(var o=t[r],a=[],s=[],c=0;c<o.length;++c){var u=new e.Position(o[c]);a.push(u),s.push(Cesium.Cartesian3.fromDegrees(u.lon,u.lat,u.altitude))}this._positions(a),0==r?i=s:n.push(new Cesium.PolygonHierarchy(s))}this._czPositions=new Cesium.PolygonHierarchy(i,n);var l=this._czPositions;this._dynamic&&!e.TypeCheck.isInstanceOf(this._czShape.positions,Cesium.CallbackProperty)?this._czShape.positions=new Cesium.CallbackProperty((function(e,t){return l}),!1):this._czShape.positions=l},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"usePositionHeight",{get:function(){return this._usePositionHeight},set:function(e){this._usePositionHeight=e,this._czShape.perPositionHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"closeTop",{get:function(){return this._closeTop},set:function(e){this._closeTop=e,this._czShape.closeTop=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"closeBottom",{get:function(){return this._closeBottom},set:function(e){this._closeBottom=e,this._czShape.closeBottom=e},enumerable:!0,configurable:!0}),i.PolygonPropList=["positions","usePositionHeight","closeTop","closeBottom"],i}(e.ShapeExtruded);e.PolygonModel=i}(Cegore||(Cegore={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.Renderable);e.PrimitiveModel=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(i){var n=t.call(this)||this;if(n._layer="",n.mAutoOffset=!0,!e.TypeCheck.isDefined(i.text)&&!e.TypeCheck.isDefined(i.icon))throw"need options.text or options.icon";return n._name=e.AutoNames.genName(i.name,"Label"),n._layer=e.TypeCheck.defaultValue(i.layer,""),n._events=new e.EventHandle(i.labelevent),n._czEntity=new Cesium.Entity({name:n._layer+" "+n._name}),n._czEntity._zMapRenderable=n,n.setText(i.text),n.setIcon(i.icon),t.prototype.applyProps.call(n,{position:i.pos,visible:i.visible}),n}return __extends(i,t),Object.defineProperty(i.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return"Label"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){if(e.TypeCheck.isDefined(this._czText))return this._czText.text},set:function(e){this.setText({title:e})},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){if(e.TypeCheck.isDefined(this._czIcon))return this._czIcon.image.src},set:function(e){this.setIcon({img:e})},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),i.prototype._applyProp=function(t,i,n,r){if(e.TypeCheck.isDefined(t)){var o;switch(r){case"Cartesian2":o=new Cesium.Cartesian2(t[0],t[1]);break;case"Color":o=Cesium.Color.fromCssColorString(t);break;default:o=t}i[n]=o}},i.prototype._applyTextProp=function(e,t,i){this._applyProp(e,this._czText,t,i)},i.prototype._applyIconProp=function(e,t,i){this._applyProp(e,this._czIcon,t,i)},i.prototype.setText=function(t){if(e.TypeCheck.isDefined(t)){if(e.TypeCheck.isDefined(this._czText)||(this._czText=new Cesium.LabelGraphics,this._czEntity.label=this._czText),e.TypeCheck.isDefined(t.font)||e.TypeCheck.isDefined(t.size)){var i=e.TypeCheck.defaultValue(t.font,"sans-serif"),n=e.TypeCheck.defaultValue(t.size,"10");this._czText.font=n+"px "+i}this._applyTextProp(t.title,"text"),this._applyTextProp(t.color,"fillColor","Color"),e.TypeCheck.isDefined(t.border)&&(this._applyTextProp(t.border.color,"outlineColor","Color"),this._applyTextProp(t.border.width,"outlineWidth")),e.TypeCheck.isDefined(t.unit)&&(this._applyTextProp(t.unit.offset,"pixelOffset","Cartesian2"),e.TypeCheck.isDefined(t.unit.offset)&&(this.mAutoOffset=!1))}},i.prototype.setIcon=function(t){if(e.TypeCheck.isDefined(t)){var i;if(e.TypeCheck.isDefined(this._czIcon)||(this._czIcon=new Cesium.BillboardGraphics,this._czEntity.billboard=this._czIcon),e.TypeCheck.isString(t.img)?i=t.img:e.TypeCheck.isArray(t.img)&&t.img.length>0&&(i=t.img[0]),e.TypeCheck.isDefined(i)){var n=this,r=new Image;r.src=i,r.onload=function(){if(n._czIcon.image=r,n.mAutoOffset&&e.TypeCheck.isDefined(n._czText)){var t=n._czIcon.scale?n._czIcon.scale.getValue():1,i=r.height*t;n._czText.pixelOffset=new Cesium.Cartesian2(0,-i)}}}this._applyIconProp(t.scale,"scale"),this._applyIconProp(t.color,"color","Color"),e.TypeCheck.isDefined(t.unit)&&this._applyIconProp(t.unit.offset,"pixelOffset","Cartesian2")}},i}(e.Renderable);e.Label=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){var i=this;this._layers=new e.HashMap((function(){return new e.HashMap})),this.mLabelEvent=new e.EventHandle,this._scene=t,this._czData=t._czdata,this._czDataSource=new Cesium.CustomDataSource("LabelCollection"),this._czData.viewer.dataSources.add(this._czDataSource),this._czEntities=this._czDataSource.entities;this.mCZHandle=new Cesium.ScreenSpaceEventHandler(this._czData.scene.canvas),this.mCZHandle.setInputAction((function(e){i.onLabelMoveEvent(e)}),Cesium.ScreenSpaceEventType.MOUSE_MOVE),this.mCZHandle.setInputAction((function(e){i.onLabelClickEvent(e)}),Cesium.ScreenSpaceEventType.LEFT_CLICK)}return t.prototype.onLabelMoveEvent=function(e){},t.prototype.onLabelClickEvent=function(t){var i=this.pick(t.position);e.TypeCheck.isDefined(i)&&(i.events.fire("onclick",i,t.position),this.mLabelEvent.fire("onclick",i,t.position))},t.prototype._getOrCreateLayer=function(e){return this._layers.getOrCreate(e,null)},t.prototype._getLayer=function(e){return this._layers.get(e)},Object.defineProperty(t.prototype,"events",{get:function(){return this.mLabelEvent},enumerable:!0,configurable:!0}),t.prototype.add=function(t){return this.remove(t),e.TypeCheck.isInstanceOf(t,e.Label)||(t=new e.Label(t)),this._getOrCreateLayer(t.layer).put(t.name,t),this._czEntities.add(t._czRenderable),t},t.prototype.get=function(t,i){i=e.TypeCheck.defaultValue(i,"");var n=this._getLayer(i);if(e.TypeCheck.isDefined(n))return n.get(t)},t.prototype.pick=function(t,i){var n;if(e.TypeCheck.isArray(t)){var r=t;n=new Cesium.Cartesian2(r[0],r[1])}else if(t instanceof Cesium.Cartesian2)n=t;else if(e.TypeCheck.isObject(t)){var o=t;n=new Cesium.Cartesian2(o.x,o.y)}else n=new Cesium.Cartesian2(t,i);var a=this._czData.scene.pick(n);if(e.TypeCheck.isDefined(a)){var s=e.TypeCheck.defaultValue(a.id,a.primitive.id);if(s instanceof Cesium.Entity&&s._zMapRenderable instanceof e.Label)return s._zMapRenderable}},t.prototype.remove=function(t,i){var n;if(e.TypeCheck.isString(t))n=this.get(t,i);else if(e.TypeCheck.isInstanceOf(t,e.Label))n=t;else{if(!e.TypeCheck.isObject(t))throw"invaild param!";n=this.get(t.name,t.layer)}if(e.TypeCheck.isInstanceOf(n,e.Label)){var r=n._czRenderable;this._czEntities.remove(r);var o=this._getLayer(n.layer);e.TypeCheck.isDefined(o)&&o.remove(n.name)}},t.prototype.removeLayer=function(t){var i=this._getLayer(t);if(e.TypeCheck.isDefined(i)){for(var n=i.keys(),r=0;r<n.length;++r){var o=i.get(n[r]);this._czEntities.remove(o)}this._layers.remove(t)}},t.prototype.removeAll=function(){this._czEntities.removeAll(),this._layers.clear()},t.prototype.clear=function(){this.removeAll()},t}();e.LabelCollection=t}(Cegore||(Cegore={})),function(e){!function(e){e[e.COLUMBUS_VIEW=1]="COLUMBUS_VIEW",e[e.MORPHING=0]="MORPHING",e[e.SCENE2D=2]="SCENE2D",e[e.SCENE3D=3]="SCENE3D"}(e.SceneMode||(e.SceneMode={})),function(e){e[e.DISABLED=0]="DISABLED",e[e.ENABLED=1]="ENABLED",e[e.CAST_ONLY=2]="CAST_ONLY",e[e.RECEIVE_ONLY=3]="RECEIVE_ONLY"}(e.ShadowMode||(e.ShadowMode={}));var t=function(){function t(t){this._isUnderWater=!1,this._viewer=t,this._czData=t._czdata,this._czScene=this._czData.scene,this._globe=new e.Globe(this),this._labels=new e.LabelCollection(this),this._models=new e.ModelCollection(this)}return Object.defineProperty(t.prototype,"_czdata",{get:function(){return this._czData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this._czScene.mode},set:function(e){this._czScene.mode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globe",{get:function(){return this._globe},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"models",{get:function(){return this._models},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labels",{get:function(){return this._labels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableFog",{get:function(){return this._czScene.fog.enabled},set:function(e){this._czScene.fog.enabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fogDensity",{get:function(){return this._czScene.fog.density},set:function(e){this._czScene.fog.density=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableFXAA",{get:function(){return this._czScene.fxaa},set:function(e){this._czScene.fxaa=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"terrainScale",{get:function(){return this._czScene.terrainExaggeration},set:function(e){this._czScene.terrainExaggeration=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preRender",{get:function(){var t=this;return e.TypeCheck.isDefined(this._preRender)||(this._preRender=new e.Event,this._czScene.preRender.addEventListener((function(e,i){t._preRender.fire(Cesium.JulianDate.toDate(i))}))),this._preRender},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"postRender",{get:function(){var t=this;return e.TypeCheck.isDefined(this._poseRender)||(this._poseRender=new e.Event,this._czScene.poseRender.addEventListener((function(e,i){t._poseRender.fire(Cesium.JulianDate.toDate(i))}))),this._poseRender},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"underWater",{get:function(){return this._isUnderWater},set:function(i){if(e.TypeCheck.isDefined(this._UnderWaterMaterial)||(this._UnderWaterMaterial=new Cesium.Material({fabric:{type:"GlobeFog",uniforms:{fogColor:Cesium.Color.fromBytes(44,59,103)},source:t._GlobeFog},translucent:function(e){return!1}})),i){this._czScene.globe.material=this._UnderWaterMaterial;var n=Cesium._shaders.GlobeFS,r=n.indexOf("czm_material material = czm_getMaterial(materialInput);\n");n=n.substr(0,r)+"materialInput.positionToEyeEC = v_positionEC;\n"+n.substr(r),this._czScene.globe._surfaceShaderSet.baseFragmentShaderSource.sources[1]=n}else this._czScene.globe.material=void 0;this.enableFog=!i,this._isUnderWater=i},enumerable:!0,configurable:!0}),t.prototype.pick=function(i,n){var r=t.asCartesian2(i,n),o=this._czScene.pick(r);if(e.TypeCheck.isDefined(o)){var a=e.TypeCheck.defaultValue(o.id,o.primitive.id);return a instanceof Cesium.Entity&&a._zMapRenderable instanceof e.Renderable?a._zMapRenderable:void 0}},t.prototype.pickMulti=function(i,n,r){var o=[],a=t.asCartesian2(i,n),s=this._czScene.pick(a);if(!e.TypeCheck.isArray(s))return o;for(var c=0;c<s.length;++c){s[c];var u=e.TypeCheck.defaultValue(s.id,s.primitive.id);u instanceof Cesium.Entity&&u._zMapRenderable instanceof e.Renderable&&o.push(u._zMapRenderable)}return o},t.prototype.pickPosition=function(i,n){var r=t.asCartesian2(i,n),o=this._czScene.pickPosition(r),a=Cesium.Cartographic.fromCartesian(o);return new e.Position(a)},t.prototype.calcDistance=function(t){return e.GeoMath.surfaceDistance(t,this._czData.ellipsoid.x)},t.prototype.calcArea=function(t){return e.GeoMath.surfaceArea(t,this._czData.ellipsoid.x)},t.asCartesian2=function(t,i){if(e.TypeCheck.isInstanceOf(t,Cesium.Cartesian2))return t;var n,r;switch(e.TypeCheck.typeOf(t)){case"number":e.TypeCheck.isNumber(i)&&(n=t,r=i);break;case"array":n=e.StringUtil.parseFloat(t[0]),r=e.StringUtil.parseFloat(t[1]);break;case"object":n=e.StringUtil.parseFloat(t.x),r=e.StringUtil.parseFloat(t.y)}if(!e.TypeCheck.isDefined(n)||!e.TypeCheck.isDefined(r)||isNaN(n)||isNaN(r))throw"error params!";return new Cesium.Cartesian2(n,r)},t._GlobeFog="        uniform vec4 fogColor;\n        czm_material czm_getMaterial(czm_materialInput materialInput)\n        {\n            czm_material material = czm_getDefaultMaterial(materialInput);\n            float distanceToCamera = length(materialInput.positionToEyeEC);\n            float scalar = distanceToCamera * 0.00005;\n            float fog = 1.0 - exp(-(scalar * scalar));\n            material.diffuse = fogColor.rgb;\n            material.alpha = fog;\n            return material;\n        }\n",t}();e.Scene=t}(Cegore||(Cegore={})),function(e){var t=function(){function e(e){this.mViewer=e}return Object.defineProperty(e.prototype,"viewer",{get:function(){return this.mViewer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this.mViewer.scene},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"camera",{get:function(){return this.mViewer.camera},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globe",{get:function(){return this.mViewer.scene.globe},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ellipsoid",{get:function(){return this.mViewer.scene.globe.ellipsoid},enumerable:!0,configurable:!0}),e}();e.CesiumData=t;var i=function(){function i(i,n){n||(n={});var r=n.czops||{};r.shouldAnimate=!!n.shouldAnimate,r.animation=!!n.animation,r.baseLayerPicker=!!n.baseLayerPicker,r.homeButton=!!n.homeButton,r.geocoder=!!n.geocoder,r.navigationHelpButton=!!n.navigationHelpButton,r.imageryProvider=!!n.imageryProvider,r.timeline=!!n.timeline,r.sceneModePicker=!!n.sceneModePicker,r.selectionIndicator=!!n.selectionIndicator,r.infoBox=!!n.infoBox,r.fullscreenButton=e.TypeCheck.defaultValue(n.fullscreenButton,!0),r.fullscreenElement=e.TypeCheck.defaultValue(n.fullscreenElement,i);var o=r.contextOptions||{},a=o.webgl||{};a.preserveDrawingBuffer=e.TypeCheck.defaultValue(a.preserveDrawingBuffer,!0),o.webgl=a,r.contextOptions=o;var s=new Cesium.Viewer(i,r);s.cesiumWidget.creditContainer.style.display="none",s.scene.highDynamicRange=e.TypeCheck.defaultValue(n.highDynamicRange,!1),this._czData=new t(s),this._camera=new e.Camera(this),this._clock=new e.Clock(this),this._scene=new e.Scene(this),this._controller=new e.CameraController(s.scene),this._controller.enableFlatMode=!1,this._controller.enableInputs=!1;var c=s.scene.screenSpaceCameraController;if(c.minimumCollisionTerrainHeight=15e4,c.tiltEventTypes=[Cesium.CameraEventType.RIGHT_DRAG,Cesium.CameraEventType.PINCH],c.zoomEventTypes=[Cesium.CameraEventType.WHEEL,Cesium.CameraEventType.PINCH,{eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.CTRL}],this._cesium_controller=c,window.USE_CESIUM_CAMERA_CONTROLLER||(this._cesium_controller.enableInputs=!1,this._controller.enableInputs=!0,s.scene._screenSpaceCameraController=this._controller),e.TypeCheck.isObject(n.terrain)&&this.globe.setTerrain(n.terrain),e.TypeCheck.isArray(n.images))for(var u=0;u<n.images.length;++u)this.globe.images.add(n.images[u]);e.TypeCheck.isDefined(n.currentTime)&&(this._clock.currentTime=n.currentTime)}return Object.defineProperty(i,"version",{get:function(){return"1.1.0"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_czdata",{get:function(){return this._czData},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"camera",{get:function(){return this._camera},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"models",{get:function(){return this._scene.models},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labels",{get:function(){return this._scene.labels},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"globe",{get:function(){return this._scene.globe},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"images",{get:function(){return this.globe.images},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"clock",{get:function(){return this._clock},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canvas",{get:function(){return this._czData.viewer.canvas},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cameraController",{get:function(){return this._controller},enumerable:!0,configurable:!0}),i.getBaseUrlFromScript=function(){for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;++t){var r=e[t].getAttribute("src"),o=i.cesiumScriptRegex.exec(r);if(null!==o)return o[1]}},i.cesiumScriptRegex=/((?:.*\/)|^)depmain[\w-]*\.js(?:\W|$)/i,i}();e.Viewer=i,CESIUM_BASE_URL=i.getBaseUrlFromScript()}(Cegore||(Cegore={})),function(e){var t=function(){function t(){this._readyPromise=Cesium.when.resolve(!0),this._tileWidth=256,this._tileHeight=256,this._minimumLevel=0,this._maximumLevel=18,this._errorEvent=new Cesium.Event,this._hasAlphaChannel=!1}return Object.defineProperty(t.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readyPromise",{get:function(){return this._readyPromise},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rectangle",{get:function(){return e.TypeCheck.isDefined(this._rectangle)||(this._rectangle=Cesium.Rectangle.MAX_VALUE),this._rectangle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileWidth",{get:function(){return this._tileWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileHeight",{get:function(){return this._tileHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minimumLevel",{get:function(){return this._minimumLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumLevel",{get:function(){return this._maximumLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tilingScheme",{get:function(){return e.TypeCheck.isDefined(this._tilingScheme)||(this._tilingScheme=new Cesium.GeographicTilingScheme),this._tilingScheme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileDiscardPolicy",{get:function(){return this._tileDiscardPolicy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorEvent",{get:function(){return this._errorEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"credit",{get:function(){return this._credit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"proxy",{get:function(){return this._proxy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasAlphaChannel",{get:function(){return this._hasAlphaChannel},enumerable:!0,configurable:!0}),t.prototype.getTileCredits=function(e,t,i){},t.prototype.pickFeatures=function(e,t,i,n,r){},t}();e.AbstractImageProvider=t}(Cegore||(Cegore={})),function(e){e.Providers.ImageProviders.regFactory("ArcGisMapServer",{createProvider:function(e){return new Cesium.ArcGisMapServerImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("BingMaps",{createProvider:function(e){return new Cesium.BingMapsImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("Grid",{createProvider:function(e){return new Cesium.GridImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("Mapbox",{createProvider:function(e){return new Cesium.MapboxImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("SingleTile",{createProvider:function(e){return new Cesium.SingleTileImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("WMS",{createProvider:function(e){return new Cesium.WebMapServiceImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("WMTS",{createProvider:function(e){return new Cesium.WebMapTileServiceImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("UrlTemplate",{createProvider:function(e){return new Cesium.UrlTemplateImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("TileCoordinates",{createProvider:function(e){return new Cesium.TileCoordinatesImageryProvider(e)}})}(Cegore||(Cegore={})),function(e){var t=function(){function t(i){this.getTileCredits=function(e,t,i){},this.requestImage=function(e,i,n){if(!this._ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");var r=t.buildImageUrl(this,e,i,n);return Cesium.ImageryProvider.loadImage(this,r)};var n=new Cesium.Credit("WMTS");i=Cesium.defaultValue(i,{});var r=Cesium.defaultValue(i.url,"http://localhost:88/wmts");/\/$/.test(r),this._url=r,-1==this._url.indexOf("?")&&(e.StringUtil.endsWidth(this._url,"/tile/map",!0)||(this._url+="/tile/map"),this._url+="?"),this._url+="&origin=left|top",this._proxy=i.proxy,this._tileDiscardPolicy=i.tileDiscardPolicy,this._scheme=Cesium.defaultValue(i.scheme,"Geographic"),"WebMercator"===this._scheme?this._tilingScheme=new Cesium.WebMercatorTilingScheme({ellipsoid:i.ellipsoid}):this._scheme.endsWith("level-0")?this._tilingScheme=new Cesium.GeographicTilingScheme({ellipsoid:i.ellipsoid}):this._tilingScheme=new Cesium.GeographicTilingScheme({ellipsoid:i.ellipsoid,numberOfLevelZeroTilesX:8,numberOfLevelZeroTilesY:4}),this._tileWidth=256,this._tileHeight=256,this._minimumLevel=Cesium.defaultValue(i.minimumLevel,0),this._maximumLevel=Cesium.defaultValue(i.maximumLevel,18),this._rectangle=Cesium.defaultValue(e.Rectangle.toCZRectangle(i.rectangle),this._tilingScheme.rectangle),this._errorEvent=new Cesium.Event,this._ready=!0;var o=Cesium.defaultValue(i.credit,n);"string"==typeof o&&(o=new Cesium.Credit(o)),this._credit=o}return Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasAlphaChannel",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"proxy",{get:function(){return this._proxy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileWidth",{get:function(){return this._tileWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileHeight",{get:function(){return this._tileHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumLevel",{get:function(){return this._maximumLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minimumLevel",{get:function(){return this._minimumLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tilingScheme",{get:function(){return this._tilingScheme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rectangle",{get:function(){return this._rectangle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ileDiscardPolicy",{get:function(){return this._tileDiscardPolicy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorEvent",{get:function(){return this._errorEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"credit",{get:function(){return this._credit},enumerable:!0,configurable:!0}),t.buildImageUrl=function(t,i,n,r){var o=r,a=t._proxy;"WebMercator"!==t._scheme&&(t._scheme.endsWith("level-0")?r+=1:r=r);var s=new e.Rectangle(t._tilingScheme.tileXYToRectangle(i,n,o)),c=t._url+"&id="+r+","+n+","+i+"&range="+s.west+","+s.south+","+s.east+","+s.north;return Cesium.defined(a)&&(c=a.getURL(c)),c},t}(),i=function(){function e(){}return e.prototype.createProvider=function(e){return new t(e)},e}();e.Providers.ImageProviders.regFactory("ZMapImage",new i)}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){var i=new Cesium.Credit("WMTS");t=e.TypeCheck.defaultValue(t,{});var n=Cesium.defaultValue(t.url,"http://localhost:88/wmts");/\/$/.test(n),this._url=n,-1==this._url.indexOf("?")&&(e.StringUtil.endsWidth(this._url,"/tile/dem",!0)||(this._url+="/tile/dem"),this._url+="?"),this._url+="&origin=left|top",this._proxy=t.proxy,this._scheme=Cesium.defaultValue(t.scheme,"Geographic"),"WebMercator"===this._scheme?this._tilingScheme=new Cesium.WebMercatorTilingScheme({ellipsoid:t.ellipsoid}):this._scheme.endsWith("level-0")?this._tilingScheme=new Cesium.GeographicTilingScheme({ellipsoid:t.ellipsoid}):this._tilingScheme=new Cesium.GeographicTilingScheme({ellipsoid:t.ellipsoid,numberOfLevelZeroTilesX:8,numberOfLevelZeroTilesY:4}),this._tileWidth=e.TypeCheck.defaultValue(t.tileWidth,128),this._tileHeight=e.TypeCheck.defaultValue(t.tileHeight,128),this._minVal=e.TypeCheck.defaultValue(t.minVal,0),this._maxVal=e.TypeCheck.defaultValue(t.maxVal,1e3),this._minimumLevel=Cesium.defaultValue(t.minimumLevel,0),this._maximumLevel=Cesium.defaultValue(t.maximumLevel,18),this._rectangle=Cesium.defaultValue(e.Rectangle.toCZRectangle(t.rectangle),this._tilingScheme.rectangle),this._errorEvent=new Cesium.Event,this._ready=!0;var r=Cesium.defaultValue(t.credit,i);"string"==typeof r&&(r=new Cesium.Credit(r)),this._credit=r}return Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasAlphaChannel",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"proxy",{get:function(){return this._proxy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileWidth",{get:function(){return this._tileWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileHeight",{get:function(){return this._tileHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumLevel",{get:function(){return this._maximumLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minimumLevel",{get:function(){return this._minimumLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tilingScheme",{get:function(){return this._tilingScheme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rectangle",{get:function(){return this._rectangle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ileDiscardPolicy",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorEvent",{get:function(){return this._errorEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"credit",{get:function(){return this._credit},enumerable:!0,configurable:!0}),t.prototype.getTileCredits=function(e,t,i){},t.prototype.requestImage=function(e,t,i){if(!this._ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");var n=this.buildImageUrl(e,t,i);return Cesium.ImageryProvider.loadImage(this,n)},t.prototype.buildImageUrl=function(e,t,i){var n=this._tilingScheme.tileXYToRectangle(e,t,i);"WebMercator"!==this._scheme&&(this._scheme.endsWith("level-0")?i+=1:i=i);var r=[Cesium.Math.toDegrees(n.west),Cesium.Math.toDegrees(n.south),Cesium.Math.toDegrees(n.east),Cesium.Math.toDegrees(n.north)],o=this._url;return o+="&id="+i+","+t+","+e,o+="&size="+this._tileWidth+"%2C"+this._tileHeight,o+="&range="+r.join(","),o+="&style=image&min="+this._minVal+"&max="+this._maxVal},t}(),i=function(){function e(){}return e.prototype.createProvider=function(e){return new t(e)},e}();e.Providers.ImageProviders.regFactory("ZMapDemImage",new i)}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){this._tileWidth=65,this._tileHeight=65,this._heightOffset=0,this._heightScale=1,this._heightScaleOffset=0,this._qmesh=!0,this._clipHeight=0,this._clipInner=!0,this._clipWall=!0,this._clipFloor=!0,this._url=t.url,-1==this._url.indexOf("?")&&(e.StringUtil.endsWidth(this._url,"/tile/dem",!0)||(this._url+="/tile/dem"),this._url+="?"),this._token=t.token,this._qmesh=e.TypeCheck.defaultValue(t.qmesh,!1),this._clip=t.clip,this._clipHeight=e.TypeCheck.defaultValue(t.clipHeight,0),this._clipInner=e.TypeCheck.defaultValue(t.clipInner,!0),this._clipFloor=e.TypeCheck.defaultValue(t.clipFloor,!0),this._clipWall=e.TypeCheck.defaultValue(t.clipWall,!0),this._waterMask=e.TypeCheck.defaultValue(t.waterMask,!1),this._waterHeight=e.TypeCheck.defaultValue(t.waterHeight,0),this._tileWidth=e.TypeCheck.defaultValue(t.tileWidth,20),this._tileHeight=e.TypeCheck.defaultValue(t.tileHeight,20),this._heightOffset=e.TypeCheck.defaultValue(t.heightOffset,0),this._heightScale=e.TypeCheck.defaultValue(t.heightScale,1),this._heightScaleOffset=e.TypeCheck.defaultValue(t.heightScaleOffset,0),this._tilingScheme=t.tilingScheme,Cesium.defined(this._tilingScheme)||(this._tilingScheme=new Cesium.GeographicTilingScheme({ellipsoid:Cesium.defaultValue(t.ellipsoid,Cesium.Ellipsoid.WGS84)})),this._levelZeroMaximumGeometricError=62617.21357121639,this._proxy=t.proxy,this._dataStruct={heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1},this._errorEvent=new Cesium.Event;var i=t.credit;"string"==typeof i&&(i=new Cesium.Credit(i)),this._credit=i,this._readyPromise=Cesium.when.resolve(!0)}return Object.defineProperty(t.prototype,"errorEvent",{get:function(){return this._errorEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"credit",{get:function(){return this._credit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tilingScheme",{get:function(){return this._tilingScheme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readyPromise",{get:function(){return this._readyPromise},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasWaterMask",{get:function(){return this._waterMask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasVertexNormals",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.requestTileGeometry=function(t,i,n,r){var o=this,a=this._tilingScheme.tileXYToRectangle(t,i,n),s=(a.east-a.west)/(this._tileWidth-1),c=(a.north-a.south)/(this._tileHeight-1);a.west-=.5*s,a.east+=.5*s,a.south-=.5*c,a.north+=.5*c;var u=[Cesium.Math.toDegrees(a.west),Cesium.Math.toDegrees(a.south),Cesium.Math.toDegrees(a.east),Cesium.Math.toDegrees(a.north)],l=this._url,h={id:n+","+i+","+t,size:this._tileWidth+","+this._tileHeight,range:u.join(","),style:this._qmesh?"qmesh":"float",origin:"left|top",scale:this._heightScale,scaleOffset:this._heightScaleOffset,offset:this._heightOffset};this._qmesh&&this._clip&&(h.clip=this._clip,h["clip-h"]=this._clipHeight,h["clip-inner"]=this._clipInner,h["clip-wall"]=this._clipWall,h["clip-floor"]=this._clipFloor);var p=e.StringUtil.toPostFormBody(h),f=Cesium.Resource.post({url:l,proxy:this._proxy,data:p,headers:{"Content-Type":"application/x-www-form-urlencoded"},request:r,responseType:"arraybuffer"});if(Cesium.defined(f))return Cesium.when(f,(function(e){return o._qmesh?o.loadQMesh(e,t,i,n):o.loadHeightmap(e)}))},t.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},t.prototype.getTileDataAvailable=function(e,t,i){},t.prototype.loadHeightmap=function(e){var t,i,n=this._tileWidth*this._tileHeight,r=4*n,o=8*n;if(this._waterMask&&(t=new Uint8Array(n)),e.byteLength==r){i=new Float32Array(e);for(var a=0;a<n;++a)i[a]<=-1e5&&(i[a]=0)}else if(e.byteLength==o){i=new Float32Array(n);var s=new Float64Array(e);for(a=0;a<n;++a)i[a]=s[a],s[a]<=-1e5&&(i[a]=0)}else i=new Float32Array(n);if(this._waterMask)for(a=0;a<n;++a)i[a]<this._waterHeight?t[a]=255:t[a]=0;return new Cesium.HeightmapTerrainData({buffer:i,width:this._tileWidth,height:this._tileWidth,childTileMask:15,waterMask:t,structure:this._dataStruct})},t.prototype.loadQMesh=function(e,t,r,o){var a=0,s=3*Float64Array.BYTES_PER_ELEMENT,c=4*Float64Array.BYTES_PER_ELEMENT,u=3*Uint16Array.BYTES_PER_ELEMENT,l=new DataView(e);i(l,a);a+=s;l.getFloat64(a,!0),l.getFloat64(a+8,!0),l.getFloat64(a+16,!0),l.getFloat64(a+24,!0);a+=4*Float64Array.BYTES_PER_ELEMENT;var h=l.getFloat32(a,!0);a+=Float32Array.BYTES_PER_ELEMENT;var p=l.getFloat32(a,!0);a+=Float32Array.BYTES_PER_ELEMENT;var f=new Cesium.BoundingSphere(i(l,a),l.getFloat64(a+s,!0)),m=i(l,a+=c);a+=s;var y=l.getUint32(a,!0);a+=Uint32Array.BYTES_PER_ELEMENT;var d=new Uint16Array(e,a,3*y),g=n(l,a+=y*u,3),C=n(l,a+=Uint32Array.BYTES_PER_ELEMENT+g.byteLength,1),_=n(l,a+=Uint32Array.BYTES_PER_ELEMENT+C.byteLength,1),b=n(l,a+=Uint32Array.BYTES_PER_ELEMENT+_.byteLength,1),v=n(l,a+=Uint32Array.BYTES_PER_ELEMENT+b.byteLength,1);a+=Uint32Array.BYTES_PER_ELEMENT+v.byteLength;var P,x=5*this.getLevelMaximumGeometricError(o),T=this._tilingScheme.tileXYToRectangle(t,r,o);if(T.width<Cesium.Math.PI_OVER_TWO+Cesium.Math.EPSILON5&&(P=Cesium.OrientedBoundingBox.fromRectangle(T,h,p,this._tilingScheme.ellipsoid)),0==y)throw new Error("blank");return new Cesium.QuantizedMeshTerrainData({minimumHeight:h,maximumHeight:p,boundingSphere:f,orientedBoundingBox:P,horizonOcclusionPoint:m,quantizedVertices:d,indices:g,westIndices:C,southIndices:_,eastIndices:b,northIndices:v,westSkirtHeight:x,southSkirtHeight:x,eastSkirtHeight:x,northSkirtHeight:x,childTileMask:15})},t}();function i(e,t){return new Cesium.Cartesian3(e.getFloat64(t,!0),e.getFloat64(t+8,!0),e.getFloat64(t+16,!0))}function n(e,t,i){var n=e.getUint32(t,!0);return t+=Uint32Array.BYTES_PER_ELEMENT,new Uint16Array(e.buffer,t,n*i)}var r=function(){function e(){}return e.prototype.createProvider=function(e){return new t(e)},e}();e.Providers.TerrainProviders.regFactory("ZMapTerrain",new r)}(Cegore||(Cegore={})),function(e){var t=function(t){function i(e){var i=t.call(this)||this;return i._weightScale=1,i._shadow=250,e=Cesium.defaultValue(e,{}),i._xfield=e.xField,i._yfield=e.yField,i._weightField=e.weightField,i._weightScale=Cesium.defaultValue(e.weightScale,1),i._weightCalc=e.weightCalc,i._tilingScheme=new Cesium.GeographicTilingScheme,i._minimumLevel=Cesium.defaultValue(e.minimumLevel,0),i._maximumLevel=Cesium.defaultValue(e.maximumLevel,18),i._hasAlphaChannel=!0,i.initData(e.data),i.setBlurRadius(e.blur,e.radius),i.setGradient(e.gradient),i}return __extends(i,t),i.prototype.setBlurRadius=function(t,i){this._blur=e.TypeCheck.defaultValue(t,15),this._radius=e.TypeCheck.defaultValue(i,8),this._circleImage=this.createCircle()},i.prototype.setGradient=function(t){this._gradient=e.TypeCheck.defaultValue(t,i.DEFAULT_GRADIENT),this._colorTable=this.createGradientColorTable(this._gradient)},i.prototype.initData=function(t){this._data=[];for(var i=new e.Rectangle,n=0;n<t.length;++n){var r=t[n],o={x:this.xCoord(r),y:this.yCoord(r),v:this.value(r)};this._data.push(o),i.merge(o.x,o.y)}this._rectangle=i.toCZRectangle(),this._ready=!0},i.fieldsValue=function(t,i,n){for(var r=e.TypeCheck.defaultValue(n,0),o=0;o<i.length;++o){var a=i[o];if(e.TypeCheck.isDefined(a)&&(r=t[a],e.TypeCheck.isDefined(r)))break}return e.TypeCheck.isNumber(r)||(r=e.StringUtil.parseFloat(r)),r},i.prototype.xCoord=function(e){return i.fieldsValue(e,[this._xfield,"x","X"])},i.prototype.yCoord=function(e){return i.fieldsValue(e,[this._yfield,"y","Y"])},i.prototype.value=function(t){return e.TypeCheck.isFunction(this._weightCalc)?this._weightCalc(t):i.fieldsValue(t,[this._weightField,"value","Value","VALUE"])},i.prototype.createGradientColorTable=function(t){for(var i=e.DOM.createContext2D(1,256),n=i.createLinearGradient(0,0,1,256),r=1/(t.length-1),o=0,a=t.length;o<a;++o)n.addColorStop(o*r,t[o]);return i.fillStyle=n,i.fillRect(0,0,1,256),i.getImageData(0,0,1,256).data},i.prototype.createCircle=function(){var t=this._radius,i=this._blur,n=t+i+1,r=2*n,o=e.DOM.createContext2D(r,r);o.shadowOffsetX=o.shadowOffsetY=this._shadow,o.shadowBlur=i,o.shadowColor="#000",o.beginPath();var a=n-this._shadow;return o.arc(a,a,t,0,2*Math.PI,!0),o.fill(),o.canvas},i.prototype.requestImage=function(t,i,n){var r=e.DOM.createContext2D(this.tileWidth,this.tileHeight),o=r.canvas,a=this._circleImage,s=a.width/2,c=a.height/2,u=new e.Position,l=new e.Rectangle(this.tilingScheme.tileXYToRectangle(t,i,n)),h=l.width,p=l.height,f=l.clone();f.inflate(l.width/2,l.height/2);for(var m=0;m<this._data.length;++m){var y=this._data[m];if(u.set(y.x,y.y),f.contains(u)){var d=(y.x-l.minx)/h*o.width,g=(l.maxy-y.y)/p*o.height;r.globalAlpha=y.v*this._weightScale,r.drawImage(a,d-s,g-c)}}for(var C,_=r.getImageData(0,0,o.width,o.height),b=_.data,v=(m=0,b.length);m<v;m+=4)(C=4*b[m+3])&&(b[m]=this._colorTable[C],b[m+1]=this._colorTable[C+1],b[m+2]=this._colorTable[C+2]);return r.putImageData(_,0,0),o},i.DEFAULT_GRADIENT=["#00f","#0ff","#0f0","#ff0","#f00"],i}(e.AbstractImageProvider),i=function(){function e(){}return e.prototype.createProvider=function(e){return new t(e)},e}();e.Providers.ImageProviders.regFactory("Heatmap",new i)}(Cegore||(Cegore={})),function(e){var t=function(){function t(){}return t.LoadModel=function(t,i,n,r){var o=new e.Position(r.offset),a=n.pos.split(",");a[0]=parseFloat(a[0])+o.x,a[1]=parseFloat(a[1])+o.y,a[2]=parseFloat(a[2])+o.z,t=t+"/model?style=glb&id="+encodeURIComponent(n.model);var s=new e.GltfModel({name:n.name,uri:t,position:a,minPixelSize:10});i.add(s)},t.LoadFromPubModel=function(i,n,r){var o=new e.ModelGroup({name:i});return e.LoadWithXhr.loadJSON({url:n+"/model?filter=detail",success:function(e){for(var i=0;i<e.items.length;++i)t.LoadModel(n,o,e.items[i],r)}}),o},t}();e.ZMapModelLoader=t}(Cegore||(Cegore={}));