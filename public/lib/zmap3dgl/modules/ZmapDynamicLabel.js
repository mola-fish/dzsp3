var RealTimeMarker=function(){var t=function(t,i){this.viewer=t,this._method=i.method||"get",this._url=i.url,this._params=i.params||[],this._layer=i.layer,this._fieldX=i.fieldX||"X",this._fieldY=i.fieldY||"Y",this._fieldZ=i.fieldZ||"Z",this._fieldID=i.fieldID||"ID",this._fieldIcon=i.fieldIcon,this._fieldText=i.fieldText,this._icon=i.icon,this._color=i.color,this._fontSize=i.fontSize||24,this._rate=i.rate||5e3,this._click=i.click,this.labels=[],this._showPath=i.showPath,this._pathWidth=i.pathWidth||5,this._pathColor=i.pathColor||"red",this._count=0,this._labels={}};return t.prototype.start=function(){if(!this._loop){var t=this;this._loop=setInterval((function(){t.update()}),this._rate),this.update()}},t.prototype.update=function(){var t=this;$.ajax({url:"function"==typeof this._url?this._url(this._count++):this._url,type:this._method,data:this._params,datatype:"json",success:function(i){i.rows.forEach((function(i){t.updatePOI(i)}))}})},t.prototype.clear=function(){var t=this.viewer;this.labels&&this.labels.forEach((function(i){t.labels.remove(i.labelObj),i.path&&t._czdata.viewer.entities.remove(i.path)})),clearInterval(this._loop)},t.prototype.updatePOI=function(t){var i=this.viewer._czdata.viewer,e=t[this._fieldID],s=t[this._fieldX],l=t[this._fieldY],o=t[this._fieldZ],h=this._fieldIcon?t[this._fieldIcon]:this._icon,a=t[this._fieldText],r=this._labels[t[this._fieldID]];if(r)r.labelObj.position=[s,l,o],r.points.push(Cesium.Cartesian3.fromDegrees(s,l,o));else{r=this._labels[e]={};var n={name:e,layer:this._layer,pos:[s,l,o]};a&&(n.text={title:a,size:this._fontSize,color:this._color}),h&&(n.icon={img:h}),this._click&&(n.labelevent={onclick:this._click}),r.labelObj=this.viewer.labels.add(n),r.points=[Cesium.Cartesian3.fromDegrees(s,l,o)],this._showPath&&(r.path=i.entities.add({polyline:{positions:new Cesium.CallbackProperty((function(){return r.points}),!1),width:this._pathWidth,followSurface:!0,show:!0,material:new Cegore.Color(this._pathColor).toCZColor()}})),this.labels.push(r)}},t}();export default RealTimeMarker;