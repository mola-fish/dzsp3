var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){e.Version=103}(Cegore||(Cegore={})),function(e){var t=function(){function e(){}return e.defaultValue=function(e,t){return null!=e?e:t},e.isDefined=function(e){return null!=e},e.isNull=function(e){return null===e},e.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var i=Object.prototype.toString.call(e);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},e.isFunction=function(e){return"function"==typeof e},e.isString=function(e){return"string"==typeof e},e.isNumber=function(e){return"number"==typeof e},e.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},e.isBool=function(e){return"boolean"==typeof e},e.isArray=function(t){return"array"==e.typeOf(t)},e.isInstanceOf=function(e,t){return e instanceof t},e.freezeObject=function(t){return e._freezeObject(t)},e._freezeObject=Object.freeze?Object.freeze:function(e){return e},e}();e.TypeCheck=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(e){this._data={},this._creator=null,this._creator=e}return t.prototype.getOrCreate=function(t,i){var n=this._data[t];return e.TypeCheck.isDefined(n)?n.val:e.TypeCheck.isDefined(i)?(n={val:i},(this._data[t]=n).val):e.TypeCheck.isDefined(this._creator)?(n={val:this._creator()},(this._data[t]=n).val):void 0},t.prototype.get=function(t){var i=this._data[t];if(e.TypeCheck.isDefined(i))return i.val},t.prototype.put=function(e,t){this._data[e]={val:t}},t.prototype.key=function(e){for(var t in this._data)if(this._data[t].val===e)return t},t.prototype.keys=function(){var e=[];for(var t in this._data)e.push(t);return e},t.prototype.exist=function(t){return e.TypeCheck.isDefined(this._data[t])},t.prototype.remove=function(e){delete this._data[e]},t.prototype.clear=function(){this._data={}},t.prototype.removeAll=function(){this.clear()},t}();e.HashMap=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(){}return t.startsWidth=function(e,t,i){var n=this.length,o=t.length;if(n<o||0==o)return!1;var r=e.substr(0,o);return i&&(r=r.toLowerCase(),t=t.toLowerCase()),r===t},t.endsWidth=function(e,t,i){var n=this.length,o=t.length;if(n<o||0==o)return!1;var r=e.substr(n-o,o);return i&&(r=r.toLowerCase(),t=t.toLowerCase()),r===t},t.parseInt=function(t,i,n){var o=parseInt(t,n);return isNaN(o)?e.TypeCheck.isDefined(i)?i:0:o},t.parseFloat=function(t,i){var n=parseFloat(t);return isNaN(n)?e.TypeCheck.isDefined(i)?i:0:n},t}();e.StringUtil=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(){}return t.indexOf=function(t,i,n){if(!e.TypeCheck.isFunction(n))throw"cmp must be function.";for(var o=0;o<i.length;++o)if(n(i[o],t))return o;return-1},t.EmptyArray=e.TypeCheck.freezeObject([]),t}();e.ArrayUtil=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(){}return t.loadWithXhr=function(e){t.onPromise(Cesium.Resource.fetch(e),e)},t.loadJSON=function(e){t.onPromise(Cesium.Resource.fetchJson(e.url),e)},t.onPromise=function(t,i){e.TypeCheck.isDefined(t)&&(e.TypeCheck.isFunction(i.success)&&t.then(i.success),e.TypeCheck.isFunction(i.error)&&t.otherwise(i.error))},t}();e.LoadWithXhr=t}(Cegore||(Cegore={})),function(e){var t=function(){function e(){}return e.createContext2D=function(e,t){var i=document.createElement("CANVAS");return e&&(i.width=e),t&&(i.height=t),i.getContext("2d")},e}();e.DOM=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(e,t){this.x=0,this.y=0,this.set(e,t)}return Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"magnitude",{get:function(){return this.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"squaredLength",{get:function(){return this.x*this.x+this.y*this.y},enumerable:!0,configurable:!0}),t.prototype.set=function(t,i){var n,o;switch(e.TypeCheck.typeOf(t)){case"number":n=t,o=i;break;case"array":n=t[0],o=t[1];break;case"object":n=t.x,o=t.y}this.x=e.StringUtil.parseFloat(n),this.y=e.StringUtil.parseFloat(o)},t.prototype.clone=function(e){return t.clone(this,e)},t.prototype.equals=function(e){return t.equals(this,e)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.prototype._asCzVector2=function(){return new Cesium.Cartesian2(this.x,this.y)},t.distance=function(e,i){return Math.sqrt(t.squaredDistance(e,i))},t.squaredDistance=function(e,t){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},t.clone=function(e,i){return t.newOrResult(e.x,e.y,i)},t.equals=function(t,i){return t===i||e.TypeCheck.isDefined(t)&&e.TypeCheck.isDefined(i)&&t.x===i.x&&t.y===i.y},t.add=function(e,i,n){return t.newOrResult(e.x+i.x,e.y+i.y,n)},t.sub=function(e,i,n){return t.newOrResult(e.x-i.x,e.y-i.y,n)},t.mul=function(i,n,o){if(e.TypeCheck.isNumber(n))return t.newOrResult(i.x*n,i.y*n,o);if(e.TypeCheck.isInstanceOf(n,t))return t.newOrResult(i.x*n.x,i.y*n.y,o);throw"unknown param right."},t.div=function(i,n,o){if(e.TypeCheck.isNumber(n))return t.newOrResult(i.x/n,i.y/n,o);if(e.TypeCheck.isInstanceOf(n,t))return t.newOrResult(i.x/n.x,i.y/n.y,o);throw"unknown param right."},t.negate=function(e,i){return t.newOrResult(-e.x,-e.y,i)},t.dot=function(e,t){return e.x*t.x+e.y*t.y},t.cross=function(e,i,n){return t.newOrResult(-i.y,i.x,n)},t.normalize=function(e,i){var n=e.length,o=e.x,r=e.y;return 1e-8<n&&(o*=n=1/n,r*=n),t.newOrResult(o,r,i)},t.middle=function(e,i,n){return t.newOrResult(.5*(e.x+i.x),.5*(e.y+i.y),n)},t.floor=function(e,i,n){var o=e.x<i.x?e.x:i.x,r=e.y<i.y?e.y:i.y;return t.newOrResult(o,r,n)},t.ceil=function(e,i,n){var o=e.x>i.x?e.x:i.x,r=e.y>i.y?e.y:i.y;return t.newOrResult(o,r,n)},t.lerp=function(i,n,o,r){return o=e.GeoMath.clamp(o,0,1),t.mul(i,1-o,t._LerpStart),t.mul(n,o,t._LerpEnd),t.add(t._LerpStart,t._LerpEnd,r)},t.angle=function(i,n){return t.normalize(i,t._AngleStart),t.normalize(n,t._AngleEnd),e.GeoMath.acosClamped(t.dot(t._AngleStart,t._AngleEnd))},t.newOrResult=function(i,n,o){return e.TypeCheck.isInstanceOf(o,t)?(o.x=i,o.y=n,o):new t(i,n)},t._LerpStart=new t,t._LerpEnd=new t,t.ZERO=e.TypeCheck.freezeObject(new t(0,0)),t.UNIT=e.TypeCheck.freezeObject(new t(1,1)),t.UNIT_X=e.TypeCheck.freezeObject(new t(1,0)),t.UNIT_Y=e.TypeCheck.freezeObject(new t(0,1)),t}();e.Vector2=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(e,t,i){this.x=0,this.y=0,this.z=0,this.set(e,t,i)}return Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"magnitude",{get:function(){return this.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"squaredLength",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z},enumerable:!0,configurable:!0}),t.prototype.set=function(t,i,n){var o,r,s;switch(e.TypeCheck.typeOf(t)){case"number":o=t,r=i,s=n;break;case"array":o=t[0],r=t[1],s=t[2];break;case"object":o=t.x,r=t.y,s=t.z}this.x=e.StringUtil.parseFloat(o),this.y=e.StringUtil.parseFloat(r),this.z=e.StringUtil.parseFloat(s)},t.prototype.clone=function(e){return t.clone(this,e)},t.prototype.equals=function(e){return t.equals(this,e)},t.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+")"},t.prototype._asCzVector3=function(){return new Cesium.Cartesian3(this.x,this.y,this.z)},t.distance=function(e,i){return Math.sqrt(t.squaredDistance(e,i))},t.squaredDistance=function(e,t){var i=e.x-t.x,n=e.y-t.y,o=e.z-t.z;return i*i+n*n+o*o},t.clone=function(e,i){return t.newOrResult(e.x,e.y,e.z,i)},t.equals=function(t,i){return t===i||e.TypeCheck.isDefined(t)&&e.TypeCheck.isDefined(i)&&t.x===i.x&&t.y===i.y&&t.z===i.z},t.add=function(e,i,n){return t.newOrResult(e.x+i.x,e.y+i.y,e.z+i.z,n)},t.sub=function(e,i,n){return t.newOrResult(e.x-i.x,e.y-i.y,e.z-i.z,n)},t.mul=function(i,n,o){if(e.TypeCheck.isNumber(n))return t.newOrResult(i.x*n,i.y*n,i.z*n,o);if(e.TypeCheck.isInstanceOf(n,t))return t.newOrResult(i.x*n.x,i.y*n.y,i.z*n.z,o);throw"unknown param right."},t.div=function(i,n,o){if(e.TypeCheck.isNumber(n))return t.newOrResult(i.x/n,i.y/n,i.z/n,o);if(e.TypeCheck.isInstanceOf(n,t))return t.newOrResult(i.x/n.x,i.y/n.y,i.z/n.z,o);throw"unknown param right."},t.negate=function(e,i){return t.newOrResult(-e.x,-e.y,-e.z,i)},t.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},t.cross=function(e,i,n){var o=e.y*i.z-e.z*i.y,r=e.z*i.x-e.x*i.z,s=e.x*i.y-e.y*i.x;return t.newOrResult(o,r,s,n)},t.normalize=function(e,i){var n=e.length,o=e.x,r=e.y,s=e.z;return 1e-8<n&&(o*=n=1/n,r*=n,s*=n),t.newOrResult(o,r,s,i)},t.middle=function(e,i,n){return t.newOrResult(.5*(e.x+i.x),.5*(e.y+i.y),.5*(e.z+i.z),n)},t.floor=function(e,i,n){var o=e.x<i.x?e.x:i.x,r=e.y<i.y?e.y:i.y,s=e.z<i.z?e.z:i.z;return t.newOrResult(o,r,s,n)},t.ceil=function(e,i,n){var o=e.x>i.x?e.x:i.x,r=e.y>i.y?e.y:i.y,s=e.z>i.z?e.z:i.z;return t.newOrResult(o,r,s,n)},t.lerp=function(i,n,o,r){return o=e.GeoMath.clamp(o,0,1),t.mul(i,1-o,t._LerpStart),t.mul(n,o,t._LerpEnd),t.add(t._LerpStart,t._LerpEnd,r)},t.angle=function(e,i){t.normalize(e,t._AngleStart),t.normalize(i,t._AngleEnd);var n=t.dot(t._AngleStart,t._AngleEnd),o=t.cross(t._AngleStart,t._AngleEnd,t._AngleCross).length;return Math.atan2(o,n)},t.newOrResult=function(i,n,o,r){return e.TypeCheck.isInstanceOf(r,t)?(r.x=i,r.y=n,r.z=o,r):new t(i,n,o)},t._LerpStart=new t,t._LerpEnd=new t,t.ZERO=e.TypeCheck.freezeObject(new t(0,0,0)),t.UNIT=e.TypeCheck.freezeObject(new t(1,1,1)),t.UNIT_X=e.TypeCheck.freezeObject(new t(1,0,0)),t.UNIT_Y=e.TypeCheck.freezeObject(new t(0,1,0)),t.UNIT_Z=e.TypeCheck.freezeObject(new t(0,0,1)),t}();e.Vector3=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(e,t,i){this.set(e,t,i)}return Object.defineProperty(t.prototype,"lon",{get:function(){return this._x},set:function(t){this._x=e.StringUtil.parseFloat(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lat",{get:function(){return this._y},set:function(t){this._y=e.StringUtil.parseFloat(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"altitude",{get:function(){return this._z},set:function(t){this._z=e.StringUtil.parseFloat(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.lon},set:function(e){this.lon=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.lat},set:function(e){this.lat=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this.altitude},set:function(e){this.altitude=e},enumerable:!0,configurable:!0}),t.prototype.set=function(t,i,n){var o,r,s;if(e.TypeCheck.isInstanceOf(t,Cesium.Cartographic))o=e.GeoMath.toDegree(t.longitude),r=e.GeoMath.toDegree(t.latitude),s=t.height;else switch(e.TypeCheck.typeOf(t)){case"array":o=t[0],r=t[1],s=t[2];break;case"object":o=t.x,r=t.y,s=t.z;break;case"number":case"string":o=t,r=i,s=n}this.lon=e.TypeCheck.defaultValue(o,0),this.lat=e.TypeCheck.defaultValue(r,0),this.altitude=e.TypeCheck.defaultValue(s,0)},t.from=function(i,n,o){return e.TypeCheck.isInstanceOf(i,t)?i:new t(i,n,o)},t.parsePoints=function(e){for(var t=[],i=e.split("|"),n=0;n<i.length;++n){var o=i.split(",");t.push(o[0],o[1],o[2])}return t},t}();e.Position=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t,i,n,o,r){this._minx=0,this._miny=0,this._maxx=0,this._maxy=0,this._isEmpty=!0,this._isGeographical=!0;var s=e.TypeCheck.typeOf(t);if("number"===s);else if("array"===s){var a=t;r=i,t=a[0],i=a[1],n=a[2],o=a[3]}else if(e.TypeCheck.isInstanceOf(t,Cesium.Rectangle)){var l=t;t=e.GeoMath.toDegree(l.west),i=e.GeoMath.toDegree(l.south),n=e.GeoMath.toDegree(l.east),o=e.GeoMath.toDegree(l.north)}else if("object"===s){var u=t;r=i,e.TypeCheck.isDefined(t.minx)?(t=u.minx,i=u.miny,n=u.maxx,o=u.maxy):e.TypeCheck.isDefined(t.west)?(t=u.west,i=u.south,n=u.east,o=u.north):e.TypeCheck.isDefined(t.left)&&(t=u.left,i=u.bottom,n=u.right,o=u.top)}else{if("boolean"!==s)return;r=t}this._minx=e.TypeCheck.defaultValue(t,0),this._miny=e.TypeCheck.defaultValue(i,0),this._maxx=e.TypeCheck.defaultValue(n,0),this._maxy=e.TypeCheck.defaultValue(o,0),this._isGeographical=e.TypeCheck.defaultValue(r,!0),this._isEmpty=!1}return Object.defineProperty(t.prototype,"minx",{get:function(){return this._isEmpty?0:this._minx},set:function(e){this._minx=this._isGeographical?t.normalizeLongitude(e):e,this._isEmpty=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxx",{get:function(){return this._isEmpty?0:this._maxx},set:function(e){this._maxx=this._isGeographical?t.normalizeLongitude(e):e,this._isEmpty=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"miny",{get:function(){return this._isEmpty?0:this._miny},set:function(e){this._miny=this._isGeographical?t.normalizeLatitude(e):e,this._isEmpty=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxy",{get:function(){return this._isEmpty?0:this._maxy},set:function(e){this._maxy=this._isGeographical?t.normalizeLatitude(e):e,this._isEmpty=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._isEmpty},set:function(e){this._isEmpty=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGeographical",{get:function(){return this._isGeographical},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.maxx-this.minx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.maxy-this.miny},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"west",{get:function(){return this.minx},set:function(e){this.minx=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"east",{get:function(){return this.maxx},set:function(e){this.maxx=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"south",{get:function(){return this.miny},set:function(e){this.miny=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"north",{get:function(){return this.maxy},set:function(e){this.maxy=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.minx},set:function(e){this.minx=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.maxx},set:function(e){this.maxx=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.miny},set:function(e){this.miny=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.maxy},set:function(e){this.maxy=e},enumerable:!0,configurable:!0}),t.prototype.center=function(t){if(e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position),this._isGeographical){var i=this.minx,n=this.maxx;n<i&&(n+=360),t.x=e.GeoMath.stdAngle((n+i)/2)}else t.x=(this.minx+this.maxx)/2;return t.y=(this.miny+this.maxy)/2,t},t.prototype.min=function(t){return e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position),t.x=this.minx,t.y=this.miny,t},t.prototype.max=function(t){return e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position),t.x=this.maxx,t.y=this.maxy,t},t.prototype.leftBottom=function(e){return this.min(e)},t.prototype.leftTop=function(t){return e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position),t.x=this.minx,t.y=this.maxy,t},t.prototype.rightTop=function(e){return this.max(e)},t.prototype.rightBottom=function(t){return e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position),t.x=this.maxx,t.y=this.miny,t},t.prototype.southWest=function(e){return this.leftBottom(e)},t.prototype.southEast=function(e){return this.rightBottom(e)},t.prototype.northWest=function(e){return this.leftTop(e)},t.prototype.northEast=function(e){return this.rightTop(e)},t.prototype.inflate=function(t,i){if(e.TypeCheck.isNumber(t))e.TypeCheck.isNumber(i)||(i=t);else if(e.TypeCheck.isInstanceOf(t,e.Vector2))t=(n=t).x,i=n.y;else if(e.TypeCheck.isInstanceOf(t,e.Position)){var n;t=(n=t).x,i=n.y}this.minx-=t,this.maxx+=t,this.miny-=i,this.maxy+=i},t.prototype.merge=function(i,n){if(e.TypeCheck.isArray(i))for(var o=0;o<i.length;++o)this.merge(i[o]);else{if(e.TypeCheck.isNumber(i)){var r=i,s=n;return this.empty?(this.minx=this.maxx=r,this.miny=this.maxy=s,void(this.empty=!1)):(this._isGeographical?((l=e.GeoMath.innerAngle(r,this.minx))<=(u=e.GeoMath.innerAngle(r,this.maxx))&&r<this.minx&&(this.minx=r),u<=l&&r>this.maxx&&(this.maxx=r)):(r<this.minx&&(this.minx=r),r>this.maxx&&(this.maxx=r)),s<this.miny&&(this.miny=s),void(s>this.maxy&&(this.maxy=s)))}if(e.TypeCheck.isInstanceOf(i,e.Position))this.merge(i.x,i.y);else if(e.TypeCheck.isInstanceOf(i,t)){var a=i;if(this.empty)return this.minx=a.minx,this.miny=a.miny,this.maxx=a.maxx,this.maxy=a.maxy,void(this.empty=!1);if(this._isGeographical){var l,u,c=this.center();(l=e.GeoMath.innerAngle(c.x,this.minx))<=(u=e.GeoMath.innerAngle(c.x,this.maxx))&&a.minx<this.minx&&(this.minx=a.minx),u<=l&&a.maxx>this.maxx&&(this.maxx=a.maxx)}else a.minx<this.minx&&(this.minx=a.minx),a.maxx>this.maxx&&(this.maxx=a.maxx);return a.miny<this.miny&&(this.miny=a.miny),void(a.maxy>this.maxy&&(this.maxy=a.maxy))}}},t.prototype.asArray=function(t){return e.TypeCheck.isArray(t)||(t=[]),t[0]=this.minx,t[1]=this.miny,t[2]=this.maxx,t[3]=this.maxy,t},t.prototype.clone=function(i){return e.TypeCheck.isInstanceOf(i,t)||(i=new t),i.minx=this.minx,i.miny=this.miny,i.maxx=this.maxx,i.maxy=this.maxy,i},t.prototype.contains=function(i){if(e.TypeCheck.isInstanceOf(i,e.Position)){var n=i;if(this.isGeographical){var o=n.x,r=this.miny,s=this.maxx;if(s<r&&(s+=360),o<r&&(o+=360),o<r||s<o)return!1}else if(n.x<this.minx||n.x>this.maxx)return!1;return!(n.y<this.miny||n.y>this.maxy)}if(e.TypeCheck.isInstanceOf(i,t)){var a=i;return this.contains(a.min())&&this.contains(a.max())}throw"unknow param v, v must be a Position or Rectangle."},t.prototype.intersection=function(i,n){var o,r,s,a;if(this._isGeographical){var l=this.minx,u=this.maxx,c=i.minx,h=i.maxx;if(u<l?(h<c?c+=360:c<u&&(c+=360,h+=360),u+=360):h<c&&(l<h&&(l+=360,u+=360),h+=360),(r=u<h?u:h)<(o=c<l?l:c))return}else if(o=this.minx>i.minx?this.minx:i.minx,(r=this.maxx<i.maxx?this.maxx:i.maxx)<o)return;if(s=this.miny>i.miny?this.miny:i.miny,!((a=this.maxy<i.maxy?this.maxy:i.maxy)<s))return e.TypeCheck.isInstanceOf(n,t)||(n=new t),n.minx=o,n.maxx=r,n.miny=s,n.maxy=a,n},t.prototype.toCZRectangle=function(){return Cesium.Rectangle.fromDegrees(this._minx,this.miny,this.maxx,this.maxy)},t.normalizeLongitude=function(t){return e.GeoMath.stdAngle(t)},t.normalizeLatitude=function(t){return e.GeoMath.clamp(t,-90,90)},t}();e.Rectangle=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(e,t,i){this._heading=0,this._pitch=0,this._roll=0,this.set(e,t,i)}return Object.defineProperty(t.prototype,"heading",{get:function(){return this._heading},set:function(e){this._heading=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return this._pitch},set:function(e){this._pitch=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roll",{get:function(){return this._roll},set:function(e){this._roll=e},enumerable:!0,configurable:!0}),t.prototype.set=function(t,i,n){var o,r,s;if(e.TypeCheck.isArray(t))o=(a=t)[0],r=a[1],s=a[2];else if(e.TypeCheck.isObject(t)){var a;o=(a=t).heading,r=a.pitch,s=a.roll}else e.TypeCheck.isNumber(t)&&(o=t,r=i,s=n);this.heading=e.TypeCheck.defaultValue(o,0),this.pitch=e.TypeCheck.defaultValue(r,0),this.roll=e.TypeCheck.defaultValue(s,0)},t.prototype.setFromRadius=function(t,i,n){var o,r,s;if(e.TypeCheck.isArray(t))o=(a=t)[0],r=a[1],s=a[2];else if(e.TypeCheck.isObject(t)){var a;o=(a=t).heading,r=a.pitch,s=a.roll}else e.TypeCheck.isNumber(t)&&(o=t,r=i,s=n);this.heading=e.GeoMath.toDegree(e.TypeCheck.defaultValue(o,0)),this.pitch=e.GeoMath.toDegree(e.TypeCheck.defaultValue(r,0)),this.roll=e.GeoMath.toDegree(e.TypeCheck.defaultValue(s,0))},t}();e.HeadingPitchRoll=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(e,t,i){this.heading=0,this.pitch=0,this.distance=0,this.set(e,t,i)}return t.prototype.set=function(t,i,n){var o,r,s;switch(e.TypeCheck.typeOf(t)){case"number":o=t,r=i,s=n;break;case"array":o=t[0],r=t[1],s=t[2];break;case"object":o=t.heading,r=t.pitch,s=t.distance}this.heading=e.TypeCheck.defaultValue(o,0),this.pitch=e.TypeCheck.defaultValue(r,0),this.distance=e.TypeCheck.defaultValue(s,0)},t.prototype._asCzObject=function(t){return e.TypeCheck.isInstanceOf(t,Cesium.HeadingPitchRange)||(t=new Cesium.HeadingPitchRange),t.heading=e.GeoMath.toRadian(this.heading),t.pitch=e.GeoMath.toRadian(this.pitch),t.range=this.distance,t},t}();e.HeadingPitchDistance=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(){}return t.toRadian=function(e){return e*this._degree2radian},t.toDegree=function(e){return e*this._radian2degree},t.clamp=function(e,t,i){return e<t&&(e=t),i<e&&(e=i),e},t.acosClamped=function(e){return Math.acos(t.clamp(e,-1,1))},t.asinClamped=function(e){return Math.asin(t.clamp(e,-1,1))},t.random=function(t,i){var n=Math.random(),o=e.TypeCheck.defaultValue(t,0);return o+(e.TypeCheck.defaultValue(i,1)-o)*n},t.surfaceDistance=function(i,n,o){if(e.TypeCheck.isArray(i)){for(var r=0,s=1;s<i.length;++s)r+=t.surfaceDistance(i[s-1],i[s],o);return r}e.TypeCheck.isInstanceOf(i,e.Position)||(i=new e.Position(i)),e.TypeCheck.isInstanceOf(n,e.Position)||(n=new e.Position(n)),e.TypeCheck.isDefined(o)||(o=6378137);var a=t.toRadian(i.lat),l=t.toRadian(n.lat),u=t.toRadian(i.lon),c=t.toRadian(n.lon),h=Math.cos(a)*Math.cos(l)*Math.cos(u-c),p=Math.sin(a)*Math.sin(l),f=t.clamp(h+p,-1,1);return Math.acos(f)*o},t.innerAngle=function(e,i){e=t.stdAngle(e),i=t.stdAngle(i);var n=Math.abs(e-i);return 180<n&&(n=360-n),n},t.stdAngle=function(e){var t=e%360;return 180<t&&(t-=360),t<-180&&(t+=360),t},t.surfaceArea=function(i,n){for(var o=[],r=new e.Rectangle,s=0;s<i.length;++s)r.merge(i[s]);var a=r.min();for(s=0;s<i.length;++s){var l=new e.Position(i[s]),u=t.surfaceDistance(new e.Position(l.x,l.y),new e.Position(l.x,a.y),n),c=t.surfaceDistance(new e.Position(l.x,l.y),new e.Position(a.x,l.y),n);o.push(new e.Position(u,c))}return t.area(o)},t.area=function(e){return Math.abs(t.signedArea(e))},t.signedArea=function(e){if(null==e||e.length<3)return 0;for(var t=e.length,i=e[t-1],n=e[0],o=e[1],r=n.y*(i.x-o.x),s=1;s<t;++s)i=n,n=o,o=e[(s+1)%t],r+=n.y*(i.x-o.x);return r/2},t._degree2radian=Math.PI/180,t._radian2degree=180/Math.PI,t}();e.GeoMath=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t,i){this._begin=t,this._end=i,this._interp=new e.Vector2}return t.prototype.interp=function(t){return e.Vector2.lerp(this._begin,this._end,t,this._interp)},t}(),i=function(){function e(e,i){this._segments=[];for(var n=e.length<i.length?e.length:i.length,o=0;o<n;++o)this._segments[o]=new t(e[o],i[o]);this._interp=[]}return e.prototype.interp=function(e){for(var t=0;t<this._segments.length;++t)this._interp[t]=this._segments[t].interp(e);return this._interp},e}(),n=function(){function t(t){for(var n=t.lines.slice(),o=0;o<n.length;++o)for(var r=n[o],s=0;s<r.length;++s)e.TypeCheck.isInstanceOf(r[s],e.Vector2)||(r[s]=new e.Vector2(r[s]));for(this._bridges=[],o=1;o<n.length;++o){var a=n[o-1],l=n[o];this._bridges.push(new i(a,l))}}return t.prototype.interp=function(t){var i,n,o=(t=e.GeoMath.clamp(t,0,1))*this._bridges.length;return n=1==t?(i=this._bridges.length-1,1):o-(i=Math.floor(o)),this._bridges[i].interp(n)},t}();e.MultiLineInterp=n}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){var i=e.TypeCheck.defaultValue(t.width,512),n=e.TypeCheck.defaultValue(t.height,512);this._ctx=this.createCanvasContext2D(t.canvas,i,n),this._canvas=this._ctx.canvas}return Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._canvas.height},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._ctx.clearRect(0,0,this.width,this.height)},t.prototype.calcRect=function(t){e.TypeCheck.isDefined(this._rect)?this._rect.empty=!0:this._rect=new e.Rectangle,function t(i,n){for(var o=0;o<i.length;++o){var r=i[o];e.TypeCheck.isInstanceOf(r,e.Vector2)?n.merge(r.x,r.y):e.TypeCheck.isNumber(r[0])?(i[o]=new e.Vector2(r),n.merge(r[0],r[1])):t(r,n)}}(t,this._rect),this._geoWidth=this._rect.width,this._getHeight=this._rect.height},t.prototype.convertX=function(e){return(e-this._rect.minx)/this._geoWidth*this.width},t.prototype.convertY=function(e){return(this._rect.maxy-e)/this._getHeight*this.height},t.prototype.createCanvasContext2D=function(t,i,n){var o;return e.TypeCheck.isDefined(t)&&(e.TypeCheck.isString(t)?o=document.getElementById(t):e.TypeCheck.isInstanceOf(t,HTMLCanvasElement)&&(o=t)),o||(o=document.createElement("CANVAS")),i&&(o.width=i),n&&(o.height=n),o.getContext("2d")},t}();e.CanvasDraw=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(i,n){var o=t.call(this,n)||this;return o.calcRect(i),o._interp=new e.MultiLineInterp({lines:i}),o}return __extends(i,t),i.prototype.draw=function(e){var t=this.context;t.fillStyle="#FF0000";var i=this._interp.interp(e);this.clear(),t.beginPath(),t.moveTo(this.convertX(i[0].x),this.convertY(i[0].y));for(var n=1;n<i.length;++n)t.lineTo(this.convertX(i[n].x),this.convertY(i[n].y));t.closePath(),t.fill()},i}(e.CanvasDraw);e.PolygonMask=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(e,i){var n=t.call(this,i)||this;return n._fill=!0,n._ctx1=n.createCanvasContext2D(null,n.width,n.height),n._canvas1=n._ctx1.canvas,n._ctx2=n.createCanvasContext2D(null,n.width,n.height),n._canvas2=n._ctx2.canvas,n._lines=e,n.calcRect(e),n}return __extends(i,t),i.prototype.draw=function(t){this.clear(),this.context.fillStyle="#FF0000",this.context.strokeStyle="#FF0000";var i=(t=e.GeoMath.clamp(t,0,1))*(this._lines.length-1),n=Math.floor(i);n===this._lines.length-1&&n--;var o=n+1,r=i-n;this.drawLine(this._ctx1,this._lines[n]),this.drawLine(this._ctx2,this._lines[o]),this.drawMix(this._ctx1,this._ctx2,r)},i.prototype.drawLine=function(t,i){this._fill,t.fillStyle="#FFFFFF",t.strokeStyle="#FFFFFF",t.clearRect(0,0,this.width,this.height),t.beginPath();var n=this;!function i(o){if(!e.TypeCheck.isInstanceOf(o[0],e.Vector2))for(var r=0;r<o.length;++r)i(o[r]);t.moveTo(n.convertX(o[0].x),n.convertY(o[0].y));for(var s=1;s<o.length;++s)t.lineTo(n.convertX(o[s].x),n.convertY(o[s].y))}(i),this._fill?t.fill():t.stroke()},i.prototype.drawMix=function(e,t,i){for(var n=this.width,o=this.height,r=e.getImageData(0,0,n,o),s=t.getImageData(0,0,n,o),a=this.context.getImageData(0,0,n,o),l=r.data,u=s.data,c=a.data,h=n*o*4,p=0;p<h;p+=4)c[p]=255,c[p+1]=c[p+2]=0,0!=l[p+3]&&0!=u[p+3]?c[p+3]=(l[p]+u[p])/2:0!=l[p+3]?c[p+3]=(1-i)*l[p+3]:0!=u[p+3]?c[p+3]=i*u[p+3]:c[p+3]=0,c[p]=c[p+3];this.context.putImageData(a,0,0)},i}(e.CanvasDraw);e.PolylineGradual=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){this._viewer=t.viewer;var i=e.TypeCheck.defaultValue(t.textureSize,{}),n={isEquel:!1,isSimple:!0},o=t.lines.slice();!function t(i,n,o){if(0!=i.length){for(var r=!0,s=i[0].length,a=0;a<i.length;++a){var l=i[a];e.TypeCheck.isNumber(l[0])?i[a]=new e.Vector2(l):t(l,n+1,o),s!=l.length&&(r=!1)}0==n&&(o.isEquel=r),1<n&&(o.isSimple=!1)}}(o,0,n),this._polygonMask=n.isEquel&&n.isSimple?new e.PolygonMask(o,{canvas:t.canvas,width:i.width,height:i.height}):new e.PolylineGradual(o,{canvas:t.canvas,width:i.width,height:i.height}),this._material=new Cesium.Material({fabric:{type:"Water",uniforms:{specularMap:this._polygonMask.canvas,normalMap:"../../build/dep.debug/Assets/Textures/waterNormals.jpg",frequency:1e4,animationSpeed:.01,amplitude:1}}}),this._appearance=new Cesium.EllipsoidSurfaceAppearance({aboveGround:!0,faceForward:!1,material:this._material,renderState:{fog:{enabled:!0,density:.01}}}),this._geometry=new Cesium.RectangleGeometry({rectangle:this._polygonMask.rect.toCZRectangle(),vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,height:t.height,extrudedHeight:t.extrudedHeight,granularity:Math.PI/5e3}),this._primitive=t.viewer._czdata.viewer.scene.primitives.add(new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:this._geometry}),appearance:this._appearance,show:!0}))}return t.prototype.draw=function(e){this._polygonMask.draw(e);var t=this._material._textures.specularMap,i=this._polygonMask.canvas;t&&t.width==i.width&&t.height==i.height&&t.copyFrom(i)},Object.defineProperty(t.prototype,"visible",{get:function(){return!!this._primitive&&this._primitive.show},set:function(e){this._primitive&&(this._primitive.show=e)},enumerable:!0,configurable:!0}),t.prototype.remove=function(){this._viewer._czdata.viewer.scene.primitives.remove(this._primitive),this._primitive=this._primitive.destroy(),this._appearance=null,this._material=this._material.destroy(),this._geometry=null,this._polygonMask=null},t}();e.DynamicArea=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(e,t,i,n){this._r=0,this._g=0,this._b=0,this._a=0,this.set(e,t,i,n)}return t.prototype.set=function(i,n,o,r){if(e.TypeCheck.isInstanceOf(i,Cesium.Color))i=(s=i).red,n=s.green,o=s.blue,r=s.alpha;else if(e.TypeCheck.isString(i)){var s;i=(s=t.fromCssColor(i)).r,n=s.g,o=s.b,r=s.a}else if(e.TypeCheck.isArray(i)){var a=i;i=a[0],n=a[1],o=a[2],r=a[3]}else if(e.TypeCheck.isObject(i)){var l=i;i=l.r,n=l.g,o=l.b,r=l.a}this.r=i,this.g=n,this.b=o,this.a=r},Object.defineProperty(t.prototype,"red",{get:function(){return this._r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"green",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blue",{get:function(){return this._b},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"r",{get:function(){return this._r},set:function(t){this._r=e.GeoMath.clamp(e.TypeCheck.defaultValue(t,0),0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this._g},set:function(t){this._g=e.GeoMath.clamp(e.TypeCheck.defaultValue(t,0),0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this._b},set:function(t){this._b=e.GeoMath.clamp(e.TypeCheck.defaultValue(t,0),0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"a",{get:function(){return this._a},set:function(t){this._a=e.GeoMath.clamp(e.TypeCheck.defaultValue(t,0),0,1)},enumerable:!0,configurable:!0}),t.fromCssColor=function(e){return new t(Cesium.Color.fromCssColorString(e))},t.fromBytes=function(i,n,o,r,s){return e.TypeCheck.isInstanceOf(s,t)||(s=t.BLACK),s.r=i/255,s.g=n/255,s.b=o/255,s.a=r/255,s},t.fromRGBA32=function(e,i){return t.UnionUint32[0]=e,t.fromBytes(t.UnionUint8[0],t.UnionUint8[1],t.UnionUint8[2],t.UnionUint8[3],i)},t.fromRandom=function(i,n){function o(t,i,n){return e.TypeCheck.isNumber(t)?t:(i=e.TypeCheck.defaultValue(i,0),n=e.TypeCheck.defaultValue(n,1),e.GeoMath.random(i,n))}return e.TypeCheck.isInstanceOf(n,t)||(n=t.BLACK),n.r=o(i.red,i.minRed,i.maxRed),n.g=o(i.green,i.minGreen,i.maxGreen),n.b=o(i.blue,i.minBlue,i.maxBlue),n.a=o(i.alpha,i.minAlpha,i.maxAlpha),n},t.prototype.toCssColor=function(){return new Cesium.Color(this._r,this._g,this._b,this._a).toCssColorString()},t.prototype.toBytes=function(t){return e.TypeCheck.isArray(t)||(t=[]),t[0]=Math.floor(255*this._r),t[1]=Math.floor(255*this._g),t[2]=Math.floor(255*this._b),t[3]=Math.floor(255*this._a),t},t.prototype.toRGBA32=function(){var e=this.toBytes();return t.UnionUint8[0]=e[0],t.UnionUint8[1]=e[1],t.UnionUint8[2]=e[2],t.UnionUint8[3]=e[3],t.UnionUint32[0]},t.prototype.toCZColor=function(){return new Cesium.Color(this._r,this._g,this._b,this._a)},t.RED=e.TypeCheck.freezeObject(t.fromCssColor("#FF0000")),t.GREEN=e.TypeCheck.freezeObject(t.fromCssColor("#00FF00")),t.BLUE=e.TypeCheck.freezeObject(t.fromCssColor("#0000FF")),t.BLACK=e.TypeCheck.freezeObject(t.fromCssColor("#000000")),t.WHITE=e.TypeCheck.freezeObject(t.fromCssColor("#FFFFFF")),t.YELLOW=e.TypeCheck.freezeObject(t.fromCssColor("#FFFF00")),t.AUQA=e.TypeCheck.freezeObject(t.fromCssColor("#00FFFF")),t.FUCHSIA=e.TypeCheck.freezeObject(t.fromCssColor("#FF00FF")),t.GRAY=e.TypeCheck.freezeObject(t.fromCssColor("#808080")),t.ScratchArrayBuffer=new ArrayBuffer(4),t.UnionUint32=new Uint32Array(t.ScratchArrayBuffer),t.UnionUint8=new Uint8Array(t.ScratchArrayBuffer),t}();e.Color=t}(Cegore||(Cegore={})),function(e){var t=function(){},i=function(t){function i(i){var n=t.call(this)||this;return n._color=new e.Color(e.Color.WHITE),e.TypeCheck.isInstanceOf(i,e.Color)||(i=new e.Color(i)),n._czmat=new Cesium.ColorMaterialProperty(i.toCZColor()),n}return __extends(i,t),Object.defineProperty(i.prototype,"type",{get:function(){return"Color"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"czmat",{get:function(){return this._czmat},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(e){this._color.set(e),this._czmat.color=this._color.toCZColor()},enumerable:!0,configurable:!0}),i}(e.Material=t);e.ColorMaterial=i;var n=function(t){function i(i){var n=t.call(this)||this;return n._color=new e.Color(e.Color.WHITE),n._repeat=new e.Vector2(1,1),n._transparent=!1,n._czmat=new Cesium.ImageMaterialProperty,n.color=i.color,n.image=i.image,n.repeat=i.repeat,n.transparent=i.transparent,n}return __extends(i,t),Object.defineProperty(i.prototype,"type",{get:function(){return"Image"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"czmat",{get:function(){return this._czmat},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(e){this._color.set(e),this._czmat.color=this._color.toCZColor()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"image",{get:function(){return this._image},set:function(e){this._image=e,this._czmat.image=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"repeat",{get:function(){return this._repeat},set:function(e){this._repeat.set(e),this._czmat.repeat=this._repeat._asCzVector2()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"transparent",{get:function(){return this._transparent},set:function(e){this._transparent=e,this._czmat.transparent=e},enumerable:!0,configurable:!0}),i}(t);e.ImageMaterial=n}(Cegore||(Cegore={})),function(e){var t=function(){function e(e,t){this._callback=e,this._self=t}return e.equal=function(e,t){return e._callback===t._callback&&e._self===t._self},e.prototype.fire=function(e){try{this._callback.apply(this._self,e)}catch(e){console.error("fire event error.")}},e}(),i=function(){function i(){this._listeners=[]}return i.prototype.on=function(i,n){if(!e.TypeCheck.isFunction(i))throw"need param 'callback' is Function.";var o=new t(i,n);-1===e.ArrayUtil.indexOf(o,this._listeners,t.equal)&&this._listeners.push(o)},i.prototype.off=function(i,n){var o=new t(i,n),r=e.ArrayUtil.indexOf(o,this._listeners,t.equal);-1!==r&&this._listeners.splice(r)},i.prototype.fire=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0;i<this._listeners.length;++i)this._listeners[i].fire(e)},i.prototype.addEventListener=function(e,t){this.on(e,t)},i.prototype.removeEventListener=function(e,t){this.off(e,t)},i}();e.Event=i}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){if(this._events=new e.HashMap((function(){return new e.Event})),e.TypeCheck.isArray(t))for(var i=0;i<t.length;++i){var n=t[i];e.TypeCheck.isString(n.type)&&e.TypeCheck.isFunction(n.callback)&&this.on(n.type,n.callback,n.self)}else if(e.TypeCheck.isObject(t))for(var o in t){var r=t[o];e.TypeCheck.isFunction(r)&&this.on(o,r)}}return t.prototype.on=function(t,i,n){if(!e.TypeCheck.isString(t))throw"need param 'type' is string.";if(!e.TypeCheck.isFunction(i))throw"need param 'callback' is Function.";this._events.getOrCreate(t).on(i,n)},t.prototype.off=function(t,i,n){var o=this._events.get(t);e.TypeCheck.isDefined(o)&&o.off(i,n)},t.prototype.fire=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=this._events.get(t);e.TypeCheck.isDefined(o)&&o.fire.apply(o,i)},t}();e.EventHandle=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(){}return t.genName=function(i,n){return e.TypeCheck.isDefined(i)?i:e.TypeCheck.isDefined(n)?n+"-"+t.NextIndex++:"AutoName-"+t.NextIndex++},t.NextIndex=0,t}();e.AutoNames=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){var i=this;this._onTick=new e.Event,this._czClock=t._czdata.viewer.clock,this._czClock.onTick.addEventListener((function(){i._onTick.fire(i)}))}return Object.defineProperty(t.prototype,"onTick",{get:function(){return this._onTick},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return Cesium.JulianDate.toDate(this._czClock.currentTime)},set:function(e){this._czClock.currentTime=Cesium.JulianDate.fromDate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return Cesium.JulianDate.toDate(this._czClock.startTime)},set:function(e){this._czClock.startTime=Cesium.JulianDate.fromDate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stopTime",{get:function(){return Cesium.JulianDate.toDate(this._czClock.stopTime)},set:function(e){this._czClock.stopTime=Cesium.JulianDate.fromDate(e)},enumerable:!0,configurable:!0}),t}();e.Clock=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){var i=this;this._position=new e.Position,this._orientation=new e.HeadingPitchRoll,this._eventChanged=new e.Event,this._eventMoveStart=new e.Event,this._eventMoveEnd=new e.Event,this._viewer=t,this._czData=t._czdata,this._czCamera=this._czData.camera,this._czCamera.changed.addEventListener((function(){i._eventChanged.fire(i)})),this._czCamera.moveStart.addEventListener((function(){i._eventMoveStart.fire(i)})),this._czCamera.moveEnd.addEventListener((function(){i._eventMoveEnd.fire(i)}))}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position.set(this._czData.camera.positionCartographic),this._position},set:function(t){e.TypeCheck.isInstanceOf(t,e.Position)||(this._position.set(t),t=this._position),this.setView({position:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orientation.setFromRadius(this._czData.camera.heading,this._czData.camera.pitch,this._czData.camera.roll),this._orientation},set:function(t){e.TypeCheck.isInstanceOf(t,e.HeadingPitchRoll)||(this._orientation.set(t),t=this._orientation),this.setView({orientation:t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changed",{get:function(){return this._eventChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"moveStart",{get:function(){return this._eventMoveStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"moveEnd",{get:function(){return this._eventMoveEnd},enumerable:!0,configurable:!0}),t.prototype.flyTo=function(t){var i,n;if(e.TypeCheck.isDefined(t.position))i=this.fromPosition(t.position);else{if(!e.TypeCheck.isDefined(t.rect))throw"position or rect is need.";i=this.fromRectange(t.rect)}return e.TypeCheck.isDefined(t.orientation)&&(n=this.fromOrientation(t.orientation)),this._czCamera.flyTo({destination:i,orientation:n,duration:t.duration,complete:t.complete,cancel:t.cancel,endTransform:Cesium.Matrix4.IDENTITY})},t.prototype.flyToSphere=function(t){var i=t.center,n=t.offset;e.TypeCheck.isInstanceOf(i,e.Position)||(i=new e.Position(i)),e.TypeCheck.isInstanceOf(n,e.HeadingPitchDistance)||(n=new e.HeadingPitchDistance(n));var o,r=new Cesium.BoundingSphere(this.fromPosition(i),t.radius);e.TypeCheck.isDefined(t.offset)&&(o=n._asCzObject()),this._czCamera.flyToBoundingSphere(r,{offset:o,duration:t.duration,complete:t.complete,cancel:t.cancel,endTransform:Cesium.Matrix4.IDENTITY})},t.prototype.stopFly=function(){this._czData.camera.cancelFlight()},t.prototype.setView=function(t){var i,n;if(e.TypeCheck.isDefined(t.position))i=this.fromPosition(t.position);else{if(!e.TypeCheck.isDefined(t.rect))throw"position or rect is need.";i=this.fromRectange(t.rect)}return e.TypeCheck.isDefined(t.orientation)&&(n=this.fromOrientation(t.orientation)),this._czData.camera.setView({destination:i,orientation:n,endTransform:Cesium.Matrix4.IDENTITY})},t.prototype.getView=function(){return{position:this.position,orientation:this.orientation}},t.prototype.lookAt=function(t,i){e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position(t)),e.TypeCheck.isInstanceOf(i,e.HeadingPitchDistance)||(i=new e.HeadingPitchDistance(i)),this._czCamera.lookAt(this.fromPosition(t),i._asCzObject())},t.prototype.lookAtFromTo=function(t,i){e.TypeCheck.isInstanceOf(i,e.Position)||(i=new e.Position(i)),e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position(t));var n=this.fromPosition(t),o=this.fromPosition(i),r=Cesium.Cartesian3.subtract(n,o,n);this._czCamera.lookAt(o,r)},t.prototype.clearLookAt=function(){this._czCamera.lookAtTransform(Cesium.Matrix4.IDENTITY)},t.prototype.fromRectange=function(t){return e.TypeCheck.isInstanceOf(t,e.Rectangle)||(t=new e.Rectangle(t)),Cesium.Rectangle.fromDegrees(t.minx,t.miny,t.maxx,t.maxy)},t.prototype.fromPosition=function(t){return e.TypeCheck.isInstanceOf(t,e.Position)||(t=new e.Position(t)),Cesium.Cartesian3.fromDegrees(t.x,t.y,t.z,this._czData.ellipsoid)},t.prototype.fromOrientation=function(t){return e.TypeCheck.isInstanceOf(t,e.HeadingPitchRoll)||(t=new e.HeadingPitchRoll(t)),{heading:e.GeoMath.toRadian(t.heading),pitch:e.GeoMath.toRadian(t.pitch),roll:e.GeoMath.toRadian(t.roll)}},t}();e.Camera=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(){this._position=new e.Position,this._orientation=new e.HeadingPitchRoll}return t.applyProps=function(t,i,n){for(var o=0;o<i.length;++o){var r=n[i[o]];e.TypeCheck.isDefined(r)&&(t[i[o]]=r)}},t.prototype.applyProps=function(e){t.applyProps(this,t.RenderablePropList,e)},Object.defineProperty(t.prototype,"id",{get:function(){return this._czRenderable.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._czRenderable.show},set:function(e){this._czRenderable.show=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this._position.set(e),this.applyPose()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orientation},set:function(e){this._orientation.set(e),this.applyPose()},enumerable:!0,configurable:!0}),t.prototype.applyPose=function(){var e=new Cesium.Cartesian3.fromDegrees(this._position.lon,this._position.lat,this._position.altitude),t=new Cesium.HeadingPitchRoll(Cesium.Math.toRadians(this._orientation.heading),Cesium.Math.toRadians(this._orientation.pitch),Cesium.Math.toRadians(this._orientation.roll)),i=Cesium.Transforms.headingPitchRollQuaternion(e,t);this._czRenderable.position=e,this._czRenderable.orientation=i},t.RenderablePropList=["visible","position","orientation"],t}();e.Renderable=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){this.mFactories=new e.HashMap,this.mDefaultFac=t}return t.prototype.regFactory=function(e,t){this.mFactories.put(e,t)},t.prototype.unregFactory=function(e){this.mFactories.remove(e)},t.prototype.createProvider=function(t,i){t=e.TypeCheck.defaultValue(t,this.mDefaultFac);var n=this.mFactories.get(t);if(n)return n.createProvider(i)},t}();e.ProviderCollection=t;var i=function(){function e(){}return e.TerrainProviders=new t("ZMapTerrain"),e.ImageProviders=new t("ZMapImage"),e}();e.Providers=i}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){if(!e.TypeCheck.isObject(t))throw"Invalid iamge info";var i=this.createProvider(t);if(!e.TypeCheck.isDefined(i))throw'Can not create image layer by type : "'+t.type+'"';this._name=e.AutoNames.genName(t.name,"ImageLayer"),this._type=t.type,this._czLayer=new Cesium.ImageryLayer(i),(this._czLayer._ZMapLayer=this).visible=e.TypeCheck.defaultValue(t.visible,!0),this.alpha=e.TypeCheck.defaultValue(t.alpha,1)}return Object.defineProperty(t.prototype,"_czlayer",{get:function(){return this._czLayer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e,this._czLayer.show=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){this._alpha=e,this._czLayer.alpha=e},enumerable:!0,configurable:!0}),t.prototype.createProvider=function(t){var i={};for(var n in t)this.hasOwnProperty(n)||(i[n]=t[n]);return e.Providers.ImageProviders.createProvider(t.type,i)},t}();e.ImageLayer=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){this._layers=new e.HashMap,this._globe=t,this._czLayers=this._globe._czglobe.imageryLayers}return Object.defineProperty(t.prototype,"length",{get:function(){return this._czLayers.length},enumerable:!0,configurable:!0}),t.prototype.add=function(t,i){if(e.TypeCheck.isInstanceOf(t,e.ImageLayer)||(t=new e.ImageLayer(t)),this._layers.exist(t.name))throw"image layer named :"+t.name+" allready exist.";this._czLayers.add(t._czlayer,i),this._layers.put(t.name,t)},t.prototype.get=function(t){if(e.TypeCheck.isNumber(t)){var i=this._czLayers.get(t);if(i)return i._ZMapLayer}else if(e.TypeCheck.isString(t))return this._layers.get(t);throw"id must be string or number"},t.prototype.remove=function(t){if(e.TypeCheck.isNumber(t)||e.TypeCheck.isString(t))this.remove(this.get(t));else if(e.TypeCheck.isInstanceOf(t,e.ImageLayer)){var i=t;this._czLayers.remove(i._czlayer),this._layers.remove(t.name)}throw"id must be string or number or ImageLayer"},t.prototype.removeAll=function(){this._czLayers.removeAll(),this._layers.removeAll()},t.prototype.clear=function(){this.removeAll()},t}();e.ImageLayerCollection=t}(Cegore||(Cegore={})),function(e){var t,i=function(){function t(t){this._scene=t,this._czData=t._czdata,this._czGlobe=this._czData.globe,this._images=new e.ImageLayerCollection(this)}return t.prototype.setTerrain=function(e){var t=this.createProvider(e);if(null==t)throw"Invalid terrain info";this._czData.globe.terrainProvider=t},Object.defineProperty(t.prototype,"_czglobe",{get:function(){return this._czGlobe},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"images",{get:function(){return this._images},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseColor",{get:function(){return new e.Color(this._czGlobe.baseColor)},set:function(t){e.TypeCheck.isInstanceOf(t,e.Color)||(t=new e.Color(t)),this._czGlobe.baseColor=t.toCZColor()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableDepthTest",{get:function(){return this._czGlobe.depthTestAgainstTerrain},set:function(e){this._czGlobe.depthTestAgainstTerrain=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableLighting",{get:function(){return this._czGlobe.enableLighting},set:function(e){this._czGlobe.enableLighting=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableWaterEffect",{get:function(){return this._czGlobe.showWaterEffect},set:function(e){this._czGlobe.showWaterEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileCacheSize",{get:function(){return this._czGlobe.tileCacheSize},set:function(e){this._czGlobe.tileCacheSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileLoadProgress",{get:function(){var t=this;return e.TypeCheck.isDefined(this._tileLoadProgress)||(this._tileLoadProgress=new e.Event,this._czGlobe.tileLoadProgressEvent.addEventListener((function(e){t._tileLoadProgress.fire(e)}))),this._tileLoadProgress},enumerable:!0,configurable:!0}),t.prototype.createProvider=function(t){return e.Providers.TerrainProviders.createProvider(t.type,t)},t}();e.Globe=i,t=new Cesium.Cartesian3,Cesium.EllipsoidalOccluder.prototype.isScaledSpacePointVisibleOld=Cesium.EllipsoidalOccluder.prototype.isScaledSpacePointVisible,Cesium.EllipsoidalOccluder.prototype.isScaledSpacePointVisible=function(e){return Cesium.Cartesian3.multiplyByScalar(e,1.001,t),this.isScaledSpacePointVisibleOld(t)}}(Cegore||(Cegore={})),function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.applyProps=function(e){t.prototype.applyProps.call(this,e)},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return e.ArrayUtil.EmptyArray},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype.onAdded=function(e){this._parent=e},i.prototype.onRemoved=function(){this._parent=null},i.prototype.onAttachRoot=function(){this._parent.models._onAddModel(this)},i.prototype.onDetachRoot=function(){this._parent.models._onRemoveModel(this)},i.ModelPropList=["name"],i}(e.Renderable);e.Model=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){this._children=[],t=e.TypeCheck.defaultValue(t,{}),this._name=e.TypeCheck.defaultValue(t.name,"")}return Object.defineProperty(t.prototype,"models",{get:function(){return this._models},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLeaf",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.add=function(e){e.parent!==this&&(e.parent&&e.parent.remove(e),this._children.push(e),e.onAdded(this),this._models&&e.onAttachRoot())},t.prototype.remove=function(e){if(e.parent===this){var t=this._children.indexOf(e);this._children.splice(t),e.onDetachRoot(),e.onRemoved()}},t.prototype.removeAll=function(){for(var e=0;e<this._children.length;++e)this._children[e].onDetachRoot(),this._children[e].onRemoved();this._children=[]},t.prototype.setModelCollection=function(e){this._models=e},t.prototype.onAdded=function(e){this._parent=e,this._models=e._models,this._models&&this.onAttachRoot()},t.prototype.onRemoved=function(){this._models&&this.onDetachRoot(),this._parent=null,this._models=null},t.prototype.onAttachRoot=function(){for(var e=0;e<this._children.length;++e)this._children[e].onAttachRoot()},t.prototype.onDetachRoot=function(){for(var e=0;e<this._children.length;++e)this._children[e].onDetachRoot()},t.getAllModels=function(i,n){for(var o=0;o<i.children.length;++o){var r=i.children[o];e.TypeCheck.isInstanceOf(r,t)?t.getAllModels(r,n):n.push(r)}return n},t}();e.ModelGroup=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){this._models=new e.HashMap,this._czData=t._czdata,this._DataSource=new Cesium.CustomDataSource("ModelCollection"),this._czData.viewer.dataSources.add(this._DataSource),this._entities=this._DataSource.entities,this._root=new e.ModelGroup({name:""}),this._root.setModelCollection(this)}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.add=function(e){this._root.add(e)},t.prototype.remove=function(e){this._root.remove(e)},t.prototype._onAddModel=function(e){this._models.put(e.id,e),this._entities.add(e._czRenderable)},t.prototype._onRemoveModel=function(e){this._models.remove(e.id),this._entities.remove(e._czRenderable)},t}();e.ModelCollection=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(i){var n=t.call(this)||this;return n._enablePcik=!0,n._color=new e.Color(e.Color.WHITE),n._outlineColor=new e.Color(e.Color.BLACK),n._outlineSize=0,n._czEntity=new Cesium.Entity,n._czModel=new Cesium.ModelGraphics,n._czEntity.model=n._czModel,n.applyProps(i),n}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.GltfModelPropList,n)},Object.defineProperty(i.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return"GltfModel"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"uri",{get:function(){return this._uri},set:function(e){this._uri=e,this._czModel.uri=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enablePick",{get:function(){return this._enablePcik},set:function(e){this._enablePcik=e,this._czModel.allowPicking=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minPixelSize",{get:function(){return this._minPixelSize},set:function(e){this._minPixelSize=e,this._czModel.minimumPixelSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(e){this._color.set(e),this._czModel.color=this._color.toCZColor()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"outlineColor",{get:function(){return this._outlineColor},set:function(e){this._outlineColor.set(e),this._czModel.silhouetteColor=this._outlineColor.toCZColor()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"outlineSize",{get:function(){return this._outlineSize},set:function(e){this._outlineSize=e,this._czModel.silhouetteSize=e},enumerable:!0,configurable:!0}),i.GltfModelPropList=["uri","enablePick","minPixelSize","color","outlineColor","outlineSize"],i}(e.Model);e.GltfModel=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(){var i=t.call(this)||this;return i._fill=!0,i._outline=!1,i._outlineColor=new e.Color(e.Color.BLACK),i._outlineWidth=1,i._shadows=e.ShadowMode.DISABLED,i}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.ShapePropList,n)},Object.defineProperty(i.prototype,"fill",{get:function(){return this._fill},set:function(e){this._fill=e,this._czShape.fill=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"material",{get:function(){return this._material},set:function(t){var i=t;e.TypeCheck.isInstanceOf(i,e.Material)?this._material=i:e.TypeCheck.isInstanceOf(i,e.Color)?this._material=new e.ColorMaterial(i):e.TypeCheck.isString(i)||e.TypeCheck.isInstanceOf(i,HTMLImageElement)||e.TypeCheck.isInstanceOf(i,HTMLCanvasElement)||e.TypeCheck.isInstanceOf(i,HTMLVideoElement)?this._material=new e.ImageMaterial({image:i}):e.TypeCheck.isObject(i)&&(this._material=new e.ImageMaterial(i)),this._czShape.material=this._material.czmat},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"outline",{get:function(){return this._outline},set:function(e){this._outline=e,this._czShape.outline=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"outlineColor",{get:function(){return new e.Color(this._czShape.outlineColor)},set:function(e){this._outlineColor.set(e),this._czShape.outlineColor=this._outlineColor.toCZColor()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"outlineWidth",{get:function(){return this._czShape.outlineWidth},set:function(e){this._outlineWidth=e,this._czShape.outlineWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shadows",{get:function(){return this._czShape.shadows},set:function(e){this._shadows=e,this._czShape.shadows=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayDistance",{get:function(){return this._displayDistance},set:function(e){this._displayDistance=e,this._czShape.distanceDisplayCondition=e},enumerable:!0,configurable:!0}),i.ShapePropList=["material","fill","outline","outlineColor","outlineWidth","shadows","displayDistance"],i}(e.Model);e.Shape=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(e){return t.call(this)||this}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.ShapeExtrudedPropList,n)},Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._czShape.height=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"extrudedHeight",{get:function(){return this._extrudedHeight},set:function(e){this._extrudedHeight=e,this._czShape.extrudedHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this._czShape.rotation=e.GeoMath.toRadian(t)},enumerable:!0,configurable:!0}),i.ShapeExtrudedPropList=["height","extrudedHeight","rotation"],i}(e.Shape);e.ShapeExtruded=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(i){var n=t.call(this)||this;return n._dimensions=new e.Vector3,n._czEntity=new Cesium.Entity,n._czBox=new Cesium.BoxGraphics,n._czEntity.box=n._czBox,n.applyProps(i),n}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.BoxPropList,n)},Object.defineProperty(i.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_czShape",{get:function(){return this._czBox},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return"BoxModel"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dimensions",{get:function(){return this._dimensions},set:function(e){this._dimensions.set(e),this._czBox.dimensions=this._dimensions._asCzVector3()},enumerable:!0,configurable:!0}),i.BoxPropList=["dimensions"],i}(e.Shape);e.BoxModel=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(e){var i=t.call(this)||this;return i._czEntity=new Cesium.Entity,i._czCylinder=new Cesium.CylinderGraphics,i._czEntity.cylinder=i._czCylinder,i.applyProps(e),i}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.CylinderPropList,n)},Object.defineProperty(i.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_czShape",{get:function(){return this._czCylinder},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return"CylinderModel"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this._length},set:function(e){this._length=e,this._czCylinder.length=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topRadius",{get:function(){return this._topRadius},set:function(e){this._topRadius=e,this._czCylinder.topRadius=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottomRadius",{get:function(){return this._bottomRadius},set:function(e){this._bottomRadius=e,this._czCylinder.bottomRadius=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slices",{get:function(){return this._slices},set:function(e){this._slices=e,this._czCylinder.slices=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalLines",{get:function(){return this._verticalLines},set:function(e){this._verticalLines=e,this._czCylinder.numberOfVerticalLines=e},enumerable:!0,configurable:!0}),i.CylinderPropList=["length","topRadius","bottomRadius","slices","verticalLines"],i}(e.Shape);e.CylinderModel=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(e){var i=t.call(this)||this;return i._czEntity=new Cesium.Entity,i._czEllipse=new Cesium.EllipseGraphics,i._czEntity.ellipse=i._czEllipse,i.applyProps(e),i}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.EllipsePropList,n)},Object.defineProperty(i.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_czShape",{get:function(){return this._czEllipse},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return"EllipseModel"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"semiMajorAxis",{get:function(){return this._semiMajorAxis},set:function(e){this._semiMajorAxis=e,this._czEllipse.semiMajorAxis=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"semiMinorAxis",{get:function(){return this._semiMinorAxis},set:function(e){this._semiMinorAxis=e,this._czEllipse.semiMinorAxis=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slices",{get:function(){return this._slices},set:function(e){this._slices=e,this._czEllipse.granularity=Math.PI/4/e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalLines",{get:function(){return this._verticalLines},set:function(e){this._verticalLines=e,this._czEllipse.numberOfVerticalLines=e},enumerable:!0,configurable:!0}),i.EllipsePropList=["semiMajorAxis","semiMinorAxis","slices","verticalLines"],i}(e.ShapeExtruded);e.EllipseModel=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(e){var i=t.call(this)||this;return i._czEntity=new Cesium.Entity,i._czEllipsoid=new Cesium.EllipsoidGraphics,i._czEntity.ellipsoid=i._czEllipsoid,i.applyProps(e),i}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.EllipsoidPropList,n)},Object.defineProperty(i.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_czShape",{get:function(){return this._czEllipsoid},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return"EllipsoidModel"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"semiMajorAxis",{get:function(){return this._semiMajorAxis},set:function(e){this._semiMajorAxis=e,this._czEllipsoid.semiMajorAxis=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"semiMinorAxis",{get:function(){return this._semiMinorAxis},set:function(e){this._semiMinorAxis=e,this._czEllipsoid.semiMinorAxis=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._czEllipsoid.height=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"extrudedHeight",{get:function(){return this._extrudedHeight},set:function(e){this._extrudedHeight=e,this._czEllipsoid.extrudedHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this._czEllipsoid.rotation=e.GeoMath.toRadian(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slices",{get:function(){return this._slices},set:function(e){this._slices=e,this._czEllipsoid.granularity=Math.PI/4/e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalLines",{get:function(){return this._verticalLines},set:function(e){this._verticalLines=e,this._czEllipsoid.numberOfVerticalLines=e},enumerable:!0,configurable:!0}),i.EllipsoidPropList=["semiMajorAxis","semiMinorAxis","height","extrudedHeight","slices","rotation","verticalLines"],i}(e.Shape);e.EllipsoidModel=t}(Cegore||(Cegore={})),function(e){var t;!function(e){e[e.NONE=0]="NONE",e[e.GLOW=1]="GLOW",e[e.OUTLINE=2]="OUTLINE",e[e.DASH=3]="DASH",e[e.ARROW=4]="ARROW"}(t=e.PolylineStyle||(e.PolylineStyle={}));var i=function(i){function n(n){var o=i.call(this)||this;return o._dynamic=!1,o._color=new e.Color(e.Color.WHITE),o._style=t.NONE,o._outlineColor=new e.Color(e.Color.BLACK),o._outlineWidth=1,o._shadows=e.ShadowMode.DISABLED,o._czEntity=new Cesium.Entity,o._czPolyline=new Cesium.PolylineGraphics,o._czEntity.polyline=o._czPolyline,o._dynamic=e.TypeCheck.defaultValue(n.dynamic,!1),o.applyProps(n),o}return __extends(n,i),n.prototype.applyProps=function(t){i.prototype.applyProps.call(this,t),e.Renderable.applyProps(this,n.PolylinePropList,t)},Object.defineProperty(n.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_czShape",{get:function(){return this._czPolyline},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return"PolylineModel"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"positions",{get:function(){return this._positions},set:function(t){this._positions=[],this._czPositions=[];for(var i=0;i<t.length;++i){var n=new e.Position(t[i]);this._positions.push(n),this._czPositions.push(new Cesium.Cartesian3.fromDegrees(n.lon,n.lat,n.altitude))}var o=this._czPositions;this._dynamic&&!e.TypeCheck.isInstanceOf(this._czShape.positions,Cesium.CallbackProperty)?this._czShape.positions=new Cesium.CallbackProperty((function(e,t){return o}),!1):this._czShape.positions=o},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"followSurface",{get:function(){return this._followSurface},set:function(e){this._followSurface=e,this._czShape.followSuface=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(e){this._color.set(e),this._style==t.NONE?this._czShape.material=e.toCZColor():this._czShape.material.color=e.toCZColor()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._czShape.width=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this._style},set:function(e){if(this._style!=e){this._style=e;var i=this._color.toCZColor();switch(e){case t.GLOW:this._czShape.material=new Cesium.PolylineGlowMaterialProperty({color:i,glowPower:this._glow});break;case t.DASH:this._czShape.material=new Cesium.PolylineDashMaterialProperty({color:i});break;case t.ARROW:this._czShape.material=new Cesium.PolylineArrowMaterialProperty(i);break;case t.OUTLINE:this._czShape.material=new Cesium.PolylineOutlineMaterialProperty({color:i,outlineWidth:this._outlineWidth,outlineColor:this._outlineColor.toCZColor});break;case t.NONE:default:this._czShape.material=this._color.toCZColor()}}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"glow",{get:function(){return this._glow},set:function(e){this._style==t.GLOW&&(this._czShape.material.glowPower=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"outlineColor",{get:function(){return this._outlineColor},set:function(e){this._outlineColor.set(e),this._style==t.OUTLINE&&(this._czShape.material.outlineColor=this._outlineColor.toCZColor())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"outlineWidth",{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth=e,this._style==t.OUTLINE&&(this._czShape.material.outlineWidth=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"shadows",{get:function(){return this._czShape.shadows},set:function(e){this._shadows=e,this._czShape.shadows=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"displayDistance",{get:function(){return this._displayDistance},set:function(e){this._displayDistance=e,this._czShape.distanceDisplayCondition=e},enumerable:!0,configurable:!0}),n.PolylinePropList=["positions","followSurface","width","style","color","glow","outlineWidth","outlineColor","shadows","displayDistance"],n}(e.Model);e.PolylineModel=i}(Cegore||(Cegore={})),function(e){e.PolygonHierarchy=function(){};var t=function(t){function i(i){var n=t.call(this)||this;return n._dynamic=!1,n._usePositionHeight=!1,n._closeTop=!0,n._closeBottom=!0,n._czEntity=new Cesium.Entity,n._czPolygon=new Cesium.PolygonGraphics,n._czEntity.polygon=n._czPolygon,n._dynamic=e.TypeCheck.defaultValue(i.dynamic,!1),n.applyProps(i),n}return __extends(i,t),i.prototype.applyProps=function(n){t.prototype.applyProps.call(this,n),e.Renderable.applyProps(this,i.PolygonPropList,n)},Object.defineProperty(i.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_czShape",{get:function(){return this._czPolygon},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return"PolygonModel"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"positions",{get:function(){return this._positions},set:function(t){this._positions=[];for(var i,n=[],o=0;o<t.length;++o){for(var r=t[o],s=[],a=[],l=0;l<r.length;++l){var u=new e.Position(r[l]);s.push(u),a.push(new Cesium.Cartesian3.fromDegrees(u.lon,u.lat,u.altitude))}this._positions(s),0==o?i=a:n.push(new Cesium.PolygonHierarchy(a))}this._czPositions=new Cesium.PolygonHierarchy(i,n);var c=this._czPositions;this._dynamic&&!e.TypeCheck.isInstanceOf(this._czShape.positions,Cesium.CallbackProperty)?this._czShape.positions=new Cesium.CallbackProperty((function(e,t){return c}),!1):this._czShape.positions=c},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"usePositionHeight",{get:function(){return this._usePositionHeight},set:function(e){this._usePositionHeight=e,this._czShape.perPositionHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"closeTop",{get:function(){return this._closeTop},set:function(e){this._closeTop=e,this._czShape.closeTop=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"closeBottom",{get:function(){return this._closeBottom},set:function(e){this._closeBottom=e,this._czShape.closeBottom=e},enumerable:!0,configurable:!0}),i.PolygonPropList=["positions","usePositionHeight","closeTop","closeBottom"],i}(e.ShapeExtruded);e.PolygonModel=t}(Cegore||(Cegore={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.Renderable);e.PrimitiveModel=t}(Cegore||(Cegore={})),function(e){var t=function(t){function i(i){var n=t.call(this)||this;if(n._layer="",n.mAutoOffset=!0,!e.TypeCheck.isDefined(i.text)&&!e.TypeCheck.isDefined(i.icon))throw"need options.text or options.icon";return n._name=e.AutoNames.genName(i.name,"Label"),n._layer=e.TypeCheck.defaultValue(i.layer,""),n._events=new e.EventHandle(i.labelevent),n._czEntity=new Cesium.Entity({name:n._layer+" "+n._name}),(n._czEntity._zMapRenderable=n).setText(i.text),n.setIcon(i.icon),t.prototype.applyProps.call(n,{position:i.pos,visible:i.visible}),n}return __extends(i,t),Object.defineProperty(i.prototype,"_czRenderable",{get:function(){return this._czEntity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return"Label"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){if(e.TypeCheck.isDefined(this._czText))return this._czText.text},set:function(e){this.setText({title:e})},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){if(e.TypeCheck.isDefined(this._czIcon))return this._czIcon.image.src},set:function(e){this.setIcon({img:e})},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),i.prototype._applyProp=function(t,i,n,o){if(e.TypeCheck.isDefined(t)){var r;switch(o){case"Cartesian2":r=new Cesium.Cartesian2(t[0],t[1]);break;case"Color":r=Cesium.Color.fromCssColorString(t);break;default:r=t}i[n]=r}},i.prototype._applyTextProp=function(e,t,i){this._applyProp(e,this._czText,t,i)},i.prototype._applyIconProp=function(e,t,i){this._applyProp(e,this._czIcon,t,i)},i.prototype.setText=function(t){if(e.TypeCheck.isDefined(t)){if(e.TypeCheck.isDefined(this._czText)||(this._czText=new Cesium.LabelGraphics,this._czEntity.label=this._czText),e.TypeCheck.isDefined(t.font)||e.TypeCheck.isDefined(t.size)){var i=e.TypeCheck.defaultValue(t.font,"sans-serif"),n=e.TypeCheck.defaultValue(t.size,"10");this._czText.font=n+"px "+i}this._applyTextProp(t.title,"text"),this._applyTextProp(t.color,"fillColor","Color"),e.TypeCheck.isDefined(t.border)&&(this._applyTextProp(t.border.color,"outlineColor","Color"),this._applyTextProp(t.border.width,"outlineWidth")),e.TypeCheck.isDefined(t.unit)&&(this._applyTextProp(t.unit.offset,"pixelOffset","Cartesian2"),e.TypeCheck.isDefined(t.unit.offset)&&(this.mAutoOffset=!1))}},i.prototype.setIcon=function(t){if(e.TypeCheck.isDefined(t)){var i;if(e.TypeCheck.isDefined(this._czIcon)||(this._czIcon=new Cesium.BillboardGraphics,this._czEntity.billboard=this._czIcon),e.TypeCheck.isString(t.img)?i=t.img:e.TypeCheck.isArray(t.img)&&0<t.img.length&&(i=t.img[0]),e.TypeCheck.isDefined(i)){var n=this,o=new Image;o.src=i,o.onload=function(){if(n._czIcon.image=o,n.mAutoOffset&&e.TypeCheck.isDefined(n._czText)){var t=n._czIcon.scale?n._czIcon.scale.getValue():1,i=o.height*t;n._czText.pixelOffset=new Cesium.Cartesian2(0,-i)}}}this._applyIconProp(t.scale,"scale"),this._applyIconProp(t.color,"color","Color"),e.TypeCheck.isDefined(t.unit)&&this._applyIconProp(t.unit.offset,"pixelOffset","Cartesian2")}},i}(e.Renderable);e.Label=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){var i=this;this._layers=new e.HashMap((function(){return new e.HashMap})),this.mLabelEvent=new e.EventHandle,this._scene=t,this._czData=t._czdata,this._czDataSource=new Cesium.CustomDataSource("LabelCollection"),this._czData.viewer.dataSources.add(this._czDataSource),this._czEntities=this._czDataSource.entities,this.mCZHandle=new Cesium.ScreenSpaceEventHandler(this._czData.scene.canvas),this.mCZHandle.setInputAction((function(e){i.onLabelMoveEvent(e)}),Cesium.ScreenSpaceEventType.MOUSE_MOVE),this.mCZHandle.setInputAction((function(e){i.onLabelClickEvent(e)}),Cesium.ScreenSpaceEventType.LEFT_CLICK)}return t.prototype.onLabelMoveEvent=function(e){},t.prototype.onLabelClickEvent=function(t){var i=this.pick(t.position);e.TypeCheck.isDefined(i)&&(i.events.fire("onclick",i,t.position),this.mLabelEvent.fire("onclick",i,t.position))},t.prototype._getOrCreateLayer=function(e){return this._layers.getOrCreate(e,null)},t.prototype._getLayer=function(e){return this._layers.get(e)},Object.defineProperty(t.prototype,"events",{get:function(){return this.mLabelEvent},enumerable:!0,configurable:!0}),t.prototype.add=function(t){return this.remove(t),e.TypeCheck.isInstanceOf(t,e.Label)||(t=new e.Label(t)),this._getOrCreateLayer(t.layer).put(t.name,t),this._czEntities.add(t._czRenderable),t},t.prototype.get=function(t,i){i=e.TypeCheck.defaultValue(i,"");var n=this._getLayer(i);if(e.TypeCheck.isDefined(n))return n.get(t)},t.prototype.pick=function(t,i){var n;if(e.TypeCheck.isArray(t)){var o=t;n=new Cesium.Cartesian2(o[0],o[1])}else if(t instanceof Cesium.Cartesian2)n=t;else if(e.TypeCheck.isObject(t)){var r=t;n=new Cesium.Cartesian2(r.x,r.y)}else n=new Cesium.Cartesian2(t,i);var s=this._czData.scene.pick(n);if(e.TypeCheck.isDefined(s)){var a=e.TypeCheck.defaultValue(s.id,s.primitive.id);if(a instanceof Cesium.Entity&&a._zMapRenderable instanceof e.Label)return a._zMapRenderable}},t.prototype.remove=function(t,i){var n;if(e.TypeCheck.isString(t))n=this.get(t,i);else if(e.TypeCheck.isInstanceOf(t,e.Label))n=t;else{if(!e.TypeCheck.isObject(t))throw"invaild param!";n=this.get(t.name,t.layer)}if(e.TypeCheck.isInstanceOf(n,e.Label)){var o=n._czRenderable;this._czEntities.remove(o);var r=this._getLayer(n.layer);e.TypeCheck.isDefined(r)&&r.remove(n.name)}},t.prototype.removeLayer=function(t){var i=this._getLayer(t);if(e.TypeCheck.isDefined(i)){for(var n=i.keys(),o=0;o<n.length;++o){var r=i.get(n[o]);this._czEntities.remove(r)}this._layers.remove(t)}},t.prototype.removeAll=function(){this._czEntities.removeAll(),this._layers.clear()},t.prototype.clear=function(){this.removeAll()},t}();e.LabelCollection=t}(Cegore||(Cegore={})),function(e){var t,i;(i=e.SceneMode||(e.SceneMode={}))[i.COLUMBUS_VIEW=Cesium.SceneMode.COLUMBUS_VIEW]="COLUMBUS_VIEW",i[i.MORPHING=Cesium.SceneMode.MORPHING]="MORPHING",i[i.SCENE2D=Cesium.SceneMode.SCENE2D]="SCENE2D",i[i.SCENE3D=Cesium.SceneMode.SCENE3D]="SCENE3D",(t=e.ShadowMode||(e.ShadowMode={}))[t.DISABLED=Cesium.ShadowMode.DISABLED]="DISABLED",t[t.ENABLED=Cesium.ShadowMode.ENABLED]="ENABLED",t[t.CAST_ONLY=Cesium.ShadowMode.CAST_ONLY]="CAST_ONLY",t[t.RECEIVE_ONLY=Cesium.ShadowMode.RECEIVE_ONLY]="RECEIVE_ONLY";var n=function(){function t(t){this._isUnderWater=!1,this._viewer=t,this._czData=t._czdata,this._czScene=this._czData.scene,this._globe=new e.Globe(this),this._labels=new e.LabelCollection(this),this._models=new e.ModelCollection(this)}return Object.defineProperty(t.prototype,"_czdata",{get:function(){return this._czData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this._czScene.mode},set:function(e){this._czScene.mode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globe",{get:function(){return this._globe},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"models",{get:function(){return this._models},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labels",{get:function(){return this._labels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableFog",{get:function(){return this._czScene.fog.enabled},set:function(e){this._czScene.fog.enabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fogDensity",{get:function(){return this._czScene.fog.density},set:function(e){this._czScene.fog.density=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableFXAA",{get:function(){return this._czScene.fxaa},set:function(e){this._czScene.fxaa=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"terrainScale",{get:function(){return this._czScene.terrainExaggeration},set:function(e){this._czScene.terrainExaggeration=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preRender",{get:function(){var t=this;return e.TypeCheck.isDefined(this._preRender)||(this._preRender=new e.Event,this._czScene.preRender.addEventListener((function(e,i){t._preRender.fire(Cesium.JulianDate.toDate(i))}))),this._preRender},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"postRender",{get:function(){var t=this;return e.TypeCheck.isDefined(this._poseRender)||(this._poseRender=new e.Event,this._czScene.poseRender.addEventListener((function(e,i){t._poseRender.fire(Cesium.JulianDate.toDate(i))}))),this._poseRender},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"underWater",{get:function(){return this._isUnderWater},set:function(i){if(e.TypeCheck.isDefined(this._UnderWaterMaterial)||(this._UnderWaterMaterial=new Cesium.Material({fabric:{type:"GlobeFog",uniforms:{fogColor:new Cesium.Color.fromBytes(44,59,103)},source:t._GlobeFog},translucent:function(e){return!1}})),i){this._czScene.globe.material=this._UnderWaterMaterial;var n=Cesium._shaders.GlobeFS,o=n.indexOf("czm_material material = czm_getMaterial(materialInput);\n");n=n.substr(0,o)+"materialInput.positionToEyeEC = v_positionEC;\n"+n.substr(o),this._czScene.globe._surfaceShaderSet.baseFragmentShaderSource.sources[1]=n}else this._czScene.globe.material=void 0;this.enableFog=!i,this._isUnderWater=i},enumerable:!0,configurable:!0}),t.prototype.pick=function(i,n){var o=t.asCartesian2(i,n),r=this._czScene.pick(o);if(e.TypeCheck.isDefined(r)){var s=e.TypeCheck.defaultValue(r.id,r.primitive.id);return s instanceof Cesium.Entity&&s._zMapRenderable instanceof e.Renderable?s._zMapRenderable:void 0}},t.prototype.pickMulti=function(i,n,o){var r=[],s=t.asCartesian2(i,n),a=this._czScene.pick(s);if(!e.TypeCheck.isArray(a))return r;for(var l=0;l<a.length;++l){a[l];var u=e.TypeCheck.defaultValue(a.id,a.primitive.id);u instanceof Cesium.Entity&&u._zMapRenderable instanceof e.Renderable&&r.push(u._zMapRenderable)}return r},t.prototype.pickPosition=function(i,n){var o=t.asCartesian2(i,n),r=this._czScene.pickPosition(o),s=Cesium.Cartographic.fromCartesian(r);return new e.Position(s)},t.prototype.calcDistance=function(t){return e.GeoMath.surfaceDistance(t,this._czData.ellipsoid.x)},t.prototype.calcArea=function(t){return e.GeoMath.surfaceArea(t,this._czData.ellipsoid.x)},t.asCartesian2=function(t,i){if(e.TypeCheck.isInstanceOf(t,Cesium.Cartesian2))return t;var n,o;switch(e.TypeCheck.typeOf(t)){case"number":e.TypeCheck.isNumber(i)&&(n=t,o=i);break;case"array":n=e.StringUtil.parseFloat(t[0]),o=e.StringUtil.parseFloat(t[1]);break;case"object":n=e.StringUtil.parseFloat(t.x),o=e.StringUtil.parseFloat(t.y)}if(!e.TypeCheck.isDefined(n)||!e.TypeCheck.isDefined(o)||isNaN(n)||isNaN(o))throw"error params!";return new Cesium.Cartesian2(n,o)},t._GlobeFog="        uniform vec4 fogColor;\n        czm_material czm_getMaterial(czm_materialInput materialInput)\n        {\n            czm_material material = czm_getDefaultMaterial(materialInput);\n            float distanceToCamera = length(materialInput.positionToEyeEC);\n            float scalar = distanceToCamera * 0.00005;\n            float fog = 1.0 - exp(-(scalar * scalar));\n            material.diffuse = fogColor.rgb;\n            material.alpha = fog;\n            return material;\n        }\n",t}();e.Scene=n}(Cegore||(Cegore={})),function(e){var t=function(){function e(e){this.mViewer=e}return Object.defineProperty(e.prototype,"viewer",{get:function(){return this.mViewer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this.mViewer.scene},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"camera",{get:function(){return this.mViewer.camera},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globe",{get:function(){return this.mViewer.scene.globe},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ellipsoid",{get:function(){return this.mViewer.scene.globe.ellipsoid},enumerable:!0,configurable:!0}),e}(),i=function(){function i(i,n){n||(n={});var o=n.czops||{};o.animation=!1,o.baseLayerPicker=!1,o.homeButton=!1,o.geocoder=!1,o.navigationHelpButton=!1,o.imageryProvider=!1,o.timeline=!1,o.sceneModePicker=!1,o.selectionIndicator=!1,o.infoBox=!1,o.sceneMode=e.TypeCheck.defaultValue(n.sceneMode,Cesium.SceneMode.SCENE3D),o.fullscreenButton=e.TypeCheck.defaultValue(n.fullscreenButton,!0),o.fullscreenElement=e.TypeCheck.defaultValue(n.fullscreenElement,i);var r=new Cesium.Viewer(i,o);r._cesiumWidget._creditContainer.style.display="none",this._czData=new t(r),this._camera=new e.Camera(this),this._clock=new e.Clock(this),this._scene=new e.Scene(this);var s=r.scene.screenSpaceCameraController;if(s.tiltEventTypes=[Cesium.CameraEventType.RIGHT_DRAG,Cesium.CameraEventType.PINCH],s.zoomEventTypes=[Cesium.CameraEventType.WHEEL,Cesium.CameraEventType.PINCH,{eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.CTRL}],e.TypeCheck.isObject(n.terrain)&&this.globe.setTerrain(n.terrain),e.TypeCheck.isArray(n.images))for(var a=0;a<n.images.length;++a)this.globe.images.add(n.images[a]);e.TypeCheck.isDefined(n.currentTime)&&(this._clock.currentTime=n.currentTime)}return Object.defineProperty(i,"version",{get:function(){return"1.1.0"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_czdata",{get:function(){return this._czData},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"camera",{get:function(){return this._camera},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"models",{get:function(){return this._scene.models},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labels",{get:function(){return this._scene.labels},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"globe",{get:function(){return this._scene.globe},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"images",{get:function(){return this.globe.images},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"clock",{get:function(){return this._clock},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canvas",{get:function(){return this._czData.viewer.canvas},enumerable:!0,configurable:!0}),i.getBaseUrlFromScript=function(){for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;++t){var o=e[t].getAttribute("src"),r=i.cesiumScriptRegex.exec(o);if(null!==r)return r[1]}},i.cesiumScriptRegex=/((?:.*\/)|^)depmain[\w-]*\.js(?:\W|$)/i,i}();e.Viewer=i,CESIUM_BASE_URL=i.getBaseUrlFromScript()}(Cegore||(Cegore={})),function(e){var t=function(){function t(){this._readyPromise=Cesium.when.resolve(!0),this._tileWidth=256,this._tileHeight=256,this._minimumLevel=0,this._maximumLevel=18,this._errorEvent=new Cesium.Event,this._hasAlphaChannel=!1}return Object.defineProperty(t.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readyPromise",{get:function(){return this._readyPromise},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rectangle",{get:function(){return e.TypeCheck.isDefined(this._rectangle)||(this._rectangle=Cesium.Rectangle.MAX_VALUE),this._rectangle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileWidth",{get:function(){return this._tileWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileHeight",{get:function(){return this._tileHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minimumLevel",{get:function(){return this._minimumLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumLevel",{get:function(){return this._maximumLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tilingScheme",{get:function(){return e.TypeCheck.isDefined(this._tilingScheme)||(this._tilingScheme=new Cesium.GeographicTilingScheme),this._tilingScheme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileDiscardPolicy",{get:function(){return this._tileDiscardPolicy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorEvent",{get:function(){return this._errorEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"credit",{get:function(){return this._credit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"proxy",{get:function(){return this._proxy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasAlphaChannel",{get:function(){return this._hasAlphaChannel},enumerable:!0,configurable:!0}),t.prototype.getTileCredits=function(e,t,i){},t.prototype.pickFeatures=function(e,t,i,n,o){},t}();e.AbstractImageProvider=t}(Cegore||(Cegore={})),function(e){e.Providers.ImageProviders.regFactory("ArcGisMapServer",{createProvider:function(e){return new Cesium.ArcGisMapServerImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("BingMaps",{createProvider:function(e){return new Cesium.BingMapsImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("Grid",{createProvider:function(e){return new Cesium.GridImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("Mapbox",{createProvider:function(e){return new Cesium.MapboxImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("SingleTile",{createProvider:function(e){return new Cesium.SingleTileImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("WMS",{createProvider:function(e){return new Cesium.WebMapServiceImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("WMTS",{createProvider:function(e){return new Cesium.WebMapTileServiceImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("UrlTemplate",{createProvider:function(e){return new Cesium.UrlTemplateImageryProvider(e)}}),e.Providers.ImageProviders.regFactory("TileCoordinates",{createProvider:function(e){return new Cesium.TileCoordinatesImageryProvider(e)}})}(Cegore||(Cegore={})),function(e){var t=function(){function t(i){this.getTileCredits=function(e,t,i){},this.requestImage=function(e,i,n){if(!this._ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");var o=t.buildImageUrl(this,e,i,n);return Cesium.ImageryProvider.loadImage(this,o)};var n=new Cesium.Credit("WMTS");i=Cesium.defaultValue(i,{});var o=Cesium.defaultValue(i.url,"http://localhost:88/wmts");/\/$/.test(o),this._url=o,-1==this._url.indexOf("?")&&(e.StringUtil.endsWidth(this._url,"/tile/map",!0)||(this._url+="/tile/map"),this._url+="?"),this._url+="&origin=left|top",this._proxy=i.proxy,this._tileDiscardPolicy=i.tileDiscardPolicy,this._scheme=Cesium.defaultValue(i.scheme,"Geographic"),"WebMercator"===this._scheme?this._tilingScheme=new Cesium.WebMercatorTilingScheme({ellipsoid:i.ellipsoid}):this._scheme.endsWith("level-0")?this._tilingScheme=new Cesium.GeographicTilingScheme({ellipsoid:i.ellipsoid}):this._tilingScheme=new Cesium.GeographicTilingScheme({ellipsoid:i.ellipsoid,numberOfLevelZeroTilesX:8,numberOfLevelZeroTilesY:4}),this._tileWidth=256,this._tileHeight=256,this._minimumLevel=Cesium.defaultValue(i.minimumLevel,0),this._maximumLevel=Cesium.defaultValue(i.maximumLevel,18),this._extent=Cesium.defaultValue(i.extent,this._tilingScheme.extent),this._rectangle=Cesium.defaultValue(i.rectangle,this._tilingScheme.rectangle),this._errorEvent=new Cesium.Event,this._ready=!0;var r=Cesium.defaultValue(i.credit,n);"string"==typeof r&&(r=new Cesium.Credit(r)),this._credit=r}return Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasAlphaChannel",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"proxy",{get:function(){return this._proxy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileWidth",{get:function(){return this._tileWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileHeight",{get:function(){return this._tileHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumLevel",{get:function(){return this._maximumLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minimumLevel",{get:function(){return this._minimumLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tilingScheme",{get:function(){return this._tilingScheme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extent",{get:function(){return this._extent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rectangle",{get:function(){return this._rectangle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ileDiscardPolicy",{get:function(){return this._tileDiscardPolicy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorEvent",{get:function(){return this._errorEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"credit",{get:function(){return this._credit},enumerable:!0,configurable:!0}),t.buildImageUrl=function(e,t,i,n){var o=e._proxy;"WebMercator"!==e._scheme&&(e._scheme.endsWith("level-0")?n+=1:n=n);var r=e._url+"&id="+n+","+i+","+t;return Cesium.defined(o)&&(r=o.getURL(r)),r},t}(),i=function(){function e(){}return e.prototype.createProvider=function(e){return new t(e)},e}();e.Providers.ImageProviders.regFactory("ZMapImage",new i)}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){this.getTileCredits=function(e,t,i){},this.requestImage=function(e,t,i){if(!this._ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");var n=this.buildImageUrl(this,e,t,i);return Cesium.ImageryProvider.loadImage(this,n)};var i=new Cesium.Credit("WMTS");t=e.TypeCheck.defaultValue(t,{});var n=Cesium.defaultValue(t.url,"http://localhost:88/wmts");/\/$/.test(n),this._url=n,-1==this._url.indexOf("?")&&(e.StringUtil.endsWidth(this._url,"/tile/dem",!0)||(this._url+="/tile/dem"),this._url+="?"),this._url+="&origin=left|top",this._proxy=t.proxy,this._scheme=Cesium.defaultValue(t.scheme,"Geographic"),"WebMercator"===this._scheme?this._tilingScheme=new Cesium.WebMercatorTilingScheme({ellipsoid:t.ellipsoid}):this._scheme.endsWith("level-0")?this._tilingScheme=new Cesium.GeographicTilingScheme({ellipsoid:t.ellipsoid}):this._tilingScheme=new Cesium.GeographicTilingScheme({ellipsoid:t.ellipsoid,numberOfLevelZeroTilesX:8,numberOfLevelZeroTilesY:4}),this._tileWidth=e.TypeCheck.defaultValue(t.tileWidth,128),this._tileHeight=e.TypeCheck.defaultValue(t.tileHeight,128),this._minVal=e.TypeCheck.defaultValue(t.minVal,0),this._maxVal=e.TypeCheck.defaultValue(t.maxVal,1e3),this._minimumLevel=Cesium.defaultValue(t.minimumLevel,0),this._maximumLevel=Cesium.defaultValue(t.maximumLevel,18),this._extent=Cesium.defaultValue(t.extent,this._tilingScheme.extent),this._rectangle=Cesium.defaultValue(t.rectangle,this._tilingScheme.rectangle),this._errorEvent=new Cesium.Event,this._ready=!0;var o=Cesium.defaultValue(t.credit,i);"string"==typeof o&&(o=new Cesium.Credit(o)),this._credit=o}return Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasAlphaChannel",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"proxy",{get:function(){return this._proxy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileWidth",{get:function(){return this._tileWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileHeight",{get:function(){return this._tileHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumLevel",{get:function(){return this._maximumLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minimumLevel",{get:function(){return this._minimumLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tilingScheme",{get:function(){return this._tilingScheme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extent",{get:function(){return this._extent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rectangle",{get:function(){return this._rectangle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ileDiscardPolicy",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorEvent",{get:function(){return this._errorEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"credit",{get:function(){return this._credit},enumerable:!0,configurable:!0}),t.prototype.buildImageUrl=function(e,t,i,n){e._proxy,"WebMercator"!==e._scheme&&(e._scheme.endsWith("level-0")?n+=1:n=n);var o=this._tilingScheme.tileXYToRectangle(t,i,n),r=(o.east,o.west,this._tileWidth,o.north,o.south,this._tileHeight,[Cesium.Math.toDegrees(o.west),Cesium.Math.toDegrees(o.south),Cesium.Math.toDegrees(o.east),Cesium.Math.toDegrees(o.north)]),s=this._url;return s+="&id="+n+","+i+","+t,s+="&size="+this._tileWidth+"%2C"+this._tileHeight,(s+="&range="+r.join(","))+"&style=image&min="+this._minVal+"&max="+this._maxVal},t}(),i=function(){function e(){}return e.prototype.createProvider=function(e){return new t(e)},e}();e.Providers.ImageProviders.regFactory("ZMapDemImage",new i)}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){this._tileWidth=65,this._tileHeight=65,this._heightOffset=0,this._url=t.url,-1==this._url.indexOf("?")&&(e.StringUtil.endsWidth(this._url,"/tile/dem",!0)||(this._url+="/tile/dem"),this._url+="?"),this._url+="&origin=left|top",this._token=t.token,this._waterMask=e.TypeCheck.defaultValue(t.waterMask,!1),this._waterHeight=e.TypeCheck.defaultValue(t.waterHeight,0),this._tileWidth=e.TypeCheck.defaultValue(t.tileWidth,20),this._tileHeight=e.TypeCheck.defaultValue(t.tileHeight,20),this._heightOffset=e.TypeCheck.defaultValue(t.heightOffset,0),this._tilingScheme=t.tilingScheme,Cesium.defined(this._tilingScheme)||(this._tilingScheme=new Cesium.GeographicTilingScheme({ellipsoid:Cesium.defaultValue(t.ellipsoid,Cesium.Ellipsoid.WGS84)})),this._levelZeroMaximumGeometricError=Cesium.TerrainProvider.getEstimatedLevelZeroGeometricErrorForAHeightmap(this._tilingScheme.ellipsoid,this._tileWidth,this._tilingScheme.getNumberOfXTilesAtLevel(0)),this._proxy=t.proxy,this._dataStruct={heightScale:1,heightOffset:this._heightOffset,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1},this._errorEvent=new Cesium.Event;var i=t.credit;"string"==typeof i&&(i=new Cesium.Credit(i)),this._credit=i,this._readyPromise=Cesium.when.resolve(!0)}return Object.defineProperty(t.prototype,"errorEvent",{get:function(){return this._errorEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"credit",{get:function(){return this._credit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tilingScheme",{get:function(){return this._tilingScheme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readyPromise",{get:function(){return this._readyPromise},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasWaterMask",{get:function(){return this._waterMask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasVertexNormals",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.requestTileGeometry=function(e,t,i,n){var o=this,r=this._tilingScheme.tileXYToRectangle(e,t,i),s=(r.east,r.west,this._tileWidth,r.north,r.south,this._tileHeight,[Cesium.Math.toDegrees(r.west),Cesium.Math.toDegrees(r.south),Cesium.Math.toDegrees(r.east),Cesium.Math.toDegrees(r.north)]),a=this._url;a+="&id="+i+","+t+","+e,a+="&size="+this._tileWidth+"%2C"+this._tileHeight,a+="&range="+s.join(",");var l=this._proxy;Cesium.defined(l)&&(a=l.getURL(a));var u=Cesium.Resource.fetchArrayBuffer(a,void 0,n);if(Cesium.defined(u))return Cesium.when(u,(function(e){var t,i,n=o._tileWidth*o._tileHeight,r=8*n;if(i=new Float32Array(n),o._waterMask&&(t=new Uint8Array(n)),e.byteLength!=r);else for(var s=new Float64Array(e),a=0;a<n;++a)i[a]=s[a],s[a]<=-1e10&&(i[a]=0),o._waterMask&&(i[a]<o._waterHeight?t[a]=255:t[a]=0);return new Cesium.HeightmapTerrainData({buffer:i,width:o._tileWidth,height:o._tileWidth,childTileMask:15,waterMask:t,structure:o._dataStruct})}))},t.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},t.prototype.getTileDataAvailable=function(e,t,i){},t}(),i=function(){function e(){}return e.prototype.createProvider=function(e){return new t(e)},e}();e.Providers.TerrainProviders.regFactory("ZMapTerrain",new i)}(Cegore||(Cegore={})),function(e){var t=function(t){function i(e){var i=t.call(this)||this;return i._weightScale=1,i._shadow=250,e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT),i._xfield=e.xField,i._yfield=e.yField,i._weightField=e.weightField,i._weightScale=Cesium.defaultValue(e.weightScale,1),i._weightCalc=e.weightCalc,i._tilingScheme=new Cesium.GeographicTilingScheme,i._minimumLevel=Cesium.defaultValue(e.minimumLevel,0),i._maximumLevel=Cesium.defaultValue(e.maximumLevel,18),i._hasAlphaChannel=!0,i.initData(e.data),i.setBlurRadius(e.blur,e.radius),i.setGradient(e.gradient),i}return __extends(i,t),i.prototype.setBlurRadius=function(t,i){this._blur=e.TypeCheck.defaultValue(t,15),this._radius=e.TypeCheck.defaultValue(i,8),this._circleImage=this.createCircle()},i.prototype.setGradient=function(t){this._gradient=e.TypeCheck.defaultValue(t,i.DEFAULT_GRADIENT),this._colorTable=this.createGradientColorTable(this._gradient)},i.prototype.initData=function(t){this._data=[];for(var i=new e.Rectangle,n=0;n<t.length;++n){var o=t[n],r={x:this.xCoord(o),y:this.yCoord(o),v:this.value(o)};this._data.push(r),i.merge(r.x,r.y)}this._rectangle=i.toCZRectangle(),this._ready=!0},i.fieldsValue=function(t,i,n){for(var o=e.TypeCheck.defaultValue(n,0),r=0;r<i.length;++r){var s=i[r];if(e.TypeCheck.isDefined(s)&&(o=t[s],e.TypeCheck.isDefined(o)))break}return e.TypeCheck.isNumber(o)||(o=e.StringUtil.parseFloat(o)),o},i.prototype.xCoord=function(e){return i.fieldsValue(e,[this._xfield,"x","X"])},i.prototype.yCoord=function(e){return i.fieldsValue(e,[this._yfield,"y","Y"])},i.prototype.value=function(t){return e.TypeCheck.isFunction(this._weightCalc)?this._weightCalc(t):i.fieldsValue(t,[this._weightField,"value","Value","VALUE"])},i.prototype.createGradientColorTable=function(t){for(var i=e.DOM.createContext2D(1,256),n=i.createLinearGradient(0,0,1,256),o=1/(t.length-1),r=0,s=t.length;r<s;++r)n.addColorStop(r*o,t[r]);return i.fillStyle=n,i.fillRect(0,0,1,256),i.getImageData(0,0,1,256).data},i.prototype.createCircle=function(){var t=this._radius,i=this._blur,n=t+i+1,o=2*n,r=e.DOM.createContext2D(o,o);r.shadowOffsetX=r.shadowOffsetY=this._shadow,r.shadowBlur=i,r.shadowColor="#000",r.beginPath();var s=n-this._shadow;return r.arc(s,s,t,0,2*Math.PI,!0),r.fill(),r.canvas},i.prototype.requestImage=function(t,i,n){var o=e.DOM.createContext2D(this.tileWidth,this.tileHeight),r=o.canvas,s=this._circleImage,a=s.width/2,l=s.height/2,u=new e.Position,c=new e.Rectangle(this.tilingScheme.tileXYToRectangle(t,i,n)),h=c.width,p=c.height,f=c.clone();f.inflate(c.width/2,c.height/2);for(var d=0;d<this._data.length;++d){var m=this._data[d];if(u.set(m.x,m.y),f.contains(u)){var g=(m.x-c.minx)/h*r.width,_=(c.maxy-m.y)/p*r.height;o.globalAlpha=m.v*this._weightScale,o.drawImage(s,g-a,_-l)}}for(var y,v=o.getImageData(0,0,r.width,r.height),b=v.data,C=(d=0,b.length);d<C;d+=4)(y=4*b[d+3])&&(b[d]=this._colorTable[y],b[d+1]=this._colorTable[y+1],b[d+2]=this._colorTable[y+2]);return o.putImageData(v,0,0),r},i.DEFAULT_GRADIENT=["#00f","#0ff","#0f0","#ff0","#f00"],i}(e.AbstractImageProvider),i=function(){function e(){}return e.prototype.createProvider=function(e){return new t(e)},e}();e.Providers.ImageProviders.regFactory("Heatmap",new i)}(Cegore||(Cegore={})),function(e){var t=function(){function t(){}return t.LoadModel=function(t,i,n,o){var r=new e.Position(o.offset),s=n.pos.split(",");s[0]=parseFloat(s[0])+r.x,s[1]=parseFloat(s[1])+r.y,s[2]=parseFloat(s[2])+r.z,t=t+"/model?style=glb&id="+encodeURIComponent(n.model);var a=new e.GltfModel({name:n.name,uri:t,position:s,minPixelSize:10});i.add(a)},t.LoadFromPubModel=function(i,n,o){var r=new e.ModelGroup({name:i});return e.LoadWithXhr.loadJSON({url:n+"/model?filter=detail",success:function(e){for(var i=0;i<e.items.length;++i)t.LoadModel(n,r,e.items[i],o)}}),r},t}();e.ZMapModelLoader=t}(Cegore||(Cegore={})),function(e,t){"use strict";"function"==typeof define&&define.amd&&define([],t),Cesium.viewerCesiumNavigationMixin=t()}("undefined"!=typeof window?window:"undefined"!=typeof self&&self,(function(){var requirejs,require,define,c,d,a,i,s;return function(e){var t,i,n,o,r={},s={},a={},l={},u=Object.prototype.hasOwnProperty,c=[].slice,h=/\.js$/;function p(e,t){return u.call(e,t)}function f(e,t){var i,n,o,r,s,l,u,c,p,f,d,m=t&&t.split("/"),g=a.map,_=g&&g["*"]||{};if(e){for(s=(e=e.split("/")).length-1,a.nodeIdCompat&&h.test(e[s])&&(e[s]=e[s].replace(h,"")),"."===e[0].charAt(0)&&m&&(e=m.slice(0,m.length-1).concat(e)),p=0;p<e.length;p++)if("."===(d=e[p]))e.splice(p,1),p-=1;else if(".."===d){if(0===p||1===p&&".."===e[2]||".."===e[p-1])continue;0<p&&(e.splice(p-1,2),p-=2)}e=e.join("/")}if((m||_)&&g){for(p=(i=e.split("/")).length;0<p;p-=1){if(n=i.slice(0,p).join("/"),m)for(f=m.length;0<f;f-=1)if((o=g[m.slice(0,f).join("/")])&&(o=o[n])){r=o,l=p;break}if(r)break;!u&&_&&_[n]&&(u=_[n],c=p)}!r&&u&&(r=u,l=c),r&&(i.splice(0,l,r),e=i.join("/"))}return e}function d(e,t){return function(){var n=c.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),i.apply(void 0,n.concat([e,t]))}}function m(e){return function(t){r[e]=t}}function g(e){if(p(s,e)){var i=s[e];delete s[e],l[e]=!0,t.apply(void 0,i)}if(!p(r,e)&&!p(l,e))throw new Error("No "+e);return r[e]}function _(e){var t,i=e?e.indexOf("!"):-1;return-1<i&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}n=function(e,t){var i,n=_(e),o=n[0];return e=n[1],o&&(i=g(o=f(o,t))),o?e=i&&i.normalize?i.normalize(e,function(e){return function(t){return f(t,e)}}(t)):f(e,t):(o=(n=_(e=f(e,t)))[0],e=n[1],o&&(i=g(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:i}},o={require:function(e){return d(e)},exports:function(e){var t=r[e];return void 0!==t?t:r[e]={}},module:function(e){return{id:e,uri:"",exports:r[e],config:function(e){return function(){return a&&a.config&&a.config[e]||{}}}(e)}}},t=function(e,t,i,a){var u,c,h,f,_,y,v=[],b=typeof i;if(a=a||e,"undefined"===b||"function"===b){for(t=!t.length&&i.length?["require","exports","module"]:t,_=0;_<t.length;_+=1)if("require"===(c=(f=n(t[_],a)).f))v[_]=o.require(e);else if("exports"===c)v[_]=o.exports(e),y=!0;else if("module"===c)u=v[_]=o.module(e);else if(p(r,c)||p(s,c)||p(l,c))v[_]=g(c);else{if(!f.p)throw new Error(e+" missing "+c);f.p.load(f.n,d(a,!0),m(c),{}),v[_]=r[c]}h=i?i.apply(r[e],v):void 0,e&&(u&&void 0!==u.exports&&u.exports!==r[e]?r[e]=u.exports:void 0===h&&y||(r[e]=h))}else e&&(r[e]=i)},requirejs=require=i=function(e,r,s,l,u){if("string"==typeof e)return o[e]?o[e](r):g(n(e,r).f);if(!e.splice){if((a=e).deps&&i(a.deps,a.callback),!r)return;r.splice?(e=r,r=s,s=null):e=void 0}return r=r||function(){},"function"==typeof s&&(s=l,l=u),l?t(void 0,e,r,s):setTimeout((function(){t(void 0,e,r,s)}),4),i},i.config=function(e){return i(e)},requirejs._defined=r,(define=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),p(r,e)||p(s,e)||(s[e]=[e,t,i])}).amd={jQuery:!0}}(),define("almond",(function(){})),function(n){var x=this||eval("this"),u=x.document,M=x.navigator,v=x.jQuery,F=x.JSON;!function(e){"function"==typeof define&&define.amd?define("knockout",["exports","require"],e):"object"==typeof exports&&"object"==typeof module?e(module.exports||exports):e(x.ko={})}((function(e,t){function i(e,t){return(null===e||typeof e in y)&&e===t}function o(e,t){var i;return function(){i||(i=_.a.setTimeout((function(){i=n,e()}),t))}}function r(e,t){var i;return function(){clearTimeout(i),i=_.a.setTimeout(e,t)}}function s(e,t){t&&t!==b?"beforeChange"===t?this.Kb(e):this.Ha(e,t):this.Lb(e)}function a(e,t){null!==t&&t.k&&t.k()}function l(e,t){var i=this.Hc,n=i[E];n.R||(this.lb&&this.Ma[t]?(i.Pb(t,e,this.Ma[t]),this.Ma[t]=null,--this.lb):n.r[t]||i.Pb(t,e,n.s?{ia:e}:i.uc(e)))}function c(e,t,i,n){_.d[e]={init:function(e,o,r,s,a){var l,u;return _.m((function(){var r=_.a.c(o()),s=!i!=!r,c=!u;(c||t||s!==l)&&(c&&_.va.Aa()&&(u=_.a.ua(_.f.childNodes(e),!0)),s?(c||_.f.da(e,_.a.ua(u)),_.eb(n?n(a,r):a,e)):_.f.xa(e),l=s)}),null,{i:e}),{controlsDescendantBindings:!0}}},_.h.ta[e]=!1,_.f.Z[e]=!0}var h,p,f,d,m,g,_=void 0!==e?e:{};_.b=function(e,t){for(var i=e.split("."),n=_,o=0;o<i.length-1;o++)n=n[i[o]];n[i[i.length-1]]=t},_.G=function(e,t,i){e[t]=i},_.version="3.4.0",_.b("version",_.version),_.options={deferUpdates:!1,useOnlyNativeEvents:!1},_.a=function(){function e(e,t){for(var i in e)e.hasOwnProperty(i)&&t(i,e[i])}function t(e,t){if(t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function i(e,t){return e.__proto__=t,e}function o(e,t,i,n){var o=e[t].match(p)||[];_.a.q(i.match(p),(function(e){_.a.pa(o,e,n)})),e[t]=o.join(" ")}var r={__proto__:[]}instanceof Array,s="function"==typeof Symbol,a={},l={};a[M&&/Firefox\/2/i.test(M.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],a.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),e(a,(function(e,t){if(t.length)for(var i=0,n=t.length;i<n;i++)l[t[i]]=e}));var c={propertychange:!0},h=u&&function(){for(var e=3,t=u.createElement("div"),i=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",i[0];);return 4<e?e:n}(),p=/\S+/g;return{cc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],q:function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i)},o:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},Sb:function(e,t,i){for(var n=0,o=e.length;n<o;n++)if(t.call(i,e[n],n))return e[n];return null},La:function(e,t){var i=_.a.o(e,t);0<i?e.splice(i,1):0===i&&e.shift()},Tb:function(e){for(var t=[],i=0,n=(e=e||[]).length;i<n;i++)_.a.o(t,e[i])<0&&t.push(e[i]);return t},fb:function(e,t){for(var i=[],n=0,o=(e=e||[]).length;n<o;n++)i.push(t(e[n],n));return i},Ka:function(e,t){for(var i=[],n=0,o=(e=e||[]).length;n<o;n++)t(e[n],n)&&i.push(e[n]);return i},ra:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var i=0,n=t.length;i<n;i++)e.push(t[i]);return e},pa:function(e,t,i){var n=_.a.o(_.a.zb(e),t);n<0?i&&e.push(t):i||e.splice(n,1)},ka:r,extend:t,Xa:i,Ya:r?i:t,D:e,Ca:function(e,t){if(!e)return e;var i,n={};for(i in e)e.hasOwnProperty(i)&&(n[i]=t(e[i],i,e));return n},ob:function(e){for(;e.firstChild;)_.removeNode(e.firstChild)},jc:function(e){for(var t=((e=_.a.V(e))[0]&&e[0].ownerDocument||u).createElement("div"),i=0,n=e.length;i<n;i++)t.appendChild(_.$(e[i]));return t},ua:function(e,t){for(var i=0,n=e.length,o=[];i<n;i++){var r=e[i].cloneNode(!0);o.push(t?_.$(r):r)}return o},da:function(e,t){if(_.a.ob(e),t)for(var i=0,n=t.length;i<n;i++)e.appendChild(t[i])},qc:function(e,t){var i=e.nodeType?[e]:e;if(0<i.length){for(var n=i[0],o=n.parentNode,r=0,s=t.length;r<s;r++)o.insertBefore(t[r],n);for(r=0,s=i.length;r<s;r++)_.removeNode(i[r])}},za:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);for(;1<e.length&&e[e.length-1].parentNode!==t;)e.length--;if(1<e.length){var i=e[0],n=e[e.length-1];for(e.length=0;i!==n;)e.push(i),i=i.nextSibling;e.push(n)}}return e},sc:function(e,t){h<7?e.setAttribute("selected",t):e.selected=t},$a:function(e){return null===e||e===n?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},nd:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},Mc:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},nb:function(e){return _.a.Mc(e,e.ownerDocument.documentElement)},Qb:function(e){return!!_.a.Sb(e,_.a.nb)},A:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},Wb:function(e){return _.onError?function(){try{return e.apply(this,arguments)}catch(e){throw _.onError&&_.onError(e),e}}:e},setTimeout:function(e,t){return setTimeout(_.a.Wb(e),t)},$b:function(e){setTimeout((function(){throw _.onError&&_.onError(e),e}),0)},p:function(e,t,i){var n=_.a.Wb(i);if(i=h&&c[t],_.options.useOnlyNativeEvents||i||!v)if(i||"function"!=typeof e.addEventListener){if(void 0===e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var o=function(t){n.call(e,t)},r="on"+t;e.attachEvent(r,o),_.a.F.oa(e,(function(){e.detachEvent(r,o)}))}else e.addEventListener(t,n,!1);else v(e).bind(t,n)},Da:function(e,t){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var i;if(i=!("input"!==_.a.A(e)||!e.type||"click"!=t.toLowerCase()||"checkbox"!=(i=e.type)&&"radio"!=i),_.options.useOnlyNativeEvents||!v||i)if("function"==typeof u.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");(i=u.createEvent(l[t]||"HTMLEvents")).initEvent(t,!0,!0,x,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(i)}else if(i&&e.click)e.click();else{if(void 0===e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+t)}else v(e).trigger(t)},c:function(e){return _.H(e)?e():e},zb:function(e){return _.H(e)?e.t():e},bb:function(e,t,i){var n;t&&("object"==typeof e.classList?(n=e.classList[i?"add":"remove"],_.a.q(t.match(p),(function(t){n.call(e.classList,t)}))):"string"==typeof e.className.baseVal?o(e.className,"baseVal",t,i):o(e,"className",t,i))},Za:function(e,t){var i=_.a.c(t);null!==i&&i!==n||(i="");var o=_.f.firstChild(e);!o||3!=o.nodeType||_.f.nextSibling(o)?_.f.da(e,[e.ownerDocument.createTextNode(i)]):o.data=i,_.a.Rc(e)},rc:function(e,t){if(e.name=t,h<=7)try{e.mergeAttributes(u.createElement("<input name='"+e.name+"'/>"),!1)}catch(e){}},Rc:function(e){9<=h&&(e=1==e.nodeType?e:e.parentNode).style&&(e.style.zoom=e.style.zoom)},Nc:function(e){if(h){var t=e.style.width;e.style.width=0,e.style.width=t}},hd:function(e,t){e=_.a.c(e),t=_.a.c(t);for(var i=[],n=e;n<=t;n++)i.push(n);return i},V:function(e){for(var t=[],i=0,n=e.length;i<n;i++)t.push(e[i]);return t},Yb:function(e){return s?Symbol(e):e},rd:6===h,sd:7===h,C:h,ec:function(e,t){for(var i=_.a.V(e.getElementsByTagName("input")).concat(_.a.V(e.getElementsByTagName("textarea"))),n="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},o=[],r=i.length-1;0<=r;r--)n(i[r])&&o.push(i[r]);return o},ed:function(e){return"string"==typeof e&&(e=_.a.$a(e))?F&&F.parse?F.parse(e):new Function("return "+e)():null},Eb:function(e,t,i){if(!F||!F.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return F.stringify(_.a.c(e),t,i)},fd:function(t,i,n){var o=(n=n||{}).params||{},r=n.includeFields||this.cc,s=t;if("object"==typeof t&&"form"===_.a.A(t)){s=t.action;for(var a=r.length-1;0<=a;a--)for(var l=_.a.ec(t,r[a]),c=l.length-1;0<=c;c--)o[l[c].name]=l[c].value}i=_.a.c(i);var h=u.createElement("form");for(var p in h.style.display="none",h.action=s,h.method="post",i)(t=u.createElement("input")).type="hidden",t.name=p,t.value=_.a.Eb(_.a.c(i[p])),h.appendChild(t);e(o,(function(e,t){var i=u.createElement("input");i.type="hidden",i.name=e,i.value=t,h.appendChild(i)})),u.body.appendChild(h),n.submitter?n.submitter(h):h.submit(),setTimeout((function(){h.parentNode.removeChild(h)}),0)}}}(),_.b("utils",_.a),_.b("utils.arrayForEach",_.a.q),_.b("utils.arrayFirst",_.a.Sb),_.b("utils.arrayFilter",_.a.Ka),_.b("utils.arrayGetDistinctValues",_.a.Tb),_.b("utils.arrayIndexOf",_.a.o),_.b("utils.arrayMap",_.a.fb),_.b("utils.arrayPushAll",_.a.ra),_.b("utils.arrayRemoveItem",_.a.La),_.b("utils.extend",_.a.extend),_.b("utils.fieldsIncludedWithJsonPost",_.a.cc),_.b("utils.getFormFields",_.a.ec),_.b("utils.peekObservable",_.a.zb),_.b("utils.postJson",_.a.fd),_.b("utils.parseJson",_.a.ed),_.b("utils.registerEventHandler",_.a.p),_.b("utils.stringifyJson",_.a.Eb),_.b("utils.range",_.a.hd),_.b("utils.toggleDomNodeCssClass",_.a.bb),_.b("utils.triggerEvent",_.a.Da),_.b("utils.unwrapObservable",_.a.c),_.b("utils.objectForEach",_.a.D),_.b("utils.addOrRemoveItem",_.a.pa),_.b("utils.setTextContent",_.a.Za),_.b("unwrap",_.a.c),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(1===arguments.length)return function(){return t.apply(e,arguments)};var i=Array.prototype.slice.call(arguments,1);return function(){var n=i.slice(0);return n.push.apply(n,arguments),t.apply(e,n)}}),_.a.e=new function(){function e(e,r){var s=e[i];if(!s||"null"===s||!o[s]){if(!r)return n;s=e[i]="ko"+t++,o[s]={}}return o[s]}var t=0,i="__ko__"+(new Date).getTime(),o={};return{get:function(t,i){var o=e(t,!1);return o===n?n:o[i]},set:function(t,i,o){o===n&&e(t,!1)===n||(e(t,!0)[i]=o)},clear:function(e){var t=e[i];return!(!t||(delete o[t],e[i]=null))},I:function(){return t+++i}}},_.b("utils.domData",_.a.e),_.b("utils.domData.clear",_.a.e.clear),_.a.F=new function(){function e(e,t){var o=_.a.e.get(e,i);return o===n&&t&&(o=[],_.a.e.set(e,i,o)),o}function t(i){if(n=e(i,!1))for(var n=n.slice(0),o=0;o<n.length;o++)n[o](i);if(_.a.e.clear(i),_.a.F.cleanExternalData(i),r[i.nodeType])for(n=i.firstChild;i=n;)n=i.nextSibling,8===i.nodeType&&t(i)}var i=_.a.e.I(),o={1:!0,8:!0,9:!0},r={1:!0,9:!0};return{oa:function(t,i){if("function"!=typeof i)throw Error("Callback must be a function");e(t,!0).push(i)},pc:function(t,o){var r=e(t,!1);r&&(_.a.La(r,o),0==r.length&&_.a.e.set(t,i,n))},$:function(e){if(o[e.nodeType]&&(t(e),r[e.nodeType])){var i=[];_.a.ra(i,e.getElementsByTagName("*"));for(var n=0,s=i.length;n<s;n++)t(i[n])}return e},removeNode:function(e){_.$(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){v&&"function"==typeof v.cleanData&&v.cleanData([e])}}},_.$=_.a.F.$,_.removeNode=_.a.F.removeNode,_.b("cleanNode",_.$),_.b("removeNode",_.removeNode),_.b("utils.domNodeDisposal",_.a.F),_.b("utils.domNodeDisposal.addDisposeCallback",_.a.F.oa),_.b("utils.domNodeDisposal.removeDisposeCallback",_.a.F.pc),h=[0,"",""],m={thead:p=[1,"<table>","</table>"],tbody:p,tfoot:p,tr:[2,"<table><tbody>","</tbody></table>"],td:f=[3,"<table><tbody><tr>","</tr></tbody></table>"],th:f,option:d=[1,"<select multiple='multiple'>","</select>"],optgroup:d},g=_.a.C<=8,_.a.ma=function(e,t){var i;if(v){if(v.parseHTML)i=v.parseHTML(e,t)||[];else if((i=v.clean([e],t))&&i[0]){for(var n=i[0];n.parentNode&&11!==n.parentNode.nodeType;)n=n.parentNode;n.parentNode&&n.parentNode.removeChild(n)}}else{(i=t)||(i=u),n=i.parentWindow||i.defaultView||x;var o,r=_.a.$a(e).toLowerCase(),s=i.createElement("div");for(r=(o=(r=r.match(/^<([a-z]+)[ >]/))&&m[r[1]]||h)[0],o="ignored<div>"+o[1]+e+o[2]+"</div>","function"==typeof n.innerShiv?s.appendChild(n.innerShiv(o)):(g&&i.appendChild(s),s.innerHTML=o,g&&s.parentNode.removeChild(s));r--;)s=s.lastChild;i=_.a.V(s.lastChild.childNodes)}return i},_.a.Cb=function(e,t){if(_.a.ob(e),null!==(t=_.a.c(t))&&t!==n)if("string"!=typeof t&&(t=t.toString()),v)v(e).html(t);else for(var i=_.a.ma(t,e.ownerDocument),o=0;o<i.length;o++)e.appendChild(i[o])},_.b("utils.parseHtmlFragment",_.a.ma),_.b("utils.setHtml",_.a.Cb),_.M=function(){var e={};return{wb:function(t){if("function"!=typeof t)throw Error("You can only pass a function to ko.memoization.memoize()");var i=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return e[i]=t,"\x3c!--[ko_memo:"+i+"]--\x3e"},xc:function(t,i){var o=e[t];if(o===n)throw Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return o.apply(null,i||[]),!0}finally{delete e[t]}},yc:function(e,t){var i=[];!function e(t,i){if(t)if(8==t.nodeType)null!=(n=_.M.lc(t.nodeValue))&&i.push({Lc:t,cd:n});else if(1==t.nodeType)for(var n=0,o=t.childNodes,r=o.length;n<r;n++)e(o[n],i)}(e,i);for(var n=0,o=i.length;n<o;n++){var r=i[n].Lc,s=[r];t&&_.a.ra(s,t),_.M.xc(i[n].cd,s),r.nodeValue="",r.parentNode&&r.parentNode.removeChild(r)}},lc:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),_.b("memoization",_.M),_.b("memoization.memoize",_.M.wb),_.b("memoization.unmemoize",_.M.xc),_.b("memoization.parseMemoText",_.M.lc),_.b("memoization.unmemoizeDomNodeAndDescendants",_.M.yc),_.Y=function(){function e(){if(n)for(var e,t=n,o=0;r<n;)if(e=i[r++]){if(t<r){if(5e3<=++o){r=n,_.a.$b(Error("'Too much recursion' after processing "+o+" task groups."));break}t=n}try{e()}catch(e){_.a.$b(e)}}}function t(){e(),r=n=i.length=0}var i=[],n=0,o=1,r=0;return{scheduler:x.MutationObserver?function(e){var t=u.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}(t):u&&"onreadystatechange"in u.createElement("script")?function(e){var t=u.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,u.documentElement.removeChild(t),t=null,e()},u.documentElement.appendChild(t)}:function(e){setTimeout(e,0)},Wa:function(e){return n||_.Y.scheduler(t),i[n++]=e,o++},cancel:function(e){r<=(e-=o-n)&&e<n&&(i[e]=null)},resetForTesting:function(){var e=n-r;return r=n=i.length=0,e},md:e}}(),_.b("tasks",_.Y),_.b("tasks.schedule",_.Y.Wa),_.b("tasks.runEarly",_.Y.md),_.ya={throttle:function(e,t){e.throttleEvaluation=t;var i=null;return _.B({read:e,write:function(n){clearTimeout(i),i=_.a.setTimeout((function(){e(n)}),t)}})},rateLimit:function(e,t){var i,n,s;"number"==typeof t?i=t:(i=t.timeout,n=t.method),e.cb=!1,s="notifyWhenChangesStop"==n?r:o,e.Ta((function(e){return s(e,i)}))},deferred:function(e,t){if(!0!==t)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");e.cb||(e.cb=!0,e.Ta((function(t){var i;return function(){_.Y.cancel(i),i=_.Y.Wa(t),e.notifySubscribers(n,"dirty")}})))},notify:function(e,t){e.equalityComparer="always"==t?null:i}};var y={undefined:1,boolean:1,number:1,string:1};_.b("extenders",_.ya),_.vc=function(e,t,i){this.ia=e,this.gb=t,this.Kc=i,this.R=!1,_.G(this,"dispose",this.k)},_.vc.prototype.k=function(){this.R=!0,this.Kc()},_.J=function(){_.a.Ya(this,C),C.rb(this)};var b="change",C={rb:function(e){e.K={},e.Nb=1},X:function(e,t,i){var n=this;i=i||b;var o=new _.vc(n,t?e.bind(t):e,(function(){_.a.La(n.K[i],o),n.Ia&&n.Ia(i)}));return n.sa&&n.sa(i),n.K[i]||(n.K[i]=[]),n.K[i].push(o),o},notifySubscribers:function(e,t){if((t=t||b)===b&&this.zc(),this.Pa(t))try{_.l.Ub();for(var i,n=this.K[t].slice(0),o=0;i=n[o];++o)i.R||i.gb(e)}finally{_.l.end()}},Na:function(){return this.Nb},Uc:function(e){return this.Na()!==e},zc:function(){++this.Nb},Ta:function(e){var t,i,n,o=this,r=_.H(o);o.Ha||(o.Ha=o.notifySubscribers,o.notifySubscribers=s);var a=e((function(){o.Mb=!1,r&&n===o&&(n=o()),t=!1,o.tb(i,n)&&o.Ha(i=n)}));o.Lb=function(e){o.Mb=t=!0,n=e,a()},o.Kb=function(e){t||(i=e,o.Ha(e,"beforeChange"))}},Pa:function(e){return this.K[e]&&this.K[e].length},Sc:function(e){if(e)return this.K[e]&&this.K[e].length||0;var t=0;return _.a.D(this.K,(function(e,i){"dirty"!==e&&(t+=i.length)})),t},tb:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:function(e){var t=this;return e&&_.a.D(e,(function(e,i){var n=_.ya[e];"function"==typeof n&&(t=n(t,i)||t)})),t}};_.G(C,"subscribe",C.X),_.G(C,"extend",C.extend),_.G(C,"getSubscriptionsCount",C.Sc),_.a.ka&&_.a.Xa(C,Function.prototype),_.J.fn=C,_.hc=function(e){return null!=e&&"function"==typeof e.X&&"function"==typeof e.notifySubscribers},_.b("subscribable",_.J),_.b("isSubscribable",_.hc),_.va=_.l=function(){function e(e){n.push(i),i=e}function t(){i=n.pop()}var i,n=[],o=0;return{Ub:e,end:t,oc:function(e){if(i){if(!_.hc(e))throw Error("Only subscribable things can act as dependencies");i.gb.call(i.Gc,e,e.Cc||(e.Cc=++o))}},w:function(i,n,o){try{return e(),i.apply(n,o||[])}finally{t()}},Aa:function(){if(i)return i.m.Aa()},Sa:function(){if(i)return i.Sa}}}(),_.b("computedContext",_.va),_.b("computedContext.getDependenciesCount",_.va.Aa),_.b("computedContext.isInitial",_.va.Sa),_.b("ignoreDependencies",_.qd=_.l.w);var w=_.a.Yb("_latestValue");_.N=function(e){function t(){return 0<arguments.length?(t.tb(t[w],arguments[0])&&(t.ga(),t[w]=arguments[0],t.fa()),this):(_.l.oc(t),t[w])}return t[w]=e,_.a.ka||_.a.extend(t,_.J.fn),_.J.fn.rb(t),_.a.Ya(t,k),_.options.deferUpdates&&_.ya.deferred(t,!0),t};var k={equalityComparer:i,t:function(){return this[w]},fa:function(){this.notifySubscribers(this[w])},ga:function(){this.notifySubscribers(this[w],"beforeChange")}};_.a.ka&&_.a.Xa(k,_.J.fn);var P=_.N.gd="__ko_proto__";k[P]=_.N,_.Oa=function(e,t){return null!==e&&e!==n&&e[P]!==n&&(e[P]===t||_.Oa(e[P],t))},_.H=function(e){return _.Oa(e,_.N)},_.Ba=function(e){return!!("function"==typeof e&&e[P]===_.N||"function"==typeof e&&e[P]===_.B&&e.Vc)},_.b("observable",_.N),_.b("isObservable",_.H),_.b("isWriteableObservable",_.Ba),_.b("isWritableObservable",_.Ba),_.b("observable.fn",k),_.G(k,"peek",k.t),_.G(k,"valueHasMutated",k.fa),_.G(k,"valueWillMutate",k.ga),_.la=function(e){if("object"!=typeof(e=e||[])||!("length"in e))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return e=_.N(e),_.a.Ya(e,_.la.fn),e.extend({trackArrayChanges:!0})},_.la.fn={remove:function(e){for(var t=this.t(),i=[],n="function"!=typeof e||_.H(e)?function(t){return t===e}:e,o=0;o<t.length;o++){var r=t[o];n(r)&&(0===i.length&&this.ga(),i.push(r),t.splice(o,1),o--)}return i.length&&this.fa(),i},removeAll:function(e){if(e!==n)return e?this.remove((function(t){return 0<=_.a.o(e,t)})):[];var t=this.t(),i=t.slice(0);return this.ga(),t.splice(0,t.length),this.fa(),i},destroy:function(e){var t=this.t(),i="function"!=typeof e||_.H(e)?function(t){return t===e}:e;this.ga();for(var n=t.length-1;0<=n;n--)i(t[n])&&(t[n]._destroy=!0);this.fa()},destroyAll:function(e){return e===n?this.destroy((function(){return!0})):e?this.destroy((function(t){return 0<=_.a.o(e,t)})):[]},indexOf:function(e){var t=this();return _.a.o(t,e)},replace:function(e,t){var i=this.indexOf(e);0<=i&&(this.ga(),this.t()[i]=t,this.fa())}},_.a.ka&&_.a.Xa(_.la.fn,_.N.fn),_.a.q("pop push reverse shift sort splice unshift".split(" "),(function(e){_.la.fn[e]=function(){var t=this.t();this.ga(),this.Vb(t,e,arguments);var i=t[e].apply(t,arguments);return this.fa(),i===t?this:i}})),_.a.q(["slice"],(function(e){_.la.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}})),_.b("observableArray",_.la),_.ya.trackArrayChanges=function(e,t){function i(){if(!o){o=!0;var t=e.notifySubscribers;e.notifySubscribers=function(e,i){return i&&i!==b||++s,t.apply(this,arguments)};var i=[].concat(e.t()||[]);r=null,n=e.X((function(t){var n;t=[].concat(t||[]),e.Pa("arrayChange")&&((!r||1<s)&&(r=_.a.ib(i,t,e.hb)),n=r),i=t,r=null,s=0,n&&n.length&&e.notifySubscribers(n,"arrayChange")}))}}if(e.hb={},t&&"object"==typeof t&&_.a.extend(e.hb,t),e.hb.sparse=!0,!e.Vb){var n,o=!1,r=null,s=0,a=e.sa,l=e.Ia;e.sa=function(t){a&&a.call(e,t),"arrayChange"===t&&i()},e.Ia=function(t){l&&l.call(e,t),"arrayChange"!==t||e.Pa("arrayChange")||(n.k(),o=!1)},e.Vb=function(e,t,i){function n(e,t,i){return a[a.length]={status:e,value:t,index:i}}if(o&&!s){var a=[],l=e.length,u=i.length,c=0;switch(t){case"push":c=l;case"unshift":for(t=0;t<u;t++)n("added",i[t],c+t);break;case"pop":c=l-1;case"shift":l&&n("deleted",e[c],c);break;case"splice":t=Math.min(Math.max(0,i[0]<0?l+i[0]:i[0]),l),l=1===u?l:Math.min(t+(i[1]||0),l),u=t+u-2,c=Math.max(l,u);for(var h=[],p=[],f=2;t<c;++t,++f)t<l&&p.push(n("deleted",e[t],t)),t<u&&h.push(n("added",i[f],t));_.a.dc(p,h);break;default:return}r=a}}}};var E=_.a.Yb("_state");_.m=_.B=function(e,t,i){function o(){if(0<arguments.length){if("function"!=typeof r)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return r.apply(s.pb,arguments),this}return _.l.oc(o),(s.S||s.s&&o.Qa())&&o.aa(),s.T}if("object"==typeof e?i=e:(i=i||{},e&&(i.read=e)),"function"!=typeof i.read)throw Error("Pass a function that returns the value of the ko.computed");var r=i.write,s={T:n,S:!0,Ra:!1,Fb:!1,R:!1,Va:!1,s:!1,jd:i.read,pb:t||i.owner,i:i.disposeWhenNodeIsRemoved||i.i||null,wa:i.disposeWhen||i.wa,mb:null,r:{},L:0,bc:null};return o[E]=s,o.Vc="function"==typeof r,_.a.ka||_.a.extend(o,_.J.fn),_.J.fn.rb(o),_.a.Ya(o,T),i.pure?(s.Va=!0,s.s=!0,_.a.extend(o,D)):i.deferEvaluation&&_.a.extend(o,S),_.options.deferUpdates&&_.ya.deferred(o,!0),s.i&&(s.Fb=!0,s.i.nodeType||(s.i=null)),s.s||i.deferEvaluation||o.aa(),s.i&&o.ba()&&_.a.F.oa(s.i,s.mb=function(){o.k()}),o};var T={equalityComparer:i,Aa:function(){return this[E].L},Pb:function(e,t,i){if(this[E].Va&&t===this)throw Error("A 'pure' computed must not be called recursively");(this[E].r[e]=i).Ga=this[E].L++,i.na=t.Na()},Qa:function(){var e,t,i=this[E].r;for(e in i)if(i.hasOwnProperty(e)&&(t=i[e]).ia.Uc(t.na))return!0},bd:function(){this.Fa&&!this[E].Ra&&this.Fa()},ba:function(){return this[E].S||0<this[E].L},ld:function(){this.Mb||this.ac()},uc:function(e){if(!e.cb||this[E].i)return e.X(this.ac,this);var t=e.X(this.bd,this,"dirty"),i=e.X(this.ld,this);return{ia:e,k:function(){t.k(),i.k()}}},ac:function(){var e=this,t=e.throttleEvaluation;t&&0<=t?(clearTimeout(this[E].bc),this[E].bc=_.a.setTimeout((function(){e.aa(!0)}),t)):e.Fa?e.Fa():e.aa(!0)},aa:function(e){var t=this[E],i=t.wa;if(!t.Ra&&!t.R){if(t.i&&!_.a.nb(t.i)||i&&i()){if(!t.Fb)return void this.k()}else t.Fb=!1;t.Ra=!0;try{this.Qc(e)}finally{t.Ra=!1}t.L||this.k()}},Qc:function(e){var t=this[E],i=t.Va?n:!t.L,o={Hc:this,Ma:t.r,lb:t.L};_.l.Ub({Gc:o,gb:l,m:this,Sa:i}),t.r={},t.L=0,o=this.Pc(t,o),this.tb(t.T,o)&&(t.s||this.notifySubscribers(t.T,"beforeChange"),t.T=o,t.s?this.zc():e&&this.notifySubscribers(t.T)),i&&this.notifySubscribers(t.T,"awake")},Pc:function(e,t){try{var i=e.jd;return e.pb?i.call(e.pb):i()}finally{_.l.end(),t.lb&&!e.s&&_.a.D(t.Ma,a),e.S=!1}},t:function(){var e=this[E];return(e.S&&!e.L||e.s&&this.Qa())&&this.aa(),e.T},Ta:function(e){_.J.fn.Ta.call(this,e),this.Fa=function(){this.Kb(this[E].T),this[E].S=!0,this.Lb(this)}},k:function(){var e=this[E];!e.s&&e.r&&_.a.D(e.r,(function(e,t){t.k&&t.k()})),e.i&&e.mb&&_.a.F.pc(e.i,e.mb),e.r=null,e.L=0,e.R=!0,e.S=!1,e.s=!1,e.i=null}},D={sa:function(e){var t=this,i=t[E];if(!i.R&&i.s&&"change"==e){if(i.s=!1,i.S||t.Qa())i.r=null,i.L=0,i.S=!0,t.aa();else{var n=[];_.a.D(i.r,(function(e,t){n[t.Ga]=e})),_.a.q(n,(function(e,n){var o=i.r[e],r=t.uc(o.ia);r.Ga=n,r.na=o.na,i.r[e]=r}))}i.R||t.notifySubscribers(i.T,"awake")}},Ia:function(e){var t=this[E];t.R||"change"!=e||this.Pa("change")||(_.a.D(t.r,(function(e,i){i.k&&(t.r[e]={ia:i.ia,Ga:i.Ga,na:i.na},i.k())})),t.s=!0,this.notifySubscribers(n,"asleep"))},Na:function(){var e=this[E];return e.s&&(e.S||this.Qa())&&this.aa(),_.J.fn.Na.call(this)}},S={sa:function(e){"change"!=e&&"beforeChange"!=e||this.t()}};_.a.ka&&_.a.Xa(T,_.J.fn);var L=_.N.gd;_.m[L]=_.N,T[L]=_.m,_.Xc=function(e){return _.Oa(e,_.m)},_.Yc=function(e){return _.Oa(e,_.m)&&e[E]&&e[E].Va},_.b("computed",_.m),_.b("dependentObservable",_.m),_.b("isComputed",_.Xc),_.b("isPureComputed",_.Yc),_.b("computed.fn",T),_.G(T,"peek",T.t),_.G(T,"dispose",T.k),_.G(T,"isActive",T.ba),_.G(T,"getDependenciesCount",T.Aa),_.nc=function(e,t){return"function"==typeof e?_.m(e,t,{pure:!0}):((e=_.a.extend({},e)).pure=!0,_.m(e,t))},_.b("pureComputed",_.nc),function(){function e(i,o,r){if(r=r||new t,"object"!=typeof(i=o(i))||null===i||i===n||i instanceof RegExp||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean)return i;var s=i instanceof Array?[]:{};return r.save(i,s),function(e,t){if(e instanceof Array){for(var i=0;i<e.length;i++)t(i);"function"==typeof e.toJSON&&t("toJSON")}else for(i in e)t(i)}(i,(function(t){var a=o(i[t]);switch(typeof a){case"boolean":case"number":case"string":case"function":s[t]=a;break;case"object":case"undefined":var l=r.get(a);s[t]=l!==n?l:e(a,o,r)}})),s}function t(){this.keys=[],this.Ib=[]}_.wc=function(t){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return e(t,(function(e){for(var t=0;_.H(e)&&t<10;t++)e=e();return e}))},_.toJSON=function(e,t,i){return e=_.wc(e),_.a.Eb(e,t,i)},t.prototype={save:function(e,t){var i=_.a.o(this.keys,e);0<=i?this.Ib[i]=t:(this.keys.push(e),this.Ib.push(t))},get:function(e){return 0<=(e=_.a.o(this.keys,e))?this.Ib[e]:n}}}(),_.b("toJS",_.wc),_.b("toJSON",_.toJSON),_.j={u:function(e){switch(_.a.A(e)){case"option":return!0===e.__ko__hasDomDataOptionValue__?_.a.e.get(e,_.d.options.xb):_.a.C<=7?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?_.j.u(e.options[e.selectedIndex]):n;default:return e.value}},ha:function(e,t,i){switch(_.a.A(e)){case"option":switch(typeof t){case"string":_.a.e.set(e,_.d.options.xb,n),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=t;break;default:_.a.e.set(e,_.d.options.xb,t),e.__ko__hasDomDataOptionValue__=!0,e.value="number"==typeof t?t:""}break;case"select":""!==t&&null!==t||(t=n);for(var o,r=-1,s=0,a=e.options.length;s<a;++s)if((o=_.j.u(e.options[s]))==t||""==o&&t===n){r=s;break}(i||0<=r||t===n&&1<e.size)&&(e.selectedIndex=r);break;default:null!==t&&t!==n||(t=""),e.value=t}}},_.b("selectExtensions",_.j),_.b("selectExtensions.readValue",_.j.u),_.b("selectExtensions.writeValue",_.j.ha),_.h=function(){function e(e){123===(e=_.a.$a(e)).charCodeAt(0)&&(e=e.slice(1,-1));var t,i=[],s=e.match(n),a=[],l=0;if(s){s.push(",");for(var u,c=0;u=s[c];++c){var h=u.charCodeAt(0);if(44===h){if(l<=0){i.push(t&&a.length?{key:t,value:a.join("")}:{unknown:t||a.join("")}),t=l=0,a=[];continue}}else if(58===h){if(!l&&!t&&1===a.length){t=a.pop();continue}}else 47===h&&c&&1<u.length?(h=s[c-1].match(o))&&!r[h[0]]&&((s=(e=e.substr(e.indexOf(u)+1)).match(n)).push(","),c=-1,u="/"):40===h||123===h||91===h?++l:41===h||125===h||93===h?--l:t||a.length||34!==h&&39!==h||(u=u.slice(1,-1));a.push(u)}}return i}var t=["true","false","null","undefined"],i=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,n=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),o=/[\])"'A-Za-z0-9_$]+$/,r={in:1,return:1,typeof:1},s={};return{ta:[],ea:s,yb:e,Ua:function(n,o){function r(e,n){var o;if(!c){var h=_.getBindingHandler(e);if(h&&h.preprocess&&!(n=h.preprocess(n,e,r)))return;(h=s[e])&&(o=n,h=o=!(0<=_.a.o(t,o))&&null!==(h=o.match(i))&&(h[1]?"Object("+h[1]+")"+h[2]:o)),h&&l.push("'"+e+"':function(_z){"+o+"=_z}")}u&&(n="function(){return "+n+" }"),a.push("'"+e+"':"+n)}var a=[],l=[],u=(o=o||{}).valueAccessors,c=o.bindingParams,h="string"==typeof n?e(n):n;return _.a.q(h,(function(e){r(e.key||e.unknown,e.value)})),l.length&&r("_ko_property_writers","{"+l.join(",")+" }"),a.join(",")},ad:function(e,t){for(var i=0;i<e.length;i++)if(e[i].key==t)return!0;return!1},Ea:function(e,t,i,n,o){e&&_.H(e)?!_.Ba(e)||o&&e.t()===n||e(n):(e=t.get("_ko_property_writers"))&&e[i]&&e[i](n)}}}(),_.b("expressionRewriting",_.h),_.b("expressionRewriting.bindingRewriteValidators",_.h.ta),_.b("expressionRewriting.parseObjectLiteral",_.h.yb),_.b("expressionRewriting.preProcessBindings",_.h.Ua),_.b("expressionRewriting._twoWayBindings",_.h.ea),_.b("jsonExpressionRewriting",_.h),_.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",_.h.Ua),function(){function e(e){return 8==e.nodeType&&r.test(o?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&s.test(o?e.text:e.nodeValue)}function i(i,n){for(var o=i,r=1,s=[];o=o.nextSibling;){if(t(o)&&0==--r)return s;s.push(o),e(o)&&r++}if(!n)throw Error("Cannot find closing comment tag to match: "+i.nodeValue);return null}function n(e,t){var n=i(e,t);return n?0<n.length?n[n.length-1].nextSibling:e.nextSibling:null}var o=u&&"\x3c!--test--\x3e"===u.createComment("test").text,r=o?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,s=o?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,a={ul:!0,ol:!0};_.f={Z:{},childNodes:function(t){return e(t)?i(t):t.childNodes},xa:function(t){if(e(t))for(var i=0,n=(t=_.f.childNodes(t)).length;i<n;i++)_.removeNode(t[i]);else _.a.ob(t)},da:function(t,i){if(e(t)){_.f.xa(t);for(var n=t.nextSibling,o=0,r=i.length;o<r;o++)n.parentNode.insertBefore(i[o],n)}else _.a.da(t,i)},mc:function(t,i){e(t)?t.parentNode.insertBefore(i,t.nextSibling):t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)},gc:function(t,i,n){n?e(t)?t.parentNode.insertBefore(i,n.nextSibling):n.nextSibling?t.insertBefore(i,n.nextSibling):t.appendChild(i):_.f.mc(t,i)},firstChild:function(i){return e(i)?!i.nextSibling||t(i.nextSibling)?null:i.nextSibling:i.firstChild},nextSibling:function(i){return e(i)&&(i=n(i)),i.nextSibling&&t(i.nextSibling)?null:i.nextSibling},Tc:e,pd:function(e){return(e=(o?e.text:e.nodeValue).match(r))?e[1]:null},kc:function(i){if(a[_.a.A(i)]){var o=i.firstChild;if(o)do{if(1===o.nodeType){var r,s=null;if(r=o.firstChild)do{if(s)s.push(r);else if(e(r)){var l=n(r,!0);l?r=l:s=[r]}else t(r)&&(s=[r])}while(r=r.nextSibling);if(r=s)for(s=o.nextSibling,l=0;l<r.length;l++)s?i.insertBefore(r[l],s):i.appendChild(r[l])}}while(o=o.nextSibling)}}}}(),_.b("virtualElements",_.f),_.b("virtualElements.allowedBindings",_.f.Z),_.b("virtualElements.emptyNode",_.f.xa),_.b("virtualElements.insertAfter",_.f.gc),_.b("virtualElements.prepend",_.f.mc),_.b("virtualElements.setDomNodeChildren",_.f.da),_.Q=function(){this.Fc={}},_.a.extend(_.Q.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind")||_.g.getComponentNameForNode(e);case 8:return _.f.Tc(e);default:return!1}},getBindings:function(e,t){var i=(i=this.getBindingsString(e,t))?this.parseBindingsString(i,t,e):null;return _.g.Ob(i,e,t,!1)},getBindingAccessors:function(e,t){var i=(i=this.getBindingsString(e,t))?this.parseBindingsString(i,t,e,{valueAccessors:!0}):null;return _.g.Ob(i,e,t,!0)},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return _.f.pd(e);default:return null}},parseBindingsString:function(e,t,i,n){try{var o,r=this.Fc,s=e+(n&&n.valueAccessors||"");if(!(o=r[s])){var a,l="with($context){with($data||{}){return{"+_.h.Ua(e,n)+"}}}";a=new Function("$context","$element",l),o=r[s]=a}return o(t,i)}catch(t){throw t.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+t.message,t}}}),_.Q.instance=new _.Q,_.b("bindingProvider",_.Q),function(){function e(e){return function(){return e}}function t(e){return e()}function i(e){return _.a.Ca(_.l.w(e),(function(t,i){return function(){return e()[i]}}))}function o(t,n,o){return"function"==typeof t?i(t.bind(null,n,o)):_.a.Ca(t,e)}function r(e,t){return i(this.getBindings.bind(this,e,t))}function s(e,t,i){var n,o=_.f.firstChild(t),r=_.Q.instance,s=r.preprocessNode;if(s){for(;n=o;)o=_.f.nextSibling(n),s.call(r,n);o=_.f.firstChild(t)}for(;n=o;)o=_.f.nextSibling(n),a(e,n,i)}function a(e,t,i){var n=!0,o=1===t.nodeType;o&&_.f.kc(t),(o&&i||_.Q.instance.nodeHasBindings(t))&&(n=l(t,null,e,i).shouldBindDescendants),n&&!c[_.a.A(t)]&&s(e,t,!o)}function l(e,i,o,s){var a,l,u=_.a.e.get(e,h);if(!i){if(u)throw Error("You cannot apply bindings multiple times to the same element.");_.a.e.set(e,h,!0)}if(!u&&s&&_.tc(e,o),i&&"function"!=typeof i)a=i;else{var c=_.Q.instance,p=c.getBindingAccessors||r,f=_.B((function(){return(a=i?i(o,e):p.call(c,e,o))&&o.P&&o.P(),a}),null,{i:e});a&&f.ba()||(f=null)}if(a){var d=f?function(e){return function(){return t(f()[e])}}:function(e){return a[e]},m=function(){return _.a.Ca(f?f():a,t)};m.get=function(e){return a[e]&&t(d(e))},m.has=function(e){return e in a},s=function(e){var t=[],i={},n=[];return _.a.D(e,(function o(r){if(!i[r]){var s=_.getBindingHandler(r);s&&(s.after&&(n.push(r),_.a.q(s.after,(function(t){if(e[t]){if(-1!==_.a.o(n,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+n.join(", "));o(t)}})),n.length--),t.push({key:r,fc:s})),i[r]=!0}})),t}(a),_.a.q(s,(function(t){var i=t.fc.init,r=t.fc.update,s=t.key;if(8===e.nodeType&&!_.f.Z[s])throw Error("The binding '"+s+"' cannot be used with virtual elements");try{"function"==typeof i&&_.l.w((function(){var t=i(e,d(s),m,o.$data,o);if(t&&t.controlsDescendantBindings){if(l!==n)throw Error("Multiple bindings ("+l+" and "+s+") are trying to control3D descendant bindings of the same element. You cannot use these bindings together on the same element.");l=s}})),"function"==typeof r&&_.B((function(){r(e,d(s),m,o.$data,o)}),null,{i:e})}catch(e){throw e.message='Unable to process binding "'+s+": "+a[s]+'"\nMessage: '+e.message,e}}))}return{shouldBindDescendants:l===n}}function u(e){return e&&e instanceof _.U?e:new _.U(e)}_.d={};var c={script:!0,textarea:!0,template:!0};_.getBindingHandler=function(e){return _.d[e]},_.U=function(e,t,i,o){var r,s=this,a="function"==typeof e&&!_.H(e),l=_.B((function(){var n=a?e():e,r=_.a.c(n);return t?(t.P&&t.P(),_.a.extend(s,t),l&&(s.P=l)):(s.$parents=[],s.$root=r,s.ko=_),s.$rawData=n,s.$data=r,i&&(s[i]=r),o&&o(s,t,r),s.$data}),null,{wa:function(){return r&&!_.a.Qb(r)},i:!0});l.ba()&&((s.P=l).equalityComparer=null,r=[],l.Ac=function(e){r.push(e),_.a.F.oa(e,(function(e){_.a.La(r,e),r.length||(l.k(),s.P=l=n)}))})},_.U.prototype.createChildContext=function(e,t,i){return new _.U(e,this,t,(function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),i&&i(e)}))},_.U.prototype.extend=function(e){return new _.U(this.P||this.$data,this,null,(function(t,i){t.$rawData=i.$rawData,_.a.extend(t,"function"==typeof e?e():e)}))};var h=_.a.e.I(),p=_.a.e.I();_.tc=function(e,t){if(2!=arguments.length)return _.a.e.get(e,p);_.a.e.set(e,p,t),t.P&&t.P.Ac(e)},_.Ja=function(e,t,i){return 1===e.nodeType&&_.f.kc(e),l(e,t,u(i),!0)},_.Dc=function(e,t,i){return i=u(i),_.Ja(e,o(t,i,e),i)},_.eb=function(e,t){1!==t.nodeType&&8!==t.nodeType||s(u(e),t,!0)},_.Rb=function(e,t){if(!v&&x.jQuery&&(v=x.jQuery),t&&1!==t.nodeType&&8!==t.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");t=t||x.document.body,a(u(e),t,!0)},_.kb=function(e){switch(e.nodeType){case 1:case 8:var t=_.tc(e);if(t)return t;if(e.parentNode)return _.kb(e.parentNode)}return n},_.Jc=function(e){return(e=_.kb(e))?e.$data:n},_.b("bindingHandlers",_.d),_.b("applyBindings",_.Rb),_.b("applyBindingsToDescendants",_.eb),_.b("applyBindingAccessorsToNode",_.Ja),_.b("applyBindingsToNode",_.Dc),_.b("contextFor",_.kb),_.b("dataFor",_.Jc)}(),function(e){function t(t,n){var s,a=o.hasOwnProperty(t)?o[t]:e;a?a.X(n):((a=o[t]=new _.J).X(n),i(t,(function(e,i){var n=!(!i||!i.synchronous);r[t]={definition:e,Zc:n},delete o[t],s||n?a.notifySubscribers(e):_.Y.Wa((function(){a.notifySubscribers(e)}))})),s=!0)}function i(e,t){n("getConfig",[e],(function(i){i?n("loadComponent",[e,i],(function(e){t(e,i)})):t(null,null)}))}function n(t,i,o,r){r||(r=_.g.loaders.slice(0));var s=r.shift();if(s){var a=s[t];if(a){var l=!1;if(a.apply(s,i.concat((function(e){l?o(null):null!==e?o(e):n(t,i,o,r)})))!==e&&(l=!0,!s.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else n(t,i,o,r)}else o(null)}var o={},r={};_.g={get:function(i,n){var o=r.hasOwnProperty(i)?r[i]:e;o?o.Zc?_.l.w((function(){n(o.definition)})):_.Y.Wa((function(){n(o.definition)})):t(i,n)},Xb:function(e){delete r[e]},Jb:n},_.g.loaders=[],_.b("components",_.g),_.b("components.get",_.g.get),_.b("components.clearCachedDefinition",_.g.Xb)}(),function(){function e(e,t,i,n){function r(){0==--l&&n(s)}var s={},l=2,u=i.template;i=i.viewModel,u?o(t,u,(function(t){_.g.Jb("loadTemplate",[e,t],(function(e){s.template=e,r()}))})):r(),i?o(t,i,(function(t){_.g.Jb("loadViewModel",[e,t],(function(e){s[a]=e,r()}))})):r()}function i(e){switch(_.a.A(e)){case"script":return _.a.ma(e.text);case"textarea":return _.a.ma(e.value);case"template":if(n(e.content))return _.a.ua(e.content.childNodes)}return _.a.ua(e.childNodes)}function n(e){return x.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function o(e,i,n){"string"==typeof i.require?t||x.require?(t||x.require)([i.require],n):e("Uses require, but no AMD loader is present"):n(i)}function r(e){return function(t){throw Error("Component '"+e+"': "+t)}}var s={};_.g.register=function(e,t){if(!t)throw Error("Invalid configuration for "+e);if(_.g.ub(e))throw Error("Component "+e+" is already registered");s[e]=t},_.g.ub=function(e){return s.hasOwnProperty(e)},_.g.od=function(e){delete s[e],_.g.Xb(e)},_.g.Zb={getConfig:function(e,t){t(s.hasOwnProperty(e)?s[e]:null)},loadComponent:function(t,i,n){var s=r(t);o(s,i,(function(i){e(t,s,i,n)}))},loadTemplate:function(e,t,o){if(e=r(e),"string"==typeof t)o(_.a.ma(t));else if(t instanceof Array)o(t);else if(n(t))o(_.a.V(t.childNodes));else if(t.element)if(t=t.element,x.HTMLElement?t instanceof HTMLElement:t&&t.tagName&&1===t.nodeType)o(i(t));else if("string"==typeof t){var s=u.getElementById(t);s?o(i(s)):e("Cannot find element with ID "+t)}else e("Unknown element type: "+t);else e("Unknown template value: "+t)},loadViewModel:function(e,t,i){!function e(t,i,n){if("function"==typeof i)n((function(e){return new i(e)}));else if("function"==typeof i[a])n(i[a]);else if("instance"in i){var o=i.instance;n((function(){return o}))}else"viewModel"in i?e(t,i.viewModel,n):t("Unknown viewModel value: "+i)}(r(e),t,i)}};var a="createViewModel";_.b("components.register",_.g.register),_.b("components.isRegistered",_.g.ub),_.b("components.unregister",_.g.od),_.b("components.defaultLoader",_.g.Zb),_.g.loaders.push(_.g.Zb),_.g.Bc=s}(),function(){function e(e,i){if(n=e.getAttribute("params")){var n=t.parseBindingsString(n,i,e,{valueAccessors:!0,bindingParams:!0}),o=(n=_.a.Ca(n,(function(t){return _.m(t,null,{i:e})})),_.a.Ca(n,(function(t){var i=t.t();return t.ba()?_.m({read:function(){return _.a.c(t())},write:_.Ba(i)&&function(e){t()(e)},i:e}):i})));return o.hasOwnProperty("$raw")||(o.$raw=n),o}return{$raw:{}}}_.g.getComponentNameForNode=function(e){var t=_.a.A(e);if(_.g.ub(t)&&(-1!=t.indexOf("-")||"[object HTMLUnknownElement]"==""+e||_.a.C<=8&&e.tagName===t))return t},_.g.Ob=function(t,i,n,o){if(1===i.nodeType){var r=_.g.getComponentNameForNode(i);if(r){if((t=t||{}).component)throw Error('Cannot use the "component" binding on a custom element matching a component');var s={name:r,params:e(i,n)};t.component=o?function(){return s}:s}}return t};var t=new _.Q;_.a.C<9&&(_.g.register=function(e){return function(t){return u.createElement(t),e.apply(this,arguments)}}(_.g.register),u.createDocumentFragment=function(e){return function(){var t,i=e(),n=_.g.Bc;for(t in n)n.hasOwnProperty(t)&&i.createElement(t);return i}}(u.createDocumentFragment))}(),function(e){var t=0;_.d.component={init:function(e,i,n,o,r){function s(){var e=a&&a.dispose;"function"==typeof e&&e.call(a),l=a=null}var a,l,u=_.a.V(_.f.childNodes(e));return _.a.F.oa(e,s),_.m((function(){var n,o,c=_.a.c(i());if("string"==typeof c?n=c:(n=_.a.c(c.name),o=_.a.c(c.params)),!n)throw Error("No component name specified");var h=l=++t;_.g.get(n,(function(t){if(l===h){if(s(),!t)throw Error("Unknown component '"+n+"'");!function(e,t,i){if(!(t=t.template))throw Error("Component '"+e+"' has no template");e=_.a.ua(t),_.f.da(i,e)}(n,t,e);var i=function(e,t,i,n){var o=e.createViewModel;return o?o.call(e,n,{element:t,templateNodes:i}):n}(t,e,u,o);t=r.createChildContext(i,void 0,(function(e){e.$component=i,e.$componentTemplateNodes=u})),a=i,_.eb(t,e)}}))}),null,{i:e}),{controlsDescendantBindings:!0}}},_.f.Z.component=!0}();var A={class:"className",for:"htmlFor"};_.d.attr={update:function(e,t){var i=_.a.c(t())||{};_.a.D(i,(function(t,i){var o=!1===(i=_.a.c(i))||null===i||i===n;o&&e.removeAttribute(t),_.a.C<=8&&t in A?(t=A[t],o?e.removeAttribute(t):e[t]=i):o||e.setAttribute(t,i.toString()),"name"===t&&_.a.rc(e,o?"":i.toString())}))}},_.d.checked={after:["value","attr"],init:function(e,t,i){function o(){var n=e.checked,o=p?r():n;if(!_.va.Sa()&&(!a||n)){var s=_.l.w(t);if(u){var l=c?s.t():s;h!==o?(n&&(_.a.pa(l,o,!0),_.a.pa(l,h,!1)),h=o):_.a.pa(l,o,n),c&&_.Ba(s)&&s(l)}else _.h.Ea(s,i,"checked",o,!0)}}var r=_.nc((function(){return i.has("checkedValue")?_.a.c(i.get("checkedValue")):i.has("value")?_.a.c(i.get("value")):e.value})),s="checkbox"==e.type,a="radio"==e.type;if(s||a){var l=t(),u=s&&_.a.c(l)instanceof Array,c=!(u&&l.push&&l.splice),h=u?r():n,p=a||u;a&&!e.name&&_.d.uniqueName.init(e,(function(){return!0})),_.m(o,null,{i:e}),_.a.p(e,"click",o),_.m((function(){var i=_.a.c(t());e.checked=u?0<=_.a.o(i,r()):s?i:r()===i}),null,{i:e}),l=n}}},_.h.ea.checked=!0,_.d.checkedValue={update:function(e,t){e.value=_.a.c(t())}},_.d.css={update:function(e,t){var i=_.a.c(t());null!==i&&"object"==typeof i?_.a.D(i,(function(t,i){i=_.a.c(i),_.a.bb(e,t,i)})):(i=_.a.$a(String(i||"")),_.a.bb(e,e.__ko__cssValue,!1),e.__ko__cssValue=i,_.a.bb(e,i,!0))}},_.d.enable={update:function(e,t){var i=_.a.c(t());i&&e.disabled?e.removeAttribute("disabled"):i||e.disabled||(e.disabled=!0)}},_.d.disable={update:function(e,t){_.d.enable.update(e,(function(){return!_.a.c(t())}))}},_.d.event={init:function(e,t,i,n,o){var r=t()||{};_.a.D(r,(function(r){"string"==typeof r&&_.a.p(e,r,(function(e){var s,a=t()[r];if(a){try{var l=_.a.V(arguments);n=o.$data,l.unshift(n),s=a.apply(n,l)}finally{!0!==s&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===i.get(r+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}}))}))}},_.d.foreach={ic:function(e){return function(){var t=e(),i=_.a.zb(t);return i&&"number"!=typeof i.length?(_.a.c(t),{foreach:i.data,as:i.as,includeDestroyed:i.includeDestroyed,afterAdd:i.afterAdd,beforeRemove:i.beforeRemove,afterRender:i.afterRender,beforeMove:i.beforeMove,afterMove:i.afterMove,templateEngine:_.W.sb}):{foreach:t,templateEngine:_.W.sb}}},init:function(e,t){return _.d.template.init(e,_.d.foreach.ic(t))},update:function(e,t,i,n,o){return _.d.template.update(e,_.d.foreach.ic(t),i,n,o)}},_.h.ta.foreach=!1,_.f.Z.foreach=!0,_.d.hasfocus={init:function(e,t,i){function n(n){e.__ko_hasfocusUpdating=!0;var o=e.ownerDocument;if("activeElement"in o){var r;try{r=o.activeElement}catch(e){r=o.body}n=r===e}o=t(),_.h.Ea(o,i,"hasfocus",n,!0),e.__ko_hasfocusLastValue=n,e.__ko_hasfocusUpdating=!1}var o=n.bind(null,!0),r=n.bind(null,!1);_.a.p(e,"focus",o),_.a.p(e,"focusin",o),_.a.p(e,"blur",r),_.a.p(e,"focusout",r)},update:function(e,t){var i=!!_.a.c(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===i||(i?e.focus():e.blur(),!i&&e.__ko_hasfocusLastValue&&e.ownerDocument.body.focus(),_.l.w(_.a.Da,null,[e,i?"focusin":"focusout"]))}},_.h.ea.hasfocus=!0,_.d.hasFocus=_.d.hasfocus,_.h.ea.hasFocus=!0,_.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){_.a.Cb(e,t())}},c("if"),c("ifnot",!1,!0),c("with",!0,!1,(function(e,t){return e.createChildContext(t)}));var O={};_.d.options={init:function(e){if("select"!==_.a.A(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(e,t,i){function o(){return _.a.Ka(e.options,(function(e){return e.selected}))}function r(e,t,i){var n=typeof t;return"function"==n?t(e):"string"==n?e[t]:i}function s(t,n){if(d&&c)_.j.ha(e,_.a.c(i.get("value")),!0);else if(f.length){var o=0<=_.a.o(f,_.j.u(n[0]));_.a.sc(n[0],o),d&&!o&&_.l.w(_.a.Da,null,[e,"change"])}}var a=e.multiple,l=0!=e.length&&a?e.scrollTop:null,u=_.a.c(t()),c=i.get("valueAllowUnset")&&i.has("value"),h=i.get("optionsIncludeDestroyed");t={};var p,f=[];c||(a?f=_.a.fb(o(),_.j.u):0<=e.selectedIndex&&f.push(_.j.u(e.options[e.selectedIndex]))),u&&(void 0===u.length&&(u=[u]),p=_.a.Ka(u,(function(e){return h||e===n||null===e||!_.a.c(e._destroy)})),i.has("optionsCaption")&&null!==(u=_.a.c(i.get("optionsCaption")))&&u!==n&&p.unshift(O));var d=!1;t.beforeRemove=function(t){e.removeChild(t)},u=s,i.has("optionsAfterRender")&&"function"==typeof i.get("optionsAfterRender")&&(u=function(e,t){s(0,t),_.l.w(i.get("optionsAfterRender"),null,[t[0],e!==O?e:n])}),_.a.Bb(e,p,(function(t,o,s){return s.length&&(f=!c&&s[0].selected?[_.j.u(s[0])]:[],d=!0),o=e.ownerDocument.createElement("option"),t===O?(_.a.Za(o,i.get("optionsCaption")),_.j.ha(o,n)):(s=r(t,i.get("optionsValue"),t),_.j.ha(o,_.a.c(s)),t=r(t,i.get("optionsText"),s),_.a.Za(o,t)),[o]}),t,u),_.l.w((function(){c?_.j.ha(e,_.a.c(i.get("value")),!0):(a?f.length&&o().length<f.length:f.length&&0<=e.selectedIndex?_.j.u(e.options[e.selectedIndex])!==f[0]:f.length||0<=e.selectedIndex)&&_.a.Da(e,"change")})),_.a.Nc(e),l&&20<Math.abs(l-e.scrollTop)&&(e.scrollTop=l)}},_.d.options.xb=_.a.e.I(),_.d.selectedOptions={after:["options","foreach"],init:function(e,t,i){_.a.p(e,"change",(function(){var n=t(),o=[];_.a.q(e.getElementsByTagName("option"),(function(e){e.selected&&o.push(_.j.u(e))})),_.h.Ea(n,i,"selectedOptions",o)}))},update:function(e,t){if("select"!=_.a.A(e))throw Error("values binding applies only to SELECT elements");var i=_.a.c(t()),n=e.scrollTop;i&&"number"==typeof i.length&&_.a.q(e.getElementsByTagName("option"),(function(e){var t=0<=_.a.o(i,_.j.u(e));e.selected!=t&&_.a.sc(e,t)})),e.scrollTop=n}},_.h.ea.selectedOptions=!0,_.d.style={update:function(e,t){var i=_.a.c(t()||{});_.a.D(i,(function(t,i){null!==(i=_.a.c(i))&&i!==n&&!1!==i||(i=""),e.style[t]=i}))}},_.d.submit={init:function(e,t,i,n,o){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");_.a.p(e,"submit",(function(i){var n,r=t();try{n=r.call(o.$data,e)}finally{!0!==n&&(i.preventDefault?i.preventDefault():i.returnValue=!1)}}))}},_.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){_.a.Za(e,t())}},_.f.Z.text=!0,function(){if(x&&x.navigator)var e=function(e){if(e)return parseFloat(e[1])},t=x.opera&&x.opera.version&&parseInt(x.opera.version()),i=x.navigator.userAgent,o=e(i.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),r=e(i.match(/Firefox\/([^ ]*)/));if(_.a.C<10)var s=_.a.e.I(),a=_.a.e.I(),l=function(e){var t=this.activeElement;(t=t&&_.a.e.get(t,a))&&t(e)},u=function(e,t){var i=e.ownerDocument;_.a.e.get(i,s)||(_.a.e.set(i,s,!0),_.a.p(i,"selectionchange",l)),_.a.e.set(e,a,t)};_.d.textInput={init:function(e,i,s){function a(t,i){_.a.p(e,t,i)}function l(){h||(p=e.value,h=_.a.setTimeout(c,4))}function c(){clearTimeout(h),p=h=n;var t=e.value;f!==t&&(f=t,_.h.Ea(i(),s,"textInput",t))}var h,p,f=e.value,d=9==_.a.C?l:c;_.a.C<10?(a("propertychange",(function(e){"value"===e.propertyName&&d(e)})),8==_.a.C&&(a("keyup",c),a("keydown",c)),8<=_.a.C&&(u(e,d),a("dragend",l))):(a("input",c),o<5&&"textarea"===_.a.A(e)?(a("keydown",l),a("paste",l),a("cut",l)):t<11?a("keydown",l):r<4&&(a("DOMAutoComplete",c),a("dragdrop",c),a("drop",c))),a("change",c),_.m((function t(){var o=_.a.c(i());null!==o&&o!==n||(o=""),p!==n&&o===p?_.a.setTimeout(t,4):e.value!==o&&(f=o,e.value=o)}),null,{i:e})}},_.h.ea.textInput=!0,_.d.textinput={preprocess:function(e,t,i){i("textInput",e)}}}(),_.d.uniqueName={init:function(e,t){if(t()){var i="ko_unique_"+ ++_.d.uniqueName.Ic;_.a.rc(e,i)}}},_.d.uniqueName.Ic=0,_.d.value={after:["options","foreach"],init:function(e,t,i){if("input"!=e.tagName.toLowerCase()||"checkbox"!=e.type&&"radio"!=e.type){var n=["change"],o=i.get("valueUpdate"),r=!1,s=null;o&&("string"==typeof o&&(o=[o]),_.a.ra(n,o),n=_.a.Tb(n));var a=function(){s=null,r=!1;var n=t(),o=_.j.u(e);_.h.Ea(n,i,"value",o)};!_.a.C||"input"!=e.tagName.toLowerCase()||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=_.a.o(n,"propertychange")||(_.a.p(e,"propertychange",(function(){r=!0})),_.a.p(e,"focus",(function(){r=!1})),_.a.p(e,"blur",(function(){r&&a()}))),_.a.q(n,(function(t){var i=a;_.a.nd(t,"after")&&(i=function(){s=_.j.u(e),_.a.setTimeout(a,0)},t=t.substring(5)),_.a.p(e,t,i)}));var l=function(){var n=_.a.c(t()),o=_.j.u(e);if(null!==s&&n===s)_.a.setTimeout(l,0);else if(n!==o)if("select"===_.a.A(e)){var r=i.get("valueAllowUnset");(o=function(){_.j.ha(e,n,r)})(),r||n===_.j.u(e)?_.a.setTimeout(o,0):_.l.w(_.a.Da,null,[e,"change"])}else _.j.ha(e,n)};_.m(l,null,{i:e})}else _.Ja(e,{checkedValue:t})},update:function(){}},_.h.ea.value=!0,_.d.visible={update:function(e,t){var i=_.a.c(t()),n="none"!=e.style.display;i&&!n?e.style.display="":!i&&n&&(e.style.display="none")}},function(e){_.d[e]={init:function(t,i,n,o,r){return _.d.event.init.call(this,t,(function(){var t={};return t[e]=i(),t}),n,o,r)}}}("click"),_.O=function(){},_.O.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},_.O.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},_.O.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){var i=(t=t||u).getElementById(e);if(!i)throw Error("Cannot find template with ID "+e);return new _.v.n(i)}if(1==e.nodeType||8==e.nodeType)return new _.v.qa(e);throw Error("Unknown template type: "+e)},_.O.prototype.renderTemplate=function(e,t,i,n){return e=this.makeTemplateSource(e,n),this.renderTemplateSource(e,t,i,n)},_.O.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting||this.makeTemplateSource(e,t).data("isRewritten")},_.O.prototype.rewriteTemplate=function(e,t,i){t=t((e=this.makeTemplateSource(e,i)).text()),e.text(t),e.data("isRewritten",!0)},_.b("templateEngine",_.O),_.Gb=function(){function e(e,t,i,n){e=_.h.yb(e);for(var o=_.h.ta,r=0;r<e.length;r++){var s=e[r].key;if(o.hasOwnProperty(s)){var a=o[s];if("function"==typeof a){if(s=a(e[r].value))throw Error(s)}else if(!a)throw Error("This template engine does not support the '"+s+"' binding within its templates")}}return i="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+_.h.Ua(e,{valueAccessors:!0})+" } })()},'"+i.toLowerCase()+"')",n.createJavaScriptEvaluatorBlock(i)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,i=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Oc:function(e,t,i){t.isTemplateRewritten(e,i)||t.rewriteTemplate(e,(function(e){return _.Gb.dd(e,t)}),i)},dd:function(n,o){return n.replace(t,(function(t,i,n,r,s){return e(s,i,n,o)})).replace(i,(function(t,i){return e(i,"\x3c!-- ko --\x3e","#comment",o)}))},Ec:function(e,t){return _.M.wb((function(i,n){var o=i.nextSibling;o&&o.nodeName.toLowerCase()===t&&_.Ja(o,e,n)}))}}}(),_.b("__tr_ambtns",_.Gb.Ec),function(){_.v={},_.v.n=function(e){if(this.n=e){var t=_.a.A(e);this.ab="script"===t?1:"textarea"===t?2:"template"==t&&e.content&&11===e.content.nodeType?3:4}},_.v.n.prototype.text=function(){var e=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.n[e];var t=arguments[0];"innerHTML"===e?_.a.Cb(this.n,t):this.n[e]=t};var e=_.a.e.I()+"_";_.v.n.prototype.data=function(t){if(1===arguments.length)return _.a.e.get(this.n,e+t);_.a.e.set(this.n,e+t,arguments[1])};var t=_.a.e.I();_.v.n.prototype.nodes=function(){var e=this.n;if(0==arguments.length)return(_.a.e.get(e,t)||{}).jb||(3===this.ab?e.content:4===this.ab?e:n);_.a.e.set(e,t,{jb:arguments[0]})},_.v.qa=function(e){this.n=e},_.v.qa.prototype=new _.v.n,_.v.qa.prototype.text=function(){if(0==arguments.length){var e=_.a.e.get(this.n,t)||{};return e.Hb===n&&e.jb&&(e.Hb=e.jb.innerHTML),e.Hb}_.a.e.set(this.n,t,{Hb:arguments[0]})},_.b("templateSources",_.v),_.b("templateSources.domElement",_.v.n),_.b("templateSources.anonymousTemplate",_.v.qa)}(),function(){function e(e,t,i){var n;for(t=_.f.nextSibling(t);e&&(n=e)!==t;)i(n,e=_.f.nextSibling(n))}function t(t,i){if(t.length){var n=t[0],o=t[t.length-1],r=n.parentNode,s=_.Q.instance,a=s.preprocessNode;if(a){if(e(n,o,(function(e,t){var i=e.previousSibling,r=a.call(s,e);r&&(e===n&&(n=r[0]||t),e===o&&(o=r[r.length-1]||i))})),t.length=0,!n)return;n===o?t.push(n):(t.push(n,o),_.a.za(t,r))}e(n,o,(function(e){1!==e.nodeType&&8!==e.nodeType||_.Rb(i,e)})),e(n,o,(function(e){1!==e.nodeType&&8!==e.nodeType||_.M.yc(e,[i])})),_.a.za(t,r)}}function i(e){return e.nodeType?e:0<e.length?e[0]:null}function o(e,n,o,r,a){a=a||{};var l=(e&&i(e)||o||{}).ownerDocument,u=a.templateEngine||s;if(_.Gb.Oc(o,u,l),"number"!=typeof(o=u.renderTemplate(o,r,a,l)).length||0<o.length&&"number"!=typeof o[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(l=!1,n){case"replaceChildren":_.f.da(e,o),l=!0;break;case"replaceNode":_.a.qc(e,o),l=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+n)}return l&&(t(o,r),a.afterRender&&_.l.w(a.afterRender,null,[o,r.$data])),o}function r(e,t,i){return _.H(e)?e():"function"==typeof e?e(t,i):e}var s;_.Db=function(e){if(e!=n&&!(e instanceof _.O))throw Error("templateEngine must inherit from ko.templateEngine");s=e},_.Ab=function(e,t,a,l,u){if(((a=a||{}).templateEngine||s)==n)throw Error("Set a template engine before calling renderTemplate");if(u=u||"replaceChildren",l){var c=i(l);return _.B((function(){var n=t&&t instanceof _.U?t:new _.U(_.a.c(t)),s=r(e,n.$data,n);n=o(l,u,s,n,a),"replaceNode"==u&&(c=i(l=n))}),null,{wa:function(){return!c||!_.a.nb(c)},i:c&&"replaceNode"==u?c.parentNode:c})}return _.M.wb((function(i){_.Ab(e,t,a,i,"replaceNode")}))},_.kd=function(e,i,s,a,l){function u(e,i){t(i,h),s.afterRender&&s.afterRender(i,e),h=null}function c(t,i){return h=l.createChildContext(t,s.as,(function(e){e.$index=i})),o(null,"ignoreTargetNode",r(e,t,h),h,s)}var h;return _.B((function(){var e=_.a.c(i)||[];void 0===e.length&&(e=[e]),e=_.a.Ka(e,(function(e){return s.includeDestroyed||e===n||null===e||!_.a.c(e._destroy)})),_.l.w(_.a.Bb,null,[a,e,c,s,u])}),null,{i:a})};var a=_.a.e.I();_.d.template={init:function(e,t){var i=_.a.c(t());if("string"==typeof i||i.name)_.f.xa(e);else{if("nodes"in i){if(i=i.nodes||[],_.H(i))throw Error('The "nodes" option must be a plain, non-observable array.')}else i=_.f.childNodes(e);i=_.a.jc(i),new _.v.qa(e).nodes(i)}return{controlsDescendantBindings:!0}},update:function(e,t,i,o,r){var s,l=t();i=!0,o=null,"string"==typeof(t=_.a.c(l))?t={}:(l=t.name,"if"in t&&(i=_.a.c(t.if)),i&&"ifnot"in t&&(i=!_.a.c(t.ifnot)),s=_.a.c(t.data)),"foreach"in t?o=_.kd(l||e,i&&t.foreach||[],t,e,r):i?(r="data"in t?r.createChildContext(s,t.as):r,o=_.Ab(l||e,r,t,e)):_.f.xa(e),r=o,(s=_.a.e.get(e,a))&&"function"==typeof s.k&&s.k(),_.a.e.set(e,a,r&&r.ba()?r:n)}},_.h.ta.template=function(e){return 1==(e=_.h.yb(e)).length&&e[0].unknown||_.h.ad(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},_.f.Z.template=!0}(),_.b("setTemplateEngine",_.Db),_.b("renderTemplate",_.Ab),_.a.dc=function(e,t,i){var n,o,r,s,a;if(e.length&&t.length)for(n=o=0;(!i||n<i)&&(s=e[o]);++o){for(r=0;a=t[r];++r)if(s.value===a.value){s.moved=a.index,a.moved=s.index,t.splice(r,1),n=r=0;break}n+=r}},_.a.ib=function(){function e(e,t,i,n,o){var r,s,a,l,u,c=Math.min,h=Math.max,p=[],f=e.length,d=t.length,m=d-f||1,g=f+d+1;for(r=0;r<=f;r++)for(l=a,p.push(a=[]),u=c(d,r+m),s=h(0,r-1);s<=u;s++)a[s]=s?r?e[r-1]===t[s-1]?l[s-1]:c(l[s]||g,a[s-1]||g)+1:s+1:r+1;for(c=[],h=[],m=[],r=f,s=d;r||s;)d=p[r][s]-1,s&&d===p[r][s-1]?h.push(c[c.length]={status:i,value:t[--s],index:s}):r&&d===p[r-1][s]?m.push(c[c.length]={status:n,value:e[--r],index:r}):(--s,--r,o.sparse||c.push({status:"retained",value:t[s]}));return _.a.dc(m,h,!o.dontLimitMoves&&10*f),c.reverse()}return function(t,i,n){return n="boolean"==typeof n?{dontLimitMoves:n}:n||{},i=i||[],(t=t||[]).length<i.length?e(t,i,"added","deleted",n):e(i,t,"deleted","added",n)}}(),_.b("utils.compareArrays",_.a.ib),function(){function e(e,t,i,o,r){var s=[],a=_.B((function(){var n=t(i,r,_.a.za(s,e))||[];0<s.length&&(_.a.qc(s,n),o&&_.l.w(o,null,[i,n,r])),s.length=0,_.a.ra(s,n)}),null,{i:e,wa:function(){return!_.a.Qb(s)}});return{ca:s,B:a.ba()?a:n}}var t=_.a.e.I(),i=_.a.e.I();_.a.Bb=function(o,r,s,a,l){function u(e,t){x=f[t],v!==t&&(P[e]=x),x.qb(v++),_.a.za(x.ca,o),g.push(x),C.push(x)}function c(e,t){if(e)for(var i=0,n=t.length;i<n;i++)t[i]&&_.a.q(t[i].ca,(function(n){e(n,i,t[i].ja)}))}r=r||[],a=a||{};var h,p=_.a.e.get(o,t)===n,f=_.a.e.get(o,t)||[],d=_.a.fb(f,(function(e){return e.ja})),m=_.a.ib(d,r,a.dontLimitMoves),g=[],y=0,v=0,b=[],C=[];r=[];for(var x,w,k,P=[],E=(d=[],0);w=m[E];E++)switch(k=w.moved,w.status){case"deleted":k===n&&((x=f[y]).B&&(x.B.k(),x.B=n),_.a.za(x.ca,o).length&&(a.beforeRemove&&(g.push(x),C.push(x),x.ja===i?x=null:r[E]=x),x&&b.push.apply(b,x.ca))),y++;break;case"retained":u(E,y++);break;case"added":k!==n?u(E,k):(x={ja:w.value,qb:_.N(v++)},g.push(x),C.push(x),p||(d[E]=x))}for(_.a.e.set(o,t,g),c(a.beforeMove,P),_.a.q(b,a.beforeRemove?_.$:_.removeNode),E=0,p=_.f.firstChild(o);x=C[E];E++){for(x.ca||_.a.extend(x,e(o,s,x.ja,l,x.qb)),y=0;m=x.ca[y];p=m.nextSibling,h=m,y++)m!==p&&_.f.gc(o,m,h);!x.Wc&&l&&(l(x.ja,x.ca,x.qb),x.Wc=!0)}for(c(a.beforeRemove,r),E=0;E<r.length;++E)r[E]&&(r[E].ja=i);c(a.afterMove,P),c(a.afterAdd,d)}}(),_.b("utils.setDomNodeChildrenFromArrayMapping",_.a.Bb),_.W=function(){this.allowTemplateRewriting=!1},_.W.prototype=new _.O,_.W.prototype.renderTemplateSource=function(e,t,i,n){return(t=_.a.C<9||!e.nodes?null:e.nodes())?_.a.V(t.cloneNode(!0).childNodes):(e=e.text(),_.a.ma(e,n))},_.W.sb=new _.W,_.Db(_.W.sb),_.b("nativeTemplateEngine",_.W),function(){_.vb=function(){var e=this.$c=function(){if(!v||!v.tmpl)return 0;try{if(0<=v.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(t,i,n,o){if(o=o||u,n=n||{},e<2)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var r=t.data("precompiled");return r||(r=t.text()||"",r=v.template(null,"{{ko_with $item.koBindingContext}}"+r+"{{/ko_with}}"),t.data("precompiled",r)),t=[i.$data],i=v.extend({koBindingContext:i},n.templateOptions),(i=v.tmpl(r,t,i)).appendTo(o.createElement("div")),v.fragments={},i},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){u.write("<script type='text/html' id='"+e+"'>"+t+"<\/script>")},0<e&&(v.tmpl.tag.ko_code={open:"__.push($1 || '');"},v.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},_.vb.prototype=new _.O;var e=new _.vb;0<e.$c&&_.Db(e),_.b("jqueryTmplTemplateEngine",_.vb)}()}))}(),function(e,t){"use strict";function i(e,t){if(!e||"object"!=typeof e)throw new Error("When calling ko.track, you must pass an object as the first parameter.");return function(e){return!!e&&"object"==typeof e&&e.constructor===Object}(t)?(t.deep=t.deep||!1,t.fields=t.fields||Object.getOwnPropertyNames(e),t.lazy=t.lazy||!1,o(e,t.fields,t)):o(e,t||Object.getOwnPropertyNames(e),{}),e}function n(e,t,i){var n=f.isObservable(e),o=!n&&Array.isArray(e),r=n?e:o?f.observableArray(e):f.observable(e);return i[t]=function(){return r},(o||n&&"push"in r)&&l(f,r),{configurable:!0,enumerable:!0,get:r,set:f.isWriteableObservable(r)?r:void 0}}function o(e,t,i){if(t.length){var s=r(e,!0),a={};t.forEach((function(t){if(!(t in s)&&!1!==Object.getOwnPropertyDescriptor(e,t).configurable){var r=e[t];a[t]=(i.lazy?function(e,t,i){function o(e,t){return r?t?r(e):r:Array.isArray(e)?(r=f.observableArray(e),l(f,r),r):r=f.observable(e)}return f.isObservable(e)?n(e,t,i):(i[t]=function(){return o(e)},{configurable:!0,enumerable:!0,get:function(){return o(e)()},set:function(e){o(e,!0)}});var r}:n)(r,t,s),i.deep&&function(e){return e&&"object"==typeof e&&"Object"===function(e){return e.name?e.name:(e.toString().trim().match(_)||[])[1]}(e.constructor)}(r)&&o(r,Object.keys(r),i)}})),Object.defineProperties(e,a)}}function r(e,t){d||(d=g());var i=d.get(e);return!i&&t&&(i={},d.set(e,i)),i}function s(e,t){if(d)if(1===arguments.length)d.delete(e);else{var i=r(e,!1);i&&t.forEach((function(e){delete i[e]}))}}function a(e,t,n){var o={owner:e,deferEvaluation:!0};if("function"==typeof n)o.read=n;else{if("value"in n)throw new Error('For ko.defineProperty, you must not specify a "value" for the property. You must provide a "get" function.');if("function"!=typeof n.get)throw new Error('For ko.defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".');o.read=n.get,o.write=n.set}return e[t]=this.computed(o),i.call(this,e,[t]),e}function l(e,t){var i=null;e.computed((function(){i&&(i.dispose(),i=null);var n=t();n instanceof Array&&(i=function(e,t,i){return function(e,t){m||(m=g());var i=m.get(t);if(!i){i=new e.subscribable,m.set(t,i);var n={};(function(e,t,i){["pop","push","reverse","shift","sort","splice","unshift"].forEach((function(n){var o=e[n];e[n]=function(){var e=o.apply(this,arguments);return!0!==i.pause&&t.notifySubscribers(this),e}}))})(t,i,n),function(e,t,i,n){["remove","removeAll","destroy","destroyAll","replace"].forEach((function(o){Object.defineProperty(t,o,{enumerable:!1,value:function(){var r;n.pause=!0;try{r=e.observableArray.fn[o].apply(e.observableArray(t),arguments)}finally{n.pause=!1}return i.notifySubscribers(t),r}})}))}(e,t,i,n)}return i}(e,i).subscribe(t)}(e,t,n))}))}function u(e,t){if(!e||"object"!=typeof e)return null;var i=r(e,!1);return i&&t in i?i[t]():null}function c(e,t){if(!e||"object"!=typeof e)return!1;var i=r(e,!1);return!!i&&t in i}function h(e,t){var i=u(e,t);i&&i.valueHasMutated()}function p(e){e.track=i,e.untrack=s,e.getObservable=u,e.valueHasMutated=h,e.defineProperty=a,e.es5={getAllObservablesForObject:r,notifyWhenPresentOrFutureArrayValuesMutate:l,isTracked:c}}var f,d,m,g,_=/^function\s*([^\s(]+)/;!function(){if("object"==typeof exports&&"object"==typeof module){f=require("knockout");var t=require("../lib/weakmap");p(f),g=function(){return new t},module.exports=f}else"function"==typeof define&&define.amd?define("KnockoutES5",["knockout"],(function(t){return p(f=t),g=function(){return new e.WeakMap},t})):"ko"in e&&(f=e.ko,p(e.ko),g=function(){return new e.WeakMap})}()}(this),function(e,t,i){function n(e,t,i){return"function"==typeof t&&(t=o(i=t).replace(/_$/,"")),u(e,t,{configurable:!0,writable:!0,value:i})}function o(e){return"function"!=typeof e?"":"_name"in e?e._name:"name"in e?e.name:c.call(e).match(f)[1]}function r(e,t){return t._name=e,t}function s(e){var t=new m;return e||(e=g),function(n,o){return o||2===arguments.length?t.set(n,o):(o=t.get(n))===i&&(o=e(n),t.set(n,o)),o}}var a=Object.getOwnPropertyNames,l="object"==typeof window?Object.getOwnPropertyNames(window):[],u=Object.defineProperty,c=Function.prototype.toString,h=Object.create,p=Object.prototype.hasOwnProperty,f=/^\n?function\s?(\w*)?_?\(/,d=function(){function e(){var e=s(),i={};this.unlock=function(n){var o=function(e){if(p.call(e,c))return e[c];if(!Object.isExtensible(e))throw new TypeError("Object must be extensible");var t=h(null);return u(e,c,{value:t}),t}(n);if(p.call(o,e))return o[e](i);var r=h(null,t);return u(o,e,{value:function(e){return e===i?r:void 0}}),r}}var t={value:{writable:!0,value:i}},o=h(null),s=function(){var e=Math.random().toString(36).slice(2);return e in o?s():o[e]=e},c=s();return n(Object,r("getOwnPropertyNames",(function(e){var t,i=Object(e);if(i!==Window.prototype&&"toString"in i&&"[object Window]"===i.toString())try{t=a(e)}catch(e){t=l}else t=a(e);return p.call(e,c)&&t.splice(t.indexOf(c),1),t}))),n(e.prototype,r("get",(function(e){return this.unlock(e).value}))),n(e.prototype,r("set",(function(e,t){this.unlock(e).value=t}))),e}(),m=function(s){function a(t){return this===e||null==this||this===a.prototype?new a(t):(f(this,new d),void g(this,t))}function l(e){p(e);var n=m(this).get(e);return n===t?i:n}function u(e,n){p(e),m(this).set(e,n===i?t:n)}function c(e){return p(e),m(this).get(e)!==i}function h(){return m(this),"[object WeakMap]"}var p=function(e){if(null==e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Invalid WeakMap key")},f=function(e,t){var i=s.unlock(e);if(i.value)throw new TypeError("Object is already a WeakMap");i.value=t},m=function(e){var t=s.unlock(e).value;if(!t)throw new TypeError("WeakMap is not generic");return t},g=function(e,t){null!==t&&"object"==typeof t&&"function"==typeof t.forEach&&t.forEach((function(i,n){i instanceof Array&&2===i.length&&u.call(e,t[n][0],t[n][1])}))};l._name="get",u._name="set",c._name="has",h._name="toString";var _=(""+Object).split("Object"),y=r("toString",(function(){return _[0]+o(this)+_[1]}));n(y,y);var v={__proto__:[]}instanceof Array?function(e){e.__proto__=y}:function(e){n(e,y)};return v(a),[h,l,u,c,function(e){p(e);var t=m(this),n=t.get(e)!==i;return t.set(e,i),n}].forEach((function(e){n(a.prototype,e),v(e)})),a}(new d),g=Object.create?function(){return Object.create(null)}:function(){return{}};"undefined"!=typeof module?module.exports=m:"undefined"!=typeof exports?exports.WeakMap=m:"WeakMap"in e||(e.WeakMap=m),m.createStorage=s,e.WeakMap&&(e.WeakMap.createStorage=s)}(function(){return this}()),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("markdown-it-sanitizer",[],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).markdownitSanitizer=e()}((function(){return function e(t,i,n){function o(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[s]={exports:{}};t[s][0].call(c.exports,(function(e){return o(t[s][1][e]||e)}),c,c.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,i){"use strict";t.exports=function(e,t){function i(e){var t=r.match(e);return t&&1===t.length&&0===t[0].index&&t[0].lastIndex===e.length?t[0].url:null}function n(e){var t=RegExp('<a\\shref="([^"<>]*)"(?:\\stitle="([^"<>]*)")?>',"i"),n=RegExp('<img\\s([^<>]*src="[^"<>]*"[^<>]*)\\s?\\/?>',"i");return e.replace(/<[^<>]*>?/gi,(function(e){var o,r,l,d,m;if(/(^<->|^<-\s|^<3\s)/.test(e))return e;if(o=e.match(n)){var g=o[1];if(r=i(g.match(/src="([^"<>]*)"/i)[1]),l=(l=g.match(/alt="([^"<>]*)"/i))&&void 0!==l[1]?l[1]:"",d=(d=g.match(/title="([^"<>]*)"/i))&&void 0!==d[1]?d[1]:"",r&&/^https?:\/\//i.test(r))return""!==u?'<img src="'+r+'" alt="'+l+'" title="'+d+'" class="'+u+'">':'<img src="'+r+'" alt="'+l+'" title="'+d+'">'}return m=h.indexOf("a"),(o=e.match(t))&&(d=void 0!==o[2]?o[2]:"",(r=i(o[1]))&&/^(?:https?:\/\/|ftp:\/\/|mailto:|xmpp:)/i.test(r))?(c=!0,p[m]+=1,'<a href="'+r+'" title="'+d+'" target="_blank">'):(o=/<\/a>/i.test(e))?(c=!0,p[m]-=1,p[m]<0&&(f[m]=!0),"</a>"):(o=e.match(/<(br|hr)\s?\/?>/i))?"<"+o[1].toLowerCase()+">":(o=e.match(/<(\/?)(b|blockquote|code|em|h[1-6]|li|ol(?: start="\d+")?|p|pre|s|sub|sup|strong|ul)>/i))&&!/<\/ol start="\d+"/i.test(e)?(c=!0,m=h.indexOf(o[2].toLowerCase().split(" ")[0]),"/"===o[1]?p[m]-=1:p[m]+=1,p[m]<0&&(f[m]=!0),"<"+o[1]+o[2].toLowerCase()+">"):!0===a?"":s(e)}))}var o,r=e.linkify,s=e.utils.escapeHtml,a=void 0!==(t=t||{}).removeUnknown&&t.removeUnknown,l=void 0!==t.removeUnbalanced&&t.removeUnbalanced,u=void 0!==t.imageClass?t.imageClass:"",c=!1,h=["a","b","blockquote","code","em","h1","h2","h3","h4","h5","h6","li","ol","p","pre","s","sub","sup","strong","ul"],p=new Array(h.length),f=new Array(h.length);for(o=0;o<h.length;o++)p[o]=0;for(o=0;o<h.length;o++)f[o]=!1;e.core.ruler.after("linkify","sanitize_inline",(function(e){var t,i,r;for(o=0;o<h.length;o++)p[o]=0;for(o=0;o<h.length;o++)f[o]=!1;for(c=!1,i=0;i<e.tokens.length;i++)if("html_block"===e.tokens[i].type&&(e.tokens[i].content=n(e.tokens[i].content)),"inline"===e.tokens[i].type)for(r=e.tokens[i].children,t=0;t<r.length;t++)"html_inline"===r[t].type&&(r[t].content=n(r[t].content))})),e.core.ruler.after("sanitize_inline","sanitize_balance",(function(e){function t(e,t){var i,n;return i="a"===t?RegExp('<a href="[^"<>]*" title="[^"<>]*" target="_blank">',"g"):"ol"===t?/<ol(?: start="\d+")?>/g:RegExp("<"+t+">","g"),n=RegExp("</"+t+">","g"),!0===l?(e=e.replace(i,"")).replace(n,""):(e=e.replace(i,(function(e){return s(e)}))).replace(n,(function(e){return s(e)}))}function i(e){var i;for(i=0;i<h.length;i++)!0===f[i]&&(e=t(e,h[i]));return e}if(!1!==c){var n,r;for(o=0;o<h.length;o++)0!==p[o]&&(f[o]=!0);for(n=0;n<e.tokens.length;n++)if("html_block"!==e.tokens[n].type){if("inline"===e.tokens[n].type)for(r=e.tokens[n].children,o=0;o<r.length;o++)"html_inline"===r[o].type&&(r[o].content=i(r[o].content))}else e.tokens[n].content=i(e.tokens[n].content)}}))}},{}]},{},[1])(1)})),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("markdown-it",[],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).markdownit=e()}((function(){return function e(t,i,n){function o(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[s]={exports:{}};t[s][0].call(c.exports,(function(e){return o(t[s][1][e]||e)}),c,c.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,i){"use strict";t.exports=e("entities/maps/entities.json")},{"entities/maps/entities.json":53}],2:[function(e,t,i){"use strict";t.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","pre","section","source","title","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},{}],3:[function(e,t,i){"use strict";var n="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",o="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",r=new RegExp("^(?:"+n+"|"+o+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),s=new RegExp("^(?:"+n+"|"+o+")");t.exports.HTML_TAG_RE=r,t.exports.HTML_OPEN_CLOSE_TAG_RE=s},{}],4:[function(e,t,i){"use strict";function n(e,t){return a.call(e,t)}function o(e){return!(55296<=e&&e<=57343||64976<=e&&e<=65007||65535==(65535&e)||65534==(65535&e)||0<=e&&e<=8||11===e||14<=e&&e<=31||127<=e&&e<=159||1114111<e)}function r(e){if(65535<e){var t=55296+((e-=65536)>>10),i=56320+(1023&e);return String.fromCharCode(t,i)}return String.fromCharCode(e)}function s(e){return d[e]}var a=Object.prototype.hasOwnProperty,l=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,u=new RegExp(l.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),c=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,h=e("./entities"),p=/[&<>"]/,f=/[&<>"]/g,d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},m=/[.?*+^$[\]\\(){}|-]/g,g=e("uc.micro/categories/P/regex");i.lib={},i.lib.mdurl=e("mdurl"),i.lib.ucmicro=e("uc.micro"),i.assign=function(e){return Array.prototype.slice.call(arguments,1).forEach((function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach((function(i){e[i]=t[i]}))}})),e},i.isString=function(e){return"[object String]"===function(e){return Object.prototype.toString.call(e)}(e)},i.has=n,i.unescapeMd=function(e){return e.indexOf("\\")<0?e:e.replace(l,"$1")},i.unescapeAll=function(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(u,(function(e,t,i){return t||function(e,t){var i=0;return n(h,t)?h[t]:35===t.charCodeAt(0)&&c.test(t)&&o(i="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10))?r(i):e}(e,i)}))},i.isValidEntityCode=o,i.fromCodePoint=r,i.escapeHtml=function(e){return p.test(e)?e.replace(f,s):e},i.arrayReplaceAt=function(e,t,i){return[].concat(e.slice(0,t),i,e.slice(t+1))},i.isSpace=function(e){switch(e){case 9:case 32:return!0}return!1},i.isWhiteSpace=function(e){if(8192<=e&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},i.isMdAsciiPunct=function(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},i.isPunctChar=function(e){return g.test(e)},i.escapeRE=function(e){return e.replace(m,"\\$&")},i.normalizeReference=function(e){return e.trim().replace(/\s+/g," ").toUpperCase()}},{"./entities":1,mdurl:59,"uc.micro":65,"uc.micro/categories/P/regex":63}],5:[function(e,t,i){"use strict";i.parseLinkLabel=e("./parse_link_label"),i.parseLinkDestination=e("./parse_link_destination"),i.parseLinkTitle=e("./parse_link_title")},{"./parse_link_destination":6,"./parse_link_label":7,"./parse_link_title":8}],6:[function(e,t,i){"use strict";var n=e("../common/utils").isSpace,o=e("../common/utils").unescapeAll;t.exports=function(e,t,i){var r,s,a=t,l={ok:!1,pos:0,lines:0,str:""};if(60===e.charCodeAt(t)){for(t++;t<i;){if(10===(r=e.charCodeAt(t))||n(r))return l;if(62===r)return l.pos=t+1,l.str=o(e.slice(a+1,t)),l.ok=!0,l;92===r&&t+1<i?t+=2:t++}return l}for(s=0;t<i&&32!==(r=e.charCodeAt(t))&&!(r<32||127===r);)if(92===r&&t+1<i)t+=2;else{if(40===r&&1<++s)break;if(41===r&&--s<0)break;t++}return a===t||(l.str=o(e.slice(a,t)),l.lines=0,l.pos=t,l.ok=!0),l}},{"../common/utils":4}],7:[function(e,t,i){"use strict";t.exports=function(e,t,i){var n,o,r,s,a=-1,l=e.posMax,u=e.pos;for(e.pos=t+1,n=1;e.pos<l;){if(93===(r=e.src.charCodeAt(e.pos))&&0==--n){o=!0;break}if(s=e.pos,e.md.inline.skipToken(e),91===r)if(s===e.pos-1)n++;else if(i)return e.pos=u,-1}return o&&(a=e.pos),e.pos=u,a}},{}],8:[function(e,t,i){"use strict";var n=e("../common/utils").unescapeAll;t.exports=function(e,t,i){var o,r,s=0,a=t,l={ok:!1,pos:0,lines:0,str:""};if(i<=t)return l;if(34!==(r=e.charCodeAt(t))&&39!==r&&40!==r)return l;for(t++,40===r&&(r=41);t<i;){if((o=e.charCodeAt(t))===r)return l.pos=t+1,l.lines=s,l.str=n(e.slice(a+1,t)),l.ok=!0,l;10===o?s++:92===o&&t+1<i&&(t++,10===e.charCodeAt(t)&&s++),t++}return l}},{"../common/utils":4}],9:[function(e,t,i){"use strict";function n(e){var t=e.trim().toLowerCase();return!_.test(t)||!!y.test(t)}function o(e){var t=d.parse(e,!0);if(t.hostname&&(!t.protocol||0<=v.indexOf(t.protocol)))try{t.hostname=m.toASCII(t.hostname)}catch(e){}return d.encode(d.format(t))}function r(e){var t=d.parse(e,!0);if(t.hostname&&(!t.protocol||0<=v.indexOf(t.protocol)))try{t.hostname=m.toUnicode(t.hostname)}catch(e){}return d.decode(d.format(t))}function s(e,t){return this instanceof s?(t||a.isString(e)||(t=e||{},e="default"),this.inline=new p,this.block=new h,this.core=new c,this.renderer=new u,this.linkify=new f,this.validateLink=n,this.normalizeLink=o,this.normalizeLinkText=r,this.utils=a,this.helpers=l,this.options={},this.configure(e),void(t&&this.set(t))):new s(e,t)}var a=e("./common/utils"),l=e("./helpers"),u=e("./renderer"),c=e("./parser_core"),h=e("./parser_block"),p=e("./parser_inline"),f=e("linkify-it"),d=e("mdurl"),m=e("punycode"),g={default:e("./presets/default"),zero:e("./presets/zero"),commonmark:e("./presets/commonmark")},_=/^(vbscript|javascript|file|data):/,y=/^data:image\/(gif|png|jpeg|webp);/,v=["http:","https:","mailto:"];s.prototype.set=function(e){return a.assign(this.options,e),this},s.prototype.configure=function(e){var t,i=this;if(a.isString(e)&&!(e=g[t=e]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&i.set(e.options),e.components&&Object.keys(e.components).forEach((function(t){e.components[t].rules&&i[t].ruler.enableOnly(e.components[t].rules),e.components[t].rules2&&i[t].ruler2.enableOnly(e.components[t].rules2)})),this},s.prototype.enable=function(e,t){var i=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){i=i.concat(this[t].ruler.enable(e,!0))}),this),i=i.concat(this.inline.ruler2.enable(e,!0));var n=e.filter((function(e){return i.indexOf(e)<0}));if(n.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this},s.prototype.disable=function(e,t){var i=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){i=i.concat(this[t].ruler.disable(e,!0))}),this),i=i.concat(this.inline.ruler2.disable(e,!0));var n=e.filter((function(e){return i.indexOf(e)<0}));if(n.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this},s.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},s.prototype.parse=function(e,t){var i=new this.core.State(e,this,t);return this.core.process(i),i.tokens},s.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},s.prototype.parseInline=function(e,t){var i=new this.core.State(e,this,t);return i.inlineMode=!0,this.core.process(i),i.tokens},s.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)},t.exports=s},{"./common/utils":4,"./helpers":5,"./parser_block":10,"./parser_core":11,"./parser_inline":12,"./presets/commonmark":13,"./presets/default":14,"./presets/zero":15,"./renderer":16,"linkify-it":54,mdurl:59,punycode:52}],10:[function(e,t,i){"use strict";function n(){this.ruler=new o;for(var e=0;e<r.length;e++)this.ruler.push(r[e][0],r[e][1],{alt:(r[e][2]||[]).slice()})}var o=e("./ruler"),r=[["table",e("./rules_block/table"),["paragraph","reference"]],["code",e("./rules_block/code")],["fence",e("./rules_block/fence"),["paragraph","reference","blockquote","list"]],["blockquote",e("./rules_block/blockquote"),["paragraph","reference","list"]],["hr",e("./rules_block/hr"),["paragraph","reference","blockquote","list"]],["list",e("./rules_block/list"),["paragraph","reference","blockquote"]],["reference",e("./rules_block/reference")],["heading",e("./rules_block/heading"),["paragraph","reference","blockquote"]],["lheading",e("./rules_block/lheading")],["html_block",e("./rules_block/html_block"),["paragraph","reference","blockquote"]],["paragraph",e("./rules_block/paragraph")]];n.prototype.tokenize=function(e,t,i){for(var n,o=this.ruler.getRules(""),r=o.length,s=t,a=!1,l=e.md.options.maxNesting;s<i&&(e.line=s=e.skipEmptyLines(s),!(i<=s))&&!(e.sCount[s]<e.blkIndent);){if(e.level>=l){e.line=i;break}for(n=0;n<r&&!o[n](e,s,i,!1);n++);if(e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),(s=e.line)<i&&e.isEmpty(s)){if(a=!0,++s<i&&"list"===e.parentType&&e.isEmpty(s))break;e.line=s}}},n.prototype.parse=function(e,t,i,n){var o;e&&(o=new this.State(e,t,i,n),this.tokenize(o,o.line,o.lineMax))},n.prototype.State=e("./rules_block/state_block"),t.exports=n},{"./ruler":17,"./rules_block/blockquote":18,"./rules_block/code":19,"./rules_block/fence":20,"./rules_block/heading":21,"./rules_block/hr":22,"./rules_block/html_block":23,"./rules_block/lheading":24,"./rules_block/list":25,"./rules_block/paragraph":26,"./rules_block/reference":27,"./rules_block/state_block":28,"./rules_block/table":29}],11:[function(e,t,i){"use strict";function n(){this.ruler=new o;for(var e=0;e<r.length;e++)this.ruler.push(r[e][0],r[e][1])}var o=e("./ruler"),r=[["normalize",e("./rules_core/normalize")],["block",e("./rules_core/block")],["inline",e("./rules_core/inline")],["linkify",e("./rules_core/linkify")],["replacements",e("./rules_core/replacements")],["smartquotes",e("./rules_core/smartquotes")]];n.prototype.process=function(e){var t,i,n;for(t=0,i=(n=this.ruler.getRules("")).length;t<i;t++)n[t](e)},n.prototype.State=e("./rules_core/state_core"),t.exports=n},{"./ruler":17,"./rules_core/block":30,"./rules_core/inline":31,"./rules_core/linkify":32,"./rules_core/normalize":33,"./rules_core/replacements":34,"./rules_core/smartquotes":35,"./rules_core/state_core":36}],12:[function(e,t,i){"use strict";function n(){var e;for(this.ruler=new o,e=0;e<r.length;e++)this.ruler.push(r[e][0],r[e][1]);for(this.ruler2=new o,e=0;e<s.length;e++)this.ruler2.push(s[e][0],s[e][1])}var o=e("./ruler"),r=[["text",e("./rules_inline/text")],["newline",e("./rules_inline/newline")],["escape",e("./rules_inline/escape")],["backticks",e("./rules_inline/backticks")],["strikethrough",e("./rules_inline/strikethrough").tokenize],["emphasis",e("./rules_inline/emphasis").tokenize],["link",e("./rules_inline/link")],["image",e("./rules_inline/image")],["autolink",e("./rules_inline/autolink")],["html_inline",e("./rules_inline/html_inline")],["entity",e("./rules_inline/entity")]],s=[["balance_pairs",e("./rules_inline/balance_pairs")],["strikethrough",e("./rules_inline/strikethrough").postProcess],["emphasis",e("./rules_inline/emphasis").postProcess],["text_collapse",e("./rules_inline/text_collapse")]];n.prototype.skipToken=function(e){var t,i,n=e.pos,o=this.ruler.getRules(""),r=o.length,s=e.md.options.maxNesting,a=e.cache;if(void 0===a[n]){if(e.level<s)for(i=0;i<r&&(e.level++,t=o[i](e,!0),e.level--,!t);i++);else e.pos=e.posMax;t||e.pos++,a[n]=e.pos}else e.pos=a[n]},n.prototype.tokenize=function(e){for(var t,i,n=this.ruler.getRules(""),o=n.length,r=e.posMax,s=e.md.options.maxNesting;e.pos<r;){if(e.level<s)for(i=0;i<o&&!(t=n[i](e,!1));i++);if(t){if(e.pos>=r)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},n.prototype.parse=function(e,t,i,n){var o,r,s,a=new this.State(e,t,i,n);for(this.tokenize(a),s=(r=this.ruler2.getRules("")).length,o=0;o<s;o++)r[o](a)},n.prototype.State=e("./rules_inline/state_inline"),t.exports=n},{"./ruler":17,"./rules_inline/autolink":37,"./rules_inline/backticks":38,"./rules_inline/balance_pairs":39,"./rules_inline/emphasis":40,"./rules_inline/entity":41,"./rules_inline/escape":42,"./rules_inline/html_inline":43,"./rules_inline/image":44,"./rules_inline/link":45,"./rules_inline/newline":46,"./rules_inline/state_inline":47,"./rules_inline/strikethrough":48,"./rules_inline/text":49,"./rules_inline/text_collapse":50}],13:[function(e,t,i){"use strict";t.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},{}],14:[function(e,t,i){"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},{}],15:[function(e,t,i){"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}},{}],16:[function(e,t,i){"use strict";function n(){this.rules=o({},a)}var o=e("./common/utils").assign,r=e("./common/utils").unescapeAll,s=e("./common/utils").escapeHtml,a={code_inline:function(e,t,i,n,o){var r=e[t],a=o.renderAttrs(r);return"<code"+(a?" "+a:"")+">"+s(e[t].content)+"</code>"},code_block:function(e,t,i,n,o){var r=e[t],a=o.renderAttrs(r);return"<pre"+(a?" "+a:"")+"><code>"+s(e[t].content)+"</code></pre>\n"},fence:function(e,t,i,n,o){var a,l,u,c,h=e[t],p=h.info?r(h.info).trim():"",f="";return p&&(f=p.split(/\s+/g)[0]),0===(a=i.highlight&&i.highlight(h.content,f)||s(h.content)).indexOf("<pre")?a+"\n":p?(l=h.attrIndex("class"),u=h.attrs?h.attrs.slice():[],l<0?u.push(["class",i.langPrefix+f]):u[l]+=" "+i.langPrefix+f,c={attrs:u},"<pre><code"+o.renderAttrs(c)+">"+a+"</code></pre>\n"):"<pre><code"+o.renderAttrs(h)+">"+a+"</code></pre>\n"},image:function(e,t,i,n,o){var r=e[t];return r.attrs[r.attrIndex("alt")][1]=o.renderInlineAsText(r.children,i,n),o.renderToken(e,t,i)},hardbreak:function(e,t,i){return i.xhtmlOut?"<br />\n":"<br>\n"},softbreak:function(e,t,i){return i.breaks?i.xhtmlOut?"<br />\n":"<br>\n":"\n"},text:function(e,t){return s(e[t].content)},html_block:function(e,t){return e[t].content},html_inline:function(e,t){return e[t].content}};n.prototype.renderAttrs=function(e){var t,i,n;if(!e.attrs)return"";for(n="",t=0,i=e.attrs.length;t<i;t++)n+=" "+s(e.attrs[t][0])+'="'+s(e.attrs[t][1])+'"';return n},n.prototype.renderToken=function(e,t,i){var n,o="",r=!1,s=e[t];return s.hidden?"":(s.block&&-1!==s.nesting&&t&&e[t-1].hidden&&(o+="\n"),o+=(-1===s.nesting?"</":"<")+s.tag,o+=this.renderAttrs(s),0===s.nesting&&i.xhtmlOut&&(o+=" /"),s.block&&(r=!0,1===s.nesting&&t+1<e.length&&("inline"===(n=e[t+1]).type||n.hidden||-1===n.nesting&&n.tag===s.tag)&&(r=!1)),o+=r?">\n":">")},n.prototype.renderInline=function(e,t,i){for(var n,o="",r=this.rules,s=0,a=e.length;s<a;s++)o+=void 0!==r[n=e[s].type]?r[n](e,s,t,i,this):this.renderToken(e,s,t);return o},n.prototype.renderInlineAsText=function(e,t,i){for(var n="",o=0,r=e.length;o<r;o++)"text"===e[o].type?n+=e[o].content:"image"===e[o].type&&(n+=this.renderInlineAsText(e[o].children,t,i));return n},n.prototype.render=function(e,t,i){var n,o,r,s="",a=this.rules;for(n=0,o=e.length;n<o;n++)s+="inline"===(r=e[n].type)?this.renderInline(e[n].children,t,i):void 0!==a[r]?a[e[n].type](e,n,t,i,this):this.renderToken(e,n,t,i);return s},t.exports=n},{"./common/utils":4}],17:[function(e,t,i){"use strict";function n(){this.__rules__=[],this.__cache__=null}n.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},n.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach((function(e){e.enabled&&e.alt.forEach((function(e){t.indexOf(e)<0&&t.push(e)}))})),e.__cache__={},t.forEach((function(t){e.__cache__[t]=[],e.__rules__.forEach((function(i){i.enabled&&(t&&i.alt.indexOf(t)<0||e.__cache__[t].push(i.fn))}))}))},n.prototype.at=function(e,t,i){var n=this.__find__(e),o=i||{};if(-1===n)throw new Error("Parser rule not found: "+e);this.__rules__[n].fn=t,this.__rules__[n].alt=o.alt||[],this.__cache__=null},n.prototype.before=function(e,t,i,n){var o=this.__find__(e),r=n||{};if(-1===o)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o,0,{name:t,enabled:!0,fn:i,alt:r.alt||[]}),this.__cache__=null},n.prototype.after=function(e,t,i,n){var o=this.__find__(e),r=n||{};if(-1===o)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o+1,0,{name:t,enabled:!0,fn:i,alt:r.alt||[]}),this.__cache__=null},n.prototype.push=function(e,t,i){var n=i||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:n.alt||[]}),this.__cache__=null},n.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var i=[];return e.forEach((function(e){var n=this.__find__(e);if(n<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[n].enabled=!0,i.push(e)}),this),this.__cache__=null,i},n.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach((function(e){e.enabled=!1})),this.enable(e,t)},n.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var i=[];return e.forEach((function(e){var n=this.__find__(e);if(n<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[n].enabled=!1,i.push(e)}),this),this.__cache__=null,i},n.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},t.exports=n},{}],18:[function(e,t,i){"use strict";var n=e("../common/utils").isSpace;t.exports=function(e,t,i,o){var r,s,a,l,u,c,h,p,f,d,m,g,_,y,v,b,C=e.bMarks[t]+e.tShift[t],x=e.eMarks[t];if(62!==e.src.charCodeAt(C++))return!1;if(o)return!0;for(32===e.src.charCodeAt(C)&&C++,c=e.blkIndent,e.blkIndent=0,f=d=e.sCount[t]+C-(e.bMarks[t]+e.tShift[t]),u=[e.bMarks[t]],e.bMarks[t]=C;C<x&&(m=e.src.charCodeAt(C),n(m));)9===m?d+=4-d%4:d++,C++;for(s=x<=C,l=[e.sCount[t]],e.sCount[t]=d-f,a=[e.tShift[t]],e.tShift[t]=C-e.bMarks[t],g=e.md.block.ruler.getRules("blockquote"),r=t+1;r<i&&!(e.sCount[r]<c)&&(C=e.bMarks[r]+e.tShift[r],!((x=e.eMarks[r])<=C));r++)if(62!==e.src.charCodeAt(C++)){if(s)break;for(b=!1,y=0,v=g.length;y<v;y++)if(g[y](e,r,i,!0)){b=!0;break}if(b)break;u.push(e.bMarks[r]),a.push(e.tShift[r]),l.push(e.sCount[r]),e.sCount[r]=-1}else{for(32===e.src.charCodeAt(C)&&C++,f=d=e.sCount[r]+C-(e.bMarks[r]+e.tShift[r]),u.push(e.bMarks[r]),e.bMarks[r]=C;C<x&&(m=e.src.charCodeAt(C),n(m));)9===m?d+=4-d%4:d++,C++;s=x<=C,l.push(e.sCount[r]),e.sCount[r]=d-f,a.push(e.tShift[r]),e.tShift[r]=C-e.bMarks[r]}for(h=e.parentType,e.parentType="blockquote",(_=e.push("blockquote_open","blockquote",1)).markup=">",_.map=p=[t,0],e.md.block.tokenize(e,t,r),(_=e.push("blockquote_close","blockquote",-1)).markup=">",e.parentType=h,p[1]=e.line,y=0;y<a.length;y++)e.bMarks[y+t]=u[y],e.tShift[y+t]=a[y],e.sCount[y+t]=l[y];return e.blkIndent=c,!0}},{"../common/utils":4}],19:[function(e,t,i){"use strict";t.exports=function(e,t,i){var n,o,r,s=0;if(e.sCount[t]-e.blkIndent<4)return!1;for(o=n=t+1;n<i;)if(e.isEmpty(n)){if(2<=++s&&"list"===e.parentType)break;n++}else{if(s=0,!(4<=e.sCount[n]-e.blkIndent))break;o=++n}return e.line=o,(r=e.push("code_block","code",0)).content=e.getLines(t,o,4+e.blkIndent,!0),r.map=[t,e.line],!0}},{}],20:[function(e,t,i){"use strict";t.exports=function(e,t,i,n){var o,r,s,a,l,u,c,h=!1,p=e.bMarks[t]+e.tShift[t],f=e.eMarks[t];if(f<p+3)return!1;if(126!==(o=e.src.charCodeAt(p))&&96!==o)return!1;if(l=p,(r=(p=e.skipChars(p,o))-l)<3)return!1;if(c=e.src.slice(l,p),0<=(s=e.src.slice(p,f)).indexOf("`"))return!1;if(n)return!0;for(a=t;!(i<=++a||(p=l=e.bMarks[a]+e.tShift[a])<(f=e.eMarks[a])&&e.sCount[a]<e.blkIndent);)if(e.src.charCodeAt(p)===o&&!(4<=e.sCount[a]-e.blkIndent||(p=e.skipChars(p,o))-l<r||(p=e.skipSpaces(p))<f)){h=!0;break}return r=e.sCount[t],e.line=a+(h?1:0),(u=e.push("fence","code",0)).info=s,u.content=e.getLines(t+1,a,r,!0),u.markup=c,u.map=[t,e.line],!0}},{}],21:[function(e,t,i){"use strict";var n=e("../common/utils").isSpace;t.exports=function(e,t,i,o){var r,s,a,l,u=e.bMarks[t]+e.tShift[t],c=e.eMarks[t];if(35!==(r=e.src.charCodeAt(u))||c<=u)return!1;for(s=1,r=e.src.charCodeAt(++u);35===r&&u<c&&s<=6;)s++,r=e.src.charCodeAt(++u);return!(6<s||u<c&&32!==r||!o&&(c=e.skipSpacesBack(c,u),u<(a=e.skipCharsBack(c,35,u))&&n(e.src.charCodeAt(a-1))&&(c=a),e.line=t+1,(l=e.push("heading_open","h"+String(s),1)).markup="########".slice(0,s),l.map=[t,e.line],(l=e.push("inline","",0)).content=e.src.slice(u,c).trim(),l.map=[t,e.line],l.children=[],(l=e.push("heading_close","h"+String(s),-1)).markup="########".slice(0,s),0))}},{"../common/utils":4}],22:[function(e,t,i){"use strict";var n=e("../common/utils").isSpace;t.exports=function(e,t,i,o){var r,s,a,l,u=e.bMarks[t]+e.tShift[t],c=e.eMarks[t];if(42!==(r=e.src.charCodeAt(u++))&&45!==r&&95!==r)return!1;for(s=1;u<c;){if((a=e.src.charCodeAt(u++))!==r&&!n(a))return!1;a===r&&s++}return!(s<3||!o&&(e.line=t+1,(l=e.push("hr","hr",0)).map=[t,e.line],l.markup=Array(s+1).join(String.fromCharCode(r)),0))}},{"../common/utils":4}],23:[function(e,t,i){"use strict";var n=e("../common/html_blocks"),o=e("../common/html_re").HTML_OPEN_CLOSE_TAG_RE,r=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+n.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(o.source+"\\s*$"),/^$/,!1]];t.exports=function(e,t,i,n){var o,s,a,l,u=e.bMarks[t]+e.tShift[t],c=e.eMarks[t];if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(u))return!1;for(l=e.src.slice(u,c),o=0;o<r.length&&!r[o][0].test(l);o++);if(o===r.length)return!1;if(n)return r[o][2];if(s=t+1,!r[o][1].test(l))for(;s<i&&!(e.sCount[s]<e.blkIndent);s++)if(u=e.bMarks[s]+e.tShift[s],c=e.eMarks[s],l=e.src.slice(u,c),r[o][1].test(l)){0!==l.length&&s++;break}return e.line=s,(a=e.push("html_block","",0)).map=[t,s],a.content=e.getLines(t,s,e.blkIndent,!0),!0}},{"../common/html_blocks":2,"../common/html_re":3}],24:[function(e,t,i){"use strict";t.exports=function(e,t,i){for(var n,o,r,s,a,l,u,c,h,p=t+1,f=e.md.block.ruler.getRules("paragraph");p<i&&!e.isEmpty(p);p++)if(!(3<e.sCount[p]-e.blkIndent)){if(e.sCount[p]>=e.blkIndent&&(l=e.bMarks[p]+e.tShift[p])<(u=e.eMarks[p])&&(45===(h=e.src.charCodeAt(l))||61===h)&&(l=e.skipChars(l,h),u<=(l=e.skipSpaces(l)))){c=61===h?1:2;break}if(!(e.sCount[p]<0)){for(o=!1,r=0,s=f.length;r<s;r++)if(f[r](e,p,i,!0)){o=!0;break}if(o)break}}return!!c&&(n=e.getLines(t,p,e.blkIndent,!1).trim(),e.line=p+1,(a=e.push("heading_open","h"+String(c),1)).markup=String.fromCharCode(h),a.map=[t,e.line],(a=e.push("inline","",0)).content=n,a.map=[t,e.line-1],a.children=[],(a=e.push("heading_close","h"+String(c),-1)).markup=String.fromCharCode(h),!0)}},{}],25:[function(e,t,i){"use strict";function n(e,t){var i,n,o,s;return n=e.bMarks[t]+e.tShift[t],o=e.eMarks[t],42!==(i=e.src.charCodeAt(n++))&&45!==i&&43!==i||n<o&&(s=e.src.charCodeAt(n),!r(s))?-1:n}function o(e,t){var i,n=e.bMarks[t]+e.tShift[t],o=n,s=e.eMarks[t];if(s<=o+1)return-1;if((i=e.src.charCodeAt(o++))<48||57<i)return-1;for(;;){if(s<=o)return-1;if(!(48<=(i=e.src.charCodeAt(o++))&&i<=57)){if(41===i||46===i)break;return-1}if(10<=o-n)return-1}return o<s&&(i=e.src.charCodeAt(o),!r(i))?-1:o}var r=e("../common/utils").isSpace;t.exports=function(e,t,i,s){var a,l,u,c,h,p,f,d,m,g,_,y,v,b,C,x,w,k,P,E,T,D,M,S,L,A,O,z,I=!0;if(0<=(_=o(e,t)))k=!0;else{if(!(0<=(_=n(e,t))))return!1;k=!1}if(w=e.src.charCodeAt(_-1),s)return!0;for(E=e.tokens.length,k?(g=e.bMarks[t]+e.tShift[t],x=Number(e.src.substr(g,_-g-1)),L=e.push("ordered_list_open","ol",1),1!==x&&(L.attrs=[["start",x]])):L=e.push("bullet_list_open","ul",1),L.map=D=[t,0],L.markup=String.fromCharCode(w),a=t,T=!1,S=e.md.block.ruler.getRules("list");a<i;){for(v=_,b=e.eMarks[a],l=u=e.sCount[a]+_-(e.bMarks[t]+e.tShift[t]);v<b&&(y=e.src.charCodeAt(v),r(y));)9===y?u+=4-u%4:u++,v++;if(4<(C=b<=(P=v)?1:u-l)&&(C=1),c=l+C,(L=e.push("list_item_open","li",1)).markup=String.fromCharCode(w),L.map=M=[t,0],p=e.blkIndent,d=e.tight,h=e.tShift[t],f=e.sCount[t],m=e.parentType,e.blkIndent=c,e.tight=!0,e.parentType="list",e.tShift[t]=P-e.bMarks[t],e.sCount[t]=u,b<=P&&e.isEmpty(t+1)?e.line=Math.min(e.line+2,i):e.md.block.tokenize(e,t,i,!0),e.tight&&!T||(I=!1),T=1<e.line-t&&e.isEmpty(e.line-1),e.blkIndent=p,e.tShift[t]=h,e.sCount[t]=f,e.tight=d,e.parentType=m,(L=e.push("list_item_close","li",-1)).markup=String.fromCharCode(w),a=t=e.line,M[1]=a,P=e.bMarks[t],i<=a)break;if(e.isEmpty(a))break;if(e.sCount[a]<e.blkIndent)break;for(z=!1,A=0,O=S.length;A<O;A++)if(S[A](e,a,i,!0)){z=!0;break}if(z)break;if(k){if((_=o(e,a))<0)break}else if((_=n(e,a))<0)break;if(w!==e.src.charCodeAt(_-1))break}return(L=k?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(w),D[1]=a,e.line=a,I&&function(e,t){var i,n,o=e.level+2;for(i=t+2,n=e.tokens.length-2;i<n;i++)e.tokens[i].level===o&&"paragraph_open"===e.tokens[i].type&&(e.tokens[i+2].hidden=!0,e.tokens[i].hidden=!0,i+=2)}(e,E),!0}},{"../common/utils":4}],26:[function(e,t,i){"use strict";t.exports=function(e,t){for(var i,n,o,r,s,a=t+1,l=e.md.block.ruler.getRules("paragraph"),u=e.lineMax;a<u&&!e.isEmpty(a);a++)if(!(3<e.sCount[a]-e.blkIndent||e.sCount[a]<0)){for(n=!1,o=0,r=l.length;o<r;o++)if(l[o](e,a,u,!0)){n=!0;break}if(n)break}return i=e.getLines(t,a,e.blkIndent,!1).trim(),e.line=a,(s=e.push("paragraph_open","p",1)).map=[t,e.line],(s=e.push("inline","",0)).content=i,s.map=[t,e.line],s.children=[],s=e.push("paragraph_close","p",-1),!0}},{}],27:[function(e,t,i){"use strict";var n=e("../helpers/parse_link_destination"),o=e("../helpers/parse_link_title"),r=e("../common/utils").normalizeReference,s=e("../common/utils").isSpace;t.exports=function(e,t,i,a){var l,u,c,h,p,f,d,m,g,_,y,v,b,C,x,w=0,k=e.bMarks[t]+e.tShift[t],P=e.eMarks[t],E=t+1;if(91!==e.src.charCodeAt(k))return!1;for(;++k<P;)if(93===e.src.charCodeAt(k)&&92!==e.src.charCodeAt(k-1)){if(k+1===P)return!1;if(58!==e.src.charCodeAt(k+1))return!1;break}for(h=e.lineMax,C=e.md.block.ruler.getRules("reference");E<h&&!e.isEmpty(E);E++)if(!(3<e.sCount[E]-e.blkIndent||e.sCount[E]<0)){for(b=!1,f=0,d=C.length;f<d;f++)if(C[f](e,E,h,!0)){b=!0;break}if(b)break}for(P=(v=e.getLines(t,E,e.blkIndent,!1).trim()).length,k=1;k<P;k++){if(91===(l=v.charCodeAt(k)))return!1;if(93===l){g=k;break}(10===l||92===l&&++k<P&&10===v.charCodeAt(k))&&w++}if(g<0||58!==v.charCodeAt(g+1))return!1;for(k=g+2;k<P;k++)if(10===(l=v.charCodeAt(k)))w++;else if(!s(l))break;if(!(_=n(v,k,P)).ok)return!1;if(p=e.md.normalizeLink(_.str),!e.md.validateLink(p))return!1;for(k=_.pos,c=w+=_.lines,y=u=k;k<P;k++)if(10===(l=v.charCodeAt(k)))w++;else if(!s(l))break;for(_=o(v,k,P),k<P&&y!==k&&_.ok?(x=_.str,k=_.pos,w+=_.lines):(x="",k=u,w=c);k<P&&(l=v.charCodeAt(k),s(l));)k++;if(k<P&&10!==v.charCodeAt(k)&&x)for(x="",k=u,w=c;k<P&&(l=v.charCodeAt(k),s(l));)k++;return!(k<P&&10!==v.charCodeAt(k)||!(m=r(v.slice(1,g)))||!a&&(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[m]&&(e.env.references[m]={title:x,href:p}),e.line=t+w+1,0))}},{"../common/utils":4,"../helpers/parse_link_destination":6,"../helpers/parse_link_title":8}],28:[function(e,t,i){"use strict";function n(e,t,i,n){var o,s,a,l,u,c,h,p;for(this.src=e,this.md=t,this.env=i,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",p=!1,a=l=c=h=0,u=(s=this.src).length;l<u;l++){if(o=s.charCodeAt(l),!p){if(r(o)){c++,9===o?h+=4-h%4:h++;continue}p=!0}10!==o&&l!==u-1||(10!==o&&l++,this.bMarks.push(a),this.eMarks.push(l),this.tShift.push(c),this.sCount.push(h),p=!1,h=c=0,a=l+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.lineMax=this.bMarks.length-1}var o=e("../token"),r=e("../common/utils").isSpace;n.prototype.push=function(e,t,i){var n=new o(e,t,i);return n.block=!0,i<0&&this.level--,n.level=this.level,0<i&&this.level++,this.tokens.push(n),n},n.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},n.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},n.prototype.skipSpaces=function(e){for(var t,i=this.src.length;e<i&&(t=this.src.charCodeAt(e),r(t));e++);return e},n.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;t<e;)if(!r(this.src.charCodeAt(--e)))return e+1;return e},n.prototype.skipChars=function(e,t){for(var i=this.src.length;e<i&&this.src.charCodeAt(e)===t;e++);return e},n.prototype.skipCharsBack=function(e,t,i){if(e<=i)return e;for(;i<e;)if(t!==this.src.charCodeAt(--e))return e+1;return e},n.prototype.getLines=function(e,t,i,n){var o,s,a,l,u,c,h,p=e;if(t<=e)return"";for(c=new Array(t-e),o=0;p<t;p++,o++){for(s=0,h=l=this.bMarks[p],u=p+1<t||n?this.eMarks[p]+1:this.eMarks[p];l<u&&s<i;){if(a=this.src.charCodeAt(l),r(a))9===a?s+=4-s%4:s++;else{if(!(l-h<this.tShift[p]))break;s++}l++}c[o]=this.src.slice(l,u)}return c.join("")},n.prototype.Token=o,t.exports=n},{"../common/utils":4,"../token":51}],29:[function(e,t,i){"use strict";function n(e,t){var i=e.bMarks[t]+e.blkIndent,n=e.eMarks[t];return e.src.substr(i,n-i)}function o(e){var t,i=[],n=0,o=e.length,r=0,s=0,a=!1,l=0;for(t=e.charCodeAt(n);n<o;)96===t&&r%2==0?(a=!a,l=n):124!==t||r%2!=0||a?92===t?r++:r=0:(i.push(e.substring(s,n)),s=n+1),++n===o&&a&&(a=!1,n=l+1),t=e.charCodeAt(n);return i.push(e.substring(s)),i}t.exports=function(e,t,i,r){var s,a,l,u,c,h,p,f,d,m,g,_;if(i<t+2)return!1;if(c=t+1,e.sCount[c]<e.blkIndent)return!1;if((l=e.bMarks[c]+e.tShift[c])>=e.eMarks[c])return!1;if(124!==(s=e.src.charCodeAt(l))&&45!==s&&58!==s)return!1;if(a=n(e,t+1),!/^[-:| ]+$/.test(a))return!1;for(h=a.split("|"),d=[],u=0;u<h.length;u++){if(!(m=h[u].trim())){if(0===u||u===h.length-1)continue;return!1}if(!/^:?-+:?$/.test(m))return!1;58===m.charCodeAt(m.length-1)?d.push(58===m.charCodeAt(0)?"center":"right"):58===m.charCodeAt(0)?d.push("left"):d.push("")}if(-1===(a=n(e,t).trim()).indexOf("|"))return!1;if((p=(h=o(a.replace(/^\||\|$/g,""))).length)>d.length)return!1;if(r)return!0;for((f=e.push("table_open","table",1)).map=g=[t,0],(f=e.push("thead_open","thead",1)).map=[t,t+1],(f=e.push("tr_open","tr",1)).map=[t,t+1],u=0;u<h.length;u++)(f=e.push("th_open","th",1)).map=[t,t+1],d[u]&&(f.attrs=[["style","text-align:"+d[u]]]),(f=e.push("inline","",0)).content=h[u].trim(),f.map=[t,t+1],f.children=[],f=e.push("th_close","th",-1);for(f=e.push("tr_close","tr",-1),f=e.push("thead_close","thead",-1),(f=e.push("tbody_open","tbody",1)).map=_=[t+2,0],c=t+2;c<i&&!(e.sCount[c]<e.blkIndent)&&-1!==(a=n(e,c)).indexOf("|");c++){for(h=o(a.replace(/^\||\|\s*$/g,"")),f=e.push("tr_open","tr",1),u=0;u<p;u++)f=e.push("td_open","td",1),d[u]&&(f.attrs=[["style","text-align:"+d[u]]]),(f=e.push("inline","",0)).content=h[u]?h[u].trim():"",f.children=[],f=e.push("td_close","td",-1);f=e.push("tr_close","tr",-1)}return f=e.push("tbody_close","tbody",-1),f=e.push("table_close","table",-1),g[1]=_[1]=c,e.line=c,!0}},{}],30:[function(e,t,i){"use strict";t.exports=function(e){var t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}},{}],31:[function(e,t,i){"use strict";t.exports=function(e){var t,i,n,o=e.tokens;for(i=0,n=o.length;i<n;i++)"inline"===(t=o[i]).type&&e.md.inline.parse(t.content,e.md,e.env,t.children)}},{}],32:[function(e,t,i){"use strict";function n(e){return/^<a[>\s]/i.test(e)}function o(e){return/^<\/a\s*>/i.test(e)}var r=e("../common/utils").arrayReplaceAt;t.exports=function(e){var t,i,s,a,l,u,c,h,p,f,d,m,g,_,y,v,b,C=e.tokens;if(e.md.options.linkify)for(i=0,s=C.length;i<s;i++)if("inline"===C[i].type&&e.md.linkify.pretest(C[i].content))for(g=0,t=(a=C[i].children).length-1;0<=t;t--)if("link_close"!==(u=a[t]).type){if("html_inline"===u.type&&(n(u.content)&&0<g&&g--,o(u.content)&&g++),!(0<g)&&"text"===u.type&&e.md.linkify.test(u.content)){for(p=u.content,b=e.md.linkify.match(p),c=[],m=u.level,h=d=0;h<b.length;h++)_=b[h].url,y=e.md.normalizeLink(_),e.md.validateLink(y)&&(v=b[h].text,v=b[h].schema?"mailto:"!==b[h].schema||/^mailto:/i.test(v)?e.md.normalizeLinkText(v):e.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,""),d<(f=b[h].index)&&((l=new e.Token("text","",0)).content=p.slice(d,f),l.level=m,c.push(l)),(l=new e.Token("link_open","a",1)).attrs=[["href",y]],l.level=m++,l.markup="linkify",l.info="auto",c.push(l),(l=new e.Token("text","",0)).content=v,l.level=m,c.push(l),(l=new e.Token("link_close","a",-1)).level=--m,l.markup="linkify",l.info="auto",c.push(l),d=b[h].lastIndex);d<p.length&&((l=new e.Token("text","",0)).content=p.slice(d),l.level=m,c.push(l)),C[i].children=a=r(a,t,c)}}else for(t--;a[t].level!==u.level&&"link_open"!==a[t].type;)t--}},{"../common/utils":4}],33:[function(e,t,i){"use strict";var n=/\r[\n\u0085]?|[\u2424\u2028\u0085]/g,o=/\u0000/g;t.exports=function(e){var t;t=(t=e.src.replace(n,"\n")).replace(o,"?"),e.src=t}},{}],34:[function(e,t,i){"use strict";function n(e,t){return u[t.toLowerCase()]}function o(e){var t,i;for(t=e.length-1;0<=t;t--)"text"===(i=e[t]).type&&(i.content=i.content.replace(l,n))}function r(e){var t,i;for(t=e.length-1;0<=t;t--)"text"===(i=e[t]).type&&s.test(i.content)&&(i.content=i.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])\u2026/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1$2").replace(/(^|\s)--(\s|$)/gm,"$1$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1$2"))}var s=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,a=/\((c|tm|r|p)\)/i,l=/\((c|tm|r|p)\)/gi,u={c:"?",r:"?",p:"",tm:"?"};t.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;0<=t;t--)"inline"===e.tokens[t].type&&(a.test(e.tokens[t].content)&&o(e.tokens[t].children),s.test(e.tokens[t].content)&&r(e.tokens[t].children))}},{}],35:[function(e,t,i){"use strict";function n(e,t,i){return e.substr(0,t)+i+e.substr(t+1)}function o(e,t){var i,o,l,h,p,f,d,m,g,_,y,v,b,C,x,w,k,P,E,T,D;for(E=[],i=0;i<e.length;i++){for(o=e[i],d=e[i].level,k=E.length-1;0<=k&&!(E[k].level<=d);k--);if(E.length=k+1,"text"===o.type){p=0,f=(l=o.content).length;e:for(;p<f&&(u.lastIndex=p,h=u.exec(l));){if(x=w=!0,p=h.index+1,P="'"===h[0],g=32,0<=h.index-1)g=l.charCodeAt(h.index-1);else for(k=i-1;0<=k;k--)if("text"===e[k].type){g=e[k].content.charCodeAt(e[k].content.length-1);break}if(_=32,p<f)_=l.charCodeAt(p);else for(k=i+1;k<e.length;k++)if("text"===e[k].type){_=e[k].content.charCodeAt(0);break}if(y=a(g)||s(String.fromCharCode(g)),v=a(_)||s(String.fromCharCode(_)),b=r(g),(C=r(_))?x=!1:v&&(b||y||(x=!1)),b?w=!1:y&&(C||v||(w=!1)),34===_&&'"'===h[0]&&48<=g&&g<=57&&(w=x=!1),x&&w&&(x=!1,w=v),x||w){if(w)for(k=E.length-1;0<=k&&(m=E[k],!(E[k].level<d));k--)if(m.single===P&&E[k].level===d){m=E[k],D=P?(T=t.md.options.quotes[2],t.md.options.quotes[3]):(T=t.md.options.quotes[0],t.md.options.quotes[1]),o.content=n(o.content,h.index,D),e[m.token].content=n(e[m.token].content,m.pos,T),p+=D.length-1,m.token===i&&(p+=T.length-1),f=(l=o.content).length,E.length=k;continue e}x?E.push({token:i,pos:h.index,single:P,level:d}):w&&P&&(o.content=n(o.content,h.index,c))}else P&&(o.content=n(o.content,h.index,c))}}}}var r=e("../common/utils").isWhiteSpace,s=e("../common/utils").isPunctChar,a=e("../common/utils").isMdAsciiPunct,l=/['"]/,u=/['"]/g,c="";t.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;0<=t;t--)"inline"===e.tokens[t].type&&l.test(e.tokens[t].content)&&o(e.tokens[t].children,e)}},{"../common/utils":4}],36:[function(e,t,i){"use strict";function n(e,t,i){this.src=e,this.env=i,this.tokens=[],this.inlineMode=!1,this.md=t}var o=e("../token");n.prototype.Token=o,t.exports=n},{"../token":51}],37:[function(e,t,i){"use strict";var n=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,o=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/;t.exports=function(e,t){var i,r,s,a,l,u,c=e.pos;return 60===e.src.charCodeAt(c)&&!((i=e.src.slice(c)).indexOf(">")<0||(o.test(i)?(a=(r=i.match(o))[0].slice(1,-1),l=e.md.normalizeLink(a),!e.md.validateLink(l)||(t||((u=e.push("link_open","a",1)).attrs=[["href",l]],u.markup="autolink",u.info="auto",(u=e.push("text","",0)).content=e.md.normalizeLinkText(a),(u=e.push("link_close","a",-1)).markup="autolink",u.info="auto"),e.pos+=r[0].length,0)):!n.test(i)||(a=(s=i.match(n))[0].slice(1,-1),l=e.md.normalizeLink("mailto:"+a),!e.md.validateLink(l)||(t||((u=e.push("link_open","a",1)).attrs=[["href",l]],u.markup="autolink",u.info="auto",(u=e.push("text","",0)).content=e.md.normalizeLinkText(a),(u=e.push("link_close","a",-1)).markup="autolink",u.info="auto"),e.pos+=s[0].length,0))))}},{}],38:[function(e,t,i){"use strict";t.exports=function(e,t){var i,n,o,r,s,a,l=e.pos;if(96!==e.src.charCodeAt(l))return!1;for(i=l,l++,n=e.posMax;l<n&&96===e.src.charCodeAt(l);)l++;for(o=e.src.slice(i,l),r=s=l;-1!==(r=e.src.indexOf("`",s));){for(s=r+1;s<n&&96===e.src.charCodeAt(s);)s++;if(s-r===o.length)return t||((a=e.push("code_inline","code",0)).markup=o,a.content=e.src.slice(l,r).replace(/[ \n]+/g," ").trim()),e.pos=s,!0}return t||(e.pending+=o),e.pos+=o.length,!0}},{}],39:[function(e,t,i){"use strict";t.exports=function(e){var t,i,n,o,r=e.delimiters,s=e.delimiters.length;for(t=0;t<s;t++)if((n=r[t]).close)for(i=t-n.jump-1;0<=i;){if((o=r[i]).open&&o.marker===n.marker&&o.end<0&&o.level===n.level){n.jump=t-i,n.open=!1,o.end=t,o.jump=0;break}i-=o.jump+1}}},{}],40:[function(e,t,i){"use strict";t.exports.tokenize=function(e,t){var i,n,o=e.pos,r=e.src.charCodeAt(o);if(t)return!1;if(95!==r&&42!==r)return!1;for(n=e.scanDelims(e.pos,42===r),i=0;i<n.length;i++)e.push("text","",0).content=String.fromCharCode(r),e.delimiters.push({marker:r,jump:i,token:e.tokens.length-1,level:e.level,end:-1,open:n.can_open,close:n.can_close});return e.pos+=n.length,!0},t.exports.postProcess=function(e){var t,i,n,o,r,s,a=e.delimiters,l=e.delimiters.length;for(t=0;t<l;t++)95!==(i=a[t]).marker&&42!==i.marker||-1!==i.end&&(n=a[i.end],s=t+1<l&&a[t+1].end===i.end-1&&a[t+1].token===i.token+1&&a[i.end-1].token===n.token-1&&a[t+1].marker===i.marker,r=String.fromCharCode(i.marker),(o=e.tokens[i.token]).type=s?"strong_open":"em_open",o.tag=s?"strong":"em",o.nesting=1,o.markup=s?r+r:r,o.content="",(o=e.tokens[n.token]).type=s?"strong_close":"em_close",o.tag=s?"strong":"em",o.nesting=-1,o.markup=s?r+r:r,o.content="",s&&(e.tokens[a[t+1].token].content="",e.tokens[a[i.end-1].token].content="",t++))}},{}],41:[function(e,t,i){"use strict";var n=e("../common/entities"),o=e("../common/utils").has,r=e("../common/utils").isValidEntityCode,s=e("../common/utils").fromCodePoint,a=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,l=/^&([a-z][a-z0-9]{1,31});/i;t.exports=function(e,t){var i,u,c=e.pos,h=e.posMax;if(38!==e.src.charCodeAt(c))return!1;if(c+1<h)if(35===e.src.charCodeAt(c+1)){if(u=e.src.slice(c).match(a))return t||(i="x"===u[1][0].toLowerCase()?parseInt(u[1].slice(1),16):parseInt(u[1],10),e.pending+=s(r(i)?i:65533)),e.pos+=u[0].length,!0}else if((u=e.src.slice(c).match(l))&&o(n,u[1]))return t||(e.pending+=n[u[1]]),e.pos+=u[0].length,!0;return t||(e.pending+="&"),e.pos++,!0}},{"../common/entities":1,"../common/utils":4}],42:[function(e,t,i){"use strict";for(var n=e("../common/utils").isSpace,o=[],r=0;r<256;r++)o.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(e){o[e.charCodeAt(0)]=1})),t.exports=function(e,t){var i,r=e.pos,s=e.posMax;if(92!==e.src.charCodeAt(r))return!1;if(++r<s){if((i=e.src.charCodeAt(r))<256&&0!==o[i])return t||(e.pending+=e.src[r]),e.pos+=2,!0;if(10===i){for(t||e.push("hardbreak","br",0),r++;r<s&&(i=e.src.charCodeAt(r),n(i));)r++;return e.pos=r,!0}}return t||(e.pending+="\\"),e.pos++,!0}},{"../common/utils":4}],43:[function(e,t,i){"use strict";var n=e("../common/html_re").HTML_TAG_RE;t.exports=function(e,t){var i,o,r,s=e.pos;return!(!e.md.options.html||(r=e.posMax,60!==e.src.charCodeAt(s)||r<=s+2||33!==(i=e.src.charCodeAt(s+1))&&63!==i&&47!==i&&!function(e){var t=32|e;return 97<=t&&t<=122}(i)||!(o=e.src.slice(s).match(n))||(t||(e.push("html_inline","",0).content=e.src.slice(s,s+o[0].length)),e.pos+=o[0].length,0)))}},{"../common/html_re":3}],44:[function(e,t,i){"use strict";var n=e("../helpers/parse_link_label"),o=e("../helpers/parse_link_destination"),r=e("../helpers/parse_link_title"),s=e("../common/utils").normalizeReference,a=e("../common/utils").isSpace;t.exports=function(e,t){var i,l,u,c,h,p,f,d,m,g,_,y,v,b="",C=e.pos,x=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;if(p=e.pos+2,(h=n(e,e.pos+1,!1))<0)return!1;if((f=h+1)<x&&40===e.src.charCodeAt(f)){for(f++;f<x&&(l=e.src.charCodeAt(f),a(l)||10===l);f++);if(x<=f)return!1;for(v=f,(m=o(e.src,f,e.posMax)).ok&&(b=e.md.normalizeLink(m.str),e.md.validateLink(b)?f=m.pos:b=""),v=f;f<x&&(l=e.src.charCodeAt(f),a(l)||10===l);f++);if(m=r(e.src,f,e.posMax),f<x&&v!==f&&m.ok)for(g=m.str,f=m.pos;f<x&&(l=e.src.charCodeAt(f),a(l)||10===l);f++);else g="";if(x<=f||41!==e.src.charCodeAt(f))return e.pos=C,!1;f++}else{if(void 0===e.env.references)return!1;if(f<x&&91===e.src.charCodeAt(f)?(v=f+1,0<=(f=n(e,f))?c=e.src.slice(v,f++):f=h+1):f=h+1,c||(c=e.src.slice(p,h)),!(d=e.env.references[s(c)]))return e.pos=C,!1;b=d.href,g=d.title}return t||(u=e.src.slice(p,h),e.md.inline.parse(u,e.md,e.env,y=[]),(_=e.push("image","img",0)).attrs=i=[["src",b],["alt",""]],_.children=y,_.content=u,g&&i.push(["title",g])),e.pos=f,e.posMax=x,!0}},{"../common/utils":4,"../helpers/parse_link_destination":6,"../helpers/parse_link_label":7,"../helpers/parse_link_title":8}],45:[function(e,t,i){"use strict";var n=e("../helpers/parse_link_label"),o=e("../helpers/parse_link_destination"),r=e("../helpers/parse_link_title"),s=e("../common/utils").normalizeReference,a=e("../common/utils").isSpace;t.exports=function(e,t){var i,l,u,c,h,p,f,d,m,g="",_=e.pos,y=e.posMax,v=e.pos;if(91!==e.src.charCodeAt(e.pos))return!1;if(h=e.pos+1,(c=n(e,e.pos,!0))<0)return!1;if((p=c+1)<y&&40===e.src.charCodeAt(p)){for(p++;p<y&&(l=e.src.charCodeAt(p),a(l)||10===l);p++);if(y<=p)return!1;for(v=p,(f=o(e.src,p,e.posMax)).ok&&(g=e.md.normalizeLink(f.str),e.md.validateLink(g)?p=f.pos:g=""),v=p;p<y&&(l=e.src.charCodeAt(p),a(l)||10===l);p++);if(f=r(e.src,p,e.posMax),p<y&&v!==p&&f.ok)for(m=f.str,p=f.pos;p<y&&(l=e.src.charCodeAt(p),a(l)||10===l);p++);else m="";if(y<=p||41!==e.src.charCodeAt(p))return e.pos=_,!1;p++}else{if(void 0===e.env.references)return!1;if(p<y&&91===e.src.charCodeAt(p)?(v=p+1,0<=(p=n(e,p))?u=e.src.slice(v,p++):p=c+1):p=c+1,u||(u=e.src.slice(h,c)),!(d=e.env.references[s(u)]))return e.pos=_,!1;g=d.href,m=d.title}return t||(e.pos=h,e.posMax=c,e.push("link_open","a",1).attrs=i=[["href",g]],m&&i.push(["title",m]),e.md.inline.tokenize(e),e.push("link_close","a",-1)),e.pos=p,e.posMax=y,!0}},{"../common/utils":4,"../helpers/parse_link_destination":6,"../helpers/parse_link_label":7,"../helpers/parse_link_title":8}],46:[function(e,t,i){"use strict";t.exports=function(e,t){var i,n,o=e.pos;if(10!==e.src.charCodeAt(o))return!1;for(i=e.pending.length-1,n=e.posMax,t||(0<=i&&32===e.pending.charCodeAt(i)?1<=i&&32===e.pending.charCodeAt(i-1)?(e.pending=e.pending.replace(/ +$/,""),e.push("hardbreak","br",0)):(e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)):e.push("softbreak","br",0)),o++;o<n&&32===e.src.charCodeAt(o);)o++;return e.pos=o,!0}},{}],47:[function(e,t,i){"use strict";function n(e,t,i,n){this.src=e,this.env=i,this.md=t,this.tokens=n,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[]}var o=e("../token"),r=e("../common/utils").isWhiteSpace,s=e("../common/utils").isPunctChar,a=e("../common/utils").isMdAsciiPunct;n.prototype.pushPending=function(){var e=new o("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},n.prototype.push=function(e,t,i){this.pending&&this.pushPending();var n=new o(e,t,i);return i<0&&this.level--,n.level=this.level,0<i&&this.level++,this.pendingLevel=this.level,this.tokens.push(n),n},n.prototype.scanDelims=function(e,t){var i,n,o,l,u,c,h,p,f,d=e,m=!0,g=!0,_=this.posMax,y=this.src.charCodeAt(e);for(i=0<e?this.src.charCodeAt(e-1):32;d<_&&this.src.charCodeAt(d)===y;)d++;return o=d-e,n=d<_?this.src.charCodeAt(d):32,h=a(i)||s(String.fromCharCode(i)),f=a(n)||s(String.fromCharCode(n)),c=r(i),(p=r(n))?m=!1:f&&(c||h||(m=!1)),c?g=!1:h&&(p||f||(g=!1)),u=t?(l=m,g):(l=m&&(!g||h),g&&(!m||f)),{can_open:l,can_close:u,length:o}},n.prototype.Token=o,t.exports=n},{"../common/utils":4,"../token":51}],48:[function(e,t,i){"use strict";t.exports.tokenize=function(e,t){var i,n,o,r,s=e.pos,a=e.src.charCodeAt(s);if(t)return!1;if(126!==a)return!1;if(o=(n=e.scanDelims(e.pos,!0)).length,r=String.fromCharCode(a),o<2)return!1;for(o%2&&(e.push("text","",0).content=r,o--),i=0;i<o;i+=2)e.push("text","",0).content=r+r,e.delimiters.push({marker:a,jump:i,token:e.tokens.length-1,level:e.level,end:-1,open:n.can_open,close:n.can_close});return e.pos+=n.length,!0},t.exports.postProcess=function(e){var t,i,n,o,r,s=[],a=e.delimiters,l=e.delimiters.length;for(t=0;t<l;t++)126===(n=a[t]).marker&&-1!==n.end&&(o=a[n.end],(r=e.tokens[n.token]).type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",(r=e.tokens[o.token]).type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="","text"===e.tokens[o.token-1].type&&"~"===e.tokens[o.token-1].content&&s.push(o.token-1));for(;s.length;){for(i=(t=s.pop())+1;i<e.tokens.length&&"s_close"===e.tokens[i].type;)i++;t!==--i&&(r=e.tokens[i],e.tokens[i]=e.tokens[t],e.tokens[t]=r)}}},{}],49:[function(e,t,i){"use strict";function n(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}t.exports=function(e,t){for(var i=e.pos;i<e.posMax&&!n(e.src.charCodeAt(i));)i++;return i!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,i)),e.pos=i,!0)}},{}],50:[function(e,t,i){"use strict";t.exports=function(e){var t,i,n=0,o=e.tokens,r=e.tokens.length;for(t=i=0;t<r;t++)n+=o[t].nesting,o[t].level=n,"text"===o[t].type&&t+1<r&&"text"===o[t+1].type?o[t+1].content=o[t].content+o[t+1].content:(t!==i&&(o[i]=o[t]),i++);t!==i&&(o.length=i)}},{}],51:[function(e,t,i){"use strict";function n(e,t,i){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=i,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}n.prototype.attrIndex=function(e){var t,i,n;if(!this.attrs)return-1;for(i=0,n=(t=this.attrs).length;i<n;i++)if(t[i][0]===e)return i;return-1},n.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},n.prototype.attrSet=function(e,t){var i=this.attrIndex(e),n=[e,t];i<0?this.attrPush(n):this.attrs[i]=n},n.prototype.attrGet=function(e){var t=this.attrIndex(e),i=null;return 0<=t&&(i=this.attrs[t][1]),i},n.prototype.attrJoin=function(e,t){var i=this.attrIndex(e);i<0?this.attrPush([e,t]):this.attrs[i][1]=this.attrs[i][1]+" "+t},t.exports=n},{}],52:[function(e,t,i){(function(e){!function(n){function o(e){throw new RangeError(L[e])}function r(e,t){for(var i=e.length,n=[];i--;)n[i]=t(e[i]);return n}function s(e,t){var i=e.split("@"),n="";return 1<i.length&&(n=i[0]+"@",e=i[1]),n+r((e=e.replace(S,".")).split("."),t).join(".")}function a(e){for(var t,i,n=[],o=0,r=e.length;o<r;)55296<=(t=e.charCodeAt(o++))&&t<=56319&&o<r?56320==(64512&(i=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),o--):n.push(t);return n}function l(e){return r(e,(function(e){var t="";return 65535<e&&(t+=z((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+z(e)})).join("")}function u(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:b}function c(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,i){var n=0;for(e=i?O(e/k):e>>1,e+=O(e/t);A*x>>1<e;n+=b)e=O(e/A);return O(n+(A+1)*e/(e+w))}function p(e){var t,i,n,r,s,a,c,p,f,d,m=[],g=e.length,_=0,y=E,w=P;for((i=e.lastIndexOf(T))<0&&(i=0),n=0;n<i;++n)128<=e.charCodeAt(n)&&o("not-basic"),m.push(e.charCodeAt(n));for(r=0<i?i+1:0;r<g;){for(s=_,a=1,c=b;g<=r&&o("invalid-input"),p=u(e.charCodeAt(r++)),(b<=p||p>O((v-_)/a))&&o("overflow"),_+=p*a,!(p<(f=c<=w?C:w+x<=c?x:c-w));c+=b)a>O(v/(d=b-f))&&o("overflow"),a*=d;w=h(_-s,t=m.length+1,0==s),O(_/t)>v-y&&o("overflow"),y+=O(_/t),_%=t,m.splice(_++,0,y)}return l(m)}function f(e){var t,i,n,r,s,l,u,p,f,d,m,g,_,y,w,k=[];for(g=(e=a(e)).length,t=E,s=P,l=i=0;l<g;++l)(m=e[l])<128&&k.push(z(m));for(n=r=k.length,r&&k.push(T);n<g;){for(u=v,l=0;l<g;++l)t<=(m=e[l])&&m<u&&(u=m);for(u-t>O((v-i)/(_=n+1))&&o("overflow"),i+=(u-t)*_,t=u,l=0;l<g;++l)if((m=e[l])<t&&++i>v&&o("overflow"),m==t){for(p=i,f=b;!(p<(d=f<=s?C:s+x<=f?x:f-s));f+=b)w=p-d,y=b-d,k.push(z(c(d+w%y,0))),p=O(w/y);k.push(z(c(p,0))),s=h(i,_,n==r),i=0,++n}++i,++t}return k.join("")}var d="object"==typeof i&&i&&!i.nodeType&&i,m="object"==typeof t&&t&&!t.nodeType&&t,g="object"==typeof e&&e;g.global!==g&&g.window!==g&&g.self!==g||(n=g);var _,y,v=2147483647,b=36,C=1,x=26,w=38,k=700,P=72,E=128,T="-",D=/^xn--/,M=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=b-C,O=Math.floor,z=String.fromCharCode;if(_={version:"1.4.1",ucs2:{decode:a,encode:l},decode:p,encode:f,toASCII:function(e){return s(e,(function(e){return M.test(e)?"xn--"+f(e):e}))},toUnicode:function(e){return s(e,(function(e){return D.test(e)?p(e.slice(4).toLowerCase()):e}))}},d&&m)if(t.exports==d)m.exports=_;else for(y in _)_.hasOwnProperty(y)&&(d[y]=_[y]);else n.punycode=_}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],53:[function(e,t,i){t.exports={Aacute:"",aacute:"",Abreve:"?",abreve:"?",ac:"?",acd:"?",acE:"??",Acirc:"?",acirc:"a",acute:"",Acy:"",acy:"",AElig:"?",aelig:"?",af:"?",Afr:"??",afr:"??",Agrave:"",agrave:"",alefsym:"?",aleph:"?",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"?",amp:"&",AMP:"&",andand:"?",And:"?",and:"",andd:"?",andslope:"?",andv:"?",ang:"",ange:"?",angle:"",angmsdaa:"?",angmsdab:"?",angmsdac:"?",angmsdad:"?",angmsdae:"?",angmsdaf:"?",angmsdag:"?",angmsdah:"?",angmsd:"?",angrt:"",angrtvb:"?",angrtvbd:"?",angsph:"?",angst:"?",angzarr:"?",Aogon:"?",aogon:"?",Aopf:"??",aopf:"??",apacir:"?",ap:"",apE:"?",ape:"?",apid:"?",apos:"'",ApplyFunction:"?",approx:"",approxeq:"?",Aring:"?",aring:"?",Ascr:"??",ascr:"??",Assign:"?",ast:"*",asymp:"",asympeq:"?",Atilde:"?",atilde:"?",Auml:"?",auml:"?",awconint:"?",awint:"?",backcong:"",backepsilon:"?",backprime:"",backsim:"",backsimeq:"?",Backslash:"?",Barv:"?",barvee:"?",barwed:"?",Barwed:"?",barwedge:"?",bbrk:"?",bbrktbrk:"?",bcong:"",Bcy:"",bcy:"",bdquo:"?",becaus:"",because:"",Because:"",bemptyv:"?",bepsi:"?",bernou:"?",Bernoullis:"?",Beta:"",beta:"",beth:"?",between:"?",Bfr:"??",bfr:"??",bigcap:"?",bigcirc:"?",bigcup:"?",bigodot:"?",bigoplus:"?",bigotimes:"?",bigsqcup:"?",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"?",bigvee:"?",bigwedge:"?",bkarow:"?",blacklozenge:"?",blacksquare:"?",blacktriangle:"?",blacktriangledown:"?",blacktriangleleft:"?",blacktriangleright:"?",blank:"?",blk12:"?",blk14:"?",blk34:"",block:"",bne:"=?",bnequiv:"?",bNot:"?",bnot:"?",Bopf:"??",bopf:"??",bot:"",bottom:"",bowtie:"?",boxbox:"?",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxHd:"",boxhD:"",boxHD:"",boxhu:"",boxHu:"",boxhU:"",boxHU:"",boxminus:"?",boxplus:"?",boxtimes:"?",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"?",Breve:"?",brvbar:"|",bscr:"??",Bscr:"?",bsemi:"?",bsim:"",bsime:"?",bsolb:"?",bsol:"\\",bsolhsub:"?",bull:"?",bullet:"?",bump:"?",bumpE:"?",bumpe:"?",Bumpeq:"?",bumpeq:"?",Cacute:"?",cacute:"?",capand:"?",capbrcup:"?",capcap:"?",cap:"",Cap:"?",capcup:"?",capdot:"?",CapitalDifferentialD:"?",caps:"?",caret:"?",caron:"",Cayleys:"?",ccaps:"?",Ccaron:"?",ccaron:"?",Ccedil:"?",ccedil:"?",Ccirc:"?",ccirc:"?",Cconint:"?",ccups:"?",ccupssm:"?",Cdot:"?",cdot:"?",cedil:"?",Cedilla:"?",cemptyv:"?",cent:"",centerdot:"",CenterDot:"",cfr:"??",Cfr:"?",CHcy:"",chcy:"",check:"?",checkmark:"?",Chi:"",chi:"",circ:"?",circeq:"?",circlearrowleft:"?",circlearrowright:"?",circledast:"?",circledcirc:"?",circleddash:"?",CircleDot:"",circledR:"?",circledS:"?",CircleMinus:"?",CirclePlus:"",CircleTimes:"?",cir:"",cirE:"?",cire:"?",cirfnint:"?",cirmid:"?",cirscir:"?",ClockwiseContourIntegral:"?",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"?",clubsuit:"?",colon:":",Colon:"",Colone:"?",colone:"?",coloneq:"?",comma:",",commat:"@",comp:"?",compfn:"",complement:"?",complexes:"?",cong:"?",congdot:"?",Congruent:"",conint:"",Conint:"?",ContourIntegral:"",copf:"??",Copf:"?",coprod:"?",Coproduct:"?",copy:"?",COPY:"?",copysr:"?",CounterClockwiseContourIntegral:"?",crarr:"?",cross:"?",Cross:"?",Cscr:"??",cscr:"??",csub:"?",csube:"?",csup:"?",csupe:"?",ctdot:"?",cudarrl:"?",cudarrr:"?",cuepr:"?",cuesc:"?",cularr:"?",cularrp:"?",cupbrcap:"?",cupcap:"?",CupCap:"?",cup:"",Cup:"?",cupcup:"?",cupdot:"?",cupor:"?",cups:"?",curarr:"?",curarrm:"?",curlyeqprec:"?",curlyeqsucc:"?",curlyvee:"?",curlywedge:"?",curren:"",curvearrowleft:"?",curvearrowright:"?",cuvee:"?",cuwed:"?",cwconint:"?",cwint:"?",cylcty:"?",dagger:"?",Dagger:"?",daleth:"?",darr:"",Darr:"?",dArr:"?",dash:"",Dashv:"?",dashv:"?",dbkarow:"?",dblac:"?",Dcaron:"?",dcaron:"?",Dcy:"",dcy:"",ddagger:"?",ddarr:"?",DD:"?",dd:"?",DDotrahd:"?",ddotseq:"?",deg:"",Del:"?",Delta:"",delta:"",demptyv:"?",dfisht:"?",Dfr:"??",dfr:"??",dHar:"?",dharl:"?",dharr:"?",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"?",DiacriticalGrave:"`",DiacriticalTilde:"?",diam:"?",diamond:"?",Diamond:"?",diamondsuit:"?",diams:"?",die:"",DifferentialD:"?",digamma:"?",disin:"?",div:"",divide:"",divideontimes:"?",divonx:"?",DJcy:"?",djcy:"?",dlcorn:"?",dlcrop:"?",dollar:"$",Dopf:"??",dopf:"??",Dot:"",dot:"",DotDot:"?",doteq:"?",doteqdot:"?",DotEqual:"?",dotminus:"?",dotplus:"?",dotsquare:"?",doublebarwedge:"?",DoubleContourIntegral:"?",DoubleDot:"",DoubleDownArrow:"?",DoubleLeftArrow:"?",DoubleLeftRightArrow:"?",DoubleLeftTee:"?",DoubleLongLeftArrow:"?",DoubleLongLeftRightArrow:"?",DoubleLongRightArrow:"?",DoubleRightArrow:"?",DoubleRightTee:"?",DoubleUpArrow:"?",DoubleUpDownArrow:"?",DoubleVerticalBar:"",DownArrowBar:"?",downarrow:"",DownArrow:"",Downarrow:"?",DownArrowUpArrow:"?",DownBreve:"?",downdownarrows:"?",downharpoonleft:"?",downharpoonright:"?",DownLeftRightVector:"?",DownLeftTeeVector:"?",DownLeftVectorBar:"?",DownLeftVector:"?",DownRightTeeVector:"?",DownRightVectorBar:"?",DownRightVector:"?",DownTeeArrow:"?",DownTee:"?",drbkarow:"?",drcorn:"?",drcrop:"?",Dscr:"??",dscr:"??",DScy:"?",dscy:"?",dsol:"?",Dstrok:"?",dstrok:"?",dtdot:"?",dtri:"?",dtrif:"?",duarr:"?",duhar:"?",dwangle:"?",DZcy:"?",dzcy:"?",dzigrarr:"?",Eacute:"",eacute:"",easter:"?",Ecaron:"",ecaron:"",Ecirc:"",ecirc:"",ecir:"?",ecolon:"?",Ecy:"",ecy:"",eDDot:"?",Edot:"?",edot:"?",eDot:"?",ee:"?",efDot:"",Efr:"??",efr:"??",eg:"?",Egrave:"",egrave:"",egs:"?",egsdot:"?",el:"?",Element:"",elinters:"?",ell:"?",els:"?",elsdot:"?",Emacr:"",emacr:"",empty:"?",emptyset:"?",EmptySmallSquare:"?",emptyv:"?",EmptyVerySmallSquare:"?",emsp13:"?",emsp14:"?",emsp:"?",ENG:"?",eng:"?",ensp:"?",Eogon:"?",eogon:"?",Eopf:"??",eopf:"??",epar:"?",eparsl:"?",eplus:"?",epsi:"",Epsilon:"",epsilon:"",epsiv:"?",eqcirc:"?",eqcolon:"?",eqsim:"?",eqslantgtr:"?",eqslantless:"?",Equal:"?",equals:"=",EqualTilde:"?",equest:"?",Equilibrium:"?",equiv:"",equivDD:"?",eqvparsl:"?",erarr:"?",erDot:"?",escr:"?",Escr:"?",esdot:"?",Esim:"?",esim:"?",Eta:"",eta:"",ETH:"D",eth:"e",Euml:"?",euml:"?",euro:"",excl:"!",exist:"?",Exists:"?",expectation:"?",exponentiale:"?",ExponentialE:"?",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"?",fflig:"?",ffllig:"?",Ffr:"??",ffr:"??",filig:"?",FilledSmallSquare:"?",FilledVerySmallSquare:"?",fjlig:"fj",flat:"?",fllig:"?",fltns:"?",fnof:"?",Fopf:"??",fopf:"??",forall:"?",ForAll:"?",fork:"?",forkv:"?",Fouriertrf:"?",fpartint:"?",frac12:"?",frac13:"?",frac14:"?",frac15:"?",frac16:"?",frac18:"?",frac23:"?",frac25:"?",frac34:"?",frac35:"?",frac38:"?",frac45:"?",frac56:"?",frac58:"?",frac78:"?",frasl:"?",frown:"?",fscr:"??",Fscr:"?",gacute:"?",Gamma:"",gamma:"",Gammad:"?",gammad:"?",gap:"?",Gbreve:"?",gbreve:"?",Gcedil:"?",Gcirc:"?",gcirc:"?",Gcy:"",gcy:"",Gdot:"?",gdot:"?",ge:"",gE:"",gEl:"?",gel:"?",geq:"",geqq:"",geqslant:"?",gescc:"?",ges:"?",gesdot:"?",gesdoto:"?",gesdotol:"?",gesl:"??",gesles:"?",Gfr:"??",gfr:"??",gg:"?",Gg:"?",ggg:"?",gimel:"?",GJcy:"?",gjcy:"?",gla:"?",gl:"?",glE:"?",glj:"?",gnap:"?",gnapprox:"?",gne:"?",gnE:"?",gneq:"?",gneqq:"?",gnsim:"?",Gopf:"??",gopf:"??",grave:"`",GreaterEqual:"",GreaterEqualLess:"?",GreaterFullEqual:"",GreaterGreater:"?",GreaterLess:"?",GreaterSlantEqual:"?",GreaterTilde:"?",Gscr:"??",gscr:"?",gsim:"?",gsime:"?",gsiml:"?",gtcc:"?",gtcir:"?",gt:">",GT:">",Gt:"?",gtdot:"?",gtlPar:"?",gtquest:"?",gtrapprox:"?",gtrarr:"?",gtrdot:"?",gtreqless:"?",gtreqqless:"?",gtrless:"?",gtrsim:"?",gvertneqq:"??",gvnE:"??",Hacek:"",hairsp:"?",half:"?",hamilt:"?",HARDcy:"",hardcy:"",harrcir:"?",harr:"?",hArr:"?",harrw:"?",Hat:"^",hbar:"?",Hcirc:"?",hcirc:"?",hearts:"?",heartsuit:"?",hellip:"",hercon:"?",hfr:"??",Hfr:"?",HilbertSpace:"?",hksearow:"?",hkswarow:"?",hoarr:"?",homtht:"?",hookleftarrow:"?",hookrightarrow:"?",hopf:"??",Hopf:"?",horbar:"",HorizontalLine:"",hscr:"??",Hscr:"?",hslash:"?",Hstrok:"?",hstrok:"?",HumpDownHump:"?",HumpEqual:"?",hybull:"?",hyphen:"",Iacute:"",iacute:"",ic:"?",Icirc:"?",icirc:"?",Icy:"",icy:"",Idot:"?",IEcy:"",iecy:"",iexcl:"?",iff:"?",ifr:"??",Ifr:"?",Igrave:"",igrave:"",ii:"?",iiiint:"?",iiint:"?",iinfin:"?",iiota:"?",IJlig:"?",ijlig:"?",Imacr:"",imacr:"",image:"?",ImaginaryI:"?",imagline:"?",imagpart:"?",imath:"?",Im:"?",imof:"?",imped:"?",Implies:"?",incare:"",in:"",infin:"",infintie:"?",inodot:"?",intcal:"?",int:"",Int:"?",integers:"?",Integral:"",intercal:"?",Intersection:"?",intlarhk:"?",intprod:"?",InvisibleComma:"?",InvisibleTimes:"?",IOcy:"",iocy:"",Iogon:"?",iogon:"?",Iopf:"??",iopf:"??",Iota:"",iota:"",iprod:"?",iquest:"?",iscr:"??",Iscr:"?",isin:"",isindot:"?",isinE:"?",isins:"?",isinsv:"?",isinv:"",it:"?",Itilde:"?",itilde:"?",Iukcy:"?",iukcy:"?",Iuml:"?",iuml:"?",Jcirc:"?",jcirc:"?",Jcy:"",jcy:"",Jfr:"??",jfr:"??",jmath:"?",Jopf:"??",jopf:"??",Jscr:"??",jscr:"??",Jsercy:"?",jsercy:"?",Jukcy:"?",jukcy:"?",Kappa:"",kappa:"",kappav:"?",Kcedil:"?",kcedil:"?",Kcy:"",kcy:"",Kfr:"??",kfr:"??",kgreen:"?",KHcy:"",khcy:"",KJcy:"?",kjcy:"?",Kopf:"??",kopf:"??",Kscr:"??",kscr:"??",lAarr:"?",Lacute:"?",lacute:"?",laemptyv:"?",lagran:"?",Lambda:"",lambda:"",lang:"?",Lang:"?",langd:"?",langle:"?",lap:"?",Laplacetrf:"?",laquo:"?",larrb:"?",larrbfs:"?",larr:"",Larr:"?",lArr:"?",larrfs:"?",larrhk:"?",larrlp:"?",larrpl:"?",larrsim:"?",larrtl:"?",latail:"?",lAtail:"?",lat:"?",late:"?",lates:"??",lbarr:"?",lBarr:"?",lbbrk:"?",lbrace:"{",lbrack:"[",lbrke:"?",lbrksld:"?",lbrkslu:"?",Lcaron:"?",lcaron:"?",Lcedil:"?",lcedil:"?",lceil:"?",lcub:"{",Lcy:"",lcy:"",ldca:"?",ldquo:"",ldquor:"?",ldrdhar:"?",ldrushar:"?",ldsh:"?",le:"",lE:"",LeftAngleBracket:"?",LeftArrowBar:"?",leftarrow:"",LeftArrow:"",Leftarrow:"?",LeftArrowRightArrow:"?",leftarrowtail:"?",LeftCeiling:"?",LeftDoubleBracket:"?",LeftDownTeeVector:"?",LeftDownVectorBar:"?",LeftDownVector:"?",LeftFloor:"?",leftharpoondown:"?",leftharpoonup:"?",leftleftarrows:"?",leftrightarrow:"?",LeftRightArrow:"?",Leftrightarrow:"?",leftrightarrows:"?",leftrightharpoons:"?",leftrightsquigarrow:"?",LeftRightVector:"?",LeftTeeArrow:"?",LeftTee:"?",LeftTeeVector:"?",leftthreetimes:"?",LeftTriangleBar:"?",LeftTriangle:"?",LeftTriangleEqual:"?",LeftUpDownVector:"?",LeftUpTeeVector:"?",LeftUpVectorBar:"?",LeftUpVector:"?",LeftVectorBar:"?",LeftVector:"?",lEg:"?",leg:"?",leq:"",leqq:"",leqslant:"?",lescc:"?",les:"?",lesdot:"?",lesdoto:"?",lesdotor:"?",lesg:"??",lesges:"?",lessapprox:"?",lessdot:"?",lesseqgtr:"?",lesseqqgtr:"?",LessEqualGreater:"?",LessFullEqual:"",LessGreater:"?",lessgtr:"?",LessLess:"?",lesssim:"?",LessSlantEqual:"?",LessTilde:"?",lfisht:"?",lfloor:"?",Lfr:"??",lfr:"??",lg:"?",lgE:"?",lHar:"?",lhard:"?",lharu:"?",lharul:"?",lhblk:"",LJcy:"?",ljcy:"?",llarr:"?",ll:"?",Ll:"?",llcorner:"?",Lleftarrow:"?",llhard:"?",lltri:"?",Lmidot:"?",lmidot:"?",lmoustache:"?",lmoust:"?",lnap:"?",lnapprox:"?",lne:"?",lnE:"?",lneq:"?",lneqq:"?",lnsim:"?",loang:"?",loarr:"?",lobrk:"?",longleftarrow:"?",LongLeftArrow:"?",Longleftarrow:"?",longleftrightarrow:"?",LongLeftRightArrow:"?",Longleftrightarrow:"?",longmapsto:"?",longrightarrow:"?",LongRightArrow:"?",Longrightarrow:"?",looparrowleft:"?",looparrowright:"?",lopar:"?",Lopf:"??",lopf:"??",loplus:"?",lotimes:"?",lowast:"?",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"?",lozenge:"?",lozf:"?",lpar:"(",lparlt:"?",lrarr:"?",lrcorner:"?",lrhar:"?",lrhard:"?",lrm:"?",lrtri:"",lsaquo:"?",lscr:"??",Lscr:"?",lsh:"?",Lsh:"?",lsim:"?",lsime:"?",lsimg:"?",lsqb:"[",lsquo:"",lsquor:"?",Lstrok:"?",lstrok:"?",ltcc:"?",ltcir:"?",lt:"<",LT:"<",Lt:"?",ltdot:"?",lthree:"?",ltimes:"?",ltlarr:"?",ltquest:"?",ltri:"?",ltrie:"?",ltrif:"?",ltrPar:"?",lurdshar:"?",luruhar:"?",lvertneqq:"??",lvnE:"??",macr:"",male:"",malt:"?",maltese:"?",Map:"?",map:"?",mapsto:"?",mapstodown:"?",mapstoleft:"?",mapstoup:"?",marker:"?",mcomma:"?",Mcy:"",mcy:"",mdash:"",mDDot:"?",measuredangle:"?",MediumSpace:"?",Mellintrf:"?",Mfr:"??",mfr:"??",mho:"?",micro:"",midast:"*",midcir:"?",mid:"",middot:"",minusb:"?",minus:"?",minusd:"?",minusdu:"?",MinusPlus:"?",mlcp:"?",mldr:"",mnplus:"?",models:"?",Mopf:"??",mopf:"??",mp:"?",mscr:"??",Mscr:"?",mstpos:"?",Mu:"",mu:"",multimap:"?",mumap:"?",nabla:"?",Nacute:"?",nacute:"",nang:"?",nap:"?",napE:"??",napid:"??",napos:"?",napprox:"?",natural:"?",naturals:"?",natur:"?",nbsp:"?",nbump:"??",nbumpe:"??",ncap:"?",Ncaron:"?",ncaron:"",Ncedil:"?",ncedil:"?",ncong:"?",ncongdot:"??",ncup:"?",Ncy:"",ncy:"",ndash:"",nearhk:"?",nearr:"",neArr:"?",nearrow:"",ne:"",nedot:"??",NegativeMediumSpace:"?",NegativeThickSpace:"?",NegativeThinSpace:"?",NegativeVeryThinSpace:"?",nequiv:"?",nesear:"?",nesim:"??",NestedGreaterGreater:"?",NestedLessLess:"?",NewLine:"\n",nexist:"?",nexists:"?",Nfr:"??",nfr:"??",ngE:"?",nge:"?",ngeq:"?",ngeqq:"?",ngeqslant:"??",nges:"??",nGg:"??",ngsim:"?",nGt:"??",ngt:"",ngtr:"",nGtv:"??",nharr:"?",nhArr:"?",nhpar:"?",ni:"?",nis:"?",nisd:"?",niv:"?",NJcy:"?",njcy:"?",nlarr:"?",nlArr:"?",nldr:"",nlE:"?",nle:"?",nleftarrow:"?",nLeftarrow:"?",nleftrightarrow:"?",nLeftrightarrow:"?",nleq:"?",nleqq:"?",nleqslant:"??",nles:"??",nless:"",nLl:"??",nlsim:"?",nLt:"??",nlt:"",nltri:"?",nltrie:"?",nLtv:"??",nmid:"?",NoBreak:"?",NonBreakingSpace:"?",nopf:"??",Nopf:"?",Not:"?",not:"?",NotCongruent:"?",NotCupCap:"?",NotDoubleVerticalBar:"?",NotElement:"?",NotEqual:"",NotEqualTilde:"??",NotExists:"?",NotGreater:"",NotGreaterEqual:"?",NotGreaterFullEqual:"?",NotGreaterGreater:"??",NotGreaterLess:"?",NotGreaterSlantEqual:"??",NotGreaterTilde:"?",NotHumpDownHump:"??",NotHumpEqual:"??",notin:"?",notindot:"??",notinE:"??",notinva:"?",notinvb:"?",notinvc:"?",NotLeftTriangleBar:"??",NotLeftTriangle:"?",NotLeftTriangleEqual:"?",NotLess:"",NotLessEqual:"?",NotLessGreater:"?",NotLessLess:"??",NotLessSlantEqual:"??",NotLessTilde:"?",NotNestedGreaterGreater:"??",NotNestedLessLess:"??",notni:"?",notniva:"?",notnivb:"?",notnivc:"?",NotPrecedes:"?",NotPrecedesEqual:"??",NotPrecedesSlantEqual:"?",NotReverseElement:"?",NotRightTriangleBar:"??",NotRightTriangle:"?",NotRightTriangleEqual:"?",NotSquareSubset:"??",NotSquareSubsetEqual:"?",NotSquareSuperset:"??",NotSquareSupersetEqual:"?",NotSubset:"??",NotSubsetEqual:"?",NotSucceeds:"?",NotSucceedsEqual:"??",NotSucceedsSlantEqual:"?",NotSucceedsTilde:"??",NotSuperset:"??",NotSupersetEqual:"?",NotTilde:"?",NotTildeEqual:"?",NotTildeFullEqual:"?",NotTildeTilde:"?",NotVerticalBar:"?",nparallel:"?",npar:"?",nparsl:"??",npart:"??",npolint:"?",npr:"?",nprcue:"?",nprec:"?",npreceq:"??",npre:"??",nrarrc:"??",nrarr:"?",nrArr:"?",nrarrw:"??",nrightarrow:"?",nRightarrow:"?",nrtri:"?",nrtrie:"?",nsc:"?",nsccue:"?",nsce:"??",Nscr:"??",nscr:"??",nshortmid:"?",nshortparallel:"?",nsim:"?",nsime:"?",nsimeq:"?",nsmid:"?",nspar:"?",nsqsube:"?",nsqsupe:"?",nsub:"?",nsubE:"??",nsube:"?",nsubset:"??",nsubseteq:"?",nsubseteqq:"??",nsucc:"?",nsucceq:"??",nsup:"?",nsupE:"??",nsupe:"?",nsupset:"??",nsupseteq:"?",nsupseteqq:"??",ntgl:"?",Ntilde:"?",ntilde:"?",ntlg:"?",ntriangleleft:"?",ntrianglelefteq:"?",ntriangleright:"?",ntrianglerighteq:"?",Nu:"",nu:"",num:"#",numero:"",numsp:"?",nvap:"??",nvdash:"?",nvDash:"?",nVdash:"?",nVDash:"?",nvge:"?",nvgt:">?",nvHarr:"?",nvinfin:"?",nvlArr:"?",nvle:"?",nvlt:"<?",nvltrie:"??",nvrArr:"?",nvrtrie:"??",nvsim:"?",nwarhk:"?",nwarr:"",nwArr:"?",nwarrow:"",nwnear:"?",Oacute:"",oacute:"",oast:"?",Ocirc:"?",ocirc:"?",ocir:"?",Ocy:"",ocy:"",odash:"?",Odblac:"?",odblac:"?",odiv:"?",odot:"",odsold:"?",OElig:"?",oelig:"?",ofcir:"?",Ofr:"??",ofr:"??",ogon:"?",Ograve:"",ograve:"",ogt:"?",ohbar:"?",ohm:"",oint:"",olarr:"?",olcir:"?",olcross:"?",oline:"",olt:"?",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"?",ominus:"?",Oopf:"??",oopf:"??",opar:"?",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"?",oplus:"",orarr:"?",Or:"?",or:"",ord:"?",order:"?",orderof:"?",ordf:"a",ordm:"o",origof:"?",oror:"?",orslope:"?",orv:"?",oS:"?",Oscr:"??",oscr:"?",Oslash:"?",oslash:"?",osol:"?",Otilde:"?",otilde:"?",otimesas:"?",Otimes:"?",otimes:"?",Ouml:"?",ouml:"?",ovbar:"?",OverBar:"",OverBrace:"?",OverBracket:"?",OverParenthesis:"?",para:"?",parallel:"",par:"",parsim:"?",parsl:"?",part:"?",PartialD:"?",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"?",Pfr:"??",pfr:"??",Phi:"",phi:"",phiv:"?",phmmat:"?",phone:"?",Pi:"",pi:"",pitchfork:"?",piv:"?",planck:"?",planckh:"?",plankv:"?",plusacir:"?",plusb:"?",pluscir:"?",plus:"+",plusdo:"?",plusdu:"?",pluse:"?",PlusMinus:"",plusmn:"",plussim:"?",plustwo:"?",pm:"",Poincareplane:"?",pointint:"?",popf:"??",Popf:"?",pound:"",prap:"?",Pr:"?",pr:"?",prcue:"?",precapprox:"?",prec:"?",preccurlyeq:"?",Precedes:"?",PrecedesEqual:"?",PrecedesSlantEqual:"?",PrecedesTilde:"?",preceq:"?",precnapprox:"?",precneqq:"?",precnsim:"?",pre:"?",prE:"?",precsim:"?",prime:"",Prime:"",primes:"?",prnap:"?",prnE:"?",prnsim:"?",prod:"",Product:"",profalar:"?",profline:"",profsurf:"?",prop:"",Proportional:"",Proportion:"",propto:"",prsim:"?",prurel:"?",Pscr:"??",pscr:"??",Psi:"",psi:"",puncsp:"?",Qfr:"??",qfr:"??",qint:"?",qopf:"??",Qopf:"?",qprime:"?",Qscr:"??",qscr:"??",quaternions:"?",quatint:"?",quest:"?",questeq:"?",quot:'"',QUOT:'"',rAarr:"?",race:"?",Racute:"?",racute:"?",radic:"",raemptyv:"?",rang:"?",Rang:"?",rangd:"?",range:"?",rangle:"?",raquo:"?",rarrap:"?",rarrb:"?",rarrbfs:"?",rarrc:"?",rarr:"",Rarr:"?",rArr:"?",rarrfs:"?",rarrhk:"?",rarrlp:"?",rarrpl:"?",rarrsim:"?",Rarrtl:"?",rarrtl:"?",rarrw:"?",ratail:"?",rAtail:"?",ratio:"",rationals:"?",rbarr:"?",rBarr:"?",RBarr:"?",rbbrk:"?",rbrace:"}",rbrack:"]",rbrke:"?",rbrksld:"?",rbrkslu:"?",Rcaron:"?",rcaron:"?",Rcedil:"?",rcedil:"?",rceil:"?",rcub:"}",Rcy:"",rcy:"",rdca:"?",rdldhar:"?",rdquo:"",rdquor:"",rdsh:"?",real:"?",realine:"?",realpart:"?",reals:"?",Re:"?",rect:"?",reg:"?",REG:"?",ReverseElement:"?",ReverseEquilibrium:"?",ReverseUpEquilibrium:"?",rfisht:"?",rfloor:"?",rfr:"??",Rfr:"?",rHar:"?",rhard:"?",rharu:"?",rharul:"?",Rho:"",rho:"",rhov:"?",RightAngleBracket:"?",RightArrowBar:"?",rightarrow:"",RightArrow:"",Rightarrow:"?",RightArrowLeftArrow:"?",rightarrowtail:"?",RightCeiling:"?",RightDoubleBracket:"?",RightDownTeeVector:"?",RightDownVectorBar:"?",RightDownVector:"?",RightFloor:"?",rightharpoondown:"?",rightharpoonup:"?",rightleftarrows:"?",rightleftharpoons:"?",rightrightarrows:"?",rightsquigarrow:"?",RightTeeArrow:"?",RightTee:"?",RightTeeVector:"?",rightthreetimes:"?",RightTriangleBar:"?",RightTriangle:"?",RightTriangleEqual:"?",RightUpDownVector:"?",RightUpTeeVector:"?",RightUpVectorBar:"?",RightUpVector:"?",RightVectorBar:"?",RightVector:"?",ring:"?",risingdotseq:"?",rlarr:"?",rlhar:"?",rlm:"?",rmoustache:"?",rmoust:"?",rnmid:"?",roang:"?",roarr:"?",robrk:"?",ropar:"?",ropf:"??",Ropf:"?",roplus:"?",rotimes:"?",RoundImplies:"?",rpar:")",rpargt:"?",rppolint:"?",rrarr:"?",Rrightarrow:"?",rsaquo:"?",rscr:"??",Rscr:"?",rsh:"?",Rsh:"?",rsqb:"]",rsquo:"",rsquor:"",rthree:"?",rtimes:"?",rtri:"?",rtrie:"?",rtrif:"?",rtriltri:"?",RuleDelayed:"?",ruluhar:"?",rx:"?",Sacute:"?",sacute:"?",sbquo:"?",scap:"?",Scaron:"?",scaron:"?",Sc:"?",sc:"?",sccue:"?",sce:"?",scE:"?",Scedil:"?",scedil:"?",Scirc:"?",scirc:"?",scnap:"?",scnE:"?",scnsim:"?",scpolint:"?",scsim:"?",Scy:"",scy:"",sdotb:"?",sdot:"?",sdote:"?",searhk:"?",searr:"",seArr:"?",searrow:"",sect:"",semi:";",seswar:"?",setminus:"?",setmn:"?",sext:"?",Sfr:"??",sfr:"??",sfrown:"?",sharp:"?",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"-",Sigma:"",sigma:"",sigmaf:"?",sigmav:"?",sim:"",simdot:"?",sime:"?",simeq:"?",simg:"?",simgE:"?",siml:"?",simlE:"?",simne:"?",simplus:"?",simrarr:"?",slarr:"",SmallCircle:"",smallsetminus:"?",smashp:"?",smeparsl:"?",smid:"",smile:"?",smt:"?",smte:"?",smtes:"??",SOFTcy:"",softcy:"",solbar:"?",solb:"?",sol:"/",Sopf:"??",sopf:"??",spades:"?",spadesuit:"?",spar:"",sqcap:"?",sqcaps:"??",sqcup:"?",sqcups:"??",Sqrt:"",sqsub:"?",sqsube:"?",sqsubset:"?",sqsubseteq:"?",sqsup:"?",sqsupe:"?",sqsupset:"?",sqsupseteq:"?",square:"",Square:"",SquareIntersection:"?",SquareSubset:"?",SquareSubsetEqual:"?",SquareSuperset:"?",SquareSupersetEqual:"?",SquareUnion:"?",squarf:"?",squ:"",squf:"?",srarr:"",Sscr:"??",sscr:"??",ssetmn:"?",ssmile:"?",sstarf:"?",Star:"?",star:"",starf:"",straightepsilon:"?",straightphi:"?",strns:"",sub:"?",Sub:"?",subdot:"?",subE:"?",sube:"?",subedot:"?",submult:"?",subnE:"?",subne:"?",subplus:"?",subrarr:"?",subset:"?",Subset:"?",subseteq:"?",subseteqq:"?",SubsetEqual:"?",subsetneq:"?",subsetneqq:"?",subsim:"?",subsub:"?",subsup:"?",succapprox:"?",succ:"?",succcurlyeq:"?",Succeeds:"?",SucceedsEqual:"?",SucceedsSlantEqual:"?",SucceedsTilde:"?",succeq:"?",succnapprox:"?",succneqq:"?",succnsim:"?",succsim:"?",SuchThat:"?",sum:"",Sum:"",sung:"?",sup1:"1",sup2:"2",sup3:"3",sup:"?",Sup:"?",supdot:"?",supdsub:"?",supE:"?",supe:"?",supedot:"?",Superset:"?",SupersetEqual:"?",suphsol:"?",suphsub:"?",suplarr:"?",supmult:"?",supnE:"?",supne:"?",supplus:"?",supset:"?",Supset:"?",supseteq:"?",supseteqq:"?",supsetneq:"?",supsetneqq:"?",supsim:"?",supsub:"?",supsup:"?",swarhk:"?",swarr:"",swArr:"?",swarrow:"",swnwar:"?",szlig:"?",Tab:"\t",target:"?",Tau:"",tau:"",tbrk:"?",Tcaron:"?",tcaron:"?",Tcedil:"?",tcedil:"?",Tcy:"",tcy:"",tdot:"?",telrec:"?",Tfr:"??",tfr:"??",there4:"",therefore:"",Therefore:"",Theta:"",theta:"",thetasym:"?",thetav:"?",thickapprox:"",thicksim:"",ThickSpace:"??",ThinSpace:"?",thinsp:"?",thkap:"",thksim:"",THORN:"T",thorn:"t",tilde:"?",Tilde:"",TildeEqual:"?",TildeFullEqual:"?",TildeTilde:"",timesbar:"?",timesb:"?",times:"",timesd:"?",tint:"?",toea:"?",topbot:"?",topcir:"?",top:"?",Topf:"??",topf:"??",topfork:"?",tosa:"?",tprime:"?",trade:"?",TRADE:"?",triangle:"?",triangledown:"?",triangleleft:"?",trianglelefteq:"?",triangleq:"?",triangleright:"?",trianglerighteq:"?",tridot:"?",trie:"?",triminus:"?",TripleDot:"?",triplus:"?",trisb:"?",tritime:"?",trpezium:"?",Tscr:"??",tscr:"??",TScy:"",tscy:"",TSHcy:"?",tshcy:"?",Tstrok:"?",tstrok:"?",twixt:"?",twoheadleftarrow:"?",twoheadrightarrow:"?",Uacute:"",uacute:"",uarr:"",Uarr:"?",uArr:"?",Uarrocir:"?",Ubrcy:"?",ubrcy:"?",Ubreve:"?",ubreve:"?",Ucirc:"?",ucirc:"?",Ucy:"",ucy:"",udarr:"?",Udblac:"?",udblac:"?",udhar:"?",ufisht:"?",Ufr:"??",ufr:"??",Ugrave:"",ugrave:"",uHar:"?",uharl:"?",uharr:"?",uhblk:"?",ulcorn:"?",ulcorner:"?",ulcrop:"?",ultri:"?",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"?",UnderBracket:"?",UnderParenthesis:"?",Union:"?",UnionPlus:"?",Uogon:"?",uogon:"?",Uopf:"??",uopf:"??",UpArrowBar:"?",uparrow:"",UpArrow:"",Uparrow:"?",UpArrowDownArrow:"?",updownarrow:"?",UpDownArrow:"?",Updownarrow:"?",UpEquilibrium:"?",upharpoonleft:"?",upharpoonright:"?",uplus:"?",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"?",upsih:"?",Upsilon:"",upsilon:"",UpTeeArrow:"?",UpTee:"",upuparrows:"?",urcorn:"?",urcorner:"?",urcrop:"?",Uring:"?",uring:"?",urtri:"?",Uscr:"??",uscr:"??",utdot:"?",Utilde:"?",utilde:"?",utri:"?",utrif:"?",uuarr:"?",Uuml:"",uuml:"",uwangle:"?",vangrt:"?",varepsilon:"?",varkappa:"?",varnothing:"?",varphi:"?",varpi:"?",varpropto:"",varr:"?",vArr:"?",varrho:"?",varsigma:"?",varsubsetneq:"??",varsubsetneqq:"??",varsupsetneq:"??",varsupsetneqq:"??",vartheta:"?",vartriangleleft:"?",vartriangleright:"?",vBar:"?",Vbar:"?",vBarv:"?",Vcy:"",vcy:"",vdash:"?",vDash:"?",Vdash:"?",VDash:"?",Vdashl:"?",veebar:"?",vee:"",Vee:"?",veeeq:"?",vellip:"?",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"?",VerticalTilde:"?",VeryThinSpace:"?",Vfr:"??",vfr:"??",vltri:"?",vnsub:"??",vnsup:"??",Vopf:"??",vopf:"??",vprop:"",vrtri:"?",Vscr:"??",vscr:"??",vsubnE:"??",vsubne:"??",vsupnE:"??",vsupne:"??",Vvdash:"?",vzigzag:"?",Wcirc:"?",wcirc:"?",wedbar:"?",wedge:"",Wedge:"?",wedgeq:"?",weierp:"?",Wfr:"??",wfr:"??",Wopf:"??",wopf:"??",wp:"?",wr:"?",wreath:"?",Wscr:"??",wscr:"??",xcap:"?",xcirc:"?",xcup:"?",xdtri:"",Xfr:"??",xfr:"??",xharr:"?",xhArr:"?",Xi:"",xi:"",xlarr:"?",xlArr:"?",xmap:"?",xnis:"?",xodot:"?",Xopf:"??",xopf:"??",xoplus:"?",xotime:"?",xrarr:"?",xrArr:"?",Xscr:"??",xscr:"??",xsqcup:"?",xuplus:"?",xutri:"",xvee:"?",xwedge:"?",Yacute:"Y",yacute:"y",YAcy:"",yacy:"",Ycirc:"?",ycirc:"?",Ycy:"",ycy:"",yen:"",Yfr:"??",yfr:"??",YIcy:"?",yicy:"?",Yopf:"??",yopf:"??",Yscr:"??",yscr:"??",YUcy:"",yucy:"",yuml:"?",Yuml:"?",Zacute:"?",zacute:"?",Zcaron:"?",zcaron:"?",Zcy:"",zcy:"",Zdot:"?",zdot:"?",zeetrf:"?",ZeroWidthSpace:"?",Zeta:"",zeta:"",zfr:"??",Zfr:"?",ZHcy:"",zhcy:"",zigrarr:"?",zopf:"??",Zopf:"?",Zscr:"??",zscr:"??",zwj:"?",zwnj:"?"}},{}],54:[function(e,t,i){"use strict";function n(e){return Array.prototype.slice.call(arguments,1).forEach((function(t){t&&Object.keys(t).forEach((function(i){e[i]=t[i]}))})),e}function o(e){return Object.prototype.toString.call(e)}function r(e){return"[object String]"===o(e)}function s(e){return"[object Object]"===o(e)}function a(e){return"[object RegExp]"===o(e)}function l(e){return"[object Function]"===o(e)}function u(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function c(t){function i(e){return e.replace("%TLDS%",o.src_tlds)}function n(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}var o=t.re=e("./lib/re")(t.__opts__),c=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||c.push(g),c.push(o.src_xn),o.src_tlds=c.join("|"),o.email_fuzzy=RegExp(i(o.tpl_email_fuzzy),"i"),o.link_fuzzy=RegExp(i(o.tpl_link_fuzzy),"i"),o.link_no_ip_fuzzy=RegExp(i(o.tpl_link_no_ip_fuzzy),"i"),o.host_fuzzy_test=RegExp(i(o.tpl_host_fuzzy_test),"i");var h=[];t.__compiled__={},Object.keys(t.__schemas__).forEach((function(e){var i=t.__schemas__[e];if(null!==i){var o={validate:null,link:null};return t.__compiled__[e]=o,s(i)?(a(i.validate)?o.validate=function(e){return function(t,i){var n=t.slice(i);return e.test(n)?n.match(e)[0].length:0}}(i.validate):l(i.validate)?o.validate=i.validate:n(e,i),void(l(i.normalize)?o.normalize=i.normalize:i.normalize?n(e,i):o.normalize=function(e,t){t.normalize(e)})):r(i)?void h.push(e):void n(e,i)}})),h.forEach((function(e){t.__compiled__[t.__schemas__[e]]&&(t.__compiled__[e].validate=t.__compiled__[t.__schemas__[e]].validate,t.__compiled__[e].normalize=t.__compiled__[t.__schemas__[e]].normalize)})),t.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var p=Object.keys(t.__compiled__).filter((function(e){return 0<e.length&&t.__compiled__[e]})).map(u).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+o.src_ZPCc+"))("+p+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+o.src_ZPCc+"))("+p+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(t)}function h(e,t){var i=e.__index__,n=e.__last_index__,o=e.__text_cache__.slice(i,n);this.schema=e.__schema__.toLowerCase(),this.index=i+t,this.lastIndex=n+t,this.raw=o,this.text=o,this.url=o}function p(e,t){var i=new h(e,t);return e.__compiled__[i.schema].normalize(i,e),i}function f(e,t){return this instanceof f?(t||function(e){return Object.keys(e||{}).reduce((function(e,t){return e||d.hasOwnProperty(t)}),!1)}(e)&&(t=e,e={}),this.__opts__=n({},d,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=n({},m,e),this.__compiled__={},this.__tlds__=_,this.__tlds_replaced__=!1,this.re={},void c(this)):new f(e,t)}var d={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},m={"http:":{validate:function(e,t,i){var n=e.slice(t);return i.re.http||(i.re.http=new RegExp("^\\/\\/"+i.re.src_auth+i.re.src_host_port_strict+i.re.src_path,"i")),i.re.http.test(n)?n.match(i.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,i){var n=e.slice(t);return i.re.no_http||(i.re.no_http=new RegExp("^"+i.re.src_auth+"(?:localhost|(?:(?:"+i.re.src_domain+")\\.)+"+i.re.src_domain_root+")"+i.re.src_port+i.re.src_host_terminator+i.re.src_path,"i")),i.re.no_http.test(n)?3<=t&&":"===e[t-3]||3<=t&&"/"===e[t-3]?0:n.match(i.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,i){var n=e.slice(t);return i.re.mailto||(i.re.mailto=new RegExp("^"+i.re.src_email_name+"@"+i.re.src_host_strict,"i")),i.re.mailto.test(n)?n.match(i.re.mailto)[0].length:0}}},g="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",_="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");f.prototype.add=function(e,t){return this.__schemas__[e]=t,c(this),this},f.prototype.set=function(e){return this.__opts__=n(this.__opts__,e),this},f.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,i,n,o,r,s,a,l;if(this.re.schema_test.test(e))for((a=this.re.schema_search).lastIndex=0;null!==(t=a.exec(e));)if(o=this.testSchemaAt(e,t[2],a.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+o;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&0<=(l=e.search(this.re.host_fuzzy_test))&&(this.__index__<0||l<this.__index__)&&null!==(i=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(r=i.index+i[1].length,(this.__index__<0||r<this.__index__)&&(this.__schema__="",this.__index__=r,this.__last_index__=i.index+i[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&0<=e.indexOf("@")&&null!==(n=e.match(this.re.email_fuzzy))&&(r=n.index+n[1].length,s=n.index+n[0].length,(this.__index__<0||r<this.__index__||r===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=r,this.__last_index__=s)),0<=this.__index__},f.prototype.pretest=function(e){return this.re.pretest.test(e)},f.prototype.testSchemaAt=function(e,t,i){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,i,this):0},f.prototype.match=function(e){var t=0,i=[];0<=this.__index__&&this.__text_cache__===e&&(i.push(p(this,t)),t=this.__last_index__);for(var n=t?e.slice(t):e;this.test(n);)i.push(p(this,t)),n=n.slice(this.__last_index__),t+=this.__last_index__;return i.length?i:null},f.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,i){return e!==i[t-1]})).reverse():(this.__tlds__=e.slice(),this.__tlds_replaced__=!0),c(this),this},f.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},f.prototype.onCompile=function(){},t.exports=f},{"./lib/re":55}],55:[function(e,t,i){"use strict";t.exports=function(t){var i={};return i.src_Any=e("uc.micro/properties/Any/regex").source,i.src_Cc=e("uc.micro/categories/Cc/regex").source,i.src_Z=e("uc.micro/categories/Z/regex").source,i.src_P=e("uc.micro/categories/P/regex").source,i.src_ZPCc=[i.src_Z,i.src_P,i.src_Cc].join("|"),i.src_ZCc=[i.src_Z,i.src_Cc].join("|"),i.src_pseudo_letter="(?:(?!>|<|"+i.src_ZPCc+")"+i.src_Any+")",i.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",i.src_auth="(?:(?:(?!"+i.src_ZCc+"|[@/]).)+@)?",i.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",i.src_host_terminator="(?=$|>|<|"+i.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+i.src_ZPCc+"))",i.src_path="(?:[/?#](?:(?!"+i.src_ZCc+"|[()[\\]{}.,\"'?!\\-<>]).|\\[(?:(?!"+i.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+i.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+i.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+i.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+i.src_ZCc+"|[']).)+\\'|\\'(?="+i.src_pseudo_letter+"|[-]).|\\.{2,3}[a-zA-Z0-9%/]|\\.(?!"+i.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+i.src_ZCc+").|\\!(?!"+i.src_ZCc+"|[!]).|\\?(?!"+i.src_ZCc+"|[?]).)+|\\/)?",i.src_email_name='[\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]+',i.src_xn="xn--[a-z0-9\\-]{1,59}",i.src_domain_root="(?:"+i.src_xn+"|"+i.src_pseudo_letter+"{1,63})",i.src_domain="(?:"+i.src_xn+"|(?:"+i.src_pseudo_letter+")|(?:"+i.src_pseudo_letter+"(?:-(?!-)|"+i.src_pseudo_letter+"){0,61}"+i.src_pseudo_letter+"))",i.src_host="(?:(?:(?:(?:"+i.src_domain+")\\.)*"+i.src_domain_root+"))",i.tpl_host_fuzzy="(?:"+i.src_ip4+"|(?:(?:(?:"+i.src_domain+")\\.)+(?:%TLDS%)))",i.tpl_host_no_ip_fuzzy="(?:(?:(?:"+i.src_domain+")\\.)+(?:%TLDS%))",i.src_host_strict=i.src_host+i.src_host_terminator,i.tpl_host_fuzzy_strict=i.tpl_host_fuzzy+i.src_host_terminator,i.src_host_port_strict=i.src_host+i.src_port+i.src_host_terminator,i.tpl_host_port_fuzzy_strict=i.tpl_host_fuzzy+i.src_port+i.src_host_terminator,i.tpl_host_port_no_ip_fuzzy_strict=i.tpl_host_no_ip_fuzzy+i.src_port+i.src_host_terminator,i.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+i.src_ZPCc+"|>|$))",i.tpl_email_fuzzy="(^|<|>|\\(|"+i.src_ZCc+")("+i.src_email_name+"@"+i.tpl_host_fuzzy_strict+")",i.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+i.src_ZPCc+"))((?![$+<=>^`|])"+i.tpl_host_port_fuzzy_strict+i.src_path+")",i.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+i.src_ZPCc+"))((?![$+<=>^`|])"+i.tpl_host_port_no_ip_fuzzy_strict+i.src_path+")",i}},{"uc.micro/categories/Cc/regex":61,"uc.micro/categories/P/regex":63,"uc.micro/categories/Z/regex":64,"uc.micro/properties/Any/regex":66}],56:[function(e,t,i){"use strict";function n(e,t){var i;return"string"!=typeof t&&(t=n.defaultChars),i=function(e){var t,i,n=o[e];if(n)return n;for(n=o[e]=[],t=0;t<128;t++)i=String.fromCharCode(t),n.push(i);for(t=0;t<e.length;t++)n[i=e.charCodeAt(t)]="%"+("0"+i.toString(16).toUpperCase()).slice(-2);return n}(t),e.replace(/(%[a-f0-9]{2})+/gi,(function(e){var t,n,o,r,s,a,l,u="";for(t=0,n=e.length;t<n;t+=3)(o=parseInt(e.slice(t+1,t+3),16))<128?u+=i[o]:192==(224&o)&&t+3<n&&128==(192&(r=parseInt(e.slice(t+4,t+6),16)))?(u+=(l=o<<6&1984|63&r)<128?"??":String.fromCharCode(l),t+=3):224==(240&o)&&t+6<n&&(r=parseInt(e.slice(t+4,t+6),16),s=parseInt(e.slice(t+7,t+9),16),128==(192&r)&&128==(192&s))?(u+=(l=o<<12&61440|r<<6&4032|63&s)<2048||55296<=l&&l<=57343?"???":String.fromCharCode(l),t+=6):240==(248&o)&&t+9<n&&(r=parseInt(e.slice(t+4,t+6),16),s=parseInt(e.slice(t+7,t+9),16),a=parseInt(e.slice(t+10,t+12),16),128==(192&r)&&128==(192&s)&&128==(192&a))?((l=o<<18&1835008|r<<12&258048|s<<6&4032|63&a)<65536||1114111<l?u+="????":(l-=65536,u+=String.fromCharCode(55296+(l>>10),56320+(1023&l))),t+=9):u+="?";return u}))}var o={};n.defaultChars=";/?:@&=+$,#",n.componentChars="",t.exports=n},{}],57:[function(e,t,i){"use strict";function n(e){var t,i,n=r[e];if(n)return n;for(n=r[e]=[],t=0;t<128;t++)i=String.fromCharCode(t),/^[0-9a-z]$/i.test(i)?n.push(i):n.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)n[e.charCodeAt(t)]=e[t];return n}function o(e,t,i){var r,s,a,l,u,c="";for("string"!=typeof t&&(i=t,t=o.defaultChars),void 0===i&&(i=!0),u=n(t),r=0,s=e.length;r<s;r++)if(a=e.charCodeAt(r),i&&37===a&&r+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3)))c+=e.slice(r,r+3),r+=2;else if(a<128)c+=u[a];else if(55296<=a&&a<=57343){if(55296<=a&&a<=56319&&r+1<s&&56320<=(l=e.charCodeAt(r+1))&&l<=57343){c+=encodeURIComponent(e[r]+e[r+1]),r++;continue}c+="%EF%BF%BD"}else c+=encodeURIComponent(e[r]);return c}var r={};o.defaultChars=";/?:@&=+$,-_.!~*'()#",o.componentChars="-_.!~*'()",t.exports=o},{}],58:[function(e,t,i){"use strict";t.exports=function(e){var t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",t+=e.hostname&&-1!==e.hostname.indexOf(":")?"["+e.hostname+"]":e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",(t+=e.search||"")+(e.hash||"")}},{}],59:[function(e,t,i){"use strict";t.exports.encode=e("./encode"),t.exports.decode=e("./decode"),t.exports.format=e("./format"),t.exports.parse=e("./parse")},{"./decode":56,"./encode":57,"./format":58,"./parse":60}],60:[function(e,t,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var o=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,a=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(a),u=["%","/","?",";","#"].concat(l),c=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},d={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};n.prototype.parse=function(e,t){var i,n,r,a,l,m=e;if(m=m.trim(),!t&&1===e.split("#").length){var g=s.exec(m);if(g)return this.pathname=g[1],g[2]&&(this.search=g[2]),this}var _=o.exec(m);if(_&&(r=(_=_[0]).toLowerCase(),this.protocol=_,m=m.substr(_.length)),(t||_||m.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(l="//"===m.substr(0,2))||_&&f[_]||(m=m.substr(2),this.slashes=!0)),!f[_]&&(l||_&&!d[_])){var y,v,b=-1;for(i=0;i<c.length;i++)-1!==(a=m.indexOf(c[i]))&&(-1===b||a<b)&&(b=a);for(-1!==(v=-1===b?m.lastIndexOf("@"):m.lastIndexOf("@",b))&&(y=m.slice(0,v),m=m.slice(v+1),this.auth=y),b=-1,i=0;i<u.length;i++)-1!==(a=m.indexOf(u[i]))&&(-1===b||a<b)&&(b=a);-1===b&&(b=m.length),":"===m[b-1]&&b--;var C=m.slice(0,b);m=m.slice(b),this.parseHost(C),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x){var w=this.hostname.split(/\./);for(i=0,n=w.length;i<n;i++){var k=w[i];if(k&&!k.match(h)){for(var P="",E=0,T=k.length;E<T;E++)P+=127<k.charCodeAt(E)?"x":k[E];if(!P.match(h)){var D=w.slice(0,i),M=w.slice(i+1),S=k.match(p);S&&(D.push(S[1]),M.unshift(S[2])),M.length&&(m=M.join(".")+m),this.hostname=D.join(".");break}}}}255<this.hostname.length&&(this.hostname=""),x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var L=m.indexOf("#");-1!==L&&(this.hash=m.substr(L),m=m.slice(0,L));var A=m.indexOf("?");return-1!==A&&(this.search=m.substr(A),m=m.slice(0,A)),m&&(this.pathname=m),d[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this},n.prototype.parseHost=function(e){var t=r.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},t.exports=function(e,t){if(e&&e instanceof n)return e;var i=new n;return i.parse(e,t),i}},{}],61:[function(e,t,i){t.exports=/[\0-\x1F\x7F-\x9F]/},{}],62:[function(e,t,i){t.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804\uDCBD|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},{}],63:[function(e,t,i){t.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/},{}],64:[function(e,t,i){t.exports=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/},{}],65:[function(e,t,i){t.exports.Any=e("./properties/Any/regex"),t.exports.Cc=e("./categories/Cc/regex"),t.exports.Cf=e("./categories/Cf/regex"),t.exports.P=e("./categories/P/regex"),t.exports.Z=e("./categories/Z/regex")},{"./categories/Cc/regex":61,"./categories/Cf/regex":62,"./categories/P/regex":63,"./categories/Z/regex":64,"./properties/Any/regex":66}],66:[function(e,t,i){t.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},{}],67:[function(e,t,i){"use strict";t.exports=e("./lib/")},{"./lib/":9}]},{},[67])(67)})),define("Core/KnockoutMarkdownBinding",["markdown-it-sanitizer","markdown-it"],(function(e,t){"use strict";var i=/<html(.|\s)*>(.|\s)*<\/html>/im,n=new t({html:!0,linkify:!0});function o(e){if(e instanceof HTMLAnchorElement&&(e.target="_blank"),e.childNodes&&0<e.childNodes.length)for(var t=0;t<e.childNodes.length;++t)o(e.childNodes[t])}return n.use(e,{imageClass:"",removeUnbalanced:!1,removeUnknown:!1}),{register:function(e){e.bindingHandlers.markdown={init:function(){return{controlsDescendantBindings:!0}},update:function(t,r){for(;t.firstChild;)e.removeNode(t.firstChild);var s,a=e.unwrap(r());s=i.test(a)?a:n.render(a);var l=e.utils.parseHtmlFragment(s,t);t.className=t.className+" markdown";for(var u=0;u<l.length;++u){var c=l[u];o(c),t.appendChild(c)}}}}}})),function(e,t,i,n){"use strict";function o(e,t,i){return setTimeout(u(e,i),t)}function r(e,t,i){return!!Array.isArray(e)&&(s(e,i[t],i),!0)}function s(e,t,i){var o;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==n)for(o=0;o<e.length;)t.call(i,e[o],o,e),o++;else for(o in e)e.hasOwnProperty(o)&&t.call(i,e[o],o,e)}function a(t,i,n){var o="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=e.console&&(e.console.warn||e.console.log);return r&&r.call(e.console,o,n),t.apply(this,arguments)}}function l(e,t,i){var n,o=t.prototype;(n=e.prototype=Object.create(o)).constructor=e,n._super=o,i&&Q(n,i)}function u(e,t){return function(){return e.apply(t,arguments)}}function c(e,t){return typeof e==ie?e.apply(t&&t[0]||n,t):e}function h(e,t){return e===n?t:e}function p(e,t,i){s(g(t),(function(t){e.addEventListener(t,i,!1)}))}function f(e,t,i){s(g(t),(function(t){e.removeEventListener(t,i,!1)}))}function d(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function m(e,t){return-1<e.indexOf(t)}function g(e){return e.trim().split(/\s+/g)}function _(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var n=0;n<e.length;){if(i&&e[n][i]==t||!i&&e[n]===t)return n;n++}return-1}function y(e){return Array.prototype.slice.call(e,0)}function v(e,t,i){for(var n=[],o=[],r=0;r<e.length;){var s=t?e[r][t]:e[r];_(o,s)<0&&n.push(e[r]),o[r]=s,r++}return i&&(n=t?n.sort((function(e,i){return e[t]>i[t]})):n.sort()),n}function b(e,t){for(var i,o,r=t[0].toUpperCase()+t.slice(1),s=0;s<ee.length;){if((o=(i=ee[s])?i+r:t)in e)return o;s++}return n}function C(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||e}function x(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){c(e.options.enable,[e])&&i.handler(t)},this.init()}function w(e,t,i){var n=i.pointers.length,o=i.changedPointers.length,r=t&me&&n-o==0,s=t&(ge|_e)&&n-o==0;i.isFirst=!!r,i.isFinal=!!s,r&&(e.session={}),i.eventType=t,function(e,t){var i=e.session,n=t.pointers,o=n.length;i.firstInput||(i.firstInput=P(t)),1<o&&!i.firstMultiple?i.firstMultiple=P(t):1===o&&(i.firstMultiple=!1);var r=i.firstInput,s=i.firstMultiple,a=s?s.center:r.center,l=t.center=E(n);t.timeStamp=re(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=S(a,l),t.distance=M(a,l),function(e,t){var i=t.center,n=e.offsetDelta||{},o=e.prevDelta||{},r=e.prevInput||{};t.eventType!==me&&r.eventType!==ge||(o=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=e.offsetDelta={x:i.x,y:i.y}),t.deltaX=o.x+(i.x-n.x),t.deltaY=o.y+(i.y-n.y)}(i,t),t.offsetDirection=D(t.deltaX,t.deltaY);var u=T(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=oe(u.x)>oe(u.y)?u.x:u.y,t.scale=s?function(e,t){return M(t[0],t[1],Te)/M(e[0],e[1],Te)}(s.pointers,n):1,t.rotation=s?function(e,t){return S(t[1],t[0],Te)+S(e[1],e[0],Te)}(s.pointers,n):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,k(i,t);var c=e.element;d(t.srcEvent.target,c)&&(c=t.srcEvent.target),t.target=c}(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function k(e,t){var i,o,r,s,a=e.lastInterval||t,l=t.timeStamp-a.timeStamp;if(t.eventType!=_e&&(de<l||a.velocity===n)){var u=t.deltaX-a.deltaX,c=t.deltaY-a.deltaY,h=T(l,u,c);o=h.x,r=h.y,i=oe(h.x)>oe(h.y)?h.x:h.y,s=D(u,c),e.lastInterval=t}else i=a.velocity,o=a.velocityX,r=a.velocityY,s=a.direction;t.velocity=i,t.velocityX=o,t.velocityY=r,t.direction=s}function P(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:ne(e.pointers[i].clientX),clientY:ne(e.pointers[i].clientY)},i++;return{timeStamp:re(),pointers:t,center:E(t),deltaX:e.deltaX,deltaY:e.deltaY}}function E(e){var t=e.length;if(1===t)return{x:ne(e[0].clientX),y:ne(e[0].clientY)};for(var i=0,n=0,o=0;o<t;)i+=e[o].clientX,n+=e[o].clientY,o++;return{x:ne(i/t),y:ne(n/t)}}function T(e,t,i){return{x:t/e||0,y:i/e||0}}function D(e,t){return e===t?ye:oe(e)>=oe(t)?e<0?ve:be:t<0?Ce:xe}function M(e,t,i){i||(i=Ee);var n=t[i[0]]-e[i[0]],o=t[i[1]]-e[i[1]];return Math.sqrt(n*n+o*o)}function S(e,t,i){i||(i=Ee);var n=t[i[0]]-e[i[0]],o=t[i[1]]-e[i[1]];return 180*Math.atan2(o,n)/Math.PI}function L(){this.evEl=Me,this.evWin=Se,this.pressed=!1,x.apply(this,arguments)}function A(){this.evEl=Oe,this.evWin=ze,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,x.apply(this,arguments)}function z(){this.evTarget=Fe,this.targetIds={},x.apply(this,arguments)}function I(){x.apply(this,arguments);var e=u(this.handler,this);this.touch=new z(this.manager,e),this.mouse=new L(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function R(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout((function(){var e=n.indexOf(i);-1<e&&n.splice(e,1)}),Be)}}function F(e,t){this.manager=e,this.set(t)}function B(e){this.options=Q({},this.defaults,e||{}),this.id=le++,this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=Ze,this.simultaneous={},this.requireFail=[]}function N(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function j(e){return e==xe?"down":e==Ce?"up":e==ve?"left":e==be?"right":""}function U(e,t){var i=t.manager;return i?i.get(e):e}function V(){B.apply(this,arguments)}function G(){V.apply(this,arguments),this.pX=null,this.pY=null}function q(){V.apply(this,arguments)}function H(){B.apply(this,arguments),this._timer=null,this._input=null}function W(){V.apply(this,arguments)}function Z(){V.apply(this,arguments)}function $(){B.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function K(e,t){return(t=t||{}).recognizers=h(t.recognizers,K.defaults.preset),new X(e,t)}function X(e,t){this.options=Q({},K.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=function(e){return new(e.options.inputClass||(ce?A:he?z:ue?I:L))(e,w)}(this),this.touchAction=new F(this,this.options.touchAction),Y(this,!0),s(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Y(e,t){var i,n=e.element;n.style&&(s(e.options.cssProps,(function(o,r){i=b(n.style,r),n.style[i]=t?(e.oldCssProps[i]=n.style[i],o):e.oldCssProps[i]||""})),t||(e.oldCssProps={}))}function J(e,i){var n=t.createEvent("Event");n.initEvent(e,!0,!0),(n.gesture=i).target.dispatchEvent(n)}var Q,ee=["","webkit","Moz","MS","ms","o"],te=t.createElement("div"),ie="function",ne=Math.round,oe=Math.abs,re=Date.now;Q="function"!=typeof Object.assign?function(e){if(e===n||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!==n&&null!==o)for(var r in o)o.hasOwnProperty(r)&&(t[r]=o[r])}return t}:Object.assign;var se=a((function(e,t,i){for(var o=Object.keys(t),r=0;r<o.length;)(!i||i&&e[o[r]]===n)&&(e[o[r]]=t[o[r]]),r++;return e}),"extend","Use `assign`."),ae=a((function(e,t){return se(e,t,!0)}),"merge","Use `assign`."),le=1,ue="ontouchstart"in e,ce=b(e,"PointerEvent")!==n,he=ue&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),pe="touch",fe="mouse",de=25,me=1,ge=4,_e=8,ye=1,ve=2,be=4,Ce=8,xe=16,we=ve|be,ke=Ce|xe,Pe=we|ke,Ee=["x","y"],Te=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(C(this.element),this.evWin,this.domHandler)}};var De={mousedown:me,mousemove:2,mouseup:ge},Me="mousedown",Se="mousemove mouseup";l(L,x,{handler:function(e){var t=De[e.type];t&me&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=ge),this.pressed&&(t&ge&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:fe,srcEvent:e}))}});var Le={pointerdown:me,pointermove:2,pointerup:ge,pointercancel:_e,pointerout:_e},Ae={2:pe,3:"pen",4:fe,5:"kinect"},Oe="pointerdown",ze="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Oe="MSPointerDown",ze="MSPointerMove MSPointerUp MSPointerCancel"),l(A,x,{handler:function(e){var t=this.store,i=!1,n=e.type.toLowerCase().replace("ms",""),o=Le[n],r=Ae[e.pointerType]||e.pointerType,s=r==pe,a=_(t,e.pointerId,"pointerId");o&me&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):o&(ge|_e)&&(i=!0),a<0||(t[a]=e,this.callback(this.manager,o,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),i&&t.splice(a,1))}});var Ie={touchstart:me,touchmove:2,touchend:ge,touchcancel:_e};l(O,x,{handler:function(e){var t=Ie[e.type];if(t===me&&(this.started=!0),this.started){var i=function(e,t){var i=y(e.touches),n=y(e.changedTouches);return t&(ge|_e)&&(i=v(i.concat(n),"identifier",!0)),[i,n]}.call(this,e,t);t&(ge|_e)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:pe,srcEvent:e})}}});var Re={touchstart:me,touchmove:2,touchend:ge,touchcancel:_e},Fe="touchstart touchmove touchend touchcancel";l(z,x,{handler:function(e){var t=Re[e.type],i=function(e,t){var i=y(e.touches),n=this.targetIds;if(t&(2|me)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var o,r,s=y(e.changedTouches),a=[],l=this.target;if(r=i.filter((function(e){return d(e.target,l)})),t===me)for(o=0;o<r.length;)n[r[o].identifier]=!0,o++;for(o=0;o<s.length;)n[s[o].identifier]&&a.push(s[o]),t&(ge|_e)&&delete n[s[o].identifier],o++;return a.length?[v(r.concat(a),"identifier",!0),a]:void 0}.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:pe,srcEvent:e})}});var Be=2500;l(I,x,{handler:function(e,t,i){var n=i.pointerType==pe,o=i.pointerType==fe;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(e,t){e&me?(this.primaryTouch=t.changedPointers[0].identifier,R.call(this,t)):e&(ge|_e)&&R.call(this,t)}).call(this,t,i);else if(o&&function(e){for(var t=e.srcEvent.clientX,i=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],r=Math.abs(t-o.x),s=Math.abs(i-o.y);if(r<=25&&s<=25)return!0}return!1}.call(this,i))return;this.callback(e,t,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ne=b(te.style,"touchAction"),je=Ne!==n,Ue="compute",Ve="manipulation",Ge="none",qe="pan-x",He="pan-y",We=function(){if(!je)return!1;var t={},i=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!i||e.CSS.supports("touch-action",n)})),t}();F.prototype={set:function(e){e==Ue&&(e=this.compute()),je&&this.manager.element.style&&We[e]&&(this.manager.element.style[Ne]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return s(this.manager.recognizers,(function(t){c(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(m(e,Ge))return Ge;var t=m(e,qe),i=m(e,He);return t&&i?Ge:t||i?t?qe:He:m(e,Ve)?Ve:"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,i=e.offsetDirection;if(!this.manager.session.prevented){var n=this.actions,o=m(n,Ge)&&!We[Ge],r=m(n,He)&&!We[He],s=m(n,qe)&&!We[qe];if(o){var a=1===e.pointers.length,l=e.distance<2,u=e.deltaTime<250;if(a&&l&&u)return}return s&&r?void 0:o||r&&i&we||s&&i&ke?this.preventSrc(t):void 0}t.preventDefault()},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Ze=1;B.prototype={defaults:{},set:function(e){return Q(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(r(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=U(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return r(e,"dropRecognizeWith",this)||(e=U(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(r(e,"requireFailure",this))return this;var t=this.requireFail;return-1===_(t,e=U(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(r(e,"dropRequireFailure",this))return this;e=U(e,this);var t=_(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){i.manager.emit(t,e)}var i=this,n=this.state;n<8&&t(i.options.event+N(n)),t(i.options.event),e.additionalEvent&&t(e.additionalEvent),8<=n&&t(i.options.event+N(n))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=32)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Ze)))return!1;e++}return!0},recognize:function(e){var t=Q({},e);return c(this.options.enable,[this,t])?(56&this.state&&(this.state=Ze),this.state=this.process(t),void(30&this.state&&this.tryEmit(t))):(this.reset(),void(this.state=32))},process:function(e){},getTouchAction:function(){},reset:function(){}},l(V,B,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,n=6&t,o=this.attrTest(e);return n&&(i&_e||!o)?16|t:n||o?i&ge?8|t:2&t?4|t:2:32}}),l(G,V,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pe},getTouchAction:function(){var e=this.options.direction,t=[];return e&we&&t.push(He),e&ke&&t.push(qe),t},directionTest:function(e){var t=this.options,i=!0,n=e.distance,o=e.direction,r=e.deltaX,s=e.deltaY;return o&t.direction||(n=t.direction&we?(o=0===r?ye:r<0?ve:be,i=r!=this.pX,Math.abs(e.deltaX)):(o=0===s?ye:s<0?Ce:xe,i=s!=this.pY,Math.abs(e.deltaY))),e.direction=o,i&&n>t.threshold&&o&t.direction},attrTest:function(e){return V.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=j(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),l(q,V,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ge]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),l(H,B,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!n||!i||e.eventType&(ge|_e)&&!r)this.reset();else if(e.eventType&me)this.reset(),this._timer=o((function(){this.state=8,this.tryEmit()}),t.time,this);else if(e.eventType&ge)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&ge?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=re(),this.manager.emit(this.options.event,this._input)))}}),l(W,V,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ge]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),l(Z,V,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:we|ke,pointers:1},getTouchAction:function(){return G.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(we|ke)?t=e.overallVelocity:i&we?t=e.overallVelocityX:i&ke&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&oe(t)>this.options.velocity&&e.eventType&ge},emit:function(e){var t=j(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),l($,B,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ve]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&me&&0===this.count)return this.failTimeout();if(n&&r&&i){if(e.eventType!=ge)return this.failTimeout();var s=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||M(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&s?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=o((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=o((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),K.VERSION="2.0.7",K.defaults={domEvents:!1,touchAction:Ue,enable:!0,inputTarget:null,inputClass:null,preset:[[W,{enable:!1}],[q,{enable:!1},["rotate"]],[Z,{direction:we}],[G,{direction:we},["swipe"]],[$],[$,{event:"doubletap",taps:2},["tap"]],[H]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},X.prototype={set:function(e){return Q(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var i,n=this.recognizers,o=t.curRecognizer;(!o||o&&8&o.state)&&(o=t.curRecognizer=null);for(var r=0;r<n.length;)i=n[r],2===t.stopped||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(e),!o&&14&i.state&&(o=t.curRecognizer=i),r++}},get:function(e){if(e instanceof B)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(r(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){if(r(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,i=_(t,e);-1!==i&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){if(e!==n&&t!==n){var i=this.handlers;return s(g(e),(function(e){i[e]=i[e]||[],i[e].push(t)})),this}},off:function(e,t){if(e!==n){var i=this.handlers;return s(g(e),(function(e){t?i[e]&&i[e].splice(_(i[e],t),1):delete i[e]})),this}},emit:function(e,t){this.options.domEvents&&J(e,t);var i=this.handlers[e]&&this.handlers[e].slice();if(i&&i.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](t),n++}},destroy:function(){this.element&&Y(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Q(K,{INPUT_START:me,INPUT_MOVE:2,INPUT_END:ge,INPUT_CANCEL:_e,STATE_POSSIBLE:Ze,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:ye,DIRECTION_LEFT:ve,DIRECTION_RIGHT:be,DIRECTION_UP:Ce,DIRECTION_DOWN:xe,DIRECTION_HORIZONTAL:we,DIRECTION_VERTICAL:ke,DIRECTION_ALL:Pe,Manager:X,Input:x,TouchAction:F,TouchInput:z,MouseInput:L,PointerEventInput:A,TouchMouseInput:I,SingleTouchInput:O,Recognizer:B,AttrRecognizer:V,Tap:$,Pan:G,Swipe:Z,Pinch:q,Rotate:W,Press:H,on:p,off:f,each:s,merge:ae,extend:se,assign:Q,inherit:l,bindFn:u,prefixed:b}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=K,"function"==typeof define&&define.amd?define("Hammer",[],(function(){return K})):"undefined"!=typeof module&&module.exports?module.exports=K:e.Hammer=K}(window,document),define("Core/KnockoutHammerBinding",["KnockoutES5","Hammer"],(function(e,t){"use strict";return{register:function(e){e.bindingHandlers.swipeLeft={init:function(i,n,o,r,s){var a=e.unwrap(n());new t(i).on("swipeleft",(function(e){var t=s.$data;a.apply(t,arguments)}))}},e.bindingHandlers.swipeRight={init:function(i,n,o,r,s){var a=e.unwrap(n());new t(i).on("swiperight",(function(e){var t=s.$data;a.apply(t,arguments)}))}}}}})),define("Core/registerKnockoutBindings",["Cesium/Widgets/SvgPathBindingHandler","KnockoutES5","Core/KnockoutMarkdownBinding","Core/KnockoutHammerBinding"],(function(e,t,i,n){"use strict";return function(){e.register(t),i.register(t),n.register(t),t.bindingHandlers.embeddedComponent={init:function(e,i,n,o,r){return t.unwrap(i()).show(e),{controlsDescendantBindings:!0}},update:function(e,t,i,n,o){}}}})),define("Core/createFragmentFromTemplate",[],(function(){"use strict";return function(e){var t=document.createElement("div");t.innerHTML=e;for(var i=document.createDocumentFragment();t.firstChild;)i.appendChild(t.firstChild);return i}})),define("Core/loadView",["Cesium/Widgets/getElement","KnockoutES5","Core/createFragmentFromTemplate"],(function(e,t,i){"use strict";return function(n,o,r){o=e(o);var s,a=i(n),l=[];for(s=0;s<a.childNodes.length;++s)l.push(a.childNodes[s]);for(o.appendChild(a),s=0;s<l.length;++s){var u=l[s];1!==u.nodeType&&8!==u.nodeType||t.applyBindings(r,u)}return l}})),function(e,t,i){var n=e.L,o={version:"0.7.7"};"object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&define.amd&&define("leaflet",o),o.noConflict=function(){return e.L=n,this},(e.L=o).Util={extend:function(e){var t,i,n,o,r=Array.prototype.slice.call(arguments,1);for(i=0,n=r.length;i<n;i++)for(t in o=r[i]||{})o.hasOwnProperty(t)&&(e[t]=o[t]);return e},bind:function(e,t){var i=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return function(){return e.apply(t,i||arguments)}},stamp:function(){var e=0,t="_leaflet_id";return function(i){return i[t]=i[t]||++e,i[t]}}(),invokeEach:function(e,t,i){var n,o;if("object"!=typeof e)return!1;for(n in o=Array.prototype.slice.call(arguments,3),e)t.apply(i,[n,e[n]].concat(o));return!0},limitExecByInterval:function(e,t,i){var n,o;return function r(){var s=arguments;return n?void(o=!0):(n=!0,setTimeout((function(){n=!1,o&&(r.apply(i,s),o=!1)}),t),void e.apply(i,s))}},falseFn:function(){return!1},formatNum:function(e,t){var i=Math.pow(10,t||5);return Math.round(e*i)/i},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},splitWords:function(e){return o.Util.trim(e).split(/\s+/)},setOptions:function(e,t){return e.options=o.extend({},e.options,t),e.options},getParamString:function(e,t,i){var n=[];for(var o in e)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(e[o]));return(t&&-1!==t.indexOf("?")?"&":"?")+n.join("&")},template:function(e,t){return e.replace(/\{ *([\w_]+) *\}/g,(function(e,n){var o=t[n];if(o===i)throw new Error("No value provided for variable "+e);return"function"==typeof o&&(o=o(t)),o}))},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){var i,n,o=["webkit","moz","o","ms"];for(i=0;i<o.length&&!n;i++)n=e[o[i]+t];return n}function i(t){var i=+new Date,o=Math.max(0,16-(i-n));return n=i+o,e.setTimeout(t,o)}var n=0,r=e.requestAnimationFrame||t("RequestAnimationFrame")||i,s=e.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){e.clearTimeout(t)};o.Util.requestAnimFrame=function(t,n,s,a){return t=o.bind(t,n),s&&r===i?void t():r.call(e,t,a)},o.Util.cancelAnimFrame=function(t){t&&s.call(e,t)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var n=new i;for(var r in(n.constructor=t).prototype=n,this)this.hasOwnProperty(r)&&"prototype"!==r&&(t[r]=this[r]);e.statics&&(o.extend(t,e.statics),delete e.statics),e.includes&&(o.Util.extend.apply(null,[n].concat(e.includes)),delete e.includes),e.options&&n.options&&(e.options=o.extend({},n.options,e.options)),o.extend(n,e),n._initHooks=[];var s=this;return t.__super__=s.prototype,n.callInitHooks=function(){if(!this._initHooksCalled){s.prototype.callInitHooks&&s.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=n._initHooks.length;e<t;e++)n._initHooks[e].call(this)}},t},o.Class.include=function(e){o.extend(this.prototype,e)},o.Class.mergeOptions=function(e){o.extend(this.prototype.options,e)},o.Class.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),i="function"==typeof e?e:function(){this[e].apply(this,t)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i)};var r="_leaflet_events";o.Mixin={},o.Mixin.Events={addEventListener:function(e,t,i){if(o.Util.invokeEach(e,this.addEventListener,this,t,i))return this;var n,s,a,l,u,c,h,p=this[r]=this[r]||{},f=i&&i!==this&&o.stamp(i);for(n=0,s=(e=o.Util.splitWords(e)).length;n<s;n++)a={action:t,context:i||this},l=e[n],f?(c=(u=l+"_idx")+"_len",(h=p[u]=p[u]||{})[f]||(h[f]=[],p[c]=(p[c]||0)+1),h[f].push(a)):(p[l]=p[l]||[],p[l].push(a));return this},hasEventListeners:function(e){var t=this[r];return!!t&&(e in t&&0<t[e].length||e+"_idx"in t&&0<t[e+"_idx_len"])},removeEventListener:function(e,t,i){if(!this[r])return this;if(!e)return this.clearAllEventListeners();if(o.Util.invokeEach(e,this.removeEventListener,this,t,i))return this;var n,s,a,l,u,c,h,p,f=this[r],d=i&&i!==this&&o.stamp(i);for(n=0,s=(e=o.Util.splitWords(e)).length;n<s;n++)if(h=(c=(a=e[n])+"_idx")+"_len",p=f[c],t){if(l=d&&p?p[d]:f[a]){for(u=l.length-1;0<=u;u--)l[u].action!==t||i&&l[u].context!==i||(l.splice(u,1)[0].action=o.Util.falseFn);i&&p&&0===l.length&&(delete p[d],f[h]--)}}else delete f[a],delete f[c],delete f[h];return this},clearAllEventListeners:function(){return delete this[r],this},fireEvent:function(e,t){if(!this.hasEventListeners(e))return this;var i,n,s,a,l,u=o.Util.extend({},t,{type:e,target:this}),c=this[r];if(c[e])for(n=0,s=(i=c[e].slice()).length;n<s;n++)i[n].action.call(i[n].context,u);for(l in a=c[e+"_idx"])if(i=a[l].slice())for(n=0,s=i.length;n<s;n++)i[n].action.call(i[n].context,u);return this},addOneTimeEventListener:function(e,t,i){if(o.Util.invokeEach(e,this.addOneTimeEventListener,this,t,i))return this;var n=o.bind((function(){this.removeEventListener(e,t,i).removeEventListener(e,n,i)}),this);return this.addEventListener(e,t,i).addEventListener(e,n,i)}},o.Mixin.Events.on=o.Mixin.Events.addEventListener,o.Mixin.Events.off=o.Mixin.Events.removeEventListener,o.Mixin.Events.once=o.Mixin.Events.addOneTimeEventListener,o.Mixin.Events.fire=o.Mixin.Events.fireEvent,function(){var n="ActiveXObject"in e,r=n&&!t.addEventListener,s=navigator.userAgent.toLowerCase(),a=-1!==s.indexOf("webkit"),l=-1!==s.indexOf("chrome"),u=-1!==s.indexOf("phantom"),c=-1!==s.indexOf("android"),h=-1!==s.search("android [23]"),p=-1!==s.indexOf("gecko"),f=typeof orientation!=i+"",d=!e.PointerEvent&&e.MSPointerEvent,m=e.PointerEvent&&e.navigator.pointerEnabled||d,g="devicePixelRatio"in e&&1<e.devicePixelRatio||"matchMedia"in e&&e.matchMedia("(min-resolution:144dpi)")&&e.matchMedia("(min-resolution:144dpi)").matches,_=t.documentElement,y=n&&"transition"in _.style,v="WebKitCSSMatrix"in e&&"m11"in new e.WebKitCSSMatrix&&!h,b="MozPerspective"in _.style,C="OTransition"in _.style,x=!e.L_DISABLE_3D&&(y||v||b||C)&&!u,w=!e.L_NO_TOUCH&&!u&&(m||"ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch);o.Browser={ie:n,ielt9:r,webkit:a,gecko:p&&!a&&!e.opera&&!n,android:c,android23:h,chrome:l,ie3d:y,webkit3d:v,gecko3d:b,opera3d:C,any3d:x,mobile:f,mobileWebkit:f&&a,mobileWebkit3d:f&&v,mobileOpera:f&&e.opera,touch:w,msPointer:d,pointer:m,retina:g}}(),o.Point=function(e,t,i){this.x=i?Math.round(e):e,this.y=i?Math.round(t):t},o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(e){return this.clone()._add(o.point(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(o.point(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(e){var t=(e=o.point(e)).x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(e){return(e=o.point(e)).x===this.x&&e.y===this.y},contains:function(e){return e=o.point(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}},o.point=function(e,t,n){return e instanceof o.Point?e:o.Util.isArray(e)?new o.Point(e[0],e[1]):e===i||null===e?e:new o.Point(e,t,n)},o.Bounds=function(e,t){if(e)for(var i=t?[e,t]:e,n=0,o=i.length;n<o;n++)this.extend(i[n])},o.Bounds.prototype={extend:function(e){return e=o.point(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,i;return(e="number"==typeof e[0]||e instanceof o.Point?o.point(e):o.bounds(e))instanceof o.Bounds?(t=e.min,i=e.max):t=i=e,t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},intersects:function(e){e=o.bounds(e);var t=this.min,i=this.max,n=e.min,r=e.max,s=r.x>=t.x&&n.x<=i.x,a=r.y>=t.y&&n.y<=i.y;return s&&a},isValid:function(){return!(!this.min||!this.max)}},o.bounds=function(e,t){return!e||e instanceof o.Bounds?e:new o.Bounds(e,t)},o.Transformation=function(e,t,i,n){this._a=e,this._b=t,this._c=i,this._d=n},o.Transformation.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new o.Point((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}},o.DomUtil={get:function(e){return"string"==typeof e?t.getElementById(e):e},getStyle:function(e,i){var n=e.style[i];if(!n&&e.currentStyle&&(n=e.currentStyle[i]),(!n||"auto"===n)&&t.defaultView){var o=t.defaultView.getComputedStyle(e,null);n=o?o[i]:null}return"auto"===n?null:n},getViewportOffset:function(e){var i,n=0,r=0,s=e,a=t.body,l=t.documentElement;do{if(n+=s.offsetTop||0,r+=s.offsetLeft||0,n+=parseInt(o.DomUtil.getStyle(s,"borderTopWidth"),10)||0,r+=parseInt(o.DomUtil.getStyle(s,"borderLeftWidth"),10)||0,i=o.DomUtil.getStyle(s,"position"),s.offsetParent===a&&"absolute"===i)break;if("fixed"===i){n+=a.scrollTop||l.scrollTop||0,r+=a.scrollLeft||l.scrollLeft||0;break}if("relative"===i&&!s.offsetLeft){var u=o.DomUtil.getStyle(s,"width"),c=o.DomUtil.getStyle(s,"max-width"),h=s.getBoundingClientRect();("none"!==u||"none"!==c)&&(r+=h.left+s.clientLeft),n+=h.top+(a.scrollTop||l.scrollTop||0);break}s=s.offsetParent}while(s);s=e;do{if(s===a)break;n-=s.scrollTop||0,r-=s.scrollLeft||0,s=s.parentNode}while(s);return new o.Point(r,n)},documentIsLtr:function(){return o.DomUtil._docIsLtrCached||(o.DomUtil._docIsLtrCached=!0,o.DomUtil._docIsLtr="ltr"===o.DomUtil.getStyle(t.body,"direction")),o.DomUtil._docIsLtr},create:function(e,i,n){var o=t.createElement(e);return o.className=i,n&&n.appendChild(o),o},hasClass:function(e,t){if(e.classList!==i)return e.classList.contains(t);var n=o.DomUtil._getClass(e);return 0<n.length&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)},addClass:function(e,t){if(e.classList!==i)for(var n=o.Util.splitWords(t),r=0,s=n.length;r<s;r++)e.classList.add(n[r]);else if(!o.DomUtil.hasClass(e,t)){var a=o.DomUtil._getClass(e);o.DomUtil._setClass(e,(a?a+" ":"")+t)}},removeClass:function(e,t){e.classList!==i?e.classList.remove(t):o.DomUtil._setClass(e,o.Util.trim((" "+o.DomUtil._getClass(e)+" ").replace(" "+t+" "," ")))},_setClass:function(e,t){e.className.baseVal===i?e.className=t:e.className.baseVal=t},_getClass:function(e){return e.className.baseVal===i?e.className:e.className.baseVal},setOpacity:function(e,t){if("opacity"in e.style)e.style.opacity=t;else if("filter"in e.style){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=e.filters.item(n)}catch(e){if(1===t)return}t=Math.round(100*t),i?(i.Enabled=100!==t,i.Opacity=t):e.style.filter+=" progid:"+n+"(opacity="+t+")"}},testProp:function(e){for(var i=t.documentElement.style,n=0;n<e.length;n++)if(e[n]in i)return e[n];return!1},getTranslateString:function(e){var t=o.Browser.webkit3d,i=(t?",0":"")+")";return"translate"+(t?"3d":"")+"("+e.x+"px,"+e.y+"px"+i},getScaleString:function(e,t){return o.DomUtil.getTranslateString(t.add(t.multiplyBy(-1*e)))+" scale("+e+") "},setPosition:function(e,t,i){e._leaflet_pos=t,!i&&o.Browser.any3d?e.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(t):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getPosition:function(e){return e._leaflet_pos}},o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),o.DomUtil.TRANSITION_END="webkitTransition"===o.DomUtil.TRANSITION||"OTransition"===o.DomUtil.TRANSITION?o.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in t)o.extend(o.DomUtil,{disableTextSelection:function(){o.DomEvent.on(e,"selectstart",o.DomEvent.preventDefault)},enableTextSelection:function(){o.DomEvent.off(e,"selectstart",o.DomEvent.preventDefault)}});else{var i=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);o.extend(o.DomUtil,{disableTextSelection:function(){if(i){var e=t.documentElement.style;this._userSelect=e[i],e[i]="none"}},enableTextSelection:function(){i&&(t.documentElement.style[i]=this._userSelect,delete this._userSelect)}})}o.extend(o.DomUtil,{disableImageDrag:function(){o.DomEvent.on(e,"dragstart",o.DomEvent.preventDefault)},enableImageDrag:function(){o.DomEvent.off(e,"dragstart",o.DomEvent.preventDefault)}})}(),o.LatLng=function(e,t,n){if(e=parseFloat(e),t=parseFloat(t),isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=e,this.lng=t,n!==i&&(this.alt=parseFloat(n))},o.extend(o.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),o.LatLng.prototype={equals:function(e){return!!e&&(e=o.latLng(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=o.LatLng.MAX_MARGIN)},toString:function(e){return"LatLng("+o.Util.formatNum(this.lat,e)+", "+o.Util.formatNum(this.lng,e)+")"},distanceTo:function(e){e=o.latLng(e);var t=o.LatLng.DEG_TO_RAD,i=(e.lat-this.lat)*t,n=(e.lng-this.lng)*t,r=this.lat*t,s=e.lat*t,a=Math.sin(i/2),l=Math.sin(n/2),u=a*a+l*l*Math.cos(r)*Math.cos(s);return 12756274*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))},wrap:function(e,t){var i=this.lng;return i=(i+(t=t||180))%(t-(e=e||-180))+(i<e||i===t?t:e),new o.LatLng(this.lat,i)}},o.latLng=function(e,t){return e instanceof o.LatLng?e:o.Util.isArray(e)?"number"==typeof e[0]||"string"==typeof e[0]?new o.LatLng(e[0],e[1],e[2]):null:e===i||null===e?e:"object"==typeof e&&"lat"in e?new o.LatLng(e.lat,"lng"in e?e.lng:e.lon):t===i?null:new o.LatLng(e,t)},o.LatLngBounds=function(e,t){if(e)for(var i=t?[e,t]:e,n=0,o=i.length;n<o;n++)this.extend(i[n])},o.LatLngBounds.prototype={extend:function(e){if(!e)return this;var t=o.latLng(e);return(e=null!==t?t:o.latLngBounds(e))instanceof o.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(e.lat,this._southWest.lat),this._southWest.lng=Math.min(e.lng,this._southWest.lng),this._northEast.lat=Math.max(e.lat,this._northEast.lat),this._northEast.lng=Math.max(e.lng,this._northEast.lng)):(this._southWest=new o.LatLng(e.lat,e.lng),this._northEast=new o.LatLng(e.lat,e.lng)):e instanceof o.LatLngBounds&&(this.extend(e._southWest),this.extend(e._northEast)),this},pad:function(e){var t=this._southWest,i=this._northEast,n=Math.abs(t.lat-i.lat)*e,r=Math.abs(t.lng-i.lng)*e;return new o.LatLngBounds(new o.LatLng(t.lat-n,t.lng-r),new o.LatLng(i.lat+n,i.lng+r))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof o.LatLng?o.latLng(e):o.latLngBounds(e);var t,i,n=this._southWest,r=this._northEast;return e instanceof o.LatLngBounds?(t=e.getSouthWest(),i=e.getNorthEast()):t=i=e,t.lat>=n.lat&&i.lat<=r.lat&&t.lng>=n.lng&&i.lng<=r.lng},intersects:function(e){e=o.latLngBounds(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),r=e.getNorthEast(),s=r.lat>=t.lat&&n.lat<=i.lat,a=r.lng>=t.lng&&n.lng<=i.lng;return s&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e){return!!e&&(e=o.latLngBounds(e),this._southWest.equals(e.getSouthWest())&&this._northEast.equals(e.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},o.latLngBounds=function(e,t){return!e||e instanceof o.LatLngBounds?e:new o.LatLngBounds(e,t)},o.Projection={},o.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(e){var t=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,e.lat),-i),r=e.lng*t,s=n*t;return s=Math.log(Math.tan(Math.PI/4+s/2)),new o.Point(r,s)},unproject:function(e){var t=o.LatLng.RAD_TO_DEG,i=e.x*t,n=(2*Math.atan(Math.exp(e.y))-Math.PI/2)*t;return new o.LatLng(n,i)}},o.Projection.LonLat={project:function(e){return new o.Point(e.lng,e.lat)},unproject:function(e){return new o.LatLng(e.y,e.x)}},o.CRS={latLngToPoint:function(e,t){var i=this.projection.project(e),n=this.scale(t);return this.transformation._transform(i,n)},pointToLatLng:function(e,t){var i=this.scale(t),n=this.transformation.untransform(e,i);return this.projection.unproject(n)},project:function(e){return this.projection.project(e)},scale:function(e){return 256*Math.pow(2,e)},getSize:function(e){var t=this.scale(e);return o.point(t,t)}},o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(e){return Math.pow(2,e)}}),o.CRS.EPSG3857=o.extend({},o.CRS,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:new o.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(e){return this.projection.project(e).multiplyBy(6378137)}}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"}),o.CRS.EPSG4326=o.extend({},o.CRS,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/360,.5,-1/360,.5)}),o.Map=o.Class.extend({includes:o.Mixin.Events,options:{crs:o.CRS.EPSG3857,fadeAnimation:o.DomUtil.TRANSITION&&!o.Browser.android23,trackResize:!0,markerZoomAnimation:o.DomUtil.TRANSITION&&o.Browser.any3d},initialize:function(e,t){t=o.setOptions(this,t),this._initContainer(e),this._initLayout(),this._onResize=o.bind(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.center&&t.zoom!==i&&this.setView(o.latLng(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(t.layers)},setView:function(e,t){return t=t===i?this.getZoom():t,this._resetView(o.latLng(e),this._limitZoom(t)),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=this._limitZoom(e),this)},zoomIn:function(e,t){return this.setZoom(this._zoom+(e||1),t)},zoomOut:function(e,t){return this.setZoom(this._zoom-(e||1),t)},setZoomAround:function(e,t,i){var n=this.getZoomScale(t),r=this.getSize().divideBy(2),s=(e instanceof o.Point?e:this.latLngToContainerPoint(e)).subtract(r).multiplyBy(1-1/n),a=this.containerPointToLatLng(r.add(s));return this.setView(a,t,{zoom:i})},fitBounds:function(e,t){t=t||{},e=e.getBounds?e.getBounds():o.latLngBounds(e);var i=o.point(t.paddingTopLeft||t.padding||[0,0]),n=o.point(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,!1,i.add(n));r=t.maxZoom?Math.min(t.maxZoom,r):r;var s=n.subtract(i).divideBy(2),a=this.project(e.getSouthWest(),r),l=this.project(e.getNorthEast(),r),u=this.unproject(a.add(l).divideBy(2).add(s),r);return this.setView(u,r,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e){return this.fire("movestart"),this._rawPanBy(o.point(e)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(e){return e=o.latLngBounds(e),(this.options.maxBounds=e)?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(e,t){var i=this.getCenter(),n=this._limitCenter(i,this._zoom,e);return i.equals(n)?this:this.panTo(n,t)},addLayer:function(e){var t=o.stamp(e);return this._layers[t]||(!(this._layers[t]=e).options||isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[t]=e,this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&e instanceof o.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,e.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(e)),this},removeLayer:function(e){var t=o.stamp(e);return this._layers[t]&&(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&this.fire("layerremove",{layer:e}),this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&e instanceof o.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,e.off("load",this._onTileLayerLoad,this))),this},hasLayer:function(e){return!!e&&o.stamp(e)in this._layers},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},invalidateSize:function(e){if(!this._loaded)return this;e=o.extend({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var i=this.getSize(),n=t.divideBy(2).round(),r=i.divideBy(2).round(),s=n.subtract(r);return s.x||s.y?(e.animate&&e.pan?this.panBy(s):(e.pan&&this._rawPanBy(s),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i})):this},addHandler:function(e,t){if(!t)return this;var i=this[e]=new t(this);return this._handlers.push(i),this.options[e]&&i.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(e){this._container._leaflet=i}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),i=this.unproject(e.getTopRight());return new o.LatLngBounds(t,i)},getMinZoom:function(){return this.options.minZoom===i?this._layersMinZoom===i?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===i?this._layersMaxZoom===i?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,i){e=o.latLngBounds(e);var n,r=this.getMinZoom()-(t?1:0),s=this.getMaxZoom(),a=this.getSize(),l=e.getNorthWest(),u=e.getSouthEast(),c=!0;for(i=o.point(i||[0,0]);r++,n=this.project(u,r).subtract(this.project(l,r)).add(i),(c=t?n.x<a.x||n.y<a.y:a.contains(n))&&r<=s;);return c&&t?null:t?r:r-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new o.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var e=this._getTopLeftPoint();return new o.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e){var t=this.options.crs;return t.scale(e)/t.scale(this._zoom)},getScaleZoom:function(e){return this._zoom+Math.log(e)/Math.LN2},project:function(e,t){return t=t===i?this._zoom:t,this.options.crs.latLngToPoint(o.latLng(e),t)},unproject:function(e,t){return t=t===i?this._zoom:t,this.options.crs.pointToLatLng(o.point(e),t)},layerPointToLatLng:function(e){var t=o.point(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(o.latLng(e))._round()._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(e){return o.point(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return o.point(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(o.point(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(e)))},mouseEventToContainerPoint:function(e){return o.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=o.DomUtil.get(e);if(!t)throw new Error("Map container not found.");if(t._leaflet)throw new Error("Map container is already initialized.");t._leaflet=!0},_initLayout:function(){var e=this._container;o.DomUtil.addClass(e,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(o.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var t=o.DomUtil.getStyle(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._mapPane=e.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=e.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),e.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),e.shadowPane=this._createPane("leaflet-shadow-pane"),e.overlayPane=this._createPane("leaflet-overlay-pane"),e.markerPane=this._createPane("leaflet-marker-pane"),e.popupPane=this._createPane("leaflet-popup-pane");var t=" leaflet-zoom-hide";this.options.markerZoomAnimation||(o.DomUtil.addClass(e.markerPane,t),o.DomUtil.addClass(e.shadowPane,t),o.DomUtil.addClass(e.popupPane,t))},_createPane:function(e,t){return o.DomUtil.create("div",e,t||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(e){for(var t=0,i=(e=e?o.Util.isArray(e)?e:[e]:[]).length;t<i;t++)this.addLayer(e[t])},_resetView:function(e,t,i,n){var r=this._zoom!==t;n||(this.fire("movestart"),r&&this.fire("zoomstart")),this._zoom=t,this._initialCenter=e,this._initialTopLeftPoint=this._getNewTopLeftPoint(e),i?this._initialTopLeftPoint._add(this._getMapPanePos()):o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var s=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!i}),s&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(r||n)&&this.fire("zoomend"),this.fire("moveend",{hard:!i})},_rawPanBy:function(e){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var e,t=1/0,n=-1/0,o=this._getZoomSpan();for(e in this._zoomBoundLayers){var r=this._zoomBoundLayers[e];isNaN(r.options.minZoom)||(t=Math.min(t,r.options.minZoom)),isNaN(r.options.maxZoom)||(n=Math.max(n,r.options.maxZoom))}e===i?this._layersMaxZoom=this._layersMinZoom=i:(this._layersMaxZoom=n,this._layersMinZoom=t),o!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(o.DomEvent){t=t||"on",o.DomEvent[t](this._container,"click",this._onMouseClick,this);var i,n,r=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(i=0,n=r.length;i<n;i++)o.DomEvent[t](this._container,r[i],this._fireMouseEvent,this);this.options.trackResize&&o.DomEvent[t](e,"resize",this._onResize,this)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame((function(){this.invalidateSize({debounceMoveend:!0})}),this,!1,this._container)},_onMouseClick:function(e){!this._loaded||!e._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||o.DomEvent._skipped(e)||(this.fire("preclick"),this._fireMouseEvent(e))},_fireMouseEvent:function(e){if(this._loaded&&!o.DomEvent._skipped(e)){var t=e.type;if(t="mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,this.hasEventListeners(t)){"contextmenu"===t&&o.DomEvent.preventDefault(e);var i=this.mouseEventToContainerPoint(e),n=this.containerPointToLayerPoint(i),r=this.layerPointToLatLng(n);this.fire(t,{latlng:r,layerPoint:n,containerPoint:i,originalEvent:e})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,this):this.on("load",e,t),this},_layerAdd:function(e){e.onAdd(this),this.fire("layeradd",{layer:e})},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(e,t){var i=this.getSize()._divideBy(2);return this.project(e,t)._subtract(i)._round()},_latLngToNewLayerPoint:function(e,t,i){var n=this._getNewTopLeftPoint(i,t).add(this._getMapPanePos());return this.project(e,t)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,i){if(!i)return e;var n=this.project(e,t),r=this.getSize().divideBy(2),s=new o.Bounds(n.subtract(r),n.add(r)),a=this._getBoundsOffset(s,i,t);return this.unproject(n.add(a),t)},_limitOffset:function(e,t){if(!t)return e;var i=this.getPixelBounds(),n=new o.Bounds(i.min.add(e),i.max.add(e));return e.add(this._getBoundsOffset(n,t))},_getBoundsOffset:function(e,t,i){var n=this.project(t.getNorthWest(),i).subtract(e.min),r=this.project(t.getSouthEast(),i).subtract(e.max),s=this._rebound(n.x,-r.x),a=this._rebound(n.y,-r.y);return new o.Point(s,a)},_rebound:function(e,t){return 0<e+t?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),i=this.getMaxZoom();return Math.max(t,Math.min(i,e))}}),o.map=function(e,t){return new o.Map(e,t)},o.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(e){var t=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,e.lat),-i),r=this.R_MAJOR,s=this.R_MINOR,a=e.lng*t*r,l=n*t,u=s/r,c=Math.sqrt(1-u*u),h=c*Math.sin(l);h=Math.pow((1-h)/(1+h),.5*c);var p=Math.tan(.5*(.5*Math.PI-l))/h;return l=-r*Math.log(p),new o.Point(a,l)},unproject:function(e){for(var t,i=o.LatLng.RAD_TO_DEG,n=this.R_MAJOR,r=this.R_MINOR,s=e.x*i/n,a=r/n,l=Math.sqrt(1-a*a),u=Math.exp(-e.y/n),c=Math.PI/2-2*Math.atan(u),h=15,p=.1;1e-7<Math.abs(p)&&0<--h;)t=l*Math.sin(c),c+=p=Math.PI/2-2*Math.atan(u*Math.pow((1-t)/(1+t),.5*l))-c;return new o.LatLng(c*i,s)}},o.CRS.EPSG3395=o.extend({},o.CRS,{code:"EPSG:3395",projection:o.Projection.Mercator,transformation:function(){var e=o.Projection.Mercator.R_MAJOR,t=.5/(Math.PI*e);return new o.Transformation(t,.5,-t,.5)}()}),o.TileLayer=o.Class.extend({includes:o.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:o.Browser.mobile,updateWhenIdle:o.Browser.mobile},initialize:function(e,t){(t=o.setOptions(this,t)).detectRetina&&o.Browser.retina&&0<t.maxZoom&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomOffset++,0<t.minZoom&&t.minZoom--,this.options.maxZoom--),t.bounds&&(t.bounds=o.latLngBounds(t.bounds)),this._url=e;var i=this.options.subdomains;"string"==typeof i&&(this.options.subdomains=i.split(""))},onAdd:function(e){this._map=e,this._animated=e._zoomAnimated,this._initContainer(),e.on({viewreset:this._reset,moveend:this._update},this),this._animated&&e.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=o.Util.limitExecByInterval(this._update,150,this),e.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this._container.parentNode.removeChild(this._container),e.off({viewreset:this._reset,moveend:this._update},this),this._animated&&e.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||e.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var e=this._map._panes.tilePane;return this._container&&(e.appendChild(this._container),this._setAutoZIndex(e,Math.max)),this},bringToBack:function(){var e=this._map._panes.tilePane;return this._container&&(e.insertBefore(this._container,e.firstChild),this._setAutoZIndex(e,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e,t){var i,n,o,r=e.children,s=-t(1/0,-1/0);for(n=0,o=r.length;n<o;n++)r[n]!==this._container&&(i=parseInt(r[n].style.zIndex,10),isNaN(i)||(s=t(s,i)));this.options.zIndex=this._container.style.zIndex=(isFinite(s)?s:0)+t(1,-1)},_updateOpacity:function(){var e,t=this._tiles;if(o.Browser.ielt9)for(e in t)o.DomUtil.setOpacity(t[e],this.options.opacity);else o.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var e=this._map._panes.tilePane;if(!this._container){if(this._container=o.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var t="leaflet-tile-container";this._bgBuffer=o.DomUtil.create("div",t,this._container),this._tileContainer=o.DomUtil.create("div",t,this._container)}else this._tileContainer=this._container;e.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(e){for(var t in this._tiles)this.fire("tileunload",{tile:this._tiles[t]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&e&&e.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var e=this._map,t=e.getZoom()+this.options.zoomOffset,i=this.options.maxNativeZoom,n=this.options.tileSize;return i&&i<t&&(n=Math.round(e.getZoomScale(t)/e.getZoomScale(i)*n)),n},_update:function(){if(this._map){var e=this._map,t=e.getPixelBounds(),i=e.getZoom(),n=this._getTileSize();if(!(i>this.options.maxZoom||i<this.options.minZoom)){var r=o.bounds(t.min.divideBy(n)._floor(),t.max.divideBy(n)._floor());this._addTilesFromCenterOut(r),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(r)}}},_addTilesFromCenterOut:function(e){var i,n,r,s=[],a=e.getCenter();for(i=e.min.y;i<=e.max.y;i++)for(n=e.min.x;n<=e.max.x;n++)r=new o.Point(n,i),this._tileShouldBeLoaded(r)&&s.push(r);var l=s.length;if(0!==l){s.sort((function(e,t){return e.distanceTo(a)-t.distanceTo(a)}));var u=t.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=l,n=0;n<l;n++)this._addTile(s[n],u);this._tileContainer.appendChild(u)}},_tileShouldBeLoaded:function(e){if(e.x+":"+e.y in this._tiles)return!1;var t=this.options;if(!t.continuousWorld){var i=this._getWrapTileNum();if(t.noWrap&&(e.x<0||e.x>=i.x)||e.y<0||e.y>=i.y)return!1}if(t.bounds){var n=this._getTileSize(),o=e.multiplyBy(n),r=o.add([n,n]),s=this._map.unproject(o),a=this._map.unproject(r);if(t.continuousWorld||t.noWrap||(s=s.wrap(),a=a.wrap()),!t.bounds.intersects([s,a]))return!1}return!0},_removeOtherTiles:function(e){var t,i,n,o;for(o in this._tiles)t=o.split(":"),i=parseInt(t[0],10),n=parseInt(t[1],10),(i<e.min.x||i>e.max.x||n<e.min.y||n>e.max.y)&&this._removeTile(o)},_removeTile:function(e){var t=this._tiles[e];this.fire("tileunload",{tile:t,url:t.src}),this.options.reuseTiles?(o.DomUtil.removeClass(t,"leaflet-tile-loaded"),this._unusedTiles.push(t)):t.parentNode===this._tileContainer&&this._tileContainer.removeChild(t),o.Browser.android||(t.onload=null,t.src=o.Util.emptyImageUrl),delete this._tiles[e]},_addTile:function(e,t){var i=this._getTilePos(e),n=this._getTile();o.DomUtil.setPosition(n,i,o.Browser.chrome),this._tiles[e.x+":"+e.y]=n,this._loadTile(n,e),n.parentNode!==this._tileContainer&&t.appendChild(n)},_getZoomForUrl:function(){var e=this.options,t=this._map.getZoom();return e.zoomReverse&&(t=e.maxZoom-t),t+=e.zoomOffset,e.maxNativeZoom?Math.min(t,e.maxNativeZoom):t},_getTilePos:function(e){var t=this._map.getPixelOrigin(),i=this._getTileSize();return e.multiplyBy(i).subtract(t)},getTileUrl:function(e){return o.Util.template(this._url,o.extend({s:this._getSubdomain(e),z:e.z,x:e.x,y:e.y},this.options))},_getWrapTileNum:function(){return this._map.options.crs.getSize(this._map.getZoom()).divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(e){var t=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(e.x=(e.x%t.x+t.x)%t.x),this.options.tms&&(e.y=t.y-e.y-1),e.z=this._getZoomForUrl()},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_getTile:function(){if(this.options.reuseTiles&&0<this._unusedTiles.length){var e=this._unusedTiles.pop();return this._resetTile(e),e}return this._createTile()},_resetTile:function(){},_createTile:function(){var e=o.DomUtil.create("img","leaflet-tile");return e.style.width=e.style.height=this._getTileSize()+"px",e.galleryimg="no",e.onselectstart=e.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity!==i&&o.DomUtil.setOpacity(e,this.options.opacity),o.Browser.mobileWebkit3d&&(e.style.WebkitBackfaceVisibility="hidden"),e},_loadTile:function(e,t){e._layer=this,e.onload=this._tileOnLoad,e.onerror=this._tileOnError,this._adjustTilePoint(t),e.src=this.getTileUrl(t),this.fire("tileloadstart",{tile:e,url:e.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&o.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(o.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var e=this._layer;this.src!==o.Util.emptyImageUrl&&(o.DomUtil.addClass(this,"leaflet-tile-loaded"),e.fire("tileload",{tile:this,url:this.src})),e._tileLoaded()},_tileOnError:function(){var e=this._layer;e.fire("tileerror",{tile:this,url:this.src});var t=e.options.errorTileUrl;t&&(this.src=t),e._tileLoaded()}}),o.tileLayer=function(e,t){return new o.TileLayer(e,t)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(e,t){this._url=e;var i=o.extend({},this.defaultWmsParams),n=t.tileSize||this.options.tileSize;for(var r in t.detectRetina&&o.Browser.retina?i.width=i.height=2*n:i.width=i.height=n,t)this.options.hasOwnProperty(r)||"crs"===r||(i[r]=t[r]);this.wmsParams=i,o.setOptions(this,t)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[t]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._map,i=this.options.tileSize,n=e.multiplyBy(i),r=n.add([i,i]),s=this._crs.project(t.unproject(n,e.z)),a=this._crs.project(t.unproject(r,e.z)),l=1.3<=this._wmsVersion&&this._crs===o.CRS.EPSG4326?[a.y,s.x,s.y,a.x].join(","):[s.x,a.y,a.x,s.y].join(","),u=o.Util.template(this._url,{s:this._getSubdomain(e)});return u+o.Util.getParamString(this.wmsParams,u,!0)+"&BBOX="+l},setParams:function(e,t){return o.extend(this.wmsParams,e),t||this.redraw(),this}}),o.tileLayer.wms=function(e,t){return new o.TileLayer.WMS(e,t)},o.TileLayer.Canvas=o.TileLayer.extend({options:{async:!1},initialize:function(e){o.setOptions(this,e)},redraw:function(){for(var e in this._map&&(this._reset({hard:!0}),this._update()),this._tiles)this._redrawTile(this._tiles[e]);return this},_redrawTile:function(e){this.drawTile(e,e._tilePoint,this._map._zoom)},_createTile:function(){var e=o.DomUtil.create("canvas","leaflet-tile");return e.width=e.height=this.options.tileSize,e.onselectstart=e.onmousemove=o.Util.falseFn,e},_loadTile:function(e,t){e._layer=this,e._tilePoint=t,this._redrawTile(e),this.options.async||this.tileDrawn(e)},drawTile:function(){},tileDrawn:function(e){this._tileOnLoad.call(e)}}),o.tileLayer.canvas=function(e){return new o.TileLayer.Canvas(e)},o.ImageOverlay=o.Class.extend({includes:o.Mixin.Events,options:{opacity:1},initialize:function(e,t,i){this._url=e,this._bounds=o.latLngBounds(t),o.setOptions(this,i)},onAdd:function(e){this._map=e,this._image||this._initImage(),e._panes.overlayPane.appendChild(this._image),e.on("viewreset",this._reset,this),e.options.zoomAnimation&&o.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){e.getPanes().overlayPane.removeChild(this._image),e.off("viewreset",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var e=this._map._panes.overlayPane;return this._image&&e.insertBefore(this._image,e.firstChild),this},setUrl:function(e){this._url=e,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=o.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&o.Browser.any3d?o.DomUtil.addClass(this._image,"leaflet-zoom-animated"):o.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),o.extend(this._image,{galleryimg:"no",onselectstart:o.Util.falseFn,onmousemove:o.Util.falseFn,onload:o.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(e){var t=this._map,i=this._image,n=t.getZoomScale(e.zoom),r=this._bounds.getNorthWest(),s=this._bounds.getSouthEast(),a=t._latLngToNewLayerPoint(r,e.zoom,e.center),l=t._latLngToNewLayerPoint(s,e.zoom,e.center)._subtract(a),u=a._add(l._multiplyBy(.5*(1-1/n)));i.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(u)+" scale("+n+") "},_reset:function(){var e=this._image,t=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(t);o.DomUtil.setPosition(e,t),e.style.width=i.x+"px",e.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(e,t,i){return new o.ImageOverlay(e,t,i)},o.Icon=o.Class.extend({options:{className:""},initialize:function(e){o.setOptions(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var i,n=this._getIconUrl(e);if(n)return i=t&&"IMG"===t.tagName?this._createImg(n,t):this._createImg(n),this._setIconStyles(i,e),i;if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null},_setIconStyles:function(e,t){var i,n=this.options,r=o.point(n[t+"Size"]);!(i="shadow"===t?o.point(n.shadowAnchor||n.iconAnchor):o.point(n.iconAnchor))&&r&&(i=r.divideBy(2,!0)),e.className="leaflet-marker-"+t+" "+n.className,i&&(e.style.marginLeft=-i.x+"px",e.style.marginTop=-i.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")},_createImg:function(e,i){return(i=i||t.createElement("img")).src=e,i},_getIconUrl:function(e){return o.Browser.retina&&this.options[e+"RetinaUrl"]?this.options[e+"RetinaUrl"]:this.options[e+"Url"]}}),o.icon=function(e){return new o.Icon(e)},o.Icon.Default=o.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(e){var t=e+"Url";if(this.options[t])return this.options[t];o.Browser.retina&&"icon"===e&&(e+="-2x");var i=o.Icon.Default.imagePath;if(!i)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+e+".png"}}),o.Icon.Default.imagePath=function(){var e,i,n,o,r=t.getElementsByTagName("script"),s=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(e=0,i=r.length;e<i;e++)if((n=r[e].src).match(s))return((o=n.split(s)[0])?o+"/":"")+"images"}(),o.Marker=o.Class.extend({includes:o.Mixin.Events,options:{icon:new o.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(e,t){o.setOptions(this,t),this._latlng=o.latLng(e)},onAdd:function(e){(this._map=e).on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),e.options.zoomAnimation&&e.options.markerZoomAnimation&&e.on("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),e.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=o.latLng(e),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update(),this},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var e=this.options,t=this._map,i=t.options.zoomAnimation&&t.options.markerZoomAnimation?"leaflet-zoom-animated":"leaflet-zoom-hide",n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),e.alt&&(n.alt=e.alt)),o.DomUtil.addClass(n,i),e.keyboard&&(n.tabIndex="0"),this._icon=n,this._initInteraction(),e.riseOnHover&&o.DomEvent.on(n,"mouseover",this._bringToFront,this).on(n,"mouseout",this._resetZIndex,this);var s=e.icon.createShadow(this._shadow),a=!1;s!==this._shadow&&(this._removeShadow(),a=!0),s&&o.DomUtil.addClass(s,i),this._shadow=s,e.opacity<1&&this._updateOpacity();var l=this._map._panes;r&&l.markerPane.appendChild(this._icon),s&&a&&l.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&o.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(e){o.DomUtil.setPosition(this._icon,e),this._shadow&&o.DomUtil.setPosition(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.clickable){var e=this._icon,t=["dblclick","mousedown","mouseover","mouseout","contextmenu"];o.DomUtil.addClass(e,"leaflet-clickable"),o.DomEvent.on(e,"click",this._onMouseClick,this),o.DomEvent.on(e,"keypress",this._onKeyPress,this);for(var i=0;i<t.length;i++)o.DomEvent.on(e,t[i],this._fireMouseEvent,this);o.Handler.MarkerDrag&&(this.dragging=new o.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(e){var t=this.dragging&&this.dragging.moved();(this.hasEventListeners(e.type)||t)&&o.DomEvent.stopPropagation(e),t||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(e.type,{originalEvent:e,latlng:this._latlng})},_onKeyPress:function(e){13===e.keyCode&&this.fire("click",{originalEvent:e,latlng:this._latlng})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e,latlng:this._latlng}),"contextmenu"===e.type&&this.hasEventListeners(e.type)&&o.DomEvent.preventDefault(e),"mousedown"!==e.type?o.DomEvent.stopPropagation(e):o.DomEvent.preventDefault(e)},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){o.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&o.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),o.marker=function(e,t){return new o.Marker(e,t)},o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(e){var i=e&&"DIV"===e.tagName?e:t.createElement("div"),n=this.options;return!1!==n.html?i.innerHTML=n.html:i.innerHTML="",n.bgPos&&(i.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(i,"icon"),i},createShadow:function(){return null}}),o.divIcon=function(e){return new o.DivIcon(e)},o.Map.mergeOptions({closePopupOnClick:!0}),o.Popup=o.Class.extend({includes:o.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(e,t){o.setOptions(this,e),this._source=t,this._animated=o.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(e){this._map=e,this._container||this._initLayout();var t=e.options.fadeAnimation;t&&o.DomUtil.setOpacity(this._container,0),e._panes.popupPane.appendChild(this._container),e.on(this._getEvents(),this),this.update(),t&&o.DomUtil.setOpacity(this._container,1),this.fire("open"),e.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(e){return e.addLayer(this),this},openOn:function(e){return e.openPopup(this),this},onRemove:function(e){e._panes.popupPane.removeChild(this._container),o.Util.falseFn(this._container.offsetWidth),e.off(this._getEvents(),this),e.options.fadeAnimation&&o.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),e.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=o.latLng(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var e={viewreset:this._updatePosition};return this._animated&&(e.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e,t="leaflet-popup",i=t+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),n=this._container=o.DomUtil.create("div",i);this.options.closeButton&&((e=this._closeButton=o.DomUtil.create("a",t+"-close-button",n)).href="#close",e.innerHTML="&#215;",o.DomEvent.disableClickPropagation(e),o.DomEvent.on(e,"click",this._onCloseButtonClick,this));var r=this._wrapper=o.DomUtil.create("div",t+"-content-wrapper",n);o.DomEvent.disableClickPropagation(r),this._contentNode=o.DomUtil.create("div",t+"-content",r),o.DomEvent.disableScrollPropagation(this._contentNode),o.DomEvent.on(r,"contextmenu",o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create("div",t+"-tip-container",n),this._tip=o.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var i=e.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),t.width=i+1+"px",t.whiteSpace="",t.height="";var n=e.offsetHeight,r=this.options.maxHeight,s="leaflet-popup-scrolled";r&&r<n?(t.height=r+"px",o.DomUtil.addClass(e,s)):o.DomUtil.removeClass(e,s),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=this._animated,i=o.point(this.options.offset);t&&o.DomUtil.setPosition(this._container,e),this._containerBottom=-i.y-(t?0:e.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(t?0:e.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);o.DomUtil.setPosition(this._container,t)},_adjustPan:function(){if(this.options.autoPan){var e=this._map,t=this._container.offsetHeight,i=this._containerWidth,n=new o.Point(this._containerLeft,-t-this._containerBottom);this._animated&&n._add(o.DomUtil.getPosition(this._container));var r=e.layerPointToContainerPoint(n),s=o.point(this.options.autoPanPadding),a=o.point(this.options.autoPanPaddingTopLeft||s),l=o.point(this.options.autoPanPaddingBottomRight||s),u=e.getSize(),c=0,h=0;r.x+i+l.x>u.x&&(c=r.x+i-u.x+l.x),r.x-c-a.x<0&&(c=r.x-a.x),r.y+t+l.y>u.y&&(h=r.y+t-u.y+l.y),r.y-h-a.y<0&&(h=r.y-a.y),(c||h)&&e.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(e){this._close(),o.DomEvent.stop(e)}}),o.popup=function(e,t){return new o.Popup(e,t)},o.Map.include({openPopup:function(e,t,i){if(this.closePopup(),!(e instanceof o.Popup)){var n=e;e=new o.Popup(i).setLatLng(t).setContent(n)}return e._isOpen=!0,this._popup=e,this.addLayer(e)},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&(this.removeLayer(e),e._isOpen=!1),this}}),o.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(e,t){var i=o.point(this.options.icon.options.popupAnchor||[0,0]);return i=i.add(o.Popup.prototype.options.offset),t&&t.offset&&(i=i.add(t.offset)),t=o.extend({offset:i},t),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),e instanceof o.Popup?(o.setOptions(e,t),(this._popup=e)._source=this):this._popup=new o.Popup(t,this).setContent(e),this},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(e){this._popup.setLatLng(e.latlng)}}),o.LayerGroup=o.Class.extend({initialize:function(e){var t,i;if(this._layers={},e)for(t=0,i=e.length;t<i;t++)this.addLayer(e[t])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(e){var t,i,n=Array.prototype.slice.call(arguments,1);for(t in this._layers)(i=this._layers[t])[e]&&i[e].apply(i,n);return this},onAdd:function(e){this._map=e,this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e),this._map=null},addTo:function(e){return e.addLayer(this),this},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var t in this._layers)e.push(this._layers[t]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return o.stamp(e)}}),o.layerGroup=function(e){return new o.LayerGroup(e)},o.FeatureGroup=o.LayerGroup.extend({includes:o.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(e){return this.hasLayer(e)?this:("on"in e&&e.on(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.addLayer.call(this,e),this._popupContent&&e.bindPopup&&e.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),"off"in e&&e.off(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.removeLayer.call(this,e),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:e})):this},bindPopup:function(e,t){return this._popupContent=e,this._popupOptions=t,this.invoke("bindPopup",e,t)},openPopup:function(e){for(var t in this._layers){this._layers[t].openPopup(e);break}return this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new o.LatLngBounds;return this.eachLayer((function(t){e.extend(t instanceof o.Marker?t.getLatLng():t.getBounds())})),e},_propagateEvent:function(e){e=o.extend({layer:e.target,target:this},e),this.fire(e.type,e)}}),o.featureGroup=function(e){return new o.FeatureGroup(e)},o.Path=o.Class.extend({includes:[o.Mixin.Events],statics:{CLIP_PADDING:function(){var t=((o.Browser.mobile?1280:2e3)/Math.max(e.outerWidth,e.outerHeight)-1)/2;return Math.max(0,Math.min(.5,t))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(e){o.setOptions(this,e)},onAdd:function(e){this._map=e,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),e.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,o.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),e.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(e){return o.setOptions(this,e),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),o.Map.include({_updatePathViewport:function(){var e=o.Path.CLIP_PADDING,t=this.getSize(),i=o.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(t.multiplyBy(e)._round()),n=i.add(t.multiplyBy(1+2*e)._round());this._pathViewport=new o.Bounds(i,n)}}),o.Path.SVG_NS="http://www.w3.org/2000/svg",o.Browser.svg=!(!t.createElementNS||!t.createElementNS(o.Path.SVG_NS,"svg").createSVGRect),o.Path=o.Path.extend({statics:{SVG:o.Browser.svg},bringToFront:function(){var e=this._map._pathRoot,t=this._container;return t&&e.lastChild!==t&&e.appendChild(t),this},bringToBack:function(){var e=this._map._pathRoot,t=this._container,i=e.firstChild;return t&&i!==t&&e.insertBefore(t,i),this},getPathString:function(){},_createElement:function(e){return t.createElementNS(o.Path.SVG_NS,e)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&o.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var e=this.getPathString();e||(e="M0 0"),this._path.setAttribute("d",e)},_initEvents:function(){if(this.options.clickable){(o.Browser.svg||!o.Browser.vml)&&o.DomUtil.addClass(this._path,"leaflet-clickable"),o.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var e=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],t=0;t<e.length;t++)o.DomEvent.on(this._container,e[t],this._fireMouseEvent,this)}},_onMouseClick:function(e){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(e)},_fireMouseEvent:function(e){if(this._map&&this.hasEventListeners(e.type)){var t=this._map,i=t.mouseEventToContainerPoint(e),n=t.containerPointToLayerPoint(i),r=t.layerPointToLatLng(n);this.fire(e.type,{latlng:r,layerPoint:n,containerPoint:i,originalEvent:e}),"contextmenu"===e.type&&o.DomEvent.preventDefault(e),"mousemove"!==e.type&&o.DomEvent.stopPropagation(e)}}}),o.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=o.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&o.Browser.any3d?(o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(e){var t=this.getZoomScale(e.zoom),i=this._getCenterOffset(e.center)._multiplyBy(-t)._add(this._pathViewport.min);this._pathRoot.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(i)+" scale("+t+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,i=e.max,n=i.x-t.x,r=i.y-t.y,s=this._pathRoot,a=this._panes.overlayPane;o.Browser.mobileWebkit&&a.removeChild(s),o.DomUtil.setPosition(s,t),s.setAttribute("width",n),s.setAttribute("height",r),s.setAttribute("viewBox",[t.x,t.y,n,r].join(" ")),o.Browser.mobileWebkit&&a.appendChild(s)}}}),o.Path.include({bindPopup:function(e,t){return e instanceof o.Popup?this._popup=e:((!this._popup||t)&&(this._popup=new o.Popup(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(e){return this._popup&&(e=e||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:e})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(e){this._popup.setLatLng(e.latlng),this._map.openPopup(this._popup)}}),o.Browser.vml=!o.Browser.svg&&function(){try{var e=t.createElement("div");e.innerHTML='<v:shape adj="1"/>';var i=e.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(e){return!1}}(),o.Path=o.Browser.svg||!o.Browser.vml?o.Path:o.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return t.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return t.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var e=this._container=this._createElement("shape");o.DomUtil.addClass(e,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&o.DomUtil.addClass(e,"leaflet-clickable"),e.coordsize="1 1",this._path=this._createElement("path"),e.appendChild(this._path),this._map._pathRoot.appendChild(e)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var e=this._stroke,t=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke?(e||((e=this._stroke=this._createElement("stroke")).endcap="round",n.appendChild(e)),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=o.Util.isArray(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",i.lineCap&&(e.endcap=i.lineCap.replace("butt","flat")),i.lineJoin&&(e.joinstyle=i.lineJoin)):e&&(n.removeChild(e),this._stroke=null),i.fill?(t||(t=this._fill=this._createElement("fill"),n.appendChild(t)),t.color=i.fillColor||i.color,t.opacity=i.fillOpacity):t&&(n.removeChild(t),this._fill=null)},_updatePath:function(){var e=this._container.style;e.display="none",this._path.v=this.getPathString()+" ",e.display=""}}),o.Map.include(o.Browser.svg||!o.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var e=this._pathRoot=t.createElement("div");e.className="leaflet-vml-container",this._panes.overlayPane.appendChild(e),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),o.Browser.canvas=!!t.createElement("canvas").getContext,o.Path=o.Path.SVG&&!e.L_PREFER_CANVAS||!o.Browser.canvas?o.Path:o.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(e){return o.setOptions(this,e),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(e){e.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!o.Path._updateRequest&&(o.Path._updateRequest=o.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){o.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var e=this.options;e.stroke&&(this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color),e.fill&&(this._ctx.fillStyle=e.fillColor||e.color),e.lineCap&&(this._ctx.lineCap=e.lineCap),e.lineJoin&&(this._ctx.lineJoin=e.lineJoin)},_drawPath:function(){var e,t,i,n,r,s;for(this._ctx.beginPath(),e=0,i=this._parts.length;e<i;e++){for(t=0,n=this._parts[e].length;t<n;t++)r=this._parts[e][t],s=(0===t?"move":"line")+"To",this._ctx[s](r.x,r.y);this instanceof o.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var e=this._ctx,t=this.options;this._drawPath(),e.save(),this._updateStyle(),t.fill&&(e.globalAlpha=t.fillOpacity,e.fill(t.fillRule||"evenodd")),t.stroke&&(e.globalAlpha=t.opacity,e.stroke()),e.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(e){this._containsPoint(e.layerPoint)&&this.fire(e.type,e)},_onMouseMove:function(e){this._map&&!this._map._animatingZoom&&(this._containsPoint(e.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",e)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",e)))}}),o.Map.include(o.Path.SVG&&!e.L_PREFER_CANVAS||!o.Browser.canvas?{}:{_initPathRoot:function(){var e,i=this._pathRoot;i||((i=this._pathRoot=t.createElement("canvas")).style.position="absolute",(e=this._canvasCtx=i.getContext("2d")).lineCap="round",e.lineJoin="round",this._panes.overlayPane.appendChild(i),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,i=e.max.subtract(t),n=this._pathRoot;o.DomUtil.setPosition(n,t),n.width=i.x,n.height=i.y,n.getContext("2d").translate(-t.x,-t.y)}}}),o.LineUtil={simplify:function(e,t){if(!t||!e.length)return e.slice();var i=t*t;return e=this._reducePoints(e,i),this._simplifyDP(e,i)},pointToSegmentDistance:function(e,t,i){return Math.sqrt(this._sqClosestPointOnSegment(e,t,i,!0))},closestPointOnSegment:function(e,t,i){return this._sqClosestPointOnSegment(e,t,i)},_simplifyDP:function(e,t){var n=e.length,o=new(typeof Uint8Array!=i+""?Uint8Array:Array)(n);o[0]=o[n-1]=1,this._simplifyDPStep(e,o,t,0,n-1);var r,s=[];for(r=0;r<n;r++)o[r]&&s.push(e[r]);return s},_simplifyDPStep:function(e,t,i,n,o){var r,s,a,l=0;for(s=n+1;s<=o-1;s++)l<(a=this._sqClosestPointOnSegment(e[s],e[n],e[o],!0))&&(r=s,l=a);i<l&&(t[r]=1,this._simplifyDPStep(e,t,i,n,r),this._simplifyDPStep(e,t,i,r,o))},_reducePoints:function(e,t){for(var i=[e[0]],n=1,o=0,r=e.length;n<r;n++)this._sqDist(e[n],e[o])>t&&(i.push(e[n]),o=n);return o<r-1&&i.push(e[r-1]),i},clipSegment:function(e,t,i,n){var o,r,s,a=n?this._lastCode:this._getBitCode(e,i),l=this._getBitCode(t,i);for(this._lastCode=l;;){if(!(a|l))return[e,t];if(a&l)return!1;o=a||l,r=this._getEdgeIntersection(e,t,o,i),s=this._getBitCode(r,i),o===a?(e=r,a=s):(t=r,l=s)}},_getEdgeIntersection:function(e,t,i,n){var r=t.x-e.x,s=t.y-e.y,a=n.min,l=n.max;return 8&i?new o.Point(e.x+r*(l.y-e.y)/s,l.y):4&i?new o.Point(e.x+r*(a.y-e.y)/s,a.y):2&i?new o.Point(l.x,e.y+s*(l.x-e.x)/r):1&i?new o.Point(a.x,e.y+s*(a.x-e.x)/r):void 0},_getBitCode:function(e,t){var i=0;return e.x<t.min.x?i|=1:e.x>t.max.x&&(i|=2),e.y<t.min.y?i|=4:e.y>t.max.y&&(i|=8),i},_sqDist:function(e,t){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},_sqClosestPointOnSegment:function(e,t,i,n){var r,s=t.x,a=t.y,l=i.x-s,u=i.y-a,c=l*l+u*u;return 0<c&&(1<(r=((e.x-s)*l+(e.y-a)*u)/c)?(s=i.x,a=i.y):0<r&&(s+=l*r,a+=u*r)),l=e.x-s,u=e.y-a,n?l*l+u*u:new o.Point(s,a)}},o.Polyline=o.Path.extend({initialize:function(e,t){o.Path.prototype.initialize.call(this,t),this._latlngs=this._convertLatLngs(e)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var e=0,t=this._latlngs.length;e<t;e++)this._originalPoints[e]=this._map.latLngToLayerPoint(this._latlngs[e])},getPathString:function(){for(var e=0,t=this._parts.length,i="";e<t;e++)i+=this._getPathPartStr(this._parts[e]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._latlngs=this._convertLatLngs(e),this.redraw()},addLatLng:function(e){return this._latlngs.push(o.latLng(e)),this.redraw()},spliceLatLngs:function(){var e=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),e},closestLayerPoint:function(e){for(var t,i,n=1/0,r=this._parts,s=null,a=0,l=r.length;a<l;a++)for(var u=r[a],c=1,h=u.length;c<h;c++){t=u[c-1],i=u[c];var p=o.LineUtil._sqClosestPointOnSegment(e,t,i,!0);p<n&&(n=p,s=o.LineUtil._sqClosestPointOnSegment(e,t,i))}return s&&(s.distance=Math.sqrt(n)),s},getBounds:function(){return new o.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(e,t){var i,n,r=t?e:[];for(i=0,n=e.length;i<n;i++){if(o.Util.isArray(e[i])&&"number"!=typeof e[i][0])return;r[i]=o.latLng(e[i])}return r},_initEvents:function(){o.Path.prototype._initEvents.call(this)},_getPathPartStr:function(e){for(var t,i=o.Path.VML,n=0,r=e.length,s="";n<r;n++)t=e[n],i&&t._round(),s+=(n?"L":"M")+t.x+" "+t.y;return s},_clipPoints:function(){var e,t,i,n=this._originalPoints,r=n.length;if(this.options.noClip)this._parts=[n];else{this._parts=[];var s=this._parts,a=this._map._pathViewport,l=o.LineUtil;for(t=e=0;e<r-1;e++)(i=l.clipSegment(n[e],n[e+1],a,e))&&(s[t]=s[t]||[],s[t].push(i[0]),(i[1]!==n[e+1]||e===r-2)&&(s[t].push(i[1]),t++))}},_simplifyPoints:function(){for(var e=this._parts,t=o.LineUtil,i=0,n=e.length;i<n;i++)e[i]=t.simplify(e[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),o.Path.prototype._updatePath.call(this))}}),o.polyline=function(e,t){return new o.Polyline(e,t)},o.PolyUtil={},o.PolyUtil.clipPolygon=function(e,t){var i,n,r,s,a,l,u,c,h,p=[1,4,2,8],f=o.LineUtil;for(n=0,u=e.length;n<u;n++)e[n]._code=f._getBitCode(e[n],t);for(s=0;s<4;s++){for(c=p[s],i=[],n=0,r=(u=e.length)-1;n<u;r=n++)a=e[n],l=e[r],a._code&c?l._code&c||((h=f._getEdgeIntersection(l,a,c,t))._code=f._getBitCode(h,t),i.push(h)):(l._code&c&&((h=f._getEdgeIntersection(l,a,c,t))._code=f._getBitCode(h,t),i.push(h)),i.push(a));e=i}return e},o.Polygon=o.Polyline.extend({options:{fill:!0},initialize:function(e,t){o.Polyline.prototype.initialize.call(this,e,t),this._initWithHoles(e)},_initWithHoles:function(e){var t,i,n;if(e&&o.Util.isArray(e[0])&&"number"!=typeof e[0][0])for(this._latlngs=this._convertLatLngs(e[0]),this._holes=e.slice(1),t=0,i=this._holes.length;t<i;t++)(n=this._holes[t]=this._convertLatLngs(this._holes[t]))[0].equals(n[n.length-1])&&n.pop();2<=(e=this._latlngs).length&&e[0].equals(e[e.length-1])&&e.pop()},projectLatlngs:function(){var e,t,i,n;if(o.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes)for(e=0,i=this._holes.length;e<i;e++)for(this._holePoints[e]=[],t=0,n=this._holes[e].length;t<n;t++)this._holePoints[e][t]=this._map.latLngToLayerPoint(this._holes[e][t])},setLatLngs:function(e){return e&&o.Util.isArray(e[0])&&"number"!=typeof e[0][0]?(this._initWithHoles(e),this.redraw()):o.Polyline.prototype.setLatLngs.call(this,e)},_clipPoints:function(){var e=this._originalPoints,t=[];if(this._parts=[e].concat(this._holePoints),!this.options.noClip){for(var i=0,n=this._parts.length;i<n;i++){var r=o.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);r.length&&t.push(r)}this._parts=t}},_getPathPartStr:function(e){return o.Polyline.prototype._getPathPartStr.call(this,e)+(o.Browser.svg?"z":"x")}}),o.polygon=function(e,t){return new o.Polygon(e,t)},function(){function e(e){return o.FeatureGroup.extend({initialize:function(e,t){this._layers={},this._options=t,this.setLatLngs(e)},setLatLngs:function(t){var i=0,n=t.length;for(this.eachLayer((function(e){i<n?e.setLatLngs(t[i++]):this.removeLayer(e)}),this);i<n;)this.addLayer(new e(t[i++],this._options));return this},getLatLngs:function(){var e=[];return this.eachLayer((function(t){e.push(t.getLatLngs())})),e}})}o.MultiPolyline=e(o.Polyline),o.MultiPolygon=e(o.Polygon),o.multiPolyline=function(e,t){return new o.MultiPolyline(e,t)},o.multiPolygon=function(e,t){return new o.MultiPolygon(e,t)}}(),o.Rectangle=o.Polygon.extend({initialize:function(e,t){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=o.latLngBounds(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}}),o.rectangle=function(e,t){return new o.Rectangle(e,t)},o.Circle=o.Path.extend({initialize:function(e,t,i){o.Path.prototype.initialize.call(this,i),this._latlng=o.latLng(e),this._mRadius=t},options:{fill:!0},setLatLng:function(e){return this._latlng=o.latLng(e),this.redraw()},setRadius:function(e){return this._mRadius=e,this.redraw()},projectLatlngs:function(){var e=this._getLngRadius(),t=this._latlng,i=this._map.latLngToLayerPoint([t.lat,t.lng-e]);this._point=this._map.latLngToLayerPoint(t),this._radius=Math.max(this._point.x-i.x,1)},getBounds:function(){var e=this._getLngRadius(),t=this._mRadius/40075017*360,i=this._latlng;return new o.LatLngBounds([i.lat-t,i.lng-e],[i.lat+t,i.lng+e])},getLatLng:function(){return this._latlng},getPathString:function(){var e=this._point,t=this._radius;return this._checkIfEmpty()?"":o.Browser.svg?"M"+e.x+","+(e.y-t)+"A"+t+","+t+",0,1,1,"+(e.x-.1)+","+(e.y-t)+" z":(e._round(),t=Math.round(t),"AL "+e.x+","+e.y+" "+t+","+t+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(o.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var e=this._map._pathViewport,t=this._radius,i=this._point;return i.x-t>e.max.x||i.y-t>e.max.y||i.x+t<e.min.x||i.y+t<e.min.y}}),o.circle=function(e,t,i){return new o.Circle(e,t,i)},o.CircleMarker=o.Circle.extend({options:{radius:10,weight:2},initialize:function(e,t){o.Circle.prototype.initialize.call(this,e,null,t),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){o.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(e){return o.Circle.prototype.setLatLng.call(this,e),this._popup&&this._popup._isOpen&&this._popup.setLatLng(e),this},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius}}),o.circleMarker=function(e,t){return new o.CircleMarker(e,t)},o.Polyline.include(o.Path.CANVAS?{_containsPoint:function(e,t){var i,n,r,s,a,l,u=this.options.weight/2;for(o.Browser.touch&&(u+=10),i=0,s=this._parts.length;i<s;i++)for(n=0,r=(a=(l=this._parts[i]).length)-1;n<a;r=n++)if((t||0!==n)&&o.LineUtil.pointToSegmentDistance(e,l[r],l[n])<=u)return!0;return!1}}:{}),o.Polygon.include(o.Path.CANVAS?{_containsPoint:function(e){var t,i,n,r,s,a,l,u,c=!1;if(o.Polyline.prototype._containsPoint.call(this,e,!0))return!0;for(r=0,l=this._parts.length;r<l;r++)for(s=0,a=(u=(t=this._parts[r]).length)-1;s<u;a=s++)i=t[s],n=t[a],i.y>e.y!=n.y>e.y&&e.x<(n.x-i.x)*(e.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c}}:{}),o.Circle.include(o.Path.CANVAS?{_drawPath:function(){var e=this._point;this._ctx.beginPath(),this._ctx.arc(e.x,e.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(e){var t=this._point,i=this.options.stroke?this.options.weight/2:0;return e.distanceTo(t)<=this._radius+i}}:{}),o.CircleMarker.include(o.Path.CANVAS?{_updateStyle:function(){o.Path.prototype._updateStyle.call(this)}}:{}),o.GeoJSON=o.FeatureGroup.extend({initialize:function(e,t){o.setOptions(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,i,n,r=o.Util.isArray(e)?e:e.features;if(r){for(t=0,i=r.length;t<i;t++)((n=r[t]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(r[t]);return this}var s=this.options;if(!s.filter||s.filter(e)){var a=o.GeoJSON.geometryToLayer(e,s.pointToLayer,s.coordsToLatLng,s);return a.feature=o.GeoJSON.asFeature(e),a.defaultOptions=a.options,this.resetStyle(a),s.onEachFeature&&s.onEachFeature(e,a),this.addLayer(a)}},resetStyle:function(e){var t=this.options.style;t&&(o.Util.extend(e.options,e.defaultOptions),this._setLayerStyle(e,t))},setStyle:function(e){this.eachLayer((function(t){this._setLayerStyle(t,e)}),this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),o.extend(o.GeoJSON,{geometryToLayer:function(e,t,i,n){var r,s,a,l,u="Feature"===e.type?e.geometry:e,c=u.coordinates,h=[];switch(i=i||this.coordsToLatLng,u.type){case"Point":return r=i(c),t?t(e,r):new o.Marker(r);case"MultiPoint":for(a=0,l=c.length;a<l;a++)r=i(c[a]),h.push(t?t(e,r):new o.Marker(r));return new o.FeatureGroup(h);case"LineString":return s=this.coordsToLatLngs(c,0,i),new o.Polyline(s,n);case"Polygon":if(2===c.length&&!c[1].length)throw new Error("Invalid GeoJSON object.");return s=this.coordsToLatLngs(c,1,i),new o.Polygon(s,n);case"MultiLineString":return s=this.coordsToLatLngs(c,1,i),new o.MultiPolyline(s,n);case"MultiPolygon":return s=this.coordsToLatLngs(c,2,i),new o.MultiPolygon(s,n);case"GeometryCollection":for(a=0,l=u.geometries.length;a<l;a++)h.push(this.geometryToLayer({geometry:u.geometries[a],type:"Feature",properties:e.properties},t,i,n));return new o.FeatureGroup(h);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e){return new o.LatLng(e[1],e[0],e[2])},coordsToLatLngs:function(e,t,i){var n,o,r,s=[];for(o=0,r=e.length;o<r;o++)n=t?this.coordsToLatLngs(e[o],t-1,i):(i||this.coordsToLatLng)(e[o]),s.push(n);return s},latLngToCoords:function(e){var t=[e.lng,e.lat];return e.alt!==i&&t.push(e.alt),t},latLngsToCoords:function(e){for(var t=[],i=0,n=e.length;i<n;i++)t.push(o.GeoJSON.latLngToCoords(e[i]));return t},getFeature:function(e,t){return e.feature?o.extend({},e.feature,{geometry:t}):o.GeoJSON.asFeature(t)},asFeature:function(e){return"Feature"===e.type?e:{type:"Feature",properties:{},geometry:e}}});var s={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(s),o.Circle.include(s),o.CircleMarker.include(s),o.Polyline.include({toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"LineString",coordinates:o.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),o.Polygon.include({toGeoJSON:function(){var e,t,i,n=[o.GeoJSON.latLngsToCoords(this.getLatLngs())];if(n[0].push(n[0][0]),this._holes)for(e=0,t=this._holes.length;e<t;e++)(i=o.GeoJSON.latLngsToCoords(this._holes[e])).push(i[0]),n.push(i);return o.GeoJSON.getFeature(this,{type:"Polygon",coordinates:n})}}),function(){function e(e){return function(){var t=[];return this.eachLayer((function(e){t.push(e.toGeoJSON().geometry.coordinates)})),o.GeoJSON.getFeature(this,{type:e,coordinates:t})}}o.MultiPolyline.include({toGeoJSON:e("MultiLineString")}),o.MultiPolygon.include({toGeoJSON:e("MultiPolygon")}),o.LayerGroup.include({toGeoJSON:function(){var t,i=this.feature&&this.feature.geometry,n=[];if(i&&"MultiPoint"===i.type)return e("MultiPoint").call(this);var r=i&&"GeometryCollection"===i.type;return this.eachLayer((function(e){e.toGeoJSON&&(t=e.toGeoJSON(),n.push(r?t.geometry:o.GeoJSON.asFeature(t)))})),r?o.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}})}(),o.geoJson=function(e,t){return new o.GeoJSON(e,t)},o.DomEvent={addListener:function(e,t,i,n){var r,s,a,l=o.stamp(i),u="_leaflet_"+t+l;return e[u]?this:(r=function(t){return i.call(n||e,t||o.DomEvent._getEvent())},o.Browser.pointer&&0===t.indexOf("touch")?this.addPointerListener(e,t,r,l):(o.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener&&this.addDoubleTapListener(e,r,l),"addEventListener"in e?"mousewheel"===t?(e.addEventListener("DOMMouseScroll",r,!1),e.addEventListener(t,r,!1)):"mouseenter"===t||"mouseleave"===t?(s=r,a="mouseenter"===t?"mouseover":"mouseout",r=function(t){return o.DomEvent._checkMouse(e,t)?s(t):void 0},e.addEventListener(a,r,!1)):("click"===t&&o.Browser.android&&(s=r,r=function(e){return o.DomEvent._filterClick(e,s)}),e.addEventListener(t,r,!1)):"attachEvent"in e&&e.attachEvent("on"+t,r),e[u]=r,this))},removeListener:function(e,t,i){var n=o.stamp(i),r="_leaflet_"+t+n,s=e[r];return s&&(o.Browser.pointer&&0===t.indexOf("touch")?this.removePointerListener(e,t,n):o.Browser.touch&&"dblclick"===t&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,n):"removeEventListener"in e?"mousewheel"===t?(e.removeEventListener("DOMMouseScroll",s,!1),e.removeEventListener(t,s,!1)):"mouseenter"===t||"mouseleave"===t?e.removeEventListener("mouseenter"===t?"mouseover":"mouseout",s,!1):e.removeEventListener(t,s,!1):"detachEvent"in e&&e.detachEvent("on"+t,s),e[r]=null),this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,o.DomEvent._skipped(e),this},disableScrollPropagation:function(e){var t=o.DomEvent.stopPropagation;return o.DomEvent.on(e,"mousewheel",t).on(e,"MozMousePixelScroll",t)},disableClickPropagation:function(e){for(var t=o.DomEvent.stopPropagation,i=o.Draggable.START.length-1;0<=i;i--)o.DomEvent.on(e,o.Draggable.START[i],t);return o.DomEvent.on(e,"click",o.DomEvent._fakeStop).on(e,"dblclick",t)},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return o.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,t){if(!t)return new o.Point(e.clientX,e.clientY);var i=t.getBoundingClientRect();return new o.Point(e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop)},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t},_skipEvents:{},_fakeStop:function(e){o.DomEvent._skipEvents[e.type]=!0},_skipped:function(e){var t=this._skipEvents[e.type];return this._skipEvents[e.type]=!1,t},_checkMouse:function(e,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==e;)i=i.parentNode}catch(e){return!1}return i!==e},_getEvent:function(){var t=e.event;if(!t)for(var i=arguments.callee.caller;i&&(!(t=i.arguments[0])||e.Event!==t.constructor);)i=i.caller;return t},_filterClick:function(e,t){var i=e.timeStamp||e.originalEvent.timeStamp,n=o.DomEvent._lastClick&&i-o.DomEvent._lastClick;return n&&100<n&&n<500||e.target._simulatedClick&&!e._simulated?void o.DomEvent.stop(e):(o.DomEvent._lastClick=i,t(e))}},o.DomEvent.on=o.DomEvent.addListener,o.DomEvent.off=o.DomEvent.removeListener,o.Draggable=o.Class.extend({includes:o.Mixin.Events,statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(e,t){this._element=e,this._dragStartTarget=t||e},enable:function(){if(!this._enabled){for(var e=o.Draggable.START.length-1;0<=e;e--)o.DomEvent.on(this._dragStartTarget,o.Draggable.START[e],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var e=o.Draggable.START.length-1;0<=e;e--)o.DomEvent.off(this._dragStartTarget,o.Draggable.START[e],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(e){if(this._moved=!1,!e.shiftKey&&(1===e.which||1===e.button||e.touches)&&(o.DomEvent.stopPropagation(e),!o.Draggable._disabled&&(o.DomUtil.disableImageDrag(),o.DomUtil.disableTextSelection(),!this._moving))){var i=e.touches?e.touches[0]:e;this._startPoint=new o.Point(i.clientX,i.clientY),this._startPos=this._newPos=o.DomUtil.getPosition(this._element),o.DomEvent.on(t,o.Draggable.MOVE[e.type],this._onMove,this).on(t,o.Draggable.END[e.type],this._onUp,this)}},_onMove:function(e){if(e.touches&&1<e.touches.length)this._moved=!0;else{var i=e.touches&&1===e.touches.length?e.touches[0]:e,n=new o.Point(i.clientX,i.clientY).subtract(this._startPoint);(n.x||n.y)&&(o.Browser.touch&&Math.abs(n.x)+Math.abs(n.y)<3||(o.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(n),o.DomUtil.addClass(t.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,o.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))}},_updatePosition:function(){this.fire("predrag"),o.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){for(var e in o.DomUtil.removeClass(t.body,"leaflet-dragging"),this._lastTarget&&(o.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),o.Draggable.MOVE)o.DomEvent.off(t,o.Draggable.MOVE[e],this._onMove).off(t,o.Draggable.END[e],this._onUp);o.DomUtil.enableImageDrag(),o.DomUtil.enableTextSelection(),this._moved&&this._moving&&(o.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),o.Handler=o.Class.extend({initialize:function(e){this._map=e},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),o.Map.mergeOptions({dragging:!0,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:o.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new o.Draggable(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),e.on("viewreset",this._onViewReset,this),e.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var e=this._map;e._panAnim&&e._panAnim.stop(),e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var e=this._lastTime=+new Date,t=this._lastPos=this._draggable._newPos;this._positions.push(t),this._times.push(e),200<e-this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var e=this._map.getSize()._divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var e=this._worldWidth,t=Math.round(e/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-t+i)%e+t-i,r=(n+t+i)%e-t-i,s=Math.abs(o+i)<Math.abs(r+i)?o:r;this._draggable._newPos.x=s},_onDragEnd:function(e){var t=this._map,i=t.options,n=+new Date-this._lastTime,r=!i.inertia||n>i.inertiaThreshold||!this._positions[0];if(t.fire("dragend",e),r)t.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+n-this._times[0])/1e3,l=i.easeLinearity,u=s.multiplyBy(l/a),c=u.distanceTo([0,0]),h=Math.min(i.inertiaMaxSpeed,c),p=u.multiplyBy(h/c),f=h/(i.inertiaDeceleration*l),d=p.multiplyBy(-f/2).round();d.x&&d.y?(d=t._limitOffset(d,t.options.maxBounds),o.Util.requestAnimFrame((function(){t.panBy(d,{duration:f,easeLinearity:l,noMoveStart:!0})}))):t.fire("moveend")}}}),o.Map.addInitHook("addHandler","dragging",o.Map.Drag),o.Map.mergeOptions({doubleClickZoom:!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,i=t.getZoom()+(e.originalEvent.shiftKey?-1:1);"center"===t.options.doubleClickZoom?t.setZoom(i):t.setZoomAround(e.containerPoint,i)}}),o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom:!0}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),o.DomEvent.on(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault),this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),o.DomEvent.off(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault)},_onWheelScroll:function(e){var t=o.DomEvent.getWheelDelta(e);this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),i),o.DomEvent.preventDefault(e),o.DomEvent.stopPropagation(e)},_performZoom:function(){var e=this._map,t=this._delta,i=e.getZoom();t=0<t?Math.ceil(t):Math.floor(t),t=Math.max(Math.min(t,4),-4),t=e._limitZoom(i+t)-i,this._delta=0,this._startTime=null,t&&("center"===e.options.scrollWheelZoom?e.setZoom(i+t):e.setZoomAround(this._lastMousePos,i+t))}}),o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstart:o.Browser.msPointer?"MSPointerDown":o.Browser.pointer?"pointerdown":"touchstart",_touchend:o.Browser.msPointer?"MSPointerUp":o.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(e,i,n){function r(e){if(!(1<(o.Browser.pointer?(f.push(e.pointerId),f.length):e.touches.length))){var t=Date.now(),i=t-(a||t);l=e.touches?e.touches[0]:e,u=0<i&&i<=250,a=t}}function s(e){if(o.Browser.pointer){var t=f.indexOf(e.pointerId);if(-1===t)return;f.splice(t,1)}if(u){if(o.Browser.pointer){var n,r={};for(var s in l)n=l[s],r[s]="function"==typeof n?n.bind(l):n;l=r}l.type="dblclick",i(l),a=null}}var a,l,u=!1,c="_leaflet_",h=this._touchstart,p=this._touchend,f=[];e[c+h+n]=r,e[c+p+n]=s;var d=o.Browser.pointer?t.documentElement:e;return e.addEventListener(h,r,!1),d.addEventListener(p,s,!1),o.Browser.pointer&&d.addEventListener(o.DomEvent.POINTER_CANCEL,s,!1),this},removeDoubleTapListener:function(e,i){var n="_leaflet_";return e.removeEventListener(this._touchstart,e[n+this._touchstart+i],!1),(o.Browser.pointer?t.documentElement:e).removeEventListener(this._touchend,e[n+this._touchend+i],!1),o.Browser.pointer&&t.documentElement.removeEventListener(o.DomEvent.POINTER_CANCEL,e[n+this._touchend+i],!1),this}}),o.extend(o.DomEvent,{POINTER_DOWN:o.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:o.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:o.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:o.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(e,t,i,n){switch(t){case"touchstart":return this.addPointerListenerStart(e,t,i,n);case"touchend":return this.addPointerListenerEnd(e,t,i,n);case"touchmove":return this.addPointerListenerMove(e,t,i,n);default:throw"Unknown touch event type"}},addPointerListenerStart:function(e,i,n,r){var s=this._pointers,a=function(e){"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&o.DomEvent.preventDefault(e);for(var t=!1,i=0;i<s.length;i++)if(s[i].pointerId===e.pointerId){t=!0;break}t||s.push(e),e.touches=s.slice(),e.changedTouches=[e],n(e)};if(e["_leaflet_touchstart"+r]=a,e.addEventListener(this.POINTER_DOWN,a,!1),!this._pointerDocumentListener){var l=function(e){for(var t=0;t<s.length;t++)if(s[t].pointerId===e.pointerId){s.splice(t,1);break}};t.documentElement.addEventListener(this.POINTER_UP,l,!1),t.documentElement.addEventListener(this.POINTER_CANCEL,l,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(e,t,i,n){function o(e){if(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons){for(var t=0;t<r.length;t++)if(r[t].pointerId===e.pointerId){r[t]=e;break}e.touches=r.slice(),e.changedTouches=[e],i(e)}}var r=this._pointers;return e["_leaflet_touchmove"+n]=o,e.addEventListener(this.POINTER_MOVE,o,!1),this},addPointerListenerEnd:function(e,t,i,n){var o=this._pointers,r=function(e){for(var t=0;t<o.length;t++)if(o[t].pointerId===e.pointerId){o.splice(t,1);break}e.touches=o.slice(),e.changedTouches=[e],i(e)};return e["_leaflet_touchend"+n]=r,e.addEventListener(this.POINTER_UP,r,!1),e.addEventListener(this.POINTER_CANCEL,r,!1),this},removePointerListener:function(e,t,i){var n=e["_leaflet_"+t+i];switch(t){case"touchstart":e.removeEventListener(this.POINTER_DOWN,n,!1);break;case"touchmove":e.removeEventListener(this.POINTER_MOVE,n,!1);break;case"touchend":e.removeEventListener(this.POINTER_UP,n,!1),e.removeEventListener(this.POINTER_CANCEL,n,!1)}return this}}),o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23,bounceAtZoomLimits:!0}),o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var i=this._map;if(e.touches&&2===e.touches.length&&!i._animatingZoom&&!this._zooming){var n=i.mouseEventToLayerPoint(e.touches[0]),r=i.mouseEventToLayerPoint(e.touches[1]),s=i._getCenterLayerPoint();this._startCenter=n.add(r)._divideBy(2),this._startDist=n.distanceTo(r),this._moved=!1,this._zooming=!0,this._centerOffset=s.subtract(this._startCenter),i._panAnim&&i._panAnim.stop(),o.DomEvent.on(t,"touchmove",this._onTouchMove,this).on(t,"touchend",this._onTouchEnd,this),o.DomEvent.preventDefault(e)}},_onTouchMove:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&this._zooming){var i=t.mouseEventToLayerPoint(e.touches[0]),n=t.mouseEventToLayerPoint(e.touches[1]);this._scale=i.distanceTo(n)/this._startDist,this._delta=i._add(n)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(t.options.bounceAtZoomLimits||!(t.getZoom()===t.getMinZoom()&&this._scale<1||t.getZoom()===t.getMaxZoom()&&1<this._scale))&&(this._moved||(o.DomUtil.addClass(t._mapPane,"leaflet-touching"),t.fire("movestart").fire("zoomstart"),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),o.DomEvent.preventDefault(e))}},_updateOnMove:function(){var e=this._map,t=this._getScaleOrigin(),i=e.layerPointToLatLng(t),n=e.getScaleZoom(this._scale);e._animateZoom(i,n,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(this._moved&&this._zooming){var e=this._map;this._zooming=!1,o.DomUtil.removeClass(e._mapPane,"leaflet-touching"),o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(t,"touchmove",this._onTouchMove).off(t,"touchend",this._onTouchEnd);var i=this._getScaleOrigin(),n=e.layerPointToLatLng(i),r=e.getZoom(),s=e.getScaleZoom(this._scale)-r,a=0<s?Math.ceil(s):Math.floor(s),l=e._limitZoom(r+a),u=e.getZoomScale(l)/this._scale;e._animateZoom(n,l,i,u)}else this._zooming=!1},_getScaleOrigin:function(){var e=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(e)}}),o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom),o.Map.mergeOptions({tap:!0,tapTolerance:15}),o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(o.DomEvent.preventDefault(e),this._fireClick=!0,1<e.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=e.touches[0],n=i.target;this._startPos=this._newPos=new o.Point(i.clientX,i.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&o.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(o.bind((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))}),this),1e3),o.DomEvent.on(t,"touchmove",this._onMove,this).on(t,"touchend",this._onUp,this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),o.DomEvent.off(t,"touchmove",this._onMove,this).off(t,"touchend",this._onUp,this),this._fireClick&&e&&e.changedTouches){var i=e.changedTouches[0],n=i.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&o.DomUtil.removeClass(n,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new o.Point(t.clientX,t.clientY)},_simulateEvent:function(i,n){var o=t.createEvent("MouseEvents");o._simulated=!0,n.target._simulatedClick=!0,o.initMouseEvent(i,!0,!0,e,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(o)}}),o.Browser.touch&&!o.Browser.pointer&&o.Map.addInitHook("addHandler","tap",o.Map.Tap),o.Map.mergeOptions({boxZoom:!0}),o.Map.BoxZoom=o.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._moved=!1},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(e){return this._moved=!1,!(!e.shiftKey||1!==e.which&&1!==e.button)&&(o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(e),void o.DomEvent.on(t,"mousemove",this._onMouseMove,this).on(t,"mouseup",this._onMouseUp,this).on(t,"keydown",this._onKeyDown,this))},_onMouseMove:function(e){this._moved||(this._box=o.DomUtil.create("div","leaflet-zoom-box",this._pane),o.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var t=this._startLayerPoint,i=this._box,n=this._map.mouseEventToLayerPoint(e),r=n.subtract(t),s=new o.Point(Math.min(n.x,t.x),Math.min(n.y,t.y));o.DomUtil.setPosition(i,s),this._moved=!0,i.style.width=Math.max(0,Math.abs(r.x)-4)+"px",i.style.height=Math.max(0,Math.abs(r.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(t,"mousemove",this._onMouseMove).off(t,"mouseup",this._onMouseUp).off(t,"keydown",this._onKeyDown)},_onMouseUp:function(e){this._finish();var t=this._map,i=t.mouseEventToLayerPoint(e);if(!this._startLayerPoint.equals(i)){var n=new o.LatLngBounds(t.layerPointToLatLng(this._startLayerPoint),t.layerPointToLatLng(i));t.fitBounds(n),t.fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}}),o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom),o.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(e){this._map=e,this._setPanOffset(e.options.keyboardPanOffset),this._setZoomOffset(e.options.keyboardZoomOffset)},addHooks:function(){var e=this._map._container;-1===e.tabIndex&&(e.tabIndex="0"),o.DomEvent.on(e,"focus",this._onFocus,this).on(e,"blur",this._onBlur,this).on(e,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var e=this._map._container;o.DomEvent.off(e,"focus",this._onFocus,this).off(e,"blur",this._onBlur,this).off(e,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var i=t.body,n=t.documentElement,o=i.scrollTop||n.scrollTop,r=i.scrollLeft||n.scrollLeft;this._map._container.focus(),e.scrollTo(r,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(e){var t,i,n=this._panKeys={},o=this.keyCodes;for(t=0,i=o.left.length;t<i;t++)n[o.left[t]]=[-1*e,0];for(t=0,i=o.right.length;t<i;t++)n[o.right[t]]=[e,0];for(t=0,i=o.down.length;t<i;t++)n[o.down[t]]=[0,e];for(t=0,i=o.up.length;t<i;t++)n[o.up[t]]=[0,-1*e]},_setZoomOffset:function(e){var t,i,n=this._zoomKeys={},o=this.keyCodes;for(t=0,i=o.zoomIn.length;t<i;t++)n[o.zoomIn[t]]=e;for(t=0,i=o.zoomOut.length;t<i;t++)n[o.zoomOut[t]]=-e},_addHooks:function(){o.DomEvent.on(t,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(t,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){var t=e.keyCode,i=this._map;if(t in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;i.panBy(this._panKeys[t]),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else{if(!(t in this._zoomKeys))return;i.setZoom(i.getZoom()+this._zoomKeys[t])}o.DomEvent.stop(e)}}),o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new o.Draggable(e,e)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),o.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),o.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var e=this._marker,t=e._shadow,i=o.DomUtil.getPosition(e._icon),n=e._map.layerPointToLatLng(i);t&&o.DomUtil.setPosition(t,i),e._latlng=n,e.fire("move",{latlng:n}).fire("drag")},_onDragEnd:function(e){this._marker.fire("moveend").fire("dragend",e)}}),o.Control=o.Class.extend({options:{position:"topright"},initialize:function(e){o.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this._map=e;var t=this._container=this.onAdd(e),i=this.getPosition(),n=e._controlCorners[i];return o.DomUtil.addClass(t,"leaflet-control3D"),-1!==i.indexOf("bottom")?n.insertBefore(t,n.firstChild):n.appendChild(t),this},removeFrom:function(e){var t=this.getPosition();return e._controlCorners[t].removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(e),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),o.control=function(e){return new o.Control(e)},o.Map.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.removeFrom(this),this},_initControlPos:function(){function e(e,r){var s=i+e+" "+i+r;t[e+r]=o.DomUtil.create("div",s,n)}var t=this._controlCorners={},i="leaflet-",n=this._controlContainer=o.DomUtil.create("div",i+"control3D-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"",zoomOutText:"-",zoomOutTitle:""},onAdd:function(e){var t="leaflet-control3D-zoom",i=o.DomUtil.create("div",t+" leaflet-bar");return this._map=e,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,t+"-in",i,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,t+"-out",i,this._zoomOut,this),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(e){this._map.zoomIn(e.shiftKey?3:1)},_zoomOut:function(e){this._map.zoomOut(e.shiftKey?3:1)},_createButton:function(e,t,i,n,r,s){var a=o.DomUtil.create("a",i,n);a.innerHTML=e,a.href="#",a.title=t;var l=o.DomEvent.stopPropagation;return o.DomEvent.on(a,"click",l).on(a,"mousedown",l).on(a,"dblclick",l).on(a,"click",o.DomEvent.preventDefault).on(a,"click",r,s).on(a,"click",this._refocusOnMap,s),a},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,t),o.DomUtil.removeClass(this._zoomOutButton,t),e._zoom===e.getMinZoom()&&o.DomUtil.addClass(this._zoomOutButton,t),e._zoom===e.getMaxZoom()&&o.DomUtil.addClass(this._zoomInButton,t)}}),o.Map.mergeOptions({zoomControl:!0}),o.Map.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))})),o.control.zoom=function(e){return new o.Control.Zoom(e)},o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){o.setOptions(this,e),this._attributions={}},onAdd:function(e){for(var t in this._container=o.DomUtil.create("div","leaflet-control3D-attribution"),o.DomEvent.disableClickPropagation(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return e.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(e){e.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):void 0},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):void 0},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var i=[];this.options.prefix&&i.push(this.options.prefix),e.length&&i.push(e.join(", ")),this._container.innerHTML=i.join(" | ")}},_onLayerAdd:function(e){e.layer.getAttribution&&this.addAttribution(e.layer.getAttribution())},_onLayerRemove:function(e){e.layer.getAttribution&&this.removeAttribution(e.layer.getAttribution())}}),o.Map.mergeOptions({attributionControl:!0}),o.Map.addInitHook((function(){this.options.attributionControl&&(this.attributionControl=(new o.Control.Attribution).addTo(this))})),o.control.attribution=function(e){return new o.Control.Attribution(e)},o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(e){this._map=e;var t="leaflet-control3D-scale",i=o.DomUtil.create("div",t),n=this.options;return this._addScales(n,t,i),e.on(n.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),i},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,i){e.metric&&(this._mScale=o.DomUtil.create("div",t+"-line",i)),e.imperial&&(this._iScale=o.DomUtil.create("div",t+"-line",i))},_update:function(){var e=this._map.getBounds(),t=e.getCenter().lat,i=6378137*Math.PI*Math.cos(t*Math.PI/180)*(e.getNorthEast().lng-e.getSouthWest().lng)/180,n=this._map.getSize(),o=this.options,r=0;0<n.x&&(r=i*(o.maxWidth/n.x)),this._updateScales(o,r)},_updateScales:function(e,t){e.metric&&t&&this._updateMetric(t),e.imperial&&t&&this._updateImperial(t)},_updateMetric:function(e){var t=this._getRoundNum(e);this._mScale.style.width=this._getScaleWidth(t/e)+"px",this._mScale.innerHTML=t<1e3?t+" m":t/1e3+" km"},_updateImperial:function(e){var t,i,n,o=3.2808399*e,r=this._iScale;r.innerHTML=5280<o?(t=o/5280,i=this._getRoundNum(t),r.style.width=this._getScaleWidth(i/t)+"px",i+" mi"):(n=this._getRoundNum(o),r.style.width=this._getScaleWidth(n/o)+"px",n+" ft")},_getScaleWidth:function(e){return Math.round(this.options.maxWidth*e)-10},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),i=e/t;return t*(10<=i?10:5<=i?5:3<=i?3:2<=i?2:1)}}),o.control.scale=function(e){return new o.Control.Scale(e)},o.Control.Layers=o.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(e,t,i){for(var n in o.setOptions(this,i),this._layers={},this._lastZIndex=0,this._handlingClick=!1,e)this._addLayer(e[n],n);for(n in t)this._addLayer(t[n],n,!0)},onAdd:function(e){return this._initLayout(),this._update(),e.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(e){e.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._update(),this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._update(),this},removeLayer:function(e){var t=o.stamp(e);return delete this._layers[t],this._update(),this},_initLayout:function(){var e="leaflet-control3D-layers",t=this._container=o.DomUtil.create("div",e);t.setAttribute("aria-haspopup",!0),o.Browser.touch?o.DomEvent.on(t,"click",o.DomEvent.stopPropagation):o.DomEvent.disableClickPropagation(t).disableScrollPropagation(t);var i=this._form=o.DomUtil.create("form",e+"-list");if(this.options.collapsed){o.Browser.android||o.DomEvent.on(t,"mouseover",this._expand,this).on(t,"mouseout",this._collapse,this);var n=this._layersLink=o.DomUtil.create("a",e+"-toggle",t);n.href="#",n.title="Layers",o.Browser.touch?o.DomEvent.on(n,"click",o.DomEvent.stop).on(n,"click",this._expand,this):o.DomEvent.on(n,"focus",this._expand,this),o.DomEvent.on(i,"click",(function(){setTimeout(o.bind(this._onInputClick,this),0)}),this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=o.DomUtil.create("div",e+"-base",i),this._separator=o.DomUtil.create("div",e+"-separator",i),this._overlaysList=o.DomUtil.create("div",e+"-overlays",i),t.appendChild(i)},_addLayer:function(e,t,i){var n=o.stamp(e);this._layers[n]={layer:e,name:t,overlay:i},this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var e,t,i=!1,n=!1;for(e in this._layers)t=this._layers[e],this._addItem(t),n=n||t.overlay,i=i||!t.overlay;this._separator.style.display=n&&i?"":"none"}},_onLayerChange:function(e){var t=this._layers[o.stamp(e.layer)];if(t){this._handlingClick||this._update();var i=t.overlay?"layeradd"===e.type?"overlayadd":"overlayremove":"layeradd"===e.type?"baselayerchange":null;i&&this._map.fire(i,t)}},_createRadioElement:function(e,i){var n='<input type="radio" class="leaflet-control3D-layers-selector" name="'+e+'"';i&&(n+=' checked="checked"'),n+="/>";var o=t.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(e){var i,n=t.createElement("label"),r=this._map.hasLayer(e.layer);e.overlay?((i=t.createElement("input")).type="checkbox",i.className="leaflet-control3D-layers-selector",i.defaultChecked=r):i=this._createRadioElement("leaflet-base-layers",r),i.layerId=o.stamp(e.layer),o.DomEvent.on(i,"click",this._onInputClick,this);var s=t.createElement("span");return s.innerHTML=" "+e.name,n.appendChild(i),n.appendChild(s),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),n},_onInputClick:function(){var e,t,i,n=this._form.getElementsByTagName("input"),o=n.length;for(this._handlingClick=!0,e=0;e<o;e++)t=n[e],i=this._layers[t.layerId],t.checked&&!this._map.hasLayer(i.layer)?this._map.addLayer(i.layer):!t.checked&&this._map.hasLayer(i.layer)&&this._map.removeLayer(i.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){o.DomUtil.addClass(this._container,"leaflet-control3D-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control3D-layers-expanded","")}}),o.control.layers=function(e,t,i){return new o.Control.Layers(e,t,i)},o.PosAnimation=o.Class.extend({includes:o.Mixin.Events,run:function(e,t,i,n){this.stop(),this._el=e,this._inProgress=!0,this._newPos=t,this.fire("start"),e.style[o.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(n||.5)+",1)",o.DomEvent.on(e,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),o.DomUtil.setPosition(e,t),o.Util.falseFn(e.offsetWidth),this._stepTimer=setInterval(o.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(o.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),o.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var e=this._getPos();return e?(this._el._leaflet_pos=e,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var t,i,n,r=this._el,s=e.getComputedStyle(r);if(o.Browser.any3d){if(!(n=s[o.DomUtil.TRANSFORM].match(this._transformRe)))return;t=parseFloat(n[1]),i=parseFloat(n[2])}else t=parseFloat(s.left),i=parseFloat(s.top);return new o.Point(t,i,!0)},_onTransitionEnd:function(){o.DomEvent.off(this._el,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[o.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),o.Map.include({setView:function(e,t,n){return t=t===i?this._zoom:this._limitZoom(t),e=this._limitCenter(o.latLng(e),t,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&!0!==n&&(n.animate!==i&&(n.zoom=o.extend({animate:n.animate},n.zoom),n.pan=o.extend({animate:n.animate},n.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,n.zoom):this._tryAnimatedPan(e,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t),this)},panBy:function(e,t){if(t=t||{},!(e=o.point(e).round()).x&&!e.y)return this;if(this._panAnim||(this._panAnim=new o.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(e);this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var i=this._getCenterOffset(e)._floor();return!(!0!==(t&&t.animate)&&!this.getSize().contains(i)||(this.panBy(i,t),0))}}),o.PosAnimation=o.DomUtil.TRANSITION?o.PosAnimation:o.PosAnimation.extend({run:function(e,t,i,n){this.stop(),this._el=e,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=o.DomUtil.getPosition(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var e=+new Date-this._startTime,t=1e3*this._duration;e<t?this._runFrame(this._easeOut(e/t)):(this._runFrame(1),this._complete())},_runFrame:function(e){var t=this._startPos.add(this._offset.multiplyBy(e));o.DomUtil.setPosition(this._el,t),this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),o.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),o.DomUtil.TRANSITION&&o.Map.addInitHook((function(){this._zoomAnimated=this.options.zoomAnimation&&o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.android23&&!o.Browser.mobileOpera,this._zoomAnimated&&o.DomEvent.on(this._mapPane,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)})),o.Map.include(o.DomUtil.TRANSITION?{_catchTransitionEnd:function(e){this._animatingZoom&&0<=e.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(t),o=this._getCenterOffset(e)._divideBy(1-1/n),r=this._getCenterLayerPoint()._add(o);return!(!0!==i.animate&&!this.getSize().contains(o)||(this.fire("movestart").fire("zoomstart"),this._animateZoom(e,t,r,n,null,!0),0))},_animateZoom:function(e,t,i,n,r,s,a){a||(this._animatingZoom=!0),o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=e,this._animateToZoom=t,o.Draggable&&(o.Draggable._disabled=!0),o.Util.requestAnimFrame((function(){this.fire("zoomanim",{center:e,zoom:t,origin:i,scale:n,delta:r,backwards:s}),setTimeout(o.bind(this._onZoomTransitionEnd,this),250)}),this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),o.Util.requestAnimFrame((function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),o.Draggable&&(o.Draggable._disabled=!1)}),this))}}:{}),o.TileLayer.include({_animateZoom:function(e){this._animating||(this._animating=!0,this._prepareBgBuffer());var t=this._bgBuffer,i=o.DomUtil.TRANSFORM,n=e.delta?o.DomUtil.getTranslateString(e.delta):t.style[i],r=o.DomUtil.getScaleString(e.scale,e.origin);t.style[i]=e.backwards?r+" "+n:n+" "+r},_endZoomAnim:function(){var e=this._tileContainer,t=this._bgBuffer;e.style.visibility="",e.parentNode.appendChild(e),o.Util.falseFn(t.offsetWidth);var i=this._map.getZoom();(i>this.options.maxZoom||i<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var e=this._map;!e||e._animatingZoom||e.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[o.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var e=this._tileContainer,t=this._bgBuffer,i=this._getLoadedTilesPercentage(t),n=this._getLoadedTilesPercentage(e);return t&&.5<i&&n<.5?(e.style.visibility="hidden",void this._stopLoadingImages(e)):(t.style.visibility="hidden",t.style[o.DomUtil.TRANSFORM]="",this._tileContainer=t,t=this._bgBuffer=e,this._stopLoadingImages(t),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(e){var t,i,n=e.getElementsByTagName("img"),o=0;for(t=0,i=n.length;t<i;t++)n[t].complete&&o++;return o/i},_stopLoadingImages:function(e){var t,i,n,r=Array.prototype.slice.call(e.getElementsByTagName("img"));for(t=0,i=r.length;t<i;t++)(n=r[t]).complete||(n.onload=o.Util.falseFn,n.onerror=o.Util.falseFn,n.src=o.Util.emptyImageUrl,n.parentNode.removeChild(n))}}),o.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(e){if(e=this._locateOptions=o.extend(this._defaultLocateOptions,e),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=o.bind(this._handleGeolocationResponse,this),i=o.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,i=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,i=e.coords.longitude,n=new o.LatLng(t,i),r=180*e.coords.accuracy/40075017,s=r/Math.cos(o.LatLng.DEG_TO_RAD*t),a=o.latLngBounds([t-r,i-s],[t+r,i+s]),l=this._locateOptions;if(l.setView){var u=Math.min(this.getBoundsZoom(a),l.maxZoom);this.setView(n,u)}var c={latlng:n,bounds:a,timestamp:e.timestamp};for(var h in e.coords)"number"==typeof e.coords[h]&&(c[h]=e.coords[h]);this.fire("locationfound",c)}})}(window,document),define("ViewModels/DistanceLegendViewModel",["Cesium/Core/defined","Cesium/Core/DeveloperError","Cesium/Core/EllipsoidGeodesic","Cesium/Core/Cartesian2","Cesium/Core/getTimestamp","Cesium/Core/EventHelper","KnockoutES5","Core/loadView","leaflet"],(function(e,t,i,n,o,r,s,a,l){"use strict";var u=function(i){if(!e(i)||!e(i.terria))throw new t("options.terria is required.");this.terria=i.terria,this._removeSubscription=void 0,this._lastLegendUpdate=void 0,this.eventHelper=new r,this.distanceLabel=void 0,this.barWidth=void 0,s.track(this,["distanceLabel","barWidth"]),this.eventHelper.add(this.terria.afterWidgetChanged,(function(){e(this._removeSubscription)&&(this._removeSubscription(),this._removeSubscription=void 0)}),this);var a=this;function l(){if(e(a.terria)){var t=a.terria.scene;a._removeSubscription=t.postRender.addEventListener((function(){!function(t,i){var r=o();if(!(r<t._lastLegendUpdate+250)){t._lastLegendUpdate=r;var s=i.canvas.clientWidth,a=i.canvas.clientHeight,l=i.camera.getPickRay(new n(s/2|0,a-1)),u=i.camera.getPickRay(new n(1+s/2|0,a-1)),p=i.globe,f=p.pick(l,i),d=p.pick(u,i);if(!e(f)||!e(d))return t.barWidth=void 0,t.distanceLabel=void 0;var m,g=p.ellipsoid.cartesianToCartographic(f),_=p.ellipsoid.cartesianToCartographic(d);c.setEndPoints(g,_);for(var y,v=c.surfaceDistance,b=h.length-1;!e(y)&&0<=b;--b)h[b]/v<100&&(y=h[b]);if(e(y))m=1e3<=y?(y/1e3).toString()+" km":y.toString()+" m",t.barWidth=y/v|0,t.distanceLabel=m;else t.barWidth=void 0,t.distanceLabel=void 0}}(this,t)}),a)}else if(e(a.terria.leaflet)){var i=a.terria.leaflet.map,r=function(){p(a,i)};a._removeSubscription=function(){i.off("zoomend",r),i.off("moveend",r)},i.on("zoomend",r),i.on("moveend",r),p(a,i)}}l(),this.eventHelper.add(this.terria.afterWidgetChanged,(function(){l()}),this)};u.prototype.destroy=function(){this.eventHelper.removeAll()},u.prototype.show=function(e){a('<div class="distance-legend" data-bind="visible: distanceLabel && barWidth"><div class="distance-legend-label" data-bind="text: distanceLabel"></div><div class="distance-legend-scale-bar" data-bind="style: { width: barWidth + \'px\', left: (5 + (125 - barWidth) / 2) + \'px\' }"></div></div>',e,this)},u.create=function(e){var t=new u(e);return t.show(e.container),t};var c=new i,h=[1,2,3,5,10,20,30,50,100,200,300,500,1e3,2e3,3e3,5e3,1e4,2e4,3e4,5e4,1e5,2e5,3e5,5e5,1e6,2e6,3e6,5e6,1e7,2e7,3e7,5e7];function p(e,t){var i=t.getSize().y/2,n=t.containerPointToLatLng([0,i]).distanceTo(t.containerPointToLatLng([100,i])),o=l.control.scale()._getRoundNum(n),r=o<1e3?o+" m":o/1e3+" km";e.barWidth=o/n*100,e.distanceLabel=r}return u})),define("ViewModels/UserInterfaceControl",["Cesium/Core/defined","Cesium/Core/defineProperties","Cesium/Core/DeveloperError","KnockoutES5"],(function(e,t,i,n){"use strict";var o=function(t){if(!e(t))throw new i("terria is required");this._terria=t,this.name="Unnamed Control",this.text=void 0,this.svgIcon=void 0,this.svgHeight=void 0,this.svgWidth=void 0,this.cssClass=void 0,this.isActive=!1,n.track(this,["name","svgIcon","svgHeight","svgWidth","cssClass","isActive"])};return t(o.prototype,{terria:{get:function(){return this._terria}},hasText:{get:function(){return e(this.text)&&"string"==typeof this.text}}}),o.prototype.activate=function(){throw new i("activate must be implemented in the derived class.")},o})),define("ViewModels/NavigationControl",["ViewModels/UserInterfaceControl"],(function(e){"use strict";var t=function(t){e.apply(this,arguments)};return t.prototype=Object.create(e.prototype),t})),define("SvgPaths/svgReset",[],(function(){"use strict";return"M 7.5,0 C 3.375,0 0,3.375 0,7.5 0,11.625 3.375,15 7.5,15 c 3.46875,0 6.375,-2.4375 7.21875,-5.625 l -1.96875,0 C 12,11.53125 9.9375,13.125 7.5,13.125 4.40625,13.125 1.875,10.59375 1.875,7.5 1.875,4.40625 4.40625,1.875 7.5,1.875 c 1.59375,0 2.90625,0.65625 3.9375,1.6875 l -3,3 6.5625,0 L 15,0 12.75,2.25 C 11.4375,0.84375 9.5625,0 7.5,0 z"})),define("ViewModels/ResetViewNavigationControl",["Cesium/Core/defined","Cesium/Scene/Camera","Cesium/Core/Rectangle","Cesium/Core/Cartographic","ViewModels/NavigationControl","SvgPaths/svgReset"],(function(e,t,i,n,o,r){"use strict";var s=function(e){o.apply(this,arguments),this.name="",this.svgIcon=r,this.svgHeight=15,this.svgWidth=15,this.cssClass="navigation-control3D-icon-reset"};return(s.prototype=Object.create(o.prototype)).resetView=function(){var o=this.terria.scene;if(o.screenSpaceCameraController.enableInputs){this.isActive=!0;var r=o.camera;if(e(this.terria.trackedEntity)){var s=this.terria.trackedEntity;this.terria.trackedEntity=void 0,this.terria.trackedEntity=s}else if(this.terria.options.defaultResetView){if(this.terria.options.defaultResetView&&this.terria.options.defaultResetView instanceof n)r.flyTo({destination:o.globe.ellipsoid.cartographicToCartesian(this.terria.options.defaultResetView)});else if(this.terria.options.defaultResetView&&this.terria.options.defaultResetView instanceof i)try{i.validate(this.terria.options.defaultResetView),r.flyTo({destination:this.terria.options.defaultResetView})}catch(e){console.log("Cesium-navigation/ResetViewNavigationControl:   options.defaultResetView Cesium rectangle is  invalid!")}}else if("function"==typeof r.flyHome){var a=new Cesium.Cartesian3(113.23333,23.16667,1167385.56),l=o.globe.ellipsoid,u=Cesium.Cartesian3.fromDegrees(a.x,a.y,a.z,l);r.setView({destination:u,orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}})}else r.flyTo({destination:t.DEFAULT_VIEW_RECTANGLE,duration:1});this.isActive=!1}},s.prototype.activate=function(){this.resetView()},s})),define("Core/Utils",["Cesium/Core/defined","Cesium/Core/Ray","Cesium/Core/Cartesian3","Cesium/Core/Cartographic","Cesium/Core/ReferenceFrame","Cesium/Scene/SceneMode"],(function(e,t,i,n,o,r){"use strict";var s={},a=new n,l=new t;return s.getCameraFocus=function(t,n,o){var s=t.scene,u=s.camera;if(s.mode!=r.MORPHING&&(e(o)||(o=new i),o=e(t.trackedEntity)?t.trackedEntity.position.getValue(t.clock.currentTime,o):(l.origin=u.positionWC,l.direction=u.directionWC,s.globe.pick(l,s,o)),e(o)))return s.mode==r.SCENE2D||s.mode==r.COLUMBUS_VIEW?(o=u.worldToCameraCoordinatesPoint(o,o),n&&(o=s.globe.ellipsoid.cartographicToCartesian(s.mapProjection.unproject(o,a),o))):n||(o=u.worldToCameraCoordinatesPoint(o,o)),o},s})),define("ViewModels/ZoomNavigationControl",["Cesium/Core/defined","Cesium/Core/Ray","Cesium/Core/IntersectionTests","Cesium/Core/Cartesian3","Cesium/Scene/SceneMode","ViewModels/NavigationControl","Core/Utils"],(function(e,t,i,n,o,r,s){"use strict";var a=function(e,t){r.apply(this,arguments),this.name="Zoom "+(t?"In":"Out"),this.text=t?"+":"-",this.cssClass="navigation-control3D-icon-zoom-"+(t?"in":"out"),this.relativeAmount=2,t&&(this.relativeAmount=1/this.relativeAmount)};a.prototype.relativeAmount=1,(a.prototype=Object.create(r.prototype)).activate=function(){this.zoom(this.relativeAmount)};var l=new n;return a.prototype.zoom=function(r){if(this.isActive=!0,e(this.terria)){var a=this.terria.scene,u=a.screenSpaceCameraController;if(!u.enableInputs||!u.enableZoom)return;var c,h=a.camera;switch(a.mode){case o.MORPHING:break;case o.SCENE2D:h.zoomIn(h.positionCartographic.height*(1-this.relativeAmount));break;default:var p;if(p=e(this.terria.trackedEntity)?new n:s.getCameraFocus(this.terria,!1),e(p))c={direction:h.direction,up:h.up};else{var f=new t(h.worldToCameraCoordinatesPoint(a.globe.ellipsoid.cartographicToCartesian(h.positionCartographic)),h.directionWC);p=i.grazingAltitudeLocation(f,a.globe.ellipsoid),c={heading:h.heading,pitch:h.pitch,roll:h.roll}}var d=n.subtract(h.position,p,l),m=n.multiplyByScalar(d,r,d),g=n.add(p,m,p);e(this.terria.trackedEntity)||a.mode==o.COLUMBUS_VIEW?h.position=g:h.flyTo({destination:g,orientation:c,duration:.5,convert:!1})}}this.isActive=!1},a})),define("SvgPaths/svgCompassOuterRing",[],(function(){"use strict";return"m 66.5625,0 0,15.15625 3.71875,0 0,-10.40625 5.5,10.40625 4.375,0 0,-15.15625 -3.71875,0 0,10.40625 L 70.9375,0 66.5625,0 z M 72.5,20.21875 c -28.867432,0 -52.28125,23.407738 -52.28125,52.28125 0,28.87351 23.413818,52.3125 52.28125,52.3125 28.86743,0 52.28125,-23.43899 52.28125,-52.3125 0,-28.873512 -23.41382,-52.28125 -52.28125,-52.28125 z m 0,1.75 c 13.842515,0 26.368948,5.558092 35.5,14.5625 l -11.03125,11 0.625,0.625 11.03125,-11 c 8.9199,9.108762 14.4375,21.579143 14.4375,35.34375 0,13.764606 -5.5176,26.22729 -14.4375,35.34375 l -11.03125,-11 -0.625,0.625 11.03125,11 c -9.130866,9.01087 -21.658601,14.59375 -35.5,14.59375 -13.801622,0 -26.321058,-5.53481 -35.4375,-14.5 l 11.125,-11.09375 c 6.277989,6.12179 14.857796,9.90625 24.3125,9.90625 19.241896,0 34.875,-15.629154 34.875,-34.875 0,-19.245847 -15.633104,-34.84375 -34.875,-34.84375 -9.454704,0 -18.034511,3.760884 -24.3125,9.875 L 37.0625,36.4375 C 46.179178,27.478444 58.696991,21.96875 72.5,21.96875 z m -0.875,0.84375 0,13.9375 1.75,0 0,-13.9375 -1.75,0 z M 36.46875,37.0625 47.5625,48.15625 C 41.429794,54.436565 37.65625,63.027539 37.65625,72.5 c 0,9.472461 3.773544,18.055746 9.90625,24.34375 L 36.46875,107.9375 c -8.96721,-9.1247 -14.5,-21.624886 -14.5,-35.4375 0,-13.812615 5.53279,-26.320526 14.5,-35.4375 z M 72.5,39.40625 c 18.297686,0 33.125,14.791695 33.125,33.09375 0,18.302054 -14.827314,33.125 -33.125,33.125 -18.297687,0 -33.09375,-14.822946 -33.09375,-33.125 0,-18.302056 14.796063,-33.09375 33.09375,-33.09375 z M 22.84375,71.625 l 0,1.75 13.96875,0 0,-1.75 -13.96875,0 z m 85.5625,0 0,1.75 14,0 0,-1.75 -14,0 z M 71.75,108.25 l 0,13.9375 1.71875,0 0,-13.9375 -1.71875,0 z"})),define("SvgPaths/svgCompassGyro",[],(function(){"use strict";return"m 72.71875,54.375 c -0.476702,0 -0.908208,0.245402 -1.21875,0.5625 -0.310542,0.317098 -0.551189,0.701933 -0.78125,1.1875 -0.172018,0.363062 -0.319101,0.791709 -0.46875,1.25 -6.91615,1.075544 -12.313231,6.656514 -13,13.625 -0.327516,0.117495 -0.661877,0.244642 -0.9375,0.375 -0.485434,0.22959 -0.901634,0.471239 -1.21875,0.78125 -0.317116,0.310011 -0.5625,0.742111 -0.5625,1.21875 l 0.03125,0 c 0,0.476639 0.245384,0.877489 0.5625,1.1875 0.317116,0.310011 0.702066,0.58291 1.1875,0.8125 0.35554,0.168155 0.771616,0.32165 1.21875,0.46875 1.370803,6.10004 6.420817,10.834127 12.71875,11.8125 0.146999,0.447079 0.30025,0.863113 0.46875,1.21875 0.230061,0.485567 0.470708,0.870402 0.78125,1.1875 0.310542,0.317098 0.742048,0.5625 1.21875,0.5625 0.476702,0 0.876958,-0.245402 1.1875,-0.5625 0.310542,-0.317098 0.582439,-0.701933 0.8125,-1.1875 0.172018,-0.363062 0.319101,-0.791709 0.46875,-1.25 6.249045,-1.017063 11.256351,-5.7184 12.625,-11.78125 0.447134,-0.1471 0.86321,-0.300595 1.21875,-0.46875 0.485434,-0.22959 0.901633,-0.502489 1.21875,-0.8125 0.317117,-0.310011 0.5625,-0.710861 0.5625,-1.1875 l -0.03125,0 c 0,-0.476639 -0.245383,-0.908739 -0.5625,-1.21875 C 89.901633,71.846239 89.516684,71.60459 89.03125,71.375 88.755626,71.244642 88.456123,71.117495 88.125,71 87.439949,64.078341 82.072807,58.503735 75.21875,57.375 c -0.15044,-0.461669 -0.326927,-0.884711 -0.5,-1.25 -0.230061,-0.485567 -0.501958,-0.870402 -0.8125,-1.1875 -0.310542,-0.317098 -0.710798,-0.5625 -1.1875,-0.5625 z m -0.0625,1.40625 c 0.03595,-0.01283 0.05968,0 0.0625,0 0.0056,0 0.04321,-0.02233 0.1875,0.125 0.144288,0.147334 0.34336,0.447188 0.53125,0.84375 0.06385,0.134761 0.123901,0.309578 0.1875,0.46875 -0.320353,-0.01957 -0.643524,-0.0625 -0.96875,-0.0625 -0.289073,0 -0.558569,0.04702 -0.84375,0.0625 C 71.8761,57.059578 71.936151,56.884761 72,56.75 c 0.18789,-0.396562 0.355712,-0.696416 0.5,-0.84375 0.07214,-0.07367 0.120304,-0.112167 0.15625,-0.125 z m 0,2.40625 c 0.448007,0 0.906196,0.05436 1.34375,0.09375 0.177011,0.592256 0.347655,1.271044 0.5,2.03125 0.475097,2.370753 0.807525,5.463852 0.9375,8.9375 -0.906869,-0.02852 -1.834463,-0.0625 -2.78125,-0.0625 -0.92298,0 -1.802327,0.03537 -2.6875,0.0625 0.138529,-3.473648 0.493653,-6.566747 0.96875,-8.9375 0.154684,-0.771878 0.320019,-1.463985 0.5,-2.0625 0.405568,-0.03377 0.804291,-0.0625 1.21875,-0.0625 z m -2.71875,0.28125 c -0.129732,0.498888 -0.259782,0.987558 -0.375,1.5625 -0.498513,2.487595 -0.838088,5.693299 -0.96875,9.25 -3.21363,0.15162 -6.119596,0.480068 -8.40625,0.9375 -0.682394,0.136509 -1.275579,0.279657 -1.84375,0.4375 0.799068,-6.135482 5.504716,-11.036454 11.59375,-12.1875 z M 75.5,58.5 c 6.043169,1.18408 10.705093,6.052712 11.5,12.15625 -0.569435,-0.155806 -1.200273,-0.302525 -1.875,-0.4375 -2.262525,-0.452605 -5.108535,-0.783809 -8.28125,-0.9375 -0.130662,-3.556701 -0.470237,-6.762405 -0.96875,-9.25 C 75.761959,59.467174 75.626981,58.990925 75.5,58.5 z m -2.84375,12.09375 c 0.959338,0 1.895843,0.03282 2.8125,0.0625 C 75.48165,71.267751 75.5,71.871028 75.5,72.5 c 0,1.228616 -0.01449,2.438313 -0.0625,3.59375 -0.897358,0.0284 -1.811972,0.0625 -2.75,0.0625 -0.927373,0 -1.831062,-0.03473 -2.71875,-0.0625 -0.05109,-1.155437 -0.0625,-2.365134 -0.0625,-3.59375 0,-0.628972 0.01741,-1.232249 0.03125,-1.84375 0.895269,-0.02827 1.783025,-0.0625 2.71875,-0.0625 z M 68.5625,70.6875 c -0.01243,0.60601 -0.03125,1.189946 -0.03125,1.8125 0,1.22431 0.01541,2.407837 0.0625,3.5625 -3.125243,-0.150329 -5.92077,-0.471558 -8.09375,-0.90625 -0.784983,-0.157031 -1.511491,-0.316471 -2.125,-0.5 -0.107878,-0.704096 -0.1875,-1.422089 -0.1875,-2.15625 0,-0.115714 0.02849,-0.228688 0.03125,-0.34375 0.643106,-0.20284 1.389577,-0.390377 2.25,-0.5625 2.166953,-0.433487 4.97905,-0.75541 8.09375,-0.90625 z m 8.3125,0.03125 c 3.075121,0.15271 5.824455,0.446046 7.96875,0.875 0.857478,0.171534 1.630962,0.360416 2.28125,0.5625 0.0027,0.114659 0,0.228443 0,0.34375 0,0.735827 -0.07914,1.450633 -0.1875,2.15625 -0.598568,0.180148 -1.29077,0.34562 -2.0625,0.5 -2.158064,0.431708 -4.932088,0.754666 -8.03125,0.90625 0.04709,-1.154663 0.0625,-2.33819 0.0625,-3.5625 0,-0.611824 -0.01924,-1.185379 -0.03125,-1.78125 z M 57.15625,72.5625 c 0.0023,0.572772 0.06082,1.131112 0.125,1.6875 -0.125327,-0.05123 -0.266577,-0.10497 -0.375,-0.15625 -0.396499,-0.187528 -0.665288,-0.387337 -0.8125,-0.53125 -0.147212,-0.143913 -0.15625,-0.182756 -0.15625,-0.1875 0,-0.0047 -0.02221,-0.07484 0.125,-0.21875 0.147212,-0.143913 0.447251,-0.312472 0.84375,-0.5 0.07123,-0.03369 0.171867,-0.06006 0.25,-0.09375 z m 31.03125,0 c 0.08201,0.03503 0.175941,0.05872 0.25,0.09375 0.396499,0.187528 0.665288,0.356087 0.8125,0.5 0.14725,0.14391 0.15625,0.21405 0.15625,0.21875 0,0.0047 -0.009,0.04359 -0.15625,0.1875 -0.147212,0.143913 -0.416001,0.343722 -0.8125,0.53125 -0.09755,0.04613 -0.233314,0.07889 -0.34375,0.125 0.06214,-0.546289 0.09144,-1.094215 0.09375,-1.65625 z m -29.5,3.625 c 0.479308,0.123125 0.983064,0.234089 1.53125,0.34375 2.301781,0.460458 5.229421,0.787224 8.46875,0.9375 0.167006,2.84339 0.46081,5.433176 0.875,7.5 0.115218,0.574942 0.245268,1.063612 0.375,1.5625 -5.463677,-1.028179 -9.833074,-5.091831 -11.25,-10.34375 z m 27.96875,0 C 85.247546,81.408945 80.919274,85.442932 75.5,86.5 c 0.126981,-0.490925 0.261959,-0.967174 0.375,-1.53125 0.41419,-2.066824 0.707994,-4.65661 0.875,-7.5 3.204493,-0.15162 6.088346,-0.480068 8.375,-0.9375 0.548186,-0.109661 1.051942,-0.220625 1.53125,-0.34375 z M 70.0625,77.53125 c 0.865391,0.02589 1.723666,0.03125 2.625,0.03125 0.912062,0 1.782843,-0.0048 2.65625,-0.03125 -0.165173,2.736408 -0.453252,5.207651 -0.84375,7.15625 -0.152345,0.760206 -0.322989,1.438994 -0.5,2.03125 -0.437447,0.03919 -0.895856,0.0625 -1.34375,0.0625 -0.414943,0 -0.812719,-0.02881 -1.21875,-0.0625 -0.177011,-0.592256 -0.347655,-1.271044 -0.5,-2.03125 -0.390498,-1.948599 -0.700644,-4.419842 -0.875,-7.15625 z m 1.75,10.28125 c 0.284911,0.01545 0.554954,0.03125 0.84375,0.03125 0.325029,0 0.648588,-0.01171 0.96875,-0.03125 -0.05999,0.148763 -0.127309,0.31046 -0.1875,0.4375 -0.18789,0.396562 -0.386962,0.696416 -0.53125,0.84375 -0.144288,0.147334 -0.181857,0.125 -0.1875,0.125 -0.0056,0 -0.07446,0.02233 -0.21875,-0.125 C 72.355712,88.946416 72.18789,88.646562 72,88.25 71.939809,88.12296 71.872486,87.961263 71.8125,87.8125 z"})),define("SvgPaths/svgCompassRotationMarker",[],(function(){"use strict";return"M 72.46875,22.03125 C 59.505873,22.050338 46.521615,27.004287 36.6875,36.875 L 47.84375,47.96875 C 61.521556,34.240041 83.442603,34.227389 97.125,47.90625 l 11.125,-11.125 C 98.401629,26.935424 85.431627,22.012162 72.46875,22.03125 z"})),define("ViewModels/NavigationViewModel",["Cesium/Core/defined","Cesium/Core/Math","Cesium/Core/getTimestamp","Cesium/Core/EventHelper","Cesium/Core/Transforms","Cesium/Scene/SceneMode","Cesium/Core/Cartesian2","Cesium/Core/Cartesian3","Cesium/Core/Matrix4","Cesium/Core/BoundingSphere","Cesium/Core/HeadingPitchRange","KnockoutES5","Core/loadView","ViewModels/ResetViewNavigationControl","ViewModels/ZoomNavigationControl","SvgPaths/svgCompassOuterRing","SvgPaths/svgCompassGyro","SvgPaths/svgCompassRotationMarker","Core/Utils"],(function(e,t,i,n,o,r,s,a,l,u,c,h,p,f,d,m,g,_,y){"use strict";var v=function(t){this.terria=t.terria,this.eventHelper=new n,this.controls=t.controls,e(this.controls)||(this.controls=[new d(this.terria,!0),new f(this.terria),new d(this.terria,!1)]),this.svgCompassOuterRing=m,this.svgCompassGyro=g,this.svgCompassRotationMarker=_,this.showCompass=e(this.terria),this.heading=this.showCompass?this.terria.scene.camera.heading:0,this.isOrbiting=!1,this.orbitCursorAngle=0,this.orbitCursorOpacity=0,this.orbitLastTimestamp=0,this.orbitFrame=void 0,this.orbitIsLook=!1,this.orbitMouseMoveFunction=void 0,this.orbitMouseUpFunction=void 0,this.isRotating=!1,this.rotateInitialCursorAngle=void 0,this.rotateFrame=void 0,this.rotateIsLook=!1,this.rotateMouseMoveFunction=void 0,this.rotateMouseUpFunction=void 0,this._unsubcribeFromPostRender=void 0,h.track(this,["controls","showCompass","heading","isOrbiting","orbitCursorAngle","isRotating"]);var i=this;function o(){e(i.terria)?(i._unsubcribeFromPostRender&&(i._unsubcribeFromPostRender(),i._unsubcribeFromPostRender=void 0),i.showCompass=!0,i._unsubcribeFromPostRender=i.terria.scene.postRender.addEventListener((function(){i.heading=i.terria.scene.camera.heading}))):(i._unsubcribeFromPostRender&&(i._unsubcribeFromPostRender(),i._unsubcribeFromPostRender=void 0),i.showCompass=!1)}this.eventHelper.add(this.terria.afterWidgetChanged,o,this),o()};v.prototype.destroy=function(){this.eventHelper.removeAll()},v.prototype.show=function(e){p('<div class="compass" title=": . : .: .: 3D." data-bind="visible: showCompass, event: { mousedown: handleMouseDown, dblclick: handleDoubleClick }"><div class="compass-outer-ring-background"></div> <div class="compass-rotation-marker" data-bind="visible: isOrbiting, style: { transform: \'rotate(-\' + orbitCursorAngle + \'rad)\', \'-webkit-transform\': \'rotate(-\' + orbitCursorAngle + \'rad)\', opacity: orbitCursorOpacity }, cesiumSvgPath: { path: svgCompassRotationMarker, width: 145, height: 145 }"></div> <div class="compass-outer-ring" title="" data-bind="style: { transform: \'rotate(-\' + heading + \'rad)\', \'-webkit-transform\': \'rotate(-\' + heading + \'rad)\' }, cesiumSvgPath: { path: svgCompassOuterRing, width: 145, height: 145 }"></div> <div class="compass-gyro-background"></div> <div class="compass-gyro" data-bind="cesiumSvgPath: { path: svgCompassGyro, width: 145, height: 145 }, css: { \'compass-gyro-active\': isOrbiting }"></div></div><div class="navigation-controls">\x3c!-- ko foreach: controls --\x3e<div data-bind="click: activate, attr: { title: $data.title }, css: $root.isLastControl($data) ? \'navigation-control3D-last\' : \'navigation-control3D\' ">   \x3c!-- ko if: $data.hasText --\x3e   <div data-bind="text: $data.text, css: $data.isActive ?  \'navigation-control3D-icon-active \' + $data.cssClass : $data.cssClass"></div>   \x3c!-- /ko --\x3e  \x3c!-- ko ifnot: $data.hasText --\x3e  <div data-bind="cesiumSvgPath: { path: $data.svgIcon, width: $data.svgWidth, height: $data.svgHeight }, css: $data.isActive ?  \'navigation-control3D-icon-active \' + $data.cssClass : $data.cssClass"></div>  \x3c!-- /ko --\x3e </div> \x3c!-- /ko --\x3e</div>',e,this)},v.prototype.add=function(e){this.controls.push(e)},v.prototype.remove=function(e){this.controls.remove(e)},v.prototype.isLastControl=function(e){return e===this.controls[this.controls.length-1]};var b=new s;v.prototype.handleMouseDown=function(n,u){if(this.terria.scene.mode==r.MORPHING)return!0;var c=u.currentTarget,h=u.currentTarget.getBoundingClientRect(),p=h.width/2,f=new s((h.right-h.left)/2,(h.bottom-h.top)/2),d=new s(u.clientX-h.left,u.clientY-h.top),m=s.subtract(d,f,b),g=s.magnitude(m)/p;if(g<50/145)!function(n,u,c){var h=n.terria.scene,p=h.screenSpaceCameraController;if(h.mode!=r.MORPHING&&p.enableInputs){switch(h.mode){case r.COLUMBUS_VIEW:if(p.enableLook)break;if(!p.enableTranslate||!p.enableTilt)return;break;case r.SCENE3D:if(p.enableLook)break;if(!p.enableTilt||!p.enableRotate)return;break;case r.SCENE2D:if(!p.enableTranslate)return}document.removeEventListener("mousemove",n.orbitMouseMoveFunction,!1),document.removeEventListener("mouseup",n.orbitMouseUpFunction,!1),e(n.orbitTickFunction)&&n.terria.clock.onTick.removeEventListener(n.orbitTickFunction),n.orbitMouseMoveFunction=void 0,n.orbitMouseUpFunction=void 0,n.orbitTickFunction=void 0,n.isOrbiting=!0,n.orbitLastTimestamp=i();var f=h.camera;if(e(n.terria.trackedEntity))n.orbitFrame=void 0,n.orbitIsLook=!1;else{var d=y.getCameraFocus(n.terria,!0,w);e(d)?(n.orbitFrame=o.eastNorthUpToFixedFrame(d,h.globe.ellipsoid,x),n.orbitIsLook=!1):(n.orbitFrame=o.eastNorthUpToFixedFrame(f.positionWC,h.globe.ellipsoid,x),n.orbitIsLook=!0)}n.orbitTickFunction=function(o){var s,u=i(),c=(u-n.orbitLastTimestamp)*(2.5*(n.orbitCursorOpacity-.5)/1e3),p=n.orbitCursorAngle+t.PI_OVER_TWO,d=Math.cos(p)*c,m=Math.sin(p)*c;e(n.orbitFrame)&&(s=l.clone(f.transform,C),f.lookAtTransform(n.orbitFrame)),h.mode==r.SCENE2D?f.move(new a(d,m,0),Math.max(h.canvas.clientWidth,h.canvas.clientHeight)/100*f.positionCartographic.height*c):n.orbitIsLook?(f.look(a.UNIT_Z,-d),f.look(f.right,-m)):(f.rotateLeft(d),f.rotateUp(m)),e(n.orbitFrame)&&f.lookAtTransform(s),n.orbitLastTimestamp=u},n.orbitMouseMoveFunction=function(e){var t=u.getBoundingClientRect(),i=new s((t.right-t.left)/2,(t.bottom-t.top)/2),n=new s(e.clientX-t.left,e.clientY-t.top);m(s.subtract(n,i,b),t.width)},n.orbitMouseUpFunction=function(t){n.isOrbiting=!1,document.removeEventListener("mousemove",n.orbitMouseMoveFunction,!1),document.removeEventListener("mouseup",n.orbitMouseUpFunction,!1),e(n.orbitTickFunction)&&n.terria.clock.onTick.removeEventListener(n.orbitTickFunction),n.orbitMouseMoveFunction=void 0,n.orbitMouseUpFunction=void 0,n.orbitTickFunction=void 0},document.addEventListener("mousemove",n.orbitMouseMoveFunction,!1),document.addEventListener("mouseup",n.orbitMouseUpFunction,!1),n.terria.clock.onTick.addEventListener(n.orbitTickFunction),m(c,u.getBoundingClientRect().width)}function m(e,i){var o=Math.atan2(-e.y,e.x);n.orbitCursorAngle=t.zeroToTwoPi(o-t.PI_OVER_TWO);var r=s.magnitude(e),a=i/2,l=Math.min(r/a,1),u=.5*l*l+.5;n.orbitCursorOpacity=u}}(this,c,m);else{if(!(g<1))return!0;!function(i,n,a){var u,c=i.terria.scene,h=c.camera,p=c.screenSpaceCameraController;if(c.mode!=r.MORPHING&&c.mode!=r.SCENE2D&&p.enableInputs&&(p.enableLook||c.mode!=r.COLUMBUS_VIEW&&(c.mode!=r.SCENE3D||p.enableRotate))){if(document.removeEventListener("mousemove",i.rotateMouseMoveFunction,!1),document.removeEventListener("mouseup",i.rotateMouseUpFunction,!1),i.rotateMouseMoveFunction=void 0,i.rotateMouseUpFunction=void 0,i.isRotating=!0,i.rotateInitialCursorAngle=Math.atan2(-a.y,a.x),e(i.terria.trackedEntity))i.rotateFrame=void 0,i.rotateIsLook=!1;else{var f=y.getCameraFocus(i.terria,!0,w);e(f)&&(c.mode!=r.COLUMBUS_VIEW||p.enableLook||p.enableTranslate)?(i.rotateFrame=o.eastNorthUpToFixedFrame(f,c.globe.ellipsoid,x),i.rotateIsLook=!1):(i.rotateFrame=o.eastNorthUpToFixedFrame(h.positionWC,c.globe.ellipsoid,x),i.rotateIsLook=!0)}e(i.rotateFrame)&&(u=l.clone(h.transform,C),h.lookAtTransform(i.rotateFrame)),i.rotateInitialCameraAngle=-h.heading,e(i.rotateFrame)&&h.lookAtTransform(u),i.rotateMouseMoveFunction=function(o){var r,a=n.getBoundingClientRect(),u=new s((a.right-a.left)/2,(a.bottom-a.top)/2),c=new s(o.clientX-a.left,o.clientY-a.top),h=s.subtract(c,u,b),p=Math.atan2(-h.y,h.x)-i.rotateInitialCursorAngle,f=t.zeroToTwoPi(i.rotateInitialCameraAngle-p),d=i.terria.scene.camera;e(i.rotateFrame)&&(r=l.clone(d.transform,C),d.lookAtTransform(i.rotateFrame));var m=-d.heading;d.rotateRight(f-m),e(i.rotateFrame)&&d.lookAtTransform(r)},i.rotateMouseUpFunction=function(e){i.isRotating=!1,document.removeEventListener("mousemove",i.rotateMouseMoveFunction,!1),document.removeEventListener("mouseup",i.rotateMouseUpFunction,!1),i.rotateMouseMoveFunction=void 0,i.rotateMouseUpFunction=void 0},document.addEventListener("mousemove",i.rotateMouseMoveFunction,!1),document.addEventListener("mouseup",i.rotateMouseUpFunction,!1)}}(this,c,m)}};var C=new l,x=new l,w=new a;return v.prototype.handleDoubleClick=function(i,n){var o=i.terria.scene,s=o.camera,l=o.screenSpaceCameraController;if(o.mode==r.MORPHING||!l.enableInputs)return!0;if(o.mode!=r.COLUMBUS_VIEW||l.enableTranslate){if(o.mode==r.SCENE3D||o.mode==r.COLUMBUS_VIEW){if(!l.enableLook)return;if(o.mode==r.SCENE3D&&!l.enableRotate)return}var h=y.getCameraFocus(i.terria,!0,w);if(e(h)){var p=o.globe.ellipsoid.cartographicToCartesian(s.positionCartographic,new a),f=o.globe.ellipsoid.geodeticSurfaceNormal(h),d=new u(h,0);s.flyToBoundingSphere(d,{offset:new c(0,t.PI_OVER_TWO-a.angleBetween(f,s.directionWC),a.distance(p,h)),duration:1.5})}else this.controls[1].resetView()}},v.create=function(e){var t=new v(e);return t.show(e.container),t},v})),define("CesiumNavigation",["Cesium/Core/defined","Cesium/Core/defineProperties","Cesium/Core/Event","KnockoutES5","Core/registerKnockoutBindings","ViewModels/DistanceLegendViewModel","ViewModels/NavigationViewModel"],(function(e,t,i,n,o,r,s){"use strict";var a=function(t){(function(t,n){if(!e(t))throw new DeveloperError("CesiumWidget or Viewer is required.");var a=e(t.cesiumWidget)?t.cesiumWidget:t,l=document.createElement("div");l.className="cesium-widget-cesiumNavigationContainer",a.container.appendChild(l),this.terria=t,this.terria.options=n,this.terria.afterWidgetChanged=new i,this.terria.beforeWidgetChanged=new i,this.container=l,this.navigationDiv=document.createElement("div"),this.navigationDiv.setAttribute("id","navigationDiv"),this.distanceLegendDiv=document.createElement("div"),this.navigationDiv.setAttribute("id","distanceLegendDiv"),l.appendChild(this.navigationDiv),l.appendChild(this.distanceLegendDiv),o(),this.distanceLegendViewModel=r.create({container:this.distanceLegendDiv,terria:this.terria,mapElement:l}),this.navigationViewModel=s.create({container:this.navigationDiv,terria:this.terria})}).apply(this,arguments),this._onDestroyListeners=[]};return a.prototype.distanceLegendViewModel=void 0,a.prototype.navigationViewModel=void 0,a.prototype.navigationDiv=void 0,a.prototype.distanceLegendDiv=void 0,a.prototype.terria=void 0,a.prototype.container=void 0,a.prototype._onDestroyListeners=void 0,a.prototype.destroy=function(){e(this.navigationViewModel)&&this.navigationViewModel.destroy(),e(this.distanceLegendViewModel)&&this.distanceLegendViewModel.destroy(),e(this.navigationDiv)&&this.navigationDiv.parentNode.removeChild(this.navigationDiv),delete this.navigationDiv,e(this.distanceLegendDiv)&&this.distanceLegendDiv.parentNode.removeChild(this.distanceLegendDiv),delete this.distanceLegendDiv,e(this.container)&&this.container.parentNode.removeChild(this.container),delete this.container;for(var t=0;t<this._onDestroyListeners.length;t++)this._onDestroyListeners[t]()},a.prototype.addOnDestroyListener=function(e){"function"==typeof e&&this._onDestroyListeners.push(e)},a})),define("dummy/require-less/less/dummy",[],(function(){})),define("viewerCesiumNavigationMixin",["Cesium/Core/defined","Cesium/Core/defineProperties","Cesium/Core/DeveloperError","CesiumNavigation","dummy/require-less/less/dummy"],(function(e,t,i,n){"use strict";function o(n,o){if(!e(n))throw new i("viewer is required.");r(n,o).addOnDestroyListener(function(e){return function(){delete e.cesiumNavigation}}(n)),t(n,{cesiumNavigation:{configurable:!0,get:function(){return n.cesiumWidget.cesiumNavigation}}})}o.mixinWidget=function(e,t){return r.apply(void 0,arguments)};var r=function(i,o){var r=new n(i,o),s=e(i.cesiumWidget)?i.cesiumWidget:i;return t(s,{cesiumNavigation:{configurable:!0,get:function(){return r}}}),r.addOnDestroyListener(function(e){return function(){delete e.cesiumNavigation}}(s)),r};return o})),c=".full-window{position:absolute;top:0;left:0;right:0;bottom:0;margin:0;overflow:hidden;padding:0;-webkit-transition:left .25s ease-out;-moz-transition:left .25s ease-out;-ms-transition:left .25s ease-out;-o-transition:left .25s ease-out;transition:left .25s ease-out}.transparent-to-input{pointer-events:none}.opaque-to-input{pointer-events:auto}.clickable{cursor:pointer}.markdown a:hover,.markdown u,a:hover{text-decoration:underline}.modal,.modal-background{top:0;left:0;bottom:0;right:0}.modal-background{pointer-events:auto;background-color:rgba(0,0,0,.5);z-index:1000;position:fixed}.modal{position:absolute;margin:auto;background-color:#2f353c;max-height:100%;max-width:100%;font-family:'Roboto',sans-serif;color:#fff}.modal-header{background-color:rgba(0,0,0,.2);border-bottom:1px solid rgba(100,100,100,.6);font-size:15px;line-height:40px;margin:0}.modal-header h1{font-size:15px;color:#fff;margin-left:15px}.modal-content{margin-left:15px;margin-right:15px;margin-bottom:15px;padding-top:15px;overflow:auto}.modal-close-button{position:absolute;right:15px;cursor:pointer;font-size:18px;color:#fff}#ui{z-index:2100}@media print{.full-window{position:initial}}.markdown img{max-width:100%}.markdown svg{max-height:100%}.markdown fieldset,.markdown input,.markdown select,.markdown textarea{font-family:inherit;font-size:1rem;box-sizing:border-box;margin-top:0;margin-bottom:0}.markdown label{vertical-align:middle}.markdown h1,.markdown h2,.markdown h3,.markdown h4,.markdown h5,.markdown h6{font-family:inherit;font-weight:700;line-height:1.25;margin-top:1em;margin-bottom:.5em}.markdown h1{font-size:2rem}.markdown h2{font-size:1.5rem}.markdown h3{font-size:1.25rem}.markdown h4{font-size:1rem}.markdown h5{font-size:.875rem}.markdown h6{font-size:.75rem}.markdown dl,.markdown ol,.markdown p,.markdown ul{margin-top:0;margin-bottom:1rem}.markdown strong{font-weight:700}.markdown em{font-style:italic}.markdown small{font-size:80%}.markdown mark{color:#000;background:#ff0}.markdown s{text-decoration:line-through}.markdown ol{list-style:decimal inside}.markdown ul{list-style:disc inside}.markdown code,.markdown pre,.markdown samp{font-family:monospace;font-size:inherit}.markdown pre{margin-top:0;margin-bottom:1rem;overflow-x:scroll}.markdown a{color:#68adfe;text-decoration:none}.markdown code,.markdown pre{background-color:transparent;border-radius:3px}.markdown hr{border:0;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:rgba(0,0,0,.125)}.markdown .left-align{text-align:left}.markdown .center{text-align:center}.markdown .right-align{text-align:right}.markdown .justify{text-align:justify}.markdown .truncate{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.markdown ol.upper-roman{list-style-type:upper-roman}.markdown ol.lower-alpha{list-style-type:lower-alpha}.markdown ul.circle{list-style-type:circle}.markdown ul.square{list-style-type:square}.markdown .list-reset{list-style:none;padding-left:0}.floating,.floating-horizontal,.floating-vertical{pointer-events:auto;position:absolute;border-radius:15px;background-color:rgba(47,53,60,.8)}.floating-horizontal{padding-left:5px;padding-right:5px}.floating-vertical{padding-top:5px;padding-bottom:5px}@media print{.floating{display:none}}.distance-legend{display:none;pointer-events:auto;position:absolute;border-radius:1px;background-color:rgba(68,79,91,0.5);padding-left:3px;padding-right:3px;right:1px;bottom:1px;height:26px;width:125px;border:1px solid rgba(68,79,91,0.5);box-sizing:content-box}.distance-legend-label{display:inline-block;font-family:'Roboto',sans-serif;font-size:12px;font-weight:lighter;line-height:22px;color:#fff;width:125px;text-align:center}.distance-legend-scale-bar{border-left:1px solid #fff;border-right:1px solid #fff;border-bottom:1px solid #fff;position:absolute;height:10px;top:15px}@media print{.distance-legend{display:none}}@media screen and (max-width:700px),screen and (max-height:420px){.distance-legend{display:none}}.navigation-controls{position:absolute;right:30px;top:110px;width:30px;background:rgba(0,60,136,.7);border:1px solid rgba(255,255,255,.1);font-weight:300;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.navigation-control3D{cursor:pointer;border-bottom:1px solid #555}.naviagation-control3D:active{color:#fff}.navigation-control3D-last{cursor:pointer;border-bottom:0}.navigation-control3D-icon-zoom-in{padding-bottom:4px}.navigation-control3D-icon-zoom-in,.navigation-control3D-icon-zoom-out{position:relative;text-align:center;font-size:20px;color:#fff}.navigation-control3D-icon-reset{position:relative;left:10px;width:10px;height:10px;fill:rgba(255,255,255,.8);padding-top:6px;padding-bottom:6px;box-sizing:content-box}.compass,.compass-outer-ring{position:absolute;width:95px;height:95px}.compass{pointer-events:auto;right:0;overflow:hidden;top:10px}.compass-outer-ring{top:0;fill:rgba(255,255,255,.5)}.compass-outer-ring-background{position:absolute;top:14px;left:14px;width:44px;height:44px;border-radius:44px;border:12px solid rgba(0,60,136,.6);box-sizing:content-box}.compass-gyro{pointer-events:none;position:absolute;top:0;width:95px;height:95px;fill:#ccc}.compass-gyro-active,.compass-gyro-background:hover+.compass-gyro{fill:#68adfe}.compass-gyro-background{position:absolute;top:30px;left:30px;width:33px;height:33px;border-radius:33px;background-color:rgba(0,60,136,.6);border:1px solid rgba(255,255,255,.2);box-sizing:content-box}.compass-rotation-marker{position:absolute;top:0;width:95px;height:95px;fill:#68adfe}@media screen and (max-width:700px),screen and (max-height:420px){.compass,.navigation-controls{display:none}}@media print{.compass,.navigation-controls{display:none}}",d=document,a="appendChild",i="styleSheet",(s=d.createElement("style")).type="text/css",d.getElementsByTagName("head")[0][a](s),s[i]?s[i].cssText=c:s[a](d.createTextNode(c)),define("Cesium/Core/defined",(function(){return Cesium.defined})),define("Cesium/Core/defineProperties",(function(){return Cesium.defineProperties})),define("Cesium/Core/defaultValue",(function(){return Cesium.defaultValue})),define("Cesium/Core/Event",(function(){return Cesium.Event})),define("Cesium/Widgets/getElement",(function(){return Cesium.getElement})),define("Cesium/Widgets/SvgPathBindingHandler",(function(){return Cesium.SvgPathBindingHandler})),define("Cesium/Core/Ray",(function(){return Cesium.Ray})),define("Cesium/Core/Cartesian3",(function(){return Cesium.Cartesian3})),define("Cesium/Core/Cartographic",(function(){return Cesium.Cartographic})),define("Cesium/Core/ReferenceFrame",(function(){return Cesium.ReferenceFrame})),define("Cesium/Scene/SceneMode",(function(){return Cesium.SceneMode})),define("Cesium/Core/DeveloperError",(function(){return Cesium.DeveloperError})),define("Cesium/Core/EllipsoidGeodesic",(function(){return Cesium.EllipsoidGeodesic})),define("Cesium/Core/Cartesian2",(function(){return Cesium.Cartesian2})),define("Cesium/Core/getTimestamp",(function(){return Cesium.getTimestamp})),define("Cesium/Core/EventHelper",(function(){return Cesium.EventHelper})),define("Cesium/Core/Math",(function(){return Cesium.Math})),define("Cesium/Core/Transforms",(function(){return Cesium.Transforms})),define("Cesium/Core/Matrix4",(function(){return Cesium.Matrix4})),define("Cesium/Core/BoundingSphere",(function(){return Cesium.BoundingSphere})),define("Cesium/Core/HeadingPitchRange",(function(){return Cesium.HeadingPitchRange})),define("Cesium/Scene/Camera",(function(){return Cesium.Camera})),define("Cesium/Core/Rectangle",(function(){return Cesium.Rectangle})),define("Cesium/Core/IntersectionTests",(function(){return Cesium.IntersectionTests})),require("viewerCesiumNavigationMixin")}));var globeMap3D={},Map3DSDK=Map3DSDK||{};!function(){var e=Map3DSDK.Map=function(e,t,i){var n=null,o=null;i&&null!=i&&null!=i&&(i.terrain&&(n=i.terrain),o=i.images?i.images:[{name:"google",type:"UrlTemplate",url:"http://www.google.cn/maps/vt?lyrs=s@748&gl=cn&x={x}&y={y}&z={z}",visible:!0,maximumLevel:14,scheme:"Geographic-level-0"}]);var r;r=null!=n?{fullscreenElement:e,fullscreenButton:!1,geocoder:!0,sceneMode:Cesium.defaultValue(i.sceneMode,Cesium.SceneMode.SCENE3D),terrain:n,images:o,currentTime:new Date(2017,12,26,12,0,0)}:{fullscreenElement:e,fullscreenButton:!1,sceneMode:Cesium.defaultValue(i.sceneMode,Cesium.SceneMode.SCENE3D),geocoder:!0,images:o,currentTime:new Date(2017,12,26,12,0,0)};var s=new Cegore.Viewer(e,r);s.camera.setView({rect:[-95.59,40.03,-95.6,40.04]}),this.divID=e,this.cegore=s,this.cesium=s._czData,(globeMap3D[e]=this).handlerArray=[],this.dmap=[61437120,30718560,22914940,15003300,7679640,3839820,1484560,763e3,381010,196080,91300,46070,23210,11290,5730,2900,1450,750,360,180,100,50],this.Keyflags={looking:!0,moveUp:!1,moveLeft:!1,moveRight:!1,moveForward:!1,moveBackward:!1},this.controls={},this.layerMap={},(i=i||{}).navigation&&this.cesium.viewer.extend(Cesium.viewerCesiumNavigationMixin,{}),Map3DSDK.map3DView=this};function t(){var e=null;for(var t in globeMap3D){e=globeMap3D[t];break}return e}e.prototype.GetCegore=function(){return this.cegore},e.prototype.GetCesium=function(){return this.cesium},e.prototype.EnableDebug=function(e){e&&this.cesium.viewer.extend(Cesium.viewerCesiumInspectorMixin)},e.prototype.GetMap=function(){return this.cesium},e.prototype.GetView=function(){return this.cesium.viewer},e.prototype.SetKeyBoardMsg=function(e){this.Keyflags=e},e.prototype.GetKeyBoardMsg=function(){return this.Keyflags},e.prototype.RegisterKeyBoard=function(){var e=this.GetView(),t=e.canvas,i=e.scene.globe.ellipsoid,n=(new Cesium.ScreenSpaceEventHandler(t),this.Keyflags);e.clock.onTick.addEventListener((function(t){var o=e.camera,r=i.cartesianToCartographic(o.position).height/100;n.moveForward&&o.moveForward(r),n.moveBackward&&o.moveBackward(r),n.moveUp&&o.moveUp(r),n.moveDown&&o.moveDown(r),n.moveLeft&&o.moveLeft(r),n.moveRight&&o.moveRight(r)}))},e.prototype.JW2MapExtent=function(e){var t=e;if("EPSG:900913"==this.GetProjectCode()){var i=Map3DSDK.Convert("EPSG:4326","EPSG:900913",[e[0],e[1]]),n=Map3DSDK.Convert("EPSG:4326","EPSG:900913",[e[2],e[3]]);t=[i[0],i[1],n[0],n[1]]}return t},e.prototype.IsInView=function(e){var t=this.JW2MapCoord(e),i=this.GetViewRect();return!(t[0]<i[0]||t[0]>i[2]||t[1]<i[1]||t[1]>i[3])},e.prototype.CenterAndZoom=function(e,t){this.SetViewCenter(e[0],e[1]),this.SetZoom(t)},e.prototype.AddTileMapLayer=function(e){var t=new Cegore.ImageLayer({name:e,type:"ZMapImage",url:GetGISServerAddress()+"zs/catalogws/data"+e+"/tile/map",visible:!1,maximumLevel:18,scheme:"Geographic-level-0"});return this.AddLayer(t)},e.prototype.AddLayer=function(e){try{var t=this.GetLayerName(e);if(this.layerMap[t])throw"exist layer: "+t;var i=this.GetMap(),n=i.viewer.imageryLayers.length;i.viewer.imageryLayers.add(e._czLayer,n),this.layerMap[e.name]=e}catch(e){return null}},e.prototype.GetLayerName=function(e){return e.name},e.prototype.GetUnkLayer=function(e){this.GetMap();var t=this.layerMap[e];return null==t&&(t=this.GetCegore().images.get(e))&&(this.layerMap[e]=t),t},e.prototype._GetInnerZMapLayer=function(e){return"string"==typeof e?this.GetUnkLayer(e):e instanceof Cesium.ImageryLayer?e._ZMapLayer:(Cegore.NetCDFImageLayer,e)},e.prototype._GetCzLayer=function(e){return"string"==typeof e?rLayer=this.GetUnkLayer(e):e instanceof"ImageryLayer"?rLayer=e._ZMapLayer:e instanceof"NetCDFImageLayer"&&(rLayer=e),rLayer._czLayer},e.prototype.RemoveLayer=function(e){var t,i=this._GetInnerZMapLayer(e);if(null!=i){t=i.name;var n=this.GetLayerName(i);delete this.layerMap[n];for(var o=this.GetMap(),r=o.viewer.imageryLayers.length,s=0;s<r;s++)if((n=(e=o.viewer.imageryLayers._layers[s])._ZMapLayer.name)==t){o.viewer.imageryLayers.remove(e);break}}},e.prototype.GetLayers=function(){var e=[];for(var t in this.layerMap)e.push(this.layerMap[t]);return e},e.prototype.SetVisible=function(e,t){var i=this._GetCzLayer(e);i&&(i.show=t)},e.prototype.IsVisible=function(e){return this._GetCzLayer(e).show},e.prototype.JW2MapCoord=function(e){return e},e.prototype.GetCameraParams=function(){this.GetView()},e.prototype.GetViewCenter=function(){var e=this.GetView(),t=e.camera.pickEllipsoid(new Cesium.Cartesian2(e.canvas.clientWidth/2,e.canvas.clientHeight/2)),i=Cesium.Ellipsoid.WGS84.cartesianToCartographic(t);return[180*i.longitude/Math.PI,180*i.latitude/Math.PI,i.height]},e.prototype.FlyTo=function(e,t,i){i=i||{};var n=this.GetView().camera,o=i.height?i.height:15e4,r=new Cesium.Cartesian3(e,t,o),s=(n=this.GetView().camera,this.GetView().scene.globe.ellipsoid),a=Cesium.Cartesian3.fromDegrees(r.x,r.y,r.z,s);n.flyTo({destination:a,duration:i.duration?i.duration:2,orientation:{heading:Cesium.Math.toRadians(i.heading?i.heading:0),pitch:Cesium.Math.toRadians(i.pitch?i.pitch:-90),roll:Cesium.Math.toRadians(i.roll?i.roll:0)}})},e.prototype.SetViewCenter=function(e,t,i){var n=(i=i||{}).height?i.height:15e4,o=new Cesium.Cartesian3(e,t,n),r=this.GetView().camera,s=this.GetView().scene.globe.ellipsoid,a=Cesium.Cartesian3.fromDegrees(o.x,o.y,o.z,s);r.setView({destination:a,orientation:{heading:Cesium.Math.toRadians(i.heading?i.heading:0),pitch:Cesium.Math.toRadians(i.pitch?i.pitch:-90),roll:Cesium.Math.toRadians(i.roll?i.roll:0)}})},e.prototype.SetZoom=function(e){for(var t=$("#"+this.divID).width(),i=$("#"+this.divID).height(),n=(i<t?t:i)/1366,o=[],r=0;r<this.dmap.length;r++)o.push(this.dmap[r]*n);var s=[99999999999];for(r=1;r<o.length;++r)s[r]=(o[r-1]+o[r])/2;s[s.length]=0;var a=(s[e-1]+s[e])/2,l=this.GetViewCenter(),u=new Cesium.Cartesian3(l[0],l[1],a),c=this.GetView().camera,h=this.GetView().scene.globe.ellipsoid,p=Cesium.Cartesian3.fromDegrees(u.x,u.y,u.z,h);c.setView({destination:p,endTransform:Cesium.Matrix4.IDENTITY})},e.prototype.GetZoom=function(){for(var e=$("#"+this.divID).width(),t=$("#"+this.divID).height(),i=(t<e?e:t)/1366,n=[],o=0;o<this.dmap.length;o++)n.push(this.dmap[o]*i);var r=[99999999999];for(o=1;o<n.length;++o)r[o]=(n[o-1]+n[o])/2;r[r.length]=0;var s=this.GetView().camera.position,a=this.cesium.ellipsoid.cartesianToCartographic(s).height;for(o=0;o<r.length;++o)if(a>=r[o])return o;return r.length},e.prototype.GetViewRect=function(){var e=180/Math.PI,t=this.GetView().camera.computeViewRectangle();return[t.west*e,t.south*e,t.east*e,t.north*e]},e.prototype.SetViewRect=function(e,t,i,n,o){o=o||{},this.GetView().camera.flyTo({destination:Cesium.Rectangle.fromDegrees(e,t,i,n),duration:o.duration?o.duration:1})},e.prototype.GetPixelFromCoordinate=function(e,t){this.Screen2MapCoord([e,t])},e.prototype.Screen2MapCoord=function(e){var t={x:e[0],y:e[1]},i=this.cesium,n=i.scene.camera.getPickRay(t),o=i.scene.globe.pick(n,i.viewer.scene);if(!o)return null;var r=i.ellipsoid.cartesianToCartographic(o);return[(r.longitude/Math.PI*180).toFixed(6),(r.latitude/Math.PI*180).toFixed(6),r.height]},e.prototype.MapCoord2Screen=function(e){var t=e[0],i=e[1],n=e[2]?e[2]:0,o=this.cesium,r=Cesium.Cartesian3.fromDegrees(t,i,n),s=Cesium.SceneTransforms.wgs84ToWindowCoordinates(o.scene,r);return[s.x,s.y]},e.prototype.cartesianTo2MapCoord=function(e){var t=this.cesium.ellipsoid.cartesianToCartographic(e);return[parseFloat((t.longitude/Math.PI*180).toFixed(6)),parseFloat((t.latitude/Math.PI*180).toFixed(6)),t.height]},e.prototype.SetCursorStyle=function(e){$("#"+this.divID).css("cursor",e)},Map3DSDK.DefaultStyle=void 0,Map3DSDK.Style=function(e){},Map3DSDK.IconStyle=function(e){},Map3DSDK.GeomStyle=function(e){},Map3DSDK.TextStyle=function(e){},Map3DSDK.Icon=function(e){},Map3DSDK.Point=function(e,i,n){var o=t();o&&(0==n||(e instanceof Array?o.JW2MapCoord(e):o.JW2MapCoord([e,i])))},Map3DSDK.MultiPoint=function(e,i){var n,o=t();if(o){n=[];for(var r=0;r<e.length;r++)0==i?n.push(e[r]):n.push(o.JW2MapCoord(e[r]))}else n=e},Map3DSDK.Line=function(e,i){var n,o=t();if(o){n=[];for(var r=0;r<e.length;r++)0==i?n.push(e[r]):n.push(o.JW2MapCoord(e[r]))}else n=e},Map3DSDK.MultiLine=function(e,i,n){var o;if(t()){o=[];for(var r=0;r<e.length;r++)for(var s=0;s<e[r].length;s++)0==i?o.push(parseFloat(e[r][s])):o.push(parseFloat(this.JW2MapCoord(e[r][s])))}else o=e;var a;return a=n&&n.width?n.width:5,new Cesium.PolylineGeometry({positions:Cesium.Cartesian3.fromDegreesArray(o),width:a,vertexFormat:Cesium.PolylineColorAppearance.VERTEX_FORMAT})},Map3DSDK.Polygon=function(e,t){for(var i=e,n=[],o=0;o<i.length;o++)for(var r=0;r<i[o].length;r++)0==t?n.push(parseFloat(i[o][r])):n.push(parseFloat(this.JW2MapCoord(i[o][r])));for(o=1;o<e.length;o++);return new Cesium.PolygonGeometry({polygonHierarchy:new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArray(n)),height:0})},Map3DSDK.MultiPolygon=function(e){},Map3DSDK.Circle=function(e,t){var i=e.center,n=Map3DSDK.GetMap().GetCegore()._scene.globe._czGlobe._ellipsoid._maximumRadius;return t=Cesium.Math.toRadians(n*e.radius),new Cesium.CircleGeometry({center:Cesium.Cartesian3.fromDegrees(i[0],i[1]),radius:t})},Map3DSDK.Feature=function(e){},Map3DSDK.GetMap=function(){return this.map3DView},e.prototype.AddGeometrys=function(e,t,i,n,o){var r=this.GetView();o=o||{};var s;s=i&&i.color?i.color:[1,1,0,1];var a=new Cesium.GeometryInstance({id:e,geometry:t,asynchronous:!!o.asynchronous&&o.asynchronous,attributes:{color:new Cesium.ColorGeometryInstanceAttribute(s[0],s[1],s[2],s[3])}}),l=null;if(t._width)l=new Cesium.PolylineColorAppearance({translucent:!1});else{var u=Cesium.Material.fromType("Color",{color:new Cesium.Color(s[0],s[1],s[2],s[3])});l=new Cesium.EllipsoidSurfaceAppearance({material:u,aboveGround:!0})}var c=new Cesium.Primitive({geometryInstances:a,appearance:l});r.scene.primitives.add(c)},e.prototype.RemoveGeometrys=function(e){for(var t=this.GetView(),i=t.scene.primitives,n=0;n<i.length;n++){var o=i.get(n);if(o instanceof Cesium.Primitive&&o.getGeometryInstanceAttributes(e)){t.scene.primitives.remove(o);break}}},e.prototype.AddEntity=function(e,t,i,n,o){for(var r=[],s=t[0],a=0;a<s.length;a++)r.push(s[a][0]),r.push(s[a][1]);for(a=1;a<t.length;a++);Cesium.Material.fromType("Color",{color:new Cesium.Color(1,1,0,.45)}),o=o||{};var l,u=this.GetView();l="image"==o.type?new Cesium.ImageMaterialProperty({image:o.imgUrl,transparent:o.transparent}):"heatmap"==o.type?o.material:new Cesium.Color(1,1,0,.45),u.entities.add({id:e,name:e,polygon:{hierarchy:Cesium.Cartesian3.fromDegreesArray(r),extrudedHeight:0,perPositionHeight:!0,material:l,outline:!o.outline||o.outline,outlineColor:Cesium.Color.RED}})},e.prototype.GetEntity=function(e){var t=this.GetView().entities.getById(e);return t&&null!=t&&null!=t||(t=null),t},e.prototype.RemoveEntity=function(e){return this.GetView().entities.removeById(e)},e.prototype.AddFeatures=function(e,t,i,n){},e.prototype.AddBatchTextLayer=function(e){},e.prototype.AddTextLabel=function(e,t,i,n,o){o=o||{};var r,s,a=this.GetView(),l=a.entities.getById(e);if(s=o?(r=o.color||Cesium.Color.WHITE,o.pixelOffset||[0,0]):(r=Cesium.Color.WHITE,[0,0]),l)l.position.setValue(Cesium.Cartesian3.fromDegrees(parseFloat(t),parseFloat(i))),l.label.text.setValue(n);else{var u=o.height?o.height:0;l=a.entities.add({id:e,position:Cesium.Cartesian3.fromDegrees(parseFloat(t),parseFloat(i),parseFloat(u)),label:{text:n,font:"14pt monospace",fillColor:r,style:Cesium.LabelStyle.FILL_AND_OUTLINE,outlineWidth:2,verticalOrigin:Cesium.VerticalOrigin.Center,pixelOffset:new Cesium.Cartesian2(s[0],s[1])}})}return l},e.prototype.AddImageLabel=function(e,t,i,n,o,r,s){s=s||{};var a=this.GetView(),l=a.entities.getById(e);if(l)l.position.setValue(Cesium.Cartesian3.fromDegrees(parseFloat(t),parseFloat(i)));else{l=a.entities.add({id:e,position:Cesium.Cartesian3.fromDegrees(parseFloat(t),parseFloat(i)),billboard:{image:n,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,horizontalOrigin:Cesium.HorizontalOrigin.Center}});var u=this.GetView().scene;(l.handler=new Cesium.ScreenSpaceEventHandler(u.canvas)).setInputAction((function(e){for(var t=l,i=u.drillPick(e.position),n=0;n<i.length;n++)if(i[n].id.id==t.id){s.callback&&s.callback(e);break}}),Cesium.ScreenSpaceEventType.LEFT_CLICK)}return l},e.prototype.RemoveLabel=function(e){var t=this.GetView(),i=t.entities.getById(e);i&&i&&i.handler&&i.handler.destroy(),t.entities.removeById(e)},e.prototype.RemoveAllLabel=function(e){this.GetView().entities.removeAll()},e.prototype.AddControl=function(e){this.controls[e.name]=e.element},e.prototype.RemoveControl=function(e){if(e){var t=!1;for(var i in this.controls){var n=this.controls[i];if(n===e.element){t=!0,n.remove(),delete this.controls[i];break}}return t}},e.prototype.RemoveAllControl=function(){for(var e in this.controls){var t=this.controls[control.name];document.removeChild(t)}this.controls={}},e.prototype.AddCustomControl=function(e,t,i,n,o,r,s,a){var l=document.getElementById(e);null==l&&(l=document.createElement("button")),l.id=e,l.innerHTML=s,l.title=e,l.addEventListener("click",a,!1),l.addEventListener("touchstart",a,!1),t&&(l.style.backgroundColor=t),l.style.width="calc(100% - 0.1em)",l.style.height="calc(100% - 0.1em)";var u=document.createElement("div");if(u){u.className="gmap-custom-control3D",u.style.left=i+"px",u.style.top=n+"px",u.style.width=o+"px",u.style.height=r+"px",u.appendChild(l),document.body.appendChild(u);var c={};c.name=e,c.element=u,this.AddControl(c)}return c},e.prototype.RemoveCustomControl=function(e){var t=this.controls[control.name];document.removeChild(t),delete this.controls[control.name]},e.prototype.AddEventListener=function(e,t,i){var n;switch(e){case"click":n=Cesium.ScreenSpaceEventType.LEFT_CLICK;break;case"dblclick":n=Cesium.ScreenSpaceEventType.DBLEFT_CLICK;break;case"mousemove":n=Cesium.ScreenSpaceEventType.MOUSE_MOVE;break;case"leftDown":n=Cesium.ScreenSpaceEventType.LEFT_DOWN;break;case"leftup":n=Cesium.ScreenSpaceEventType.LEFT_UP;break;case"wheel":n=Cesium.ScreenSpaceEventType.WHEEL}this.cesium;var o=new Cesium.ScreenSpaceEventHandler(this.cegore.canvas);return o.setInputAction((function(e){t&&t(e)}),n,i),o},e.prototype.RemoveEventListener=function(e){return e.destroy()},e.prototype.IsEnableDragging=function(){return this.GetView().scene.screenSpaceCameraController.enableTranslate},e.prototype.EnableDragging=function(e){this.GetView().scene.screenSpaceCameraController.enableTranslate=e},e.prototype.IsEnableWheel=function(){return this.GetView().scene.screenSpaceCameraController.enableZoom},e.prototype.EnableWheel=function(e){this.GetView().scene.screenSpaceCameraController.enableZoom=e},e.prototype.IsEnableKeyboardPan=function(){return this.GetView().scene.screenSpaceCameraController.enableTranslate},e.prototype.EnableKeyboardPan=function(e){return this.GetView().scene.screenSpaceCameraController.enableTranslate=e},e.prototype.IsEnableKeyboardZoom=function(){return this.GetView().scene.screenSpaceCameraController.enableZoom},e.prototype.EnableKeyboardZoom=function(e){this.GetView().scene.screenSpaceCameraController.enableZoom=e},e.prototype.IsEnableRotate=function(){return this.GetView().scene.screenSpaceCameraController.enableRotate},e.prototype.EnableRotate=function(e){this.GetView().scene.screenSpaceCameraController.enableRotate=e},e.prototype.IsEnableTilt=function(){return this.GetView().scene.screenSpaceCameraController.enableTilt},e.prototype.EnableTilt=function(e){this.GetView().scene.screenSpaceCameraController.enableTilt=e},e.prototype.IsEnableLook=function(){return this.GetView().scene.screenSpaceCameraController.enableLook},e.prototype.EnableLook=function(e){this.GetView().scene.screenSpaceCameraController.enableLook=e},e.prototype.SetInputActive=function(e,t){},e.prototype.IsInputActive=function(e){return this.GetView().scene.screenSpaceCameraController.enableZoom},e.prototype.EnableInput=function(e){this.GetView().scene.screenSpaceCameraController.enableInputs=e},e.prototype.AddSingleImage=function(e){var t=e.name?e.name:"testE",i=e.url?e.url:"image/entity.jpg",n=e.polygon?e.polygon:[[[109.080842,25.002073],[105.91517,25.002073],[104.058488,24.996596],[104.053011,23.002989],[104.053011,21.003906],[105.728954,20.998429],[107.919731,21.003906],[109.04798,20.998429],[111.047063,20.998429],[111.047063,22.000709],[111.047063,24.476286],[111.05254,25.002073]]],o={type:"image",imgUrl:i,transparent:!!e.transparent&&e.transparent};this.AddEntity(t,n,void 0,void 0,o)},e.prototype.RemoveSingImage=function(e){e=e,this.RemoveEntity(e)},Map3DSDK.InfoWindow=function(e,t,i){e[2]||(e[2]=0),this.InfoWindowPoint=e,this.InfoWindowSite=i,this.divid=i.divid?i.divid:"trackPopUp";var n='<div id="'+this.divid+'" style="display:block;"><div id="'+this.divid+'Content" class="leaflet-popup" style="top:5px;left:0;"><a class="leaflet-popup-close-button" data_id ="'+this.divid+'" href="#"></a><div class="leaflet-popup-content-wrapper"><div id="'+this.divid+'Link" class="leaflet-popup-content" style="max-width: 300px;"></div></div><div class="leaflet-popup-tip-container"><div class="leaflet-popup-tip"></div></div></div></div>';$("#"+i.viewer.divID).append(n),$(".cesium-selection-wrapper").show(),$("#"+this.divid+"Link").empty(),$("#"+this.divid+"Link").append(t);var o=i.viewer.MapCoord2Screen([parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2])]),r=new Cesium.Cartesian2(parseFloat(o[0]),parseFloat(o[1]));c(r,i),$("#"+this.divid).hide(),this.viewer=i.viewer,i.viewer;var s=i.viewer.GetCesium().viewer,a=s.scene,l=this,u=a.postRender.addEventListener((function(){var e;e=Cesium.Cartesian3.fromDegrees(parseFloat(l.InfoWindowPoint[0]),parseFloat(l.InfoWindowPoint[1]),parseFloat(l.InfoWindowPoint[2]));try{var t=Cesium.SceneTransforms.wgs84ToWindowCoordinates(s.scene,e);t=new Cesium.Cartesian2(parseFloat(t.x),parseFloat(t.y)),r.x===t.x&&r.y===t.y||(c(t,l.InfoWindowSite),r=t)}catch(e){}}));function c(e,t){var i=t;i&&null!=i?(i.xoffset||(i.xoffset=0),i.yoffset||(i.yoffset=0),i.positioning||(i.positioning="bottom-center")):i={xoffset:0,yoffset:0,positioning:"bottom-center"};var n,o,r=i.positioning;o=0<r.indexOf("top")?e.y+2+i.yoffset:e.y-$("#"+i.divid+"Content").height()+2+i.yoffset,n=0<r.indexOf("left")?e.x+10+i.xoffset:0<r.indexOf("right")?e.x-$("#"+i.divid+"Content").width()+10+i.xoffset:e.x-$("#"+i.divid+"Content").width()/2+10+i.xoffset,$("#"+i.divid+"Content").css("transform","translate3d("+n+"px, "+o+"px, 0)")}return this.addHandler=u,$(".leaflet-popup-close-button").click((function(){var e=$(this).attr("data_id");return $("#"+e).hide(),$("#"+e+"Link").empty(),$(".cesium-selection-wrapper").hide(),u.call(),!1})),this},Map3DSDK.InfoWindow.prototype.SetContent=function(e){var t=this.InfoWindowSite;$("#"+t.divid+"Link").empty(),$("#"+t.divid+"Link").append(e)},Map3DSDK.InfoWindow.prototype.SetPosition=function(e){e[2]||(e[2]=0);var t=this.viewer.MapCoord2Screen([parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2])]),i=new Cesium.Cartesian2(parseFloat(t[0]),parseFloat(t[1]));this.InfoWindowPoint=e;var n=this.InfoWindowSite;n&&null!=n?(n.xoffset||(n.xoffset=0),n.yoffset||(n.yoffset=0),n.positioning||(n.positioning="bottom-center")):n={xoffset:0,yoffset:0,positioning:"bottom-center"};var o,r,s=n.positioning;r=0<s.indexOf("top")?i.y+2+n.yoffset:i.y-$("#"+n.divid+"Content").height()+2+n.yoffset,o=0<s.indexOf("left")?i.x+10+n.xoffset:0<s.indexOf("right")?i.x-$("#"+n.divid+"Content").width()+10+n.xoffset:i.x-$("#"+n.divid+"Content").width()/2+10+n.xoffset,$("#"+n.divid+"Content").css("transform","translate3d("+o+"px, "+r+"px, 0)")},e.prototype.OpenInfoWindow=function(e){$("#"+e.divid).show()},e.prototype.UpdatePosition=function(e,t){e&&e.SetPosition(t)},e.prototype.CloseInfoWindow=function(e){$("#"+e.divid).hide(),$("#"+e.divid).remove(),e={}},e.prototype.AddModel=function(e,t,i){var n=this.GetModel(e);null==n&&null==n||this.RemoveModel(e);var o=this.GetView(),r=t.rotate?t.rotate:[0,0,0],s=[];if(t.position){var a=t.position;s[0]=parseFloat(a[0]),s[1]=parseFloat(a[1]),s[2]=a[2]?parseFloat(a[2]):0}else s=[110.05254,25.002073,0];var l=Cesium.Cartesian3.fromDegrees(s[0],s[1],s[2]),u=Cesium.Math.toRadians(parseFloat(r[0])),c=Cesium.Math.toRadians(parseFloat(r[1])),h=Cesium.Math.toRadians(parseFloat(r[2])),p=new Cesium.HeadingPitchRoll(u,c,h),f=Cesium.Transforms.headingPitchRollQuaternion(l,p),d=o.entities.add({position:l,shadows:!0,id:e||"testModel",name:e||"testModel",orientation:f,model:{uri:t.url?t.url:"./gltf/test.gltf"}});return 0==i||o.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(s[0],s[1],s[2]+1e3)}),d},e.prototype.GetModel=function(e){return this.GetView(),this.GetEntity(e)},e.prototype.PickModel=function(e){var t=this.GetCegore(),i=(t=this.GetView()).scene,n={},o={x:parseFloat(e.x),y:parseFloat(e.y)},r=i.pick(o);if(i.pickPositionSupported&&Cesium.defined(r)&&r.node){var s=t.scene.pickPosition(o);if(Cesium.defined(s)){var a=Cesium.Cartographic.fromCartesian(s),l=Cesium.Math.toDegrees(a.longitude),u=Cesium.Math.toDegrees(a.latitude),c=a.height;n.coord={x:l.toFixed(6),y:u.toFixed(6),z:c.toFixed(6)}}}else{var h=t.camera.getPickRay(o);s=t.scene.globe.pick(h,i),a=Cesium.Cartographic.fromCartesian(s),l=Cesium.Math.toDegrees(a.longitude),u=Cesium.Math.toDegrees(a.latitude),n.coord={x:l.toFixed(6),y:u.toFixed(6),z:a.height.toFixed(6)}}return n.models=r,n},e.prototype.RotateModel=function(e,t){var i=this.GetModel(e),n=i.position._value,o=Cesium.Math.toRadians(parseFloat(t[0])),r=Cesium.Math.toRadians(parseFloat(t[1])),s=Cesium.Math.toRadians(parseFloat(t[2])),a=new Cesium.HeadingPitchRoll(o,r,s),l=Cesium.Transforms.headingPitchRollQuaternion(n,a);i.orientation=l},e.prototype.RemoveModel=function(e){this.GetView().entities.removeById(e)},e.prototype.createDnyLinePoints=function(e,t,i){var n=[];lat1=Math.PI/180*e[1],lat2=Math.PI/180*t[1],lon1=Math.PI/180*e[0],lon2=Math.PI/180*t[0];var o=Math.cos(lat1)*Math.cos(lat2)*Math.cos(lon1-lon2)+Math.sin(lat1)*Math.sin(lat2);1<o&&(o=1),o<-1&&(o=-1);var r=Math.acos(o),s=Math.sin(lon2-lon1)*Math.cos(lat2),a=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1);azi=Math.atan2(s,a);for(var l=0;l<=100;++l){var u=.02*l,c=1e6*(2*u-u*u)*i;if(0===l)n.push(e[0]),n.push(e[1]),n.push(c);else if(100===l)n.push(t[0]),n.push(t[1]),n.push(c);else{var h=Math.sin(lat1),p=Math.cos(lat1),f=Math.sin(.01*r*l),d=Math.cos(.01*r*l),m=Math.sin(azi),g=Math.cos(azi),_=Math.asin(h*d+p*f*g),y=lon1+Math.atan2(m*f*p,d-h*Math.sin(_));n.push(180*y/Math.PI),n.push(180*_/Math.PI),n.push(c)}}return n},e.prototype.createDnyLine=function(e){var t=this.GetView(),i=this.createDnyLinePoints(e.stponit,e.enpoint,e.heightRatio);if(e.flymove){var n=new PolylineDynMaterialProperty({color:e.bottomColor,color2:e.flyColor,lineLength:1,lineSpeed:1});t.entities.add({name:"Glowing blue line on the surface",polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(i),width:e.linewidth?e.linewidth:3,material:n,shadows:Cesium.ShadowMode.ENABLED,followSurface:!1}}),this.cesium.scene.preRender.addEventListener((function(e){n.update(.01)}))}else t.entities.add({name:"Glowing blue line on the surface",polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(i),width:e.linewidth?e.linewidth:3,material:e.noflycolor,shadows:Cesium.ShadowMode.ENABLED,followSurface:!1}})},e.prototype.shearzmap=function(e){for(var t=this.GetView(),i=t.scene.globe,n=e.bootomface.midpoint,o=Cesium.Cartesian3.fromDegrees(n[0],n[1],n[2]),r=t.entities.add({position:o,polygon:{hierarchy:Cesium.Cartesian3.fromDegreesArray(e.bootomface.ponits),height:e.bootomface.bheight?e.bootomface.bheight:-50,material:e.bootomface.facematmaterial?e.bootomface.facematmaterial:Cesium.Color.RED}}),s=[],a=0;a<e.plans.length;a++){var l=e.plans[a],u=new Cesium.ClippingPlane(new Cesium.Cartesian3(l[0],l[1],l[2]),l[3]);s.push(u)}i.depthTestAgainstTerrain=!0,i.clippingPlanes=new Cesium.ClippingPlaneCollection({modelMatrix:r.computeModelMatrix(Cesium.JulianDate.now()),planes:s,shearedgewidth:e.shearedgewidth?e.shearedgewidth:1,shearedgeclor:e.shearedgeclor?e.shearedgeclor:Cesium.Color.WHITE,enabled:!0}),t.trackedEntity=r;var c=e.verticalface;if(c)for(a=0;a<c.length;a++){var h=c[a].topheight;h&&0!==h||(h=1e-6);var p=c[a].botheight;h||(p=50);var f=c[a].points,d=c[a].pointe;t.entities.add({wall:{positions:Cesium.Cartesian3.fromDegreesArrayHeights([f[0],f[1],h,d[0],d[1],h]),minimumHeights:[p,p],material:c[a].facematerial?c[a].facematerial:Cesium.Color.RED,outline:!1}})}},e.prototype.addHeatmap=function(e,t){var i=e;this.GetView().entities.removeById(i);var n=document.createElement("div");n.setAttribute("style","width:1000px;height:1000px;margin: 0px;display: none;"),document.body.appendChild(n);for(var o=this.GetZoom(),r=parseInt(17150/(o*o*o)),s=t.gradient?t.gradient:{.9:"red",.8:"orange",.7:"yellow",.5:"blue",.3:"green"},a=h337.create({container:n,radius:r,blur:.95,gradient:s,opacity:.8}),l=t.data,u=0,c=0;c<l.length;c++)parseFloat(l[c].value)>u&&(u=parseFloat(l[c].value));a.setData({max:u,data:l});var h=t.polygon?t.polygon:[[[105.91517,25.002073],[104.058488,24.996596],[104.053011,23.002989],[104.053011,21.003906],[105.728954,20.998429],[107.919731,21.003906],[109.04798,20.998429],[111.047063,20.998429],[111.047063,22.000709],[111.047063,24.476286],[111.05254,25.002073]]],p={type:"heatmap",material:a._renderer.canvas,outline:!1};this.AddEntity(i,h,void 0,void 0,p);var f=this,d={heatmapID:this.AddEventListener("wheel",(function(){var e=f.GetZoom(),t=parseInt(17150/(e*e*e)),o=h337.create({container:n,radius:t,opacity:.8,blur:.95,gradient:s});o.setData({max:u,data:l}),f.GetEntity(i).polygon.material=o._renderer.canvas}))},m=this.handlerArray;m.push(d),this.handlerArray=m},Map3DSDK.Map=e}();var Cegore,GmMap3D=Map3DSDK,ZMap3D=Map3DSDK;!function(e){var t=function(){function t(t){if(!e.TypeCheck.isObject(t))throw"Invalid iamge info";var i=this.createProvider(t);if(!e.TypeCheck.isDefined(i))throw'Can not create image layer by type : "'+t.type+'"';this._name=e.AutoNames.genName(t.name,"NetCDFImageLayer"),this._type=t.type,this._czLayer=new Cesium.ImageryLayer(i),(this._czLayer._ZMapLayer=this)._params=e.TypeCheck.defaultValue(t.params,{}),this.visible=e.TypeCheck.defaultValue(t.visible,!0),this.alpha=e.TypeCheck.defaultValue(t.alpha,1)}return Object.defineProperty(t.prototype,"_czlayer",{get:function(){return this._czLayer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e,this._czLayer.show=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){this._alpha=e,this._czLayer.alpha=e},enumerable:!0,configurable:!0}),t.prototype.createProvider=function(t){var i={};for(var n in t)this.hasOwnProperty(n)||(i[n]=t[n]);return e.Providers.ImageProviders.createProvider(t.type,i)},t}();e.NetCDFImageLayer=t}(Cegore||(Cegore={})),function(e){var t=function(){function t(t){this._layers=new e.HashMap,this._globe=t,this._czLayers=this._globe._czglobe.imageryLayers}return Object.defineProperty(t.prototype,"length",{get:function(){return this._czLayers.length},enumerable:!0,configurable:!0}),t.prototype.add=function(t,i){if(e.TypeCheck.isInstanceOf(t,e.NetCDFImageLayer)||(t=new e.NetCDFImageLayer(t)),this._layers.exist(t.name))throw"image layer named :"+t.name+" allready exist.";this._czLayers.add(t._czlayer,i),this._layers.put(t.name,t)},t.prototype.get=function(t){if(e.TypeCheck.isNumber(t)){var i=this._czLayers.get(t);if(i)return i._ZMapLayer}else if(e.TypeCheck.isString(t))return this._layers.get(t);throw"id must be string or number"},t.prototype.remove=function(t){if(e.TypeCheck.isNumber(t)&&e.TypeCheck.isString(t))this.remove(this.get(t));else if(e.TypeCheck.isInstanceOf(t,e.NetCDFImageLayer)){var i=t;this._czLayers.remove(i._czlayer),this._layers.remove(t.name)}throw"id must be string or number or NetCDFImageLayer"},t.prototype.removeAll=function(){this._czLayers.removeAll(),this._layers.removeAll()},t.prototype.clear=function(){this.removeAll()},t}();e.NetCDFImageLayerCollection=t}(Cegore||(Cegore={})),function(e){var t=function(){function e(t){this.getTileCredits=function(e,t,i){},this.requestImage=function(t,i,n){if(!this._ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");var o=e.buildImageUrl(this,t,i,n);return Cesium.ImageryProvider.loadImage(this,o)};var i=new Cesium.Credit("WMTS");t=Cesium.defaultValue(t,{});var n=Cesium.defaultValue(t.url,"http://localhost:88/wmts");/\/$/.test(n),this._initurl=t.url,this._url=n,this._params=t.params,this._proxy=t.proxy,this._tileDiscardPolicy=t.tileDiscardPolicy,this._scheme=Cesium.defaultValue(t.scheme,"Geographic"),"WebMercator"===this._scheme?this._tilingScheme=new Cesium.WebMercatorTilingScheme({ellipsoid:t.ellipsoid}):0<this._scheme.indexOf("level-0")?this._tilingScheme=new Cesium.GeographicTilingScheme({ellipsoid:t.ellipsoid}):this._tilingScheme=new Cesium.GeographicTilingScheme({ellipsoid:t.ellipsoid,numberOfLevelZeroTilesX:8,numberOfLevelZeroTilesY:4}),this._tileWidth=256,this._tileHeight=256,this._minimumLevel=Cesium.defaultValue(t.minimumLevel,0),this._maximumLevel=Cesium.defaultValue(t.maximumLevel,18),this._extent=Cesium.defaultValue(t.extent,this._tilingScheme.extent),this._rectangle=Cesium.defaultValue(t.rectangle,this._tilingScheme.rectangle),this._errorEvent=new Cesium.Event,this._ready=!0;var o=Cesium.defaultValue(t.credit,i);"string"==typeof o&&(o=new Cesium.Credit(o)),this._credit=o}return Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasAlphaChannel",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return this._proxy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tileWidth",{get:function(){return this._tileWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tileHeight",{get:function(){return this._tileHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximumLevel",{get:function(){return this._maximumLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimumLevel",{get:function(){return this._minimumLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tilingScheme",{get:function(){return this._tilingScheme},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extent",{get:function(){return this._extent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rectangle",{get:function(){return this._rectangle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ileDiscardPolicy",{get:function(){return this._tileDiscardPolicy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorEvent",{get:function(){return this._errorEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"credit",{get:function(){return this._credit},enumerable:!0,configurable:!0}),e.getRealUrl=function(e){var t=e;if(e.indexOf("catalogws")<0)return e;var i=this;return t=(t=e.replace("/catalogws","")).replace("/tile/map","")+"?f=json",$.ajax({url:t,dataType:"json",async:!1,success:function(n){t=i.JudgePower(n)<2?n.attributes.url:e},error:function(i){t=e}}),t},e.JudgePower=function(e){return""==e.descriptions.||""==e.descriptions.?1:""==e.descriptions.?2:3},e.buildImageUrl=function(e,t,i,n){var o=e._proxy;"WebMercator"!==e._scheme&&(0<e._scheme.indexOf("level-0")?n+=1:n=n),null==e.realUrl&&(e.realUrl=this.getRealUrl(e._initurl));var r=e._tilingScheme.tileXYToRectangle(t,i,n-1),s=[Cesium.Math.toDegrees(r.west),Cesium.Math.toDegrees(r.south),Cesium.Math.toDegrees(r.east),Cesium.Math.toDegrees(r.north)],a=e.realUrl+"?lvl="+n+"&col="+i+"&row="+t+"&west="+s[0]+"&south="+s[1]+"&east="+s[2]+"&north="+s[3],l=e._params;for(var u in l)a+="&"+u+"="+l[u];return Cesium.defined(o)&&(a=o.getURL(a)),a},e}(),i=function(){function e(){}return e.prototype.createProvider=function(e){return new t(e)},e}();e.Providers.ImageProviders.regFactory("ZMapNetCDFImage",new i)}(Cegore||(Cegore={})),Cesium.MousePositionCtl=function(e){var t=e.map;this.map3d=t,this.cesium=t.GetMap(),this.style=e.style?e.style:{top:0,left:0},this.Init()},Cesium.MousePositionCtl.prototype={Init:function(){this._createBar(),this._registerEvent()},_createBar:function(){var e=this.style,t=e.top,i=e.left,n=parseInt($("canvas").css("height"))+t-20,o='<div id="bottom" class="gmap-mouse-position" style="height:18px; top:'+(n+="px")+"; left:"+i+'px;" border="0" cellspacing="0" cellpadding="0"></div>';$("body").append(o)},_registerEvent:function(){var e=this.cesium;new Cesium.ScreenSpaceEventHandler(e.scene._canvas).setInputAction((function(t){var i=e.scene.camera.getPickRay(t.endPosition),n=e.scene.globe.pick(i,e.viewer.scene);if(n){var o=e.ellipsoid.cartesianToCartographic(n),r=": "+(o.longitude/Math.PI*180).toFixed(6)+" ";r+=": "+(o.latitude/Math.PI*180).toFixed(6)+" ",r+=": "+o.height.toFixed(2)+" ",$("#bottom").html(r)}else $("#bottom").html("")}),Cesium.ScreenSpaceEventType.MOUSE_MOVE)}};var Map3DSDKLib=Map3DSDKLib||{};!function(){var e=function(){var t=Cesium.Ellipsoid.WGS84;function i(e){var t=(this._map=e).GetMap();this._scene=t.scene,this._surfaces=[],this.initialiseHandlers(),this.enhancePrimitives()}i.prototype.EnableInput=function(e){this._scene.screenSpaceCameraController.enableInputs=e},i.prototype.StartPointTool=function(e,t){this.ClearAll(),this.startDrawingPoint({callstart:e,callback:t})},i.prototype.StartLineTool=function(e,t){this.ClearAll(),this.startDrawingPolyline({callstart:e,callback:t})},i.prototype.StartSingleLineTool=function(e,t){this.ClearAll(),this.startDrawingSingleline({callstart:e,callback:t})},i.prototype.StartRectTool=function(e,t){this.ClearAll(),this.startDrawingExtent({callstart:e,callback:t})},i.prototype.StartCircleTool=function(e,t){this.ClearAll(),this.startDrawingCircle({callstart:e,callback:t})},i.prototype.StartPolygonTool=function(e,t,i){this.ClearAll();var n={callstart:e,callback:t};i&&(n.lineWidth=i),this.startDrawingPolygon(n)},i.prototype.StartAnyPolygonTool=function(e,t){},i.prototype.ClearAll=function(){this.disableAllEditMode(),this.editCleanUp&&this.editCleanUp()},i.prototype.ClearGeometry=function(){this.disableAllEditMode()},i.prototype.initialiseHandlers=function(){var e,t=this._scene,i=this,n=new Cesium.ScreenSpaceEventHandler(t.canvas);function o(e,n){if(1!=i._handlersMuted){var o=t.pick(n);o&&o.primitive&&o.primitive[e]&&o.primitive[e](n)}}n.setInputAction((function(e){o("leftClick",e.position)}),Cesium.ScreenSpaceEventType.LEFT_CLICK),n.setInputAction((function(e){o("leftDoubleClick",e.position)}),Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),n.setInputAction((function(n){if(1!=i._handlersMuted){var o=t.pick(n.endPosition);!e||o&&e==o.primitive||((!e.isDestroyed||!e.isDestroyed())&&e.mouseOut(n.endPosition),e=null),o&&o.primitive&&((o=o.primitive).mouseOut&&(e=o),o.mouseMove&&o.mouseMove(n.endPosition))}}),Cesium.ScreenSpaceEventType.MOUSE_MOVE),n.setInputAction((function(e){o("leftUp",e.position)}),Cesium.ScreenSpaceEventType.LEFT_UP),n.setInputAction((function(e){o("leftDown",e.position)}),Cesium.ScreenSpaceEventType.LEFT_DOWN)},i.prototype.setListener=function(e,t,i){e[t]=i},i.prototype.muteHandlers=function(e){this._handlersMuted=e,this.EnableInput(!e)},i.prototype.registerEditableShape=function(e){var t=this;v(e,"mouseMove",(function(i){e.setHighlighted(!0),e._editMode||t._tooltip.showAt(i,"")})),v(e,"mouseOut",(function(i){e.setHighlighted(!1),t._tooltip.setVisible(!1)})),v(e,"leftClick",(function(t){e.setEditMode(!0)}))},i.prototype.startDrawing=function(e){this.disableAllEditMode(),this.editCleanUp&&this.editCleanUp(),this.editCleanUp=e,this.muteHandlers(!0)},i.prototype.stopDrawing=function(){this.editCleanUp&&(this.editCleanUp(),this.editCleanUp=null),this.muteHandlers(!1)},i.prototype.disableAllHighlights=function(){this.setHighlighted(void 0)},i.prototype.setHighlighted=function(e){this._highlightedSurface&&!this._highlightedSurface.isDestroyed()&&this._highlightedSurface!=e&&this._highlightedSurface.setHighlighted(!1),this._highlightedSurface=e},i.prototype.disableAllEditMode=function(){this.setEdited(void 0)},i.prototype.setEdited=function(e){this._editedSurface&&!this._editedSurface.isDestroyed()&&this._editedSurface.setEditMode(!1),this._editedSurface=e};var n=Cesium.Material.fromType(Cesium.Material.ColorType);n.uniforms.color=new Cesium.Color(1,1,0,.5);var o={ellipsoid:Cesium.Ellipsoid.WGS84,textureRotationAngle:0,height:60,asynchronous:!0,show:!0,debugShowBoundingVolume:!1},r=y(o,{appearance:new Cesium.EllipsoidSurfaceAppearance({aboveGround:!1}),material:n,granularity:Math.PI/180}),s=y(o,{}),a=(y(o,{}),y(o,{})),l=y(r,{rotation:0}),u=y(o,{width:5,geodesic:!0,granularity:1e4,appearance:new Cesium.PolylineMaterialAppearance({aboveGround:!1}),material:n}),c=function(){function e(){}return e.prototype.initialiseOptions=function(e){_(this,e),this._ellipsoid=void 0,this._granularity=void 0,this._height=void 0,this._textureRotationAngle=void 0,this._id=void 0,this._createPrimitive=!0,this._primitive=void 0,this._outlinePolygon=void 0},e.prototype.setAttribute=function(e,t){this[e]=t,this._createPrimitive=!0},e.prototype.getAttribute=function(e){return this[e]},e.prototype.update=function(e,t,i){if(!Cesium.defined(this.ellipsoid))throw new Cesium.DeveloperError("this.ellipsoid must be defined.");if(!Cesium.defined(this.appearance))throw new Cesium.DeveloperError("this.material must be defined.");if(this.granularity<0)throw new Cesium.DeveloperError("this.granularity and scene2D/scene3D overrides must be greater than zero.");if(this.show&&(this._createPrimitive||Cesium.defined(this._primitive))){if(this._createPrimitive||this._ellipsoid!==this.ellipsoid||this._granularity!==this.granularity||this._height!==this.height||this._textureRotationAngle!==this.textureRotationAngle||this._id!==this.id){var n=this.getGeometry();if(!n)return;this._createPrimitive=!1,this._ellipsoid=this.ellipsoid,this._granularity=this.granularity,this._height=this.height,this._textureRotationAngle=this.textureRotationAngle,this._id=this.id,this._primitive=this._primitive&&this._primitive.destroy(),this._primitive=new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:n,id:this.id,pickPrimitive:this}),appearance:this.appearance,asynchronous:this.asynchronous}),this._outlinePolygon=this._outlinePolygon&&this._outlinePolygon.destroy(),this.strokeColor&&this.getOutlineGeometry&&(console.log(e),this._outlinePolygon=new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:this.getOutlineGeometry(),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(this.strokeColor)}}),appearance:new Cesium.PerInstanceColorAppearance({flat:!0,renderState:{depthTest:{enabled:!0},lineWidth:1}})}))}var o=this._primitive;o.appearance.material=this.material,o.debugShowBoundingVolume=this.debugShowBoundingVolume,o.update(e,t,i),this._outlinePolygon&&this._outlinePolygon.update(e,t,i)}},e.prototype.isDestroyed=function(){return!1},e.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Cesium.destroyObject(this)},e.prototype.setStrokeStyle=function(e,t){this.strokeColor&&this.strokeColor.equals(e)&&this.strokeWidth==t||(this._createPrimitive=!0,this.strokeColor=e,this.strokeWidth=t)},e}();i.ExtentPrimitive=function(){function e(e){if(!Cesium.defined(e.extent))throw new Cesium.DeveloperError("Extent is required");e=y(e,r),this.initialiseOptions(e),this.setExtent(e.extent)}return(e.prototype=new c).setExtent=function(e){this.setAttribute("extent",e)},e.prototype.getExtent=function(){return this.getAttribute("extent")},e.prototype.getGeometry=function(){if(Cesium.defined(this.extent))return new Cesium.RectangleGeometry({rectangle:this.extent,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},e.prototype.getOutlineGeometry=function(){return new Cesium.RectangleOutlineGeometry({rectangle:this.extent})},e}(),i.PointPrimitive=function(){function e(e){if(!Cesium.defined(e.center)||!Cesium.defined(e.radius))throw new Cesium.DeveloperError("Center and radius are required");e=y(e,r),this.initialiseOptions(e),this.setRadius(e.radius)}return(e.prototype=new c).setCenter=function(e){this.setAttribute("center",e)},e.prototype.setRadius=function(e){this.setAttribute("radius",Math.max(.1,e))},e.prototype.getCenter=function(){return this.getAttribute("center")},e.prototype.getRadius=function(){return this.getAttribute("radius")},e.prototype.getGeometry=function(){if(Cesium.defined(this.center)&&Cesium.defined(this.radius))return new Cesium.CircleGeometry({center:this.center,radius:this.radius,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},e.prototype.getOutlineGeometry=function(){return new Cesium.CircleOutlineGeometry({center:this.getCenter(),radius:this.getRadius()})},e}(),i.PolylinePrimitive=function(){function e(e){e=y(e,u),this.initialiseOptions(e)}return(e.prototype=new c).setPositions=function(e){this.setAttribute("positions",e)},e.prototype.setWidth=function(e){this.setAttribute("width",e)},e.prototype.setGeodesic=function(e){this.setAttribute("geodesic",e)},e.prototype.getPositions=function(){return this.getAttribute("positions")},e.prototype.getWidth=function(){return this.getAttribute("width")},e.prototype.getGeodesic=function(e){return this.getAttribute("geodesic")},e.prototype.getGeometry=function(){if(Cesium.defined(this.positions)&&!(this.positions.length<2))return new Cesium.PolylineGeometry({positions:this.positions,height:this.height,width:this.width<1?1:this.width,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,ellipsoid:this.ellipsoid})},e}(),i.PolygonPrimitive=function(){function e(e){e=y(e,r),this.initialiseOptions(e),this.isPolygon=!0}return(e.prototype=new c).setPositions=function(e){this.setAttribute("positions",e)},e.prototype.getPositions=function(){return this.getAttribute("positions")},e.prototype.getGeometry=function(){if(Cesium.defined(this.positions)&&!(this.positions.length<3))return Cesium.PolygonGeometry.fromPositions({positions:this.positions,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},e.prototype.getOutlineGeometry=function(){return Cesium.PolygonOutlineGeometry.fromPositions({positions:this.getPositions()})},e}(),i.CirclePrimitive=function(){function e(e){if(!Cesium.defined(e.center)||!Cesium.defined(e.radius))throw new Cesium.DeveloperError("Center and radius are required");e=y(e,r),this.initialiseOptions(e),this.setRadius(e.radius)}return(e.prototype=new c).setCenter=function(e){this.setAttribute("center",e)},e.prototype.setRadius=function(e){this.setAttribute("radius",Math.max(.1,e))},e.prototype.getCenter=function(){return this.getAttribute("center")},e.prototype.getRadius=function(){return this.getAttribute("radius")},e.prototype.getGeometry=function(){if(Cesium.defined(this.center)&&Cesium.defined(this.radius))return new Cesium.CircleGeometry({center:this.center,radius:this.radius,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},e.prototype.getOutlineGeometry=function(){return new Cesium.CircleOutlineGeometry({center:this.getCenter(),radius:this.getRadius()})},e}(),i.EllipsePrimitive=function(){function e(e){if(!(Cesium.defined(e.center)&&Cesium.defined(e.semiMajorAxis)&&Cesium.defined(e.semiMinorAxis)))throw new Cesium.DeveloperError("Center and semi major and semi minor axis are required");e=y(e,l),this.initialiseOptions(e)}return(e.prototype=new c).setCenter=function(e){this.setAttribute("center",e)},e.prototype.setSemiMajorAxis=function(e){e<this.getSemiMinorAxis()||this.setAttribute("semiMajorAxis",e)},e.prototype.setSemiMinorAxis=function(e){e>this.getSemiMajorAxis()||this.setAttribute("semiMinorAxis",e)},e.prototype.setRotation=function(e){return this.setAttribute("rotation",e)},e.prototype.getCenter=function(){return this.getAttribute("center")},e.prototype.getSemiMajorAxis=function(){return this.getAttribute("semiMajorAxis")},e.prototype.getSemiMinorAxis=function(){return this.getAttribute("semiMinorAxis")},e.prototype.getRotation=function(){return this.getAttribute("rotation")},e.prototype.getGeometry=function(){if(Cesium.defined(this.center)&&Cesium.defined(this.semiMajorAxis)&&Cesium.defined(this.semiMinorAxis))return new Cesium.EllipseGeometry({ellipsoid:this.ellipsoid,center:this.center,semiMajorAxis:this.semiMajorAxis,semiMinorAxis:this.semiMinorAxis,rotation:this.rotation,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},e.prototype.getOutlineGeometry=function(){return new Cesium.EllipseOutlineGeometry({center:this.getCenter(),semiMajorAxis:this.getSemiMajorAxis(),semiMinorAxis:this.getSemiMinorAxis(),rotation:this.getRotation()})},e}();var h={iconUrl:"./Images/dragIcon.png",shiftX:0,shiftY:0},p={iconUrl:"./Images/dragIcon.png",shiftX:0,shiftY:0},f={iconUrl:"./Images/dragIconLight.png",shiftX:0,shiftY:0};function d(e){return t.cartographicArrayToCartesianArray([Cesium.Rectangle.northwest(e),Cesium.Rectangle.northeast(e),Cesium.Rectangle.southeast(e),Cesium.Rectangle.southwest(e)])}function m(e,t){var i=new Cesium.Rectangle;i.west=Math.min(e.longitude,t.longitude),i.east=Math.max(e.longitude,t.longitude),i.south=Math.min(e.latitude,t.latitude),i.north=Math.max(e.latitude,t.latitude);var n=Cesium.Math.EPSILON7;return i.east-i.west<n&&(i.east+=2*n),i.north-i.south<n&&(i.north+=2*n),i}function g(e,t){if(null==e||"object"!=typeof e)return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);for(var i in t=t||new e.constructor,e)t[i]=void 0===t[i]?g(e[i],null):t[i];return t}function _(e,t){var i;for(i in e=e||{},t)void 0===e[i]&&(e[i]=g(t[i]))}function y(e,t){var i,n=g(e);for(i in t)void 0===n[i]&&(n[i]=g(t[i]));return n}function v(e,t,i){e[t]=i}function b(e){e._listeners={},e.addListener=function(e,t){return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this._listeners[e].length},e.executeListeners=function(e,t){if(this._listeners[e.name]&&0<this._listeners[e.name].length)for(var i=0;i<this._listeners[e.name].length;i++)this._listeners[e.name][i](e);else t&&t(e)}}return i.prototype.createBillboardGroup=function(e,t,n){var o=new i.BillboardGroup(this,t);return o.addBillboards(e,n),o},(i.BillboardGroup=function(e,t){this._drawHelper=e,this._scene=e._scene,this._options=y(t,h);var i=new Cesium.BillboardCollection;this._scene.primitives.add(i),this._billboards=i,this._orderedBillboards=[]}).prototype.createBillboard=function(e,i){var n=this._billboards.add({show:!0,position:e,pixelOffset:new Cesium.Cartesian2(this._options.shiftX,this._options.shiftY),eyeOffset:new Cesium.Cartesian3(0,0,0),horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.CENTER,scale:1,image:this._options.iconUrl,height:500,color:new Cesium.Color(1,1,1,1)});if(i){var o=this,r=this._scene.screenSpaceCameraController;function s(e){r.enableRotate=e}function a(){for(var e=0,t=o._orderedBillboards.length;e<t&&o._orderedBillboards[e]!=n;++e);return e}i.dragHandlers&&(o=this,v(n,"leftDown",(function(e){function r(e){l.destroy(),s(!0),i.dragHandlers.onDragEnd&&i.dragHandlers.onDragEnd(a(),e)}var l=new Cesium.ScreenSpaceEventHandler(o._scene.canvas);l.setInputAction((function(e){var s=o._scene.camera.pickEllipsoid(e.endPosition,t);s?function(e){n.position=e;for(var t=0,r=o._orderedBillboards.length;t<r&&o._orderedBillboards[t]!=n;++t);i.dragHandlers.onDrag&&i.dragHandlers.onDrag(a(),e)}(s):r(s)}),Cesium.ScreenSpaceEventType.MOUSE_MOVE),l.setInputAction((function(e){r(o._scene.camera.pickEllipsoid(e.position,t))}),Cesium.ScreenSpaceEventType.LEFT_UP),s(!1),i.dragHandlers.onDragStart&&i.dragHandlers.onDragStart(a(),o._scene.camera.pickEllipsoid(e,t))}))),i.onDoubleClick&&v(n,"leftDoubleClick",(function(e){i.onDoubleClick(a())})),i.onClick&&v(n,"leftClick",(function(e){i.onClick(a())})),i.tooltip&&(v(n,"mouseMove",(function(e){o._drawHelper._tooltip.showAt(e,i.tooltip())})),v(n,"mouseOut",(function(e){o._drawHelper._tooltip.setVisible(!1)})))}return n},i.BillboardGroup.prototype.insertBillboard=function(e,t,i){this._orderedBillboards.splice(e,0,this.createBillboard(t,i))},i.BillboardGroup.prototype.addBillboard=function(e,t){this._orderedBillboards.push(this.createBillboard(e,t))},i.BillboardGroup.prototype.addBillboards=function(e,t){for(var i=0;i<e.length;i++)this.addBillboard(e[i],t)},i.BillboardGroup.prototype.updateBillboardsPositions=function(e){for(var t=0;t<e.length;t++)this.getBillboard(t).position=e[t]},i.BillboardGroup.prototype.countBillboards=function(){return this._orderedBillboards.length},i.BillboardGroup.prototype.getBillboard=function(e){return this._orderedBillboards[e]},i.BillboardGroup.prototype.removeBillboard=function(e){this._billboards.remove(this.getBillboard(e)),this._orderedBillboards.splice(e,1)},i.BillboardGroup.prototype.remove=function(){this._billboards=this._billboards&&this._billboards.removeAll()&&this._billboards.destroy()},i.BillboardGroup.prototype.setOnTop=function(){this._scene.primitives.raiseToTop(this._billboards)},i.prototype.startDrawingMarker=function(e){e=y(e,h),this.startDrawing((function(){try{r&&r.remove(),s.destroy()}catch(e){}}));var n=this,o=this._scene,r=(o.primitives,new i.BillboardGroup(this,e)),s=new Cesium.ScreenSpaceEventHandler(o.canvas);s.setInputAction((function(i){if(null!=i.position){var s=o.camera.pickEllipsoid(i.position,t);s&&(r.addBillboard(s),n.stopDrawing(),e.callback(s))}}),Cesium.ScreenSpaceEventType.LEFT_CLICK),s.setInputAction((function(e){var i=e.endPosition;null!=i&&o.camera.pickEllipsoid(i,t)}),Cesium.ScreenSpaceEventType.MOUSE_MOVE)},i.prototype.startDrawingPolyline=function(e){e=y(e,u),this.startDrawingmultiline(!1,e)},i.prototype.startDrawingSingleline=function(e){e=y(e,u),this.startDrawingSline(!1,e)},i.prototype.startDrawingPolygon=function(e){e=y(e,r),this.startDrawingPolyshape(!0,e)},i.prototype.startDrawingPoint=function(e){e=y(e,r),this.startDrawing((function(){try{null!=a&&s.remove(a),l&&l.remove(),u.destroy()}catch(e){}}));var n=this,o=this._scene,s=this._scene.primitives,a=null,l=null,u=new Cesium.ScreenSpaceEventHandler(o.canvas);u.setInputAction((function(r){if(null!=r.position){var l=o.camera.pickEllipsoid(r.position,t);if(l){r.position;var u=t.cartesianToCartographic(l),c=[Cesium.Math.toDegrees(u.longitude),Cesium.Math.toDegrees(u.latitude)],h=1e6/Math.pow(2,n._map.GetZoom());e.callstart({screen:r.position,type:"point",geometry:c}),null==a?(a=new i.PointPrimitive({center:l,radius:h,asynchronous:!1,material:e.material}),s.add(a)):(a.setCenter(l),a.setRadius(h)),e.callback({screen:r.position,type:"point",geometry:c}),n.EnableInput(!0)}}}),Cesium.ScreenSpaceEventType.LEFT_DOWN)},i.prototype.startDrawingPolyshape=function(n,o){this.startDrawing((function(){try{m&&m.remove(),g.destroy(),c.remove(r),c.remove(s)}catch(e){}}));var r,s,a=this,l=this._scene,c=l.primitives,p=n?3:2,f=o.lineWidth;(r=n?(f&&(u.width=f),(s=new e.PolylinePrimitive(u)).asynchronous=!1,c.add(s),new e.PolygonPrimitive(o)):new e.PolylinePrimitive(o)).asynchronous=!1,c.add(r);var d=[],m=new i.BillboardGroup(this,h),g=new Cesium.ScreenSpaceEventHandler(l.canvas);g.setInputAction((function(e){if(null!=e.position){var i=l.camera.pickEllipsoid(e.position,t);i&&(0==d.length&&(o.callstart({screen:e.position,firstPoint:i}),d.push(i.clone()),m.addBillboard(d[0])),d.push(i),d.length>=p&&(r.positions=d,r._createPrimitive=!0),m.addBillboard(i))}}),Cesium.ScreenSpaceEventType.LEFT_CLICK),g.setInputAction((function(e){var i=e.endPosition;if(null!=i)if(0==d.length);else{var n=l.camera.pickEllipsoid(i,t);if(n.z=n.z+20,n){if(d.pop(),n.y+=1+Math.random(),d.push(n),d.length>=p)r.positions=d,r._createPrimitive=!0;else{var o=[new Cesium.Cartesian3(d[0].x,d[0].y,d[0].z),new Cesium.Cartesian3(d[1].x,d[1].y,d[1].z)];s&&(s.positions=o,s._createPrimitive=!0)}m.getBillboard(d.length-1).position=n}}}),Cesium.ScreenSpaceEventType.MOUSE_MOVE),g.setInputAction((function(e){var i=e.position;if(null!=i){if(d.length<p+2)return;if(l.camera.pickEllipsoid(i,t)&&(a.stopDrawing(),"function"==typeof o.callback)){d.length;for(var n=[],r=0;r<d.length-1;r++){var s=t.cartesianToCartographic(d[r]);n.push([Cesium.Math.toDegrees(s.longitude),Cesium.Math.toDegrees(s.latitude)])}s=t.cartesianToCartographic(d[0]),n.push([Cesium.Math.toDegrees(s.longitude),Cesium.Math.toDegrees(s.latitude)]),o.callback({geometry:n,type:"polygon"})}}}),Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)},i.prototype.startDrawingmultiline=function(n,o){this.startDrawing((function(){try{p&&p.remove(),f.destroy(),l.remove(r),l.remove(void 0)}catch(e){}}));var r,s=this,a=this._scene,l=a.primitives,u=n?3:2;(r=new e.PolylinePrimitive(o)).asynchronous=!1,l.add(r);var c=[],p=new i.BillboardGroup(this,h),f=new Cesium.ScreenSpaceEventHandler(a.canvas);f.setInputAction((function(e){if(null!=e.position){var i=a.camera.pickEllipsoid(e.position,t);i&&(0==c.length&&(o.callstart({screen:e.position,firstPoint:i}),c.push(i.clone()),p.addBillboard(c[0])),c.push(i),c.length>=u&&(r.positions=c,r._createPrimitive=!0),p.addBillboard(i))}}),Cesium.ScreenSpaceEventType.LEFT_CLICK),f.setInputAction((function(e){var i=e.endPosition;if(null!=i)if(0==c.length);else{var n=a.camera.pickEllipsoid(i,t);n&&(c.pop(),n.y+=1+Math.random(),c.push(n),c.length>=u?(r.positions=c,r._createPrimitive=!0):(new Cesium.Cartesian3(c[0].x,c[0].y,c[0].z),new Cesium.Cartesian3(c[1].x,c[1].y,c[1].z)),p.getBillboard(c.length-1).position=n)}}),Cesium.ScreenSpaceEventType.MOUSE_MOVE),f.setInputAction((function(e){var i=e.position;if(null!=i){if(c.length<u+2)return;if(a.camera.pickEllipsoid(i,t)&&(s.stopDrawing(),"function"==typeof o.callback)){c.length;for(var n=[],r=0;r<c.length-1;r++){var l=t.cartesianToCartographic(c[r]);n.push([Cesium.Math.toDegrees(l.longitude),Cesium.Math.toDegrees(l.latitude)])}o.callback({geometry:n,type:"polyline"})}}}),Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)},i.prototype.startDrawingSline=function(n,o){this.startDrawing((function(){try{p&&p.remove(),f.destroy(),l.remove(r),l.remove(void 0)}catch(e){}}));var r,s=this,a=this._scene,l=a.primitives,u=n?3:2;(r=new e.PolylinePrimitive(o)).asynchronous=!1,l.add(r);var c=[],p=new i.BillboardGroup(this,h),f=new Cesium.ScreenSpaceEventHandler(a.canvas);f.setInputAction((function(e){if(null!=e.position){var i=a.camera.pickEllipsoid(e.position,t);if(i){if(0==c.length)o.callstart({screen:e.position,firstPoint:i}),c.push(i.clone()),p.addBillboard(c[0]);else if(s.stopDrawing(),"function"==typeof o.callback){c.length;for(var n=[],l=0;l<c.length;l++){var h=t.cartesianToCartographic(c[l]);n.push([Cesium.Math.toDegrees(h.longitude),Cesium.Math.toDegrees(h.latitude)])}o.callback({geometry:n,type:"singleline"})}c.push(i),c.length>=u&&(r.positions=c,r._createPrimitive=!0),p.addBillboard(i)}}}),Cesium.ScreenSpaceEventType.LEFT_CLICK),f.setInputAction((function(e){var i=e.endPosition;if(null!=i)if(0==c.length);else{var n=a.camera.pickEllipsoid(i,t);n&&(c.pop(),n.y+=1+Math.random(),c.push(n),c.length>=u?(r.positions=c,r._createPrimitive=!0):(new Cesium.Cartesian3(c[0].x,c[0].y,c[0].z),new Cesium.Cartesian3(c[1].x,c[1].y,c[1].z)),p.getBillboard(c.length-1).position=n)}}),Cesium.ScreenSpaceEventType.MOUSE_MOVE),f.setInputAction((function(e){if(null!=e.position&&(s.stopDrawing(),"function"==typeof o.callback)){c.length;for(var i=[],n=0;n<c.length;n++){var r=t.cartesianToCartographic(c[n]);i.push([Cesium.Math.toDegrees(r.longitude),Cesium.Math.toDegrees(r.latitude)])}o.callback({geometry:i,type:"singleline"})}}),Cesium.ScreenSpaceEventType.RIGHT_CLICK)},i.prototype.startDrawingExtent=function(e){e=y(e,r),this.startDrawing((function(){try{null!=u&&s.remove(u),c&&c.remove(),p.destroy()}catch(e){}}));var n=this,o=this._scene,s=this._scene.primitives,a=null,l=null,u=null,c=null,p=new Cesium.ScreenSpaceEventHandler(o.canvas);function f(t){null==u&&(e.extent=t,(u=new i.ExtentPrimitive(e)).asynchronous=!1,s.add(u)),u.setExtent(t),u._createPrimitive=!0;var o=d(t);null==c?(c=new i.BillboardGroup(n,h)).addBillboards(o):c.updateBillboardsPositions(o)}p.setInputAction((function(i){if(null!=i.position){var r=o.camera.pickEllipsoid(i.position,t);if(r)if(null==u)e.callstart({screen:i.position,firstPoint:r}),l=i.position,f(m(a=t.cartesianToCartographic(r),a));else if(n.stopDrawing(),"function"==typeof e.callback){var s=m(a,t.cartesianToCartographic(r)),c=[Cesium.Math.toDegrees(s.west),Cesium.Math.toDegrees(s.south),Cesium.Math.toDegrees(s.east),Cesium.Math.toDegrees(s.north)];e.callback({geometry:c,type:"rectangle"})}}}),Cesium.ScreenSpaceEventType.LEFT_DOWN),p.setInputAction((function(i){if(null!=i.position){var r=o.camera.pickEllipsoid(i.position,t);if(r&&null!=u){var s=t.cartesianToCartographic(r);if(p=l,f=i.position,Math.abs(p.x-f.x)<5&&Math.abs(p.x-f.x)<5)return;if(n.stopDrawing(),"function"==typeof e.callback){var c=m(a,s),h=[Cesium.Math.toDegrees(c.west),Cesium.Math.toDegrees(c.south),Cesium.Math.toDegrees(c.east),Cesium.Math.toDegrees(c.north)];e.callback({geometry:h,type:"rectangle"})}}}var p,f}),Cesium.ScreenSpaceEventType.LEFT_UP),p.setInputAction((function(e){var i=e.endPosition;if(null!=i)if(null==u);else{var n=o.camera.pickEllipsoid(i,t);n&&f(m(a,t.cartesianToCartographic(n)))}}),Cesium.ScreenSpaceEventType.MOUSE_MOVE)},i.prototype.startDrawingCircle=function(e){e=y(e,r),this.startDrawing((function(){try{null!=a&&s.remove(a),l&&l.remove(),c.destroy()}catch(e){}}));var n=this,o=this._scene,s=this._scene.primitives,a=null,l=null,u=null,c=new Cesium.ScreenSpaceEventHandler(o.canvas);c.setInputAction((function(r){if(null!=r.position){var c=o.camera.pickEllipsoid(r.position,t);if(c)if(u=r.position,null==a)e.callstart({screen:r.position,firstPoint:c}),a=new i.CirclePrimitive({center:c,radius:0,asynchronous:!1,material:e.material}),s.add(a),(l=new i.BillboardGroup(n,h)).addBillboards([c]);else{if("function"==typeof e.callback){var p=t.cartesianToCartographic(a.getCenter()),f={center:[Cesium.Math.toDegrees(p.longitude),Cesium.Math.toDegrees(p.latitude)],radius:Cesium.Math.toDegrees(a.getRadius()/t._maximumRadius)};e.callback({geometry:f,type:"circle"})}n.stopDrawing()}}}),Cesium.ScreenSpaceEventType.LEFT_DOWN),c.setInputAction((function(i){var r,s;if(null!=i.position&&o.camera.pickEllipsoid(i.position,t)){if(r=u,s=i.position,Math.abs(r.x-s.x)<5&&Math.abs(r.x-s.x)<5)return;if(a){if("function"==typeof e.callback){var l=t.cartesianToCartographic(a.getCenter()),c={center:[Cesium.Math.toDegrees(l.longitude),Cesium.Math.toDegrees(l.latitude)],radius:Cesium.Math.toDegrees(a.getRadius()/t._maximumRadius)};e.callback({geometry:c,type:"circle"})}n.stopDrawing()}}}),Cesium.ScreenSpaceEventType.LEFT_UP),c.setInputAction((function(e){var i=e.endPosition;if(null!=i)if(null==a);else{var n=o.camera.pickEllipsoid(i,t);n&&(a.setRadius(Cesium.Cartesian3.distance(a.getCenter(),n)),l.updateBillboardsPositions(n))}}),Cesium.ScreenSpaceEventType.MOUSE_MOVE)},i.prototype.enhancePrimitives=function(){var n=this;function o(e){n._scene,this._highlighted&&this._highlighted==e||!0!==this._editMode&&((this._highlighted=e)?(n.setHighlighted(this),this._strokeColor=this.strokeColor,this.setStrokeStyle(Cesium.Color.fromCssColorString("white"),this.strokeWidth)):this._strokeColor?this.setStrokeStyle(this._strokeColor,this.strokeWidth):this.setStrokeStyle(void 0,void 0))}function r(e){if(this._editMode!=e)if(n.disableAllHighlights(),e){n.setEdited(this);var o=n._scene,r=this;if(null==this._markers){var s=new i.BillboardGroup(n,p),a=new i.BillboardGroup(n,f);function l(e,t){var i=e-1<0?t.length-1:e-1;i<a.countBillboards()&&(a.getBillboard(i).position=h(i)),(i=e)<a.countBillboards()&&(a.getBillboard(i).position=h(i))}function u(){r.executeListeners({name:"onEdited",positions:r.positions})}var c={dragHandlers:{onDrag:function(e,t){r.positions[e]=t,l(e,r.positions),r._createPrimitive=!0},onDragEnd:function(e,t){r._createPrimitive=!0,u()}},onDoubleClick:function(e){r.positions.length<4||(r.positions.splice(e,1),r._createPrimitive=!0,s.removeBillboard(e),a.removeBillboard(e),l(e,r.positions),u())},tooltip:function(){if(3<r.positions.length)return""}};function h(e){var i=r.positions;return t.cartographicToCartesian(new Cesium.EllipsoidGeodesic(t.cartesianToCartographic(i[e]),t.cartesianToCartographic(i[e<i.length-1?e+1:0])).interpolateUsingFraction(.5))}s.addBillboards(r.positions,c),this._markers=s;for(var d=[],m=0,g=r.positions.length+(this.isPolygon?0:-1);m<g;m++)d.push(h(m));var _={dragHandlers:{onDragStart:function(e,t){this.index=e+1,r.positions.splice(this.index,0,t),r._createPrimitive=!0},onDrag:function(e,t){r.positions[this.index]=t,r._createPrimitive=!0},onDragEnd:function(e,t){s.insertBillboard(this.index,t,c),a.getBillboard(this.index-1).position=h(this.index-1),a.insertBillboard(this.index,h(this.index),_),r._createPrimitive=!0,u()}},tooltip:function(){return""}};a.addBillboards(d,_),this._editMarkers=a,this._globeClickhandler=new Cesium.ScreenSpaceEventHandler(o.canvas),this._globeClickhandler.setInputAction((function(e){var t=o.pick(e.position);t&&t.primitive||r.setEditMode(!1)}),Cesium.ScreenSpaceEventType.LEFT_CLICK),s.setOnTop(),a.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._editMarkers.remove(),this._markers=null,this._editMarkers=null,this._globeClickhandler.destroy()),this._editMode=!1}Cesium.Billboard.prototype.setEditable=function(){if(!this._editable){this._editable=!0;var e=this,i=this;v(e,"leftDown",(function(r){function s(e){a.destroy(),o(!0),i.executeListeners({name:"dragEnd",positions:e})}var a=new Cesium.ScreenSpaceEventHandler(n._scene.canvas);a.setInputAction((function(o){var r,a=n._scene.camera.pickEllipsoid(o.endPosition,t);a?(r=a,e.position=r,i.executeListeners({name:"drag",positions:r})):s(a)}),Cesium.ScreenSpaceEventType.MOUSE_MOVE),a.setInputAction((function(e){s(n._scene.camera.pickEllipsoid(e.position,t))}),Cesium.ScreenSpaceEventType.LEFT_UP),o(!1)})),b(e)}function o(e){n._scene.screenSpaceCameraController.enableRotate=e}},e.PolylinePrimitive.prototype.setEditable=function(){if(!this.setEditMode){this.isPolygon=!1,this.asynchronous=!1,n.registerEditableShape(this),this.setEditMode=r;var e=this.width;this.setHighlighted=function(t){!0!==this._editMode&&(t?(n.setHighlighted(this),this.setWidth(2*e)):this.setWidth(e))},this.getExtent=function(){return Cesium.Extent.fromCartographicArray(t.cartesianArrayToCartographicArray(this.positions))},b(this),this.setEditMode(!1)}},e.PolygonPrimitive.prototype.setEditable=function(){this.asynchronous=!1,n._scene,n.registerEditableShape(this),this.setEditMode=r,this.setHighlighted=o,b(this),this.setEditMode(!1)},e.ExtentPrimitive.prototype.setEditable=function(){if(!this.setEditMode){var e=this,r=n._scene;n.registerEditableShape(e),e.asynchronous=!1,e.setEditMode=function(o){if(this._editMode!=o)if(n.disableAllHighlights(),o){if(n.setEdited(this),null==this._markers){var s=new i.BillboardGroup(n,p),a={dragHandlers:{onDrag:function(i,n){var o=s.getBillboard((i+2)%4).position;e.setExtent(m(t.cartesianToCartographic(o),t.cartesianToCartographic(n))),s.updateBillboardsPositions(d(e.extent))},onDragEnd:function(t,i){e.executeListeners({name:"onEdited",extent:e.extent})}},tooltip:function(){return"Drag to change the corners of this extent"}};s.addBillboards(d(e.extent),a),this._markers=s,this._globeClickhandler=new Cesium.ScreenSpaceEventHandler(r.canvas),this._globeClickhandler.setInputAction((function(t){var i=r.pick(t.position);i&&!i.isDestroyed()&&i.primitive||e.setEditMode(!1)}),Cesium.ScreenSpaceEventType.LEFT_CLICK),s.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1},e.setHighlighted=o,b(e),e.setEditMode(!1)}},i.EllipsePrimitive.prototype.setEditable=function(){if(!this.setEditMode){var e=this,r=n._scene;e.asynchronous=!1,n.registerEditableShape(e),e.setEditMode=function(o){if(this._editMode!=o)if(n.disableAllHighlights(),o){n.setEdited(this);var s=this;if(null==this._markers){var a=new i.BillboardGroup(n,p);function l(){return Cesium.Shapes.computeEllipseBoundary(t,e.getCenter(),e.getSemiMajorAxis(),e.getSemiMinorAxis(),e.getRotation()+Math.PI/2,Math.PI/2).splice(0,4)}var u={dragHandlers:{onDrag:function(t,i){var n=Cesium.Cartesian3.distance(e.getCenter(),i);t%2==0?e.setSemiMajorAxis(n):e.setSemiMinorAxis(n),a.updateBillboardsPositions(l())},onDragEnd:function(t,i){e.executeListeners({name:"onEdited",center:e.getCenter(),semiMajorAxis:e.getSemiMajorAxis(),semiMinorAxis:e.getSemiMinorAxis(),rotation:0})}},tooltip:function(){return""}};a.addBillboards(l(),u),this._markers=a,this._globeClickhandler=new Cesium.ScreenSpaceEventHandler(r.canvas),this._globeClickhandler.setInputAction((function(e){var t=r.pick(e.position);t&&t.primitive||s.setEditMode(!1)}),Cesium.ScreenSpaceEventType.LEFT_CLICK),a.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1},e.setHighlighted=o,b(e),e.setEditMode(!1)}},i.CirclePrimitive.prototype.getCircleCartesianCoordinates=function(e){for(var i,n=Cesium.CircleOutlineGeometry.createGeometry(new Cesium.CircleOutlineGeometry({ellipsoid:t,center:this.getCenter(),radius:this.getRadius(),granularity:e})),o=0,r=[];o<n.attributes.position.values.length;o+=3)i=n.attributes.position.values,r.push(new Cesium.Cartesian3(i[o],i[o+1],i[o+2]));return r},i.CirclePrimitive.prototype.setEditable=function(){if(!this.setEditMode){var e=this,t=n._scene;e.asynchronous=!1,n.registerEditableShape(e),e.setEditMode=function(o){if(this._editMode!=o)if(n.disableAllHighlights(),o){n.setEdited(this);var r=this;if(null==this._markers){var s=new i.BillboardGroup(n,p);function a(){return r.getCircleCartesianCoordinates(Cesium.Math.PI_OVER_TWO)}var l={dragHandlers:{onDrag:function(t,i){e.setRadius(Cesium.Cartesian3.distance(e.getCenter(),i)),s.updateBillboardsPositions(a())},onDragEnd:function(t,i){e.executeListeners({name:"onEdited",center:e.getCenter(),radius:e.getRadius()})}},tooltip:function(){return""}};s.addBillboards(a(),l),this._markers=s,this._globeClickhandler=new Cesium.ScreenSpaceEventHandler(t.canvas),this._globeClickhandler.setInputAction((function(e){var i=t.pick(e.position);i&&i.primitive||r.setEditMode(!1)}),Cesium.ScreenSpaceEventType.LEFT_CLICK),s.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1},e.setHighlighted=o,b(e),e.setEditMode(!1)}}},i.Input3DToolWidget=function(e,t){if(!Cesium.defined(t.container))throw new Cesium.DeveloperError("Container is required");_(t,{markerIcon:"./images/glyphicons_242_google_maps.png",polylineIcon:"./images/glyphicons_097_vector_path_line.png",polygonIcon:"./images/glyphicons_096_vector_path_polygon.png",circleIcon:"./images/glyphicons_095_vector_path_circle.png",clearIcon:"./images/glyphicons_067_cleaning.png",polylineDrawingOptions:u,polygonDrawingOptions:s,circleDrawingOptions:a});var i=this,n=document.createElement("DIV");function o(e,t,i,o,r){var s=document.createElement("DIV");s.className="draw_button",s.id="draw_"+e,s.title=i,n.appendChild(s),s.onclick=r;var a=document.createElement("SPAN");s.appendChild(a);var l=document.createElement("IMG");l.src=t,l.style.width="20px",l.style.height="20px";var u='<img src="'+t+'"style="width:31px;height:25px;left: 8px;position=absolute"/>'+o;return a.innerHTML=u,a.style.color="white",s}n.className="toolbar",t.container.appendChild(n),e._scene,o("marker",t.markerIcon,"",'<p class="draw_p"></p>',(function(){e.startDrawingMarker({callback:function(e){i.executeListeners({name:"markerCreated",position:e})}})})),o("polyline",t.polylineIcon,"",'<p class="draw_p"></p>',(function(){e.startDrawingPolyline({callback:function(e){i.executeListeners({name:"polylineCreated",positions:e})}})})),o("polygon",t.polygonIcon,"",'<p class="draw_p"></p>',(function(){e.startDrawingPolygon({callback:function(e){i.executeListeners({name:"polygonCreated",positions:e})}})})),o("circle",t.circleIcon,"",'<p class="draw_p"></p>',(function(){e.startDrawingCircle({callback:function(e,t){i.executeListeners({name:"circleCreated",center:e,radius:t})}})})),b(this)},i.prototype.addToolbar=function(e,t){return t=y(t,{container:e}),new i.Input3DToolWidget(this,t)},i}();Map3DSDKLib.Input3DTool=e,Map3DSDKLib.Math=function(){},Map3DSDKLib.Math.Degree2Rad=function(e){return e*Math.PI/180},Map3DSDKLib.Math.CalcFlatDistance=function(e,t,i,n){var o,r,s,a,l=Map3DSDKLib.Math.Degree2Rad((t+n)/2),u=Map3DSDKLib.Math.Degree2Rad((t-n)/2),c=Map3DSDKLib.Math.Degree2Rad((e-i)/2),h=Math.sin(u),p=Math.sin(c),f=Math.sin(l);return o=(h*=h)*(1-(p*=p))+(1-(f*=f))*p,r=(1-h)*(1-p)+f*p,2*(s=Math.atan(Math.sqrt(o/r)))*6378137*(1+1/298.257*((3*(a=Math.sqrt(o*r)/s)-1)/2/r*f*(1-h)-(3*a+1)/2/o*(1-f)*h))},Map3DSDKLib.Math.CalcTriAngleArea=function(e,t,i,n,o,r){var s=Map3DSDKLib.Math.CalcFlatDistance(e,t,i,n),a=Map3DSDKLib.Math.CalcFlatDistance(i,n,o,r),l=Map3DSDKLib.Math.CalcFlatDistance(e,t,o,r),u=(s+a+l)/2;return Math.sqrt(u*(u-s)*(u-a)*(u-l))},Map3DSDKLib.Math.CalcAnyPolyArea=function(e){e=function(e){var t=[];if(null!=e){for(var i=0;i<e.length;i++){var n={x:e[i].x,y:e[i].y,z:e[i].z},o=map3DView.cartesianTo2MapCoord(n);t.push(o[0]),t.push(o[1])}return t}}(e);for(var t=0,i=1;i<=e.length/2-3;i++)t+=Map3DSDKLib.Math.CalcTriAngleArea(e[2*i-2],e[2*i-1],e[2*i],e[2*i+1],e[2*i+2],e[2*i+3]);return t};var t={},i=Map3DSDKLib.DistanceTool=function(e){this.divMap=e,this.Input3DTool=new Map3DSDKLib.Input3DTool(map),t.dist=this};i.prototype.GetMap=function(){return this.divMap},i.prototype.ClearGeometry=function(){this.Input3DTool.ClearGeometry()};var n=null;function o(e){if(t.dist.ClearGeometry(),t.dist.GetMap().RemoveLabel("distance-tip"),e){var i=e.currentTarget.finishCoordinate_;t.dist.GetMap().AddTextLabel("distance-tip-start",i[0],i[1],"")}}function r(e){e.feature.values_.geometry.extent_;for(var i=e.feature.values_.geometry.flatCoordinates,n=i.length,o=0,r=1;r<i.length/2;r++)o+=Map3DSDKLib.Math.CalcFlatDistance(i[2*r-2],i[2*r-1],i[2*r],i[2*r+1]);o/=1e3,t.dist.GetMap().AddTextLabel("distance-tip",i[n-2],i[n-1],":"+o.toFixed(2)+"")}i.prototype.AddFlashTip=function(e,i){if(this.CloseFlashTip(),null==n){null==i&&(i=3e3);var o=this.GetMap().GetViewCenter();if(null==o)return void this.CloseFlashTip();t.dist.GetMap().AddTextLabel("only-tip",o[0],o[1],e),n=window.setInterval(this.CloseFlashTip,i)}},i.prototype.CloseFlashTip=function(){null!=n&&(t.dist.GetMap().RemoveLabel("only-tip"),window.clearInterval(n),n=null)},i.prototype.Start=function(){o(),this.AddFlashTip("!",2e3),this.Input3DTool.StartLineTool(o,r)},i.prototype.End=function(){this.Input3DTool.ClearAll(),this.GetMap().RemoveLabel("distance-tip-start"),this.GetMap().RemoveLabel("distance-tip")},Map3DSDKLib.DistanceTool=i;var s=Map3DSDKLib.AreaTool=function(e){this.divMap=e,this.Input3DTool=new Map3DSDKLib.Input3DTool(e),t.area=this};function a(e){t.area.ClearGeometry(),t.area.GetMap().RemoveLabel("area-tip-start"),t.area.GetMap().RemoveLabel("area-tip")}function l(e){for(var i=e.feature.values_.geometry.flatCoordinates,n=e.feature.values_.geometry.getInteriorPoint().getCoordinates(),o=(i.length,0),r=1;r<=i.length/2-3;r++)o+=Map3DSDKLib.Math.CalcTriAngleArea(i[2*r-2],i[2*r-1],i[2*r],i[2*r+1],i[2*r+2],i[2*r+3]);var s;s=1e6<o?":"+(o/=1e6).toFixed(2)+"":":"+o.toFixed(2)+"",t.area.GetMap().AddTextLabel("area-tip",n[0],n[1],s)}s.prototype.GetMap=function(){return this.divMap},s.prototype.ClearGeometry=function(){this.Input3DTool.ClearGeometry()},n=null,s.prototype.AddFlashTip=function(e,i){if(this.CloseFlashTip(),null==n){null==i&&(i=3e3);var o=this.GetMap().GetViewCenter();if(null==o)return void this.CloseFlashTip();t.area.GetMap().AddTextLabel("only-tip",o[0],o[1],e),n=window.setInterval(this.CloseFlashTip,i)}},s.prototype.CloseFlashTip=function(){null!=n&&(t.area.GetMap().RemoveLabel("only-tip"),window.clearInterval(n),n=null)},s.prototype.Start=function(){a(),this.AddFlashTip("!",2e3),this.Input3DTool.StartPolygonTool(a,l)},s.prototype.End=function(){this.Input3DTool.ClearAll(),this.GetMap().RemoveLabel("area-tip-start"),this.GetMap().RemoveLabel("area-tip")},Map3DSDKLib.AreaTool=s}();var ZMap3DLib=Map3DSDKLib,GmMap3DLib=Map3DSDKLib;function PathFly(e,t,i){t[0],t[1],t[2];var n=null,o=new Cesium.JulianDate,r=new Cesium.JulianDate,s=null,a=null;!function(e){s=new Cesium.SampledPositionProperty,a=new Cesium.SampledPositionProperty;for(var t=e.RowValue,i=0;i<t.length;i++){var n=t[i],r=Cesium.JulianDate.addSeconds(o,n[0],new Cesium.JulianDate),l=Cesium.Cartesian3.fromDegrees(n[4],n[5],n[6]),u=Cesium.Cartesian3.fromDegrees(n[1],n[2],n[3]);s.addSample(r,l),a.addSample(r,u)}}(i);var l=new Cesium.VelocityOrientationProperty(s),u=!1,c=1,h=!0;function p(){!function(t){var i=s.getValue(t),n=l.getValue(t);if(i&&n){var o=Cesium.Cartographic.fromCartesian(i);if(h){var r=a.getValue(t);r=Cesium.Cartographic.fromCartesian(r),e.camera.lookAtFromTo(r,o)}}}(o)}s.setInterpolationOptions({interpolationDegree:2,interpolationAlgorithm:Cesium.LagrangePolynomialApproximation}),function(t){for(var i in t)t[i]._czEntity.show=!1,e.models.add(t[i])}(t),this.play=function(){u?this.resume():(this.resume(),e._czdata.viewer.scene.postRender.addEventListener(p),e._czdata.viewer.scene.postRender.addEventListener(d))},this.stop=function(){n&&(n._czEntity.show=!1),e._czdata.viewer.scene.postRender.removeEventListener(d),e._czdata.viewer.scene.postRender.removeEventListener(p),o=new Cesium.JulianDate,r=new Cesium.JulianDate,u=!1,c=1,n=null,e.camera.clearLookAt()},this.pause=function(){u=!0},this.resume=function(){u=!1},this.speedUp=function(e){e=parseInt(e),c=e},this.lock=function(){h=!0},this.unlock=function(){h=!1,e.camera.clearLookAt()};var f=new Cesium.JulianDate;function d(e,t){var i=Cesium.JulianDate.secondsDifference(t,r);r.equals(f)?t.clone(r):(t.clone(r),u||Cesium.JulianDate.addSeconds(o,i*c,o))}this.destroy=function(){for(var i in t)e.models.remove(t[i])}}Map3DSDK=Map3DSDK||{},function(){var e=function(e,t){this._map=e,this._viewer=e.cesium.viewer,this._scale=t.scale?t.scale:3,this._url=t.url?t.url:"image/glmodel.gltf",this._center=t.center?t.center:[113.3981,22.6983,6]};e.prototype.AddGltf=function(e){var t=this._viewer,i=t.scene,n=this._center,o=Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(n[0],n[1],n[2]));i.primitives.add(Cesium.Model.fromGltf({url:this._url,modelMatrix:o,scale:this._scale})),1==e&&t.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(n[0],n[1],n[2])})},e.prototype.SetVisible=function(e){},e.prototype.IsVisible=function(e){return this._map.GetView(),!!this._volpri&&this._volpri.show},e.prototype.Destroy=function(){},Map3DSDK.MapGltf=e}(),Map3DSDK=Map3DSDK||{},function(){var e=function(e,t){this._map=e,this._box=t.box,this._scale=t.scale?t.scale:[1,1,1],this._offset=t.offset?t.offset:[0,0,0],this._line=[0,0,80,1e3,0,0,0,0,0,0,0,0,0,0,0,0],this._vol={pri:null,apprance:null,mat:null},this._sect={pri:[],apprance:null,mat:null},this._filter={pri:null,apprance:null,mat:null},this._url=t.url?t.url:"BaseWhite";var i=Date.parse(new Date);this._name=t.name?t.name:"Volume_TimeStap_"+i,this._sectpri=[]};e.prototype.InitShader=function(){$.ajax({url:"./libs/zmap3dgl/glsl/glsl.htm",async:!1,dataType:"text",success:function(e){var t=e;$(document.body).append(t)},error:function(e){console.log(e.message)}}),$.ajax({url:"./libs/zmap3dgl/glsl/filter.htm",async:!1,dataType:"text",success:function(e){var t=e;$(document.body).append(t)},error:function(e){console.log(e.message)}}),$.ajax({url:"./libs/zmap3dgl/glsl/sect.htm",async:!1,dataType:"text",success:function(e){var t=e;$(document.body).append(t)},error:function(e){console.log(e.message)}})},e.prototype.Reset=function(){return this._scale=[1,1,1],this._offset=[0,0,0],this.Refresh()},e.prototype.Refresh=function(){this.Destroy(),this.ShowVolume()},e.prototype.SetVisible=function(e){this._map.GetView(),this._vol.pri&&(this._vol.pri.show=e)},e.prototype.IsVisible=function(e){return this._map.GetView(),!!this._vol.pri&&this._vol.pri.show},e.prototype.ShowVolume=function(){this._CreateModel(1),this.SetVisible(!0)},e.prototype.Destroy=function(){var e=this._map.GetView().scene.primitives;this._vol.pri&&(e.remove(this._vol.pri),this._vol.pri=null)},e.prototype.EnableFilterAnlyze=function(e){e?this._CreateModel(2):this._CreateModel(1)},e.prototype.EnableSectAnlyze=function(e){e?this._CreateModel(3):this._CreateModel(1)},e.prototype.SetSectPlaneAnlyze=function(e,t,i){this._sectpri[e]},e.prototype.SetBox=function(e){this._box=e},e.prototype.GetBox=function(){return this._box},e.prototype.SetScale=function(e){this._scale=e,this.Refresh()},e.prototype.GetScale=function(e){return this._scale},e.prototype.Filter=function(e){Array.isArray(e)&&this._filter.pri&&(this._filter.pri.appearance.material.uniforms.line=e)},e.prototype.SetMinHei=function(e){null!=e&&this._vol.pri&&(this._vol.pri.appearance.material.uniforms.minHeight=e)},e.prototype.SetMinLon=function(e){null!=e&&this._vol.pri&&(this._vol.pri.appearance.material.uniforms.minLongitude=e)},e.prototype.SetMinLat=function(e){null!=e&&this._vol.pri&&(this._vol.pri.appearance.material.uniforms.minLatitude=e)},e.prototype.SetMaxHei=function(e){null!=e&&this._vol.pri&&(this._vol.pri.appearance.material.uniforms.maxHeight=e)},e.prototype.SetMaxLon=function(e){null!=e&&this._vol.pri&&(this._vol.pri.appearance.material.uniforms.maxLongitude=e)},e.prototype.SetMaxLat=function(e){null!=e&&this._vol.pri&&(this._vol.pri.appearance.material.uniforms.maxLatitude=e)},e.prototype.SetOffset=function(e){this._offset=e,this.Refresh()},e.prototype._calcScaleOffsetBox=function(){var e={},t=this._box,i=this._offset,n=this._scale,o=i[0],r=i[1],s=i[2],a=n[0],l=n[1],u=n[2];return e.xmin=o+t.xmin*a,e.xmax=o+t.xmax*a,e.ymin=r+t.ymin*l,e.ymax=r+t.ymax*l,e.zmin=s+t.zmin*u,e.zmax=s+t.zmax*u,e},e.prototype._getModelMatrix=function(){return this._vol.pri.modelMatrix},e.prototype._setModelMatrix=function(e){this._vol.pri.modelMatrix=e},e.prototype.SetModelMatrix=function(e,t){null==t?this._vol.pri.modelMatrix=this.CalculateMatrix(e):this.getSecPri(t).modelMatrix=this.CalculateMatrix(e)},e.prototype.CalculateMatrix=function(e){return Cesium.Matrix4.multiplyByTranslation(Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(e[0],e[1],e[2])),new Cesium.Cartesian3(0,0,0),new Cesium.Matrix4)},e.prototype._calcModelMatrix=function(){this._offset;var e=this._scale,t=(new Cesium.Matrix4,this._box),i=(t.xmin,t.xmax,t.ymin,t.ymin,new Cesium.TranslationRotationScale),n=Cesium.HeadingPitchRoll.fromDegrees(0,0,0,new Cesium.HeadingPitchRoll);return i.rotation=Cesium.Quaternion.fromHeadingPitchRoll(n,new Cesium.Quaternion),i.scale=Cesium.Cartesian3.fromElements(e[0],e[1],e[2],new Cesium.Cartesian3),Cesium.Matrix4.fromTranslationRotationScale(i,new Cesium.Matrix4)},e.prototype._calcParam=function(){this._scale,this._offset;var e=this._calcScaleOffsetBox(),t=(e.xmin+e.xmax)/2,i=(e.ymin+e.ymax)/2,n=(e.zmin+e.zmax)/2,o=e.zmax-e.zmin,r=e.zmin,s=e.zmax,a=Cesium.Cartesian3.fromDegrees(e.xmin,e.ymax,r),l=Cesium.Cartesian3.fromDegrees(e.xmin,e.ymin,r),u=Cesium.Cartesian3.fromDegrees(e.xmax,e.ymax,r),c=Math.sqrt((u.x-a.x)*(u.x-a.x)+(u.y-a.y)*(u.y-a.y)+(u.z-a.z)*(u.z-a.z)),h=Math.sqrt((l.x-a.x)*(l.x-a.x)+(l.y-a.y)*(l.y-a.y)+(l.z-a.z)*(l.z-a.z)),p=Cesium.Matrix4.multiplyByTranslation(Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(e.xmin,e.ymin,r)),new Cesium.Cartesian3(0,0,0),new Cesium.Matrix4),f=new Cesium.Matrix4;return{xcen:t,ycen:i,zcen:n,deltaH:o,deltaMinH:r,deltaMaxH:s,a:a,c:l,d:u,deltaX:c,deltaY:h,cenMatrix:p,invCenMatrix:f=Cesium.Matrix4.inverse(p,f)}},e.prototype._CreateModel=function(e){"use strict";var t=this._map.GetView(),i=this._calcParam(),n=i.xcen,o=i.ycen,r=i.zcen,s=(i.deltaH,i.deltaMinH),a=i.deltaMaxH,l=i.deltaX,u=i.deltaY,c=i.cenMatrix,h=i.invCenMatrix;if(1==e){var p=null;this._vol.mat?((p=this._vol.mat).uniforms.invMat=Cesium.Matrix4.toArray(h),p.uniforms.boxLon=l,p.uniforms.boxLat=u,p.uniforms.boxHeight=a,p.uniforms.minHeight=0,p.uniforms.minLongitude=0,p.uniforms.minLatitude=0,p.uniforms.maxHeight=a,p.uniforms.maxLongitude=l,p.uniforms.maxLatitude=u):p=this._vol.mat=new Cesium.Material({fabric:{type:"PramLQ",uniforms:{cubeTex:this._url,transferTex:"./color.jpg",invMat:Cesium.Matrix4.toArray(h),boxLon:l,boxLat:u,boxHeight:a,minHeight:0,minLongitude:0,minLatitude:0,maxHeight:a,maxLongitude:l,maxLatitude:u,line:this._line}}});var f=new Cesium.BoxGeometry({maximum:new Cesium.Cartesian3(l,u,a),minimum:new Cesium.Cartesian3(0,0,s)}),d=null;d=this._vol.geom?this._vol.geom:this._vol.geom=Cesium.BoxGeometry.createGeometry(f);var m=null;if(m=this._vol.apperance?this._vol.apperance:this._vol.apperance=new Cesium.MaterialAppearance({material:p,vertexShaderSource:document.getElementById("filterVertexShaderPass").textContent,fragmentShaderSource:document.getElementById("filterFragmentShaderPass").textContent,faceForward:!0,closed:!0}),!this._vol.pri){var g=this._vol.pri=new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:d,debugShowBoundingVolume:!0,modelMatrix:c,id:this._name}),asynchronous:!1,appearance:m});t.scene.primitives.add(g)}}else if(2==e)this._vol.pri&&(this._vol.pri.show=!1),p=this._vol.mat,d=this._vol.geom,m=this._filter.apperance?this._filter.apperance:this._filter.apperance=new Cesium.MaterialAppearance({material:p,vertexShaderSource:document.getElementById("filterVertexShaderPass").textContent,fragmentShaderSource:document.getElementById("filterFragmentShaderPass").textContent,faceForward:!0,closed:!0}),this._filter.pri||(g=this._filter.pri=new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:d,debugShowBoundingVolume:!0,modelMatrix:c,id:this._name}),asynchronous:!1,appearance:m}),t.scene.primitives.add(g));else{var _=this._box.xmin,y=this._box.ymin,v=this._box.zmin;this._sectpri=[],p=new Cesium.Material({fabric:{type:"PramLQ",uniforms:{cubeTex:"./radar.png",transferTex:"./color.jpg",invMat:Cesium.Matrix4.toArray(h),boxLong:l,boxWidth:u,boxHeight:a}}});var b=["lonSection","latSection","heiSection"],C=[],x=[],w=[],k=[],P=[],E=new Float64Array([1e-6,0,0,0,u,0,0,0,a,0,u,a]),T=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]),D=new Float32Array([0,1,0,.5,.5,0,1,1]),M=Cesium.Matrix4.multiplyByTranslation(Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(n,y,v)),new Cesium.Cartesian3(0,0,0),new Cesium.Matrix4),S=new Uint32Array([0,1,3,3,2,0]);C.push(E),x.push(T),w.push(D),k.push(S),P.push(M);var L=new Float64Array([0,1e-8,0,l,0,0,0,0,a,l,0,a]),A=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]),O=new Float32Array([0,1,0,.5,.5,0,1,1]),z=(M=Cesium.Matrix4.multiplyByTranslation(Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(_,o,v)),new Cesium.Cartesian3(0,0,0),new Cesium.Matrix4),new Uint32Array([0,1,3,3,2,0]));C.push(L),x.push(A),w.push(O),k.push(z),P.push(M);var I=new Float64Array([0,0,1e-6,l,0,0,0,u,0,l,u,0]),R=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]),F=new Float32Array([0,1,0,.5,.5,0,1,1]),B=new Uint32Array([0,1,3,3,2,0]);M=Cesium.Matrix4.multiplyByTranslation(Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(_,y,r)),new Cesium.Cartesian3(0,0,0),new Cesium.Matrix4),C.push(I),x.push(R),w.push(F),k.push(B),P.push(M);for(var N=0;N<b.length;N++){var j=new Cesium.GeometryAttributes;j.position=new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:C[N]}),j.normal=new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:x[N]}),j.st=new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:w[N]});var U=new Cesium.Geometry({attributes:j,indices:k[N],primitiveType:Cesium.PrimitiveType.TRIANGLES,boundingSphere:Cesium.BoundingSphere.fromVertices(C[N])});g=new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:U,id:b[N]}),modelMatrix:P[N],asynchronous:!1,appearance:new Cesium.MaterialAppearance({material:p,vertexShaderSource:document.getElementById("sliceVertexShaderPass").textContent,fragmentShaderSource:document.getElementById("sliceFragmentShaderPass").textContent,faceForward:!0})}),this._sectpri.push(g),t.scene.primitives.add(g)}}},e.prototype.getSecPri=function(e){for(var t=this._sectpri,i=null,n=0;n<t.length;n++)if(t[n]._instanceIds[0]==e){i=t[n];break}return i},Map3DSDK.MapVolume=e}();var FilterEdit=function(e){this._line=e?(this._name_X=e.name_X?e.name_X:"",this._split_X=e.split_X?e.split_X:4,this._max_X=e.max_X?e.max_X:1e3,this._min_X=e.min_X?e.min_X:0,this._name_Y=e.name_Y?e.name_Y:"",this._split_Y=e.split_Y?e.split_Y:5,this._max_Y=e.max_Y?e.max_Y:1e3,this._min_Y=e.min_Y?e.min_Y:0,this.tolerance=e.tolerance?e.tolerance:3,e.line?e.line:[[this._min_X,this._min_Y],[this._max_X,this._max_Y]]):(this._name_X="",this._split_X=4,this._max_X=1e3,this._min_X=0,this._name_Y="",this._split_Y=5,this._max_Y=1e3,this._min_Y=0,this.tolerance=3,[[0,0],[this._max_X,this._max_Y]])};function relation(e,t,i){for(var n={},o=0;o<t.length;o++)if(pp_distance(e,t[o])<=i+2)return n.relation=1,n.position=o,n;for(o=0;o<t.length-1;o++)if(PointLine_Disp(e[0],e[1],t[o][0],t[o][1],t[o+1][0],t[o+1][1])<=i)return n.relation=2,n.point=e,n.position=o+1,n;return n.relation=0,n}function pp_distance(e,t){var i=e[0]-t[0],n=e[1]-t[1];return Math.pow(i*i+n*n,.5)}function PointLine_Disp(e,t,i,n,o,r){var s,a,l,u,c,h,p;return 0==(s=Math.sqrt((i-e)*(i-e)+(n-t)*(n-t)))||0==(a=Math.sqrt((o-e)*(o-e)+(r-t)*(r-t)))?-1:0==(l=Math.sqrt((i-o)*(i-o)+(n-r)*(n-r)))?s:s<a?(n==r?u=i<o?0:Math.PI:(1e-5<(p=(o-i)/l)-1&&(p=1),u=Math.acos(p),r<n&&(u=2*Math.PI-u)),1e-5<(p=(e-i)/s)-1&&(p=1),c=Math.acos(p),t<n&&(c=2*Math.PI-c),(h=c-u)<0&&(h=-h),h>Math.PI&&(h=2*Math.PI-h),h>Math.PI/2?s:s*Math.sin(h)):(n==r?u=i<o?Math.PI:0:(1e-5<(p=(i-o)/l)-1&&(p=1),u=Math.acos(p),n<r&&(u=2*Math.PI-u)),1e-5<(p=(e-o)/a)-1&&(p=1),c=Math.acos(p),t<r&&(c=2*Math.PI-c),(h=c-u)<0&&(h=-h),h>Math.PI&&(h=2*Math.PI-h),h>Math.PI/2?a:a*Math.sin(h))}FilterEdit.prototype={constructor:FilterEdit,_init:function(e){this.x_axis=30,this.y_axis=40,this._width=e.offsetWidth,this._height=e.offsetHeight,this.painter=document.createElement("canvas"),this.painter.width=this._width,this.painter.height=this._height;var t,i=0,n=this;this.parse_line();var o=-1;this.painter.addEventListener("mousedown",(function(e){1==t.relation?i=1:2==t.relation&&(n.trans_line.splice(t.position,0,t.point),i=1,o=t.position,n._draw(o),n.reverse_parse_line())})),this.painter.addEventListener("mousemove",(function(e){if(1==i){var r;if(r=e.offsetY<=50?50:e.offsetY>n._height-n.x_axis?n._height-n.x_axis:e.offsetY,0==t.position)n.trans_line[t.position]=[n.y_axis,r];else if(t.position==n.trans_line.length-1)n.trans_line[t.position]=[n._width-50,r];else{n.trans_line[t.position]=[e.offsetX,r];for(var s=1;s<n.trans_line.length-1-t.position;s++)n.trans_line[t.position+s][0]<=e.offsetX&&(n.trans_line[t.position+s][0]=e.offsetX);for(s=0;s<t.position;s++)n.trans_line[s][0]>=e.offsetX&&(n.trans_line[s][0]=e.offsetX);e.offsetX>=n._width-50&&(n.trans_line.splice(t.position+1,n.trans_line.length-1-t.position),n.trans_line[t.position]=[n._width-50,r]),e.offsetX<=n.y_axis&&(n.trans_line.splice(0,t.position),t.position=0,n.trans_line[0]=[n.y_axis,r])}o=t.position,n._draw(t.position),n.reverse_parse_line(),n.onchangestatus(t.position,n._line)}else{var a=[e.offsetX,e.offsetY];1==(t=relation(a,n.trans_line,n.tolerance)).relation?(n.highlight(t.position),o=t.position):0<=o&&(n._draw(),o=-1)}})),this.painter.addEventListener("mouseup",(function(e){1==i&&(i=0,n.onchangestatus_over(t.position,n._line))})),this.painter.addEventListener("mouseout",(function(e){1==i&&(i=0,n.onchangestatus_over(t.position,n._line))})),e.appendChild(this.painter)},_draw:function(e){this.clearCanvas(),this._draw_arrow(),this._draw_line(e)},_draw_arrow:function(){var e=this.painter.getContext("2d");e.beginPath(),e.lineWidth="1",e.strokeStyle="#272727",e.font="12px Courier New",e.fillStyle="black",e.moveTo(this.y_axis,this._height-this.x_axis),e.lineTo(this.y_axis,30),e.lineTo(this.y_axis-4,34),e.moveTo(this.y_axis,30),e.lineTo(this.y_axis+4,34),e.moveTo(this.y_axis,this._height-this.x_axis),e.lineTo(this._width-30,this._height-this.x_axis),e.lineTo(this._width-34,this._height-this.x_axis-4),e.moveTo(this._width-30,this._height-this.x_axis),e.lineTo(this._width-34,this._height-this.x_axis+4);for(var t=(this._width-50-this.y_axis)/this._split_X,i=((this._max_X-this._min_X)/this._split_X).toFixed(0),n=1;n<=this._split_X;n++)e.moveTo(t*n+this.y_axis,this._height-this.x_axis),e.lineTo(t*n+this.y_axis,this._height-this.x_axis+5),e.fillText(this._min_X+i*n,t*n+this.y_axis-12,this._height-this.x_axis+15);e.moveTo(this._width-50,this._height-30),e.lineTo(this._width-50,50),e.fillText(this._name_X,this._width-40,this._height-this.x_axis-11),e.fillText(this._name_Y,this.y_axis-15,20),e.stroke(),e.beginPath(),e.strokeStyle="#4DFFFF",e.lineWidth="1";var o=(this._height-this.x_axis-50)/this._split_Y,r=((this._max_Y-this._min_Y)/this._split_Y).toFixed(0);for(n=0;n<this._split_Y;n++)e.moveTo(this.y_axis,o*n+50),e.lineTo(this._width-50,o*n+50),e.fillText(this._max_Y-r*n,this.y_axis-30,o*n+55);e.stroke()},_draw_line:function(e){var t=this.painter.getContext("2d");t.beginPath(),t.lineWidth="1",t.strokeStyle="#272727",t.moveTo(this.trans_line[0][0],this.trans_line[0][1]);for(var i=1;i<this.trans_line.length;i++)t.lineTo(this.trans_line[i][0],this.trans_line[i][1]);for(t.stroke(),i=0;i<this.trans_line.length;i++)t.beginPath(),t.arc(this.trans_line[i][0],this.trans_line[i][1],4,0,2*Math.PI),t.fill();e&&this.highlight(e)},highlight:function(e){var t=this.painter.getContext("2d");t.beginPath(),t.lineWidth="1",t.strokeStyle="#271616",t.arc(this.trans_line[e][0],this.trans_line[e][1],6,0,2*Math.PI),t.fill()},clearCanvas:function(){var e=this.painter.getContext("2d");e.beginPath(),e.fillStyle="#fff",e.fillRect(0,0,this._width,this._height),e.closePath()},parse_line:function(){this.trans_line=[];for(var e=0;e<this._line.length;e++){var t=[];t[0]=(this._line[e][0]-this._min_X)/(this._max_X-this._min_X)*(this._width-this.y_axis-50)+this.y_axis,t[1]=this._height-this.x_axis-(this._line[e][1]-this._min_Y)/(this._max_Y-this._min_Y)*(this._height-this.x_axis-50),this.trans_line.push(t)}},reverse_parse_line:function(){this._line=[];for(var e=0;e<this.trans_line.length;e++){var t=[];t[0]=((this.trans_line[e][0]-this.y_axis)/(this._width-this.y_axis-50)*(this._max_X-this._min_X)+this._min_X).toFixed(1),t[1]=((this._height-this.x_axis-this.trans_line[e][1])/(this._height-this.x_axis-50)*(this._max_Y-this._min_Y)+this._min_Y).toFixed(1),this._line.push(t)}},onchangestatus:function(){},onchangestatus_over:function(){}};var Color=Cesium.Color,defined=Cesium.defined,defineProperties=Cesium.defineProperties,Event=Cesium.Event,createPropertyDescriptor=Cesium.createPropertyDescriptor,Property=Cesium.Property,Material=Cesium.Material;function PolylineDynMaterialProperty(e){e=e||{},this._definitionChanged=new Event,this.color=e.color,this.color2=e.color2||Color.RED,this.lineLength=1,this.lineSpeed=1,this.startPos=0,this.endPos=1,this.moveTime=Delay+2,this.stopTime=1}PolylineDynMaterialProperty.MaterialType="PolylineDyn",PolylineDynMaterialProperty.MaterialShader="uniform vec4 color;uniform vec4 color2;uniform float startPos;uniform float endPos;uniform float moveTime;uniform float stopTime;uniform float tranDelay;uniform float lineLength;uniform float lineSpeed;czm_material czm_getMaterial(czm_materialInput materialInput){    czm_material material = czm_getDefaultMaterial(materialInput);    vec2 st = materialInput.st;    vec4 c;    float cl = 0.01;    float s = st.s * lineLength;    float t = st.t * lineLength;    if(endPos<=cl){        if (s < startPos) c = color;        else if (s < endPos) {            float h = 0.04*t*t-0.04*t+cl;            float h_s = endPos-s;            if(h_s<h){                c = color;            }else{                c = color2;            }        }        else c = color;    }else{        if (s < startPos) c = color;        else if (s < endPos) {            float st_l = endPos-cl;            float st_l2 = endPos-0.2;            if(s>=st_l){                float h = 0.04*t*t-0.04*t+cl;                float h_s = endPos-s;                if(h_s<h){                    c = color;                }else{                    c = color2;                }            }else{                if(s>=st_l2){                    if(t<0.2||t>0.8){                        c = color;                    }else{                        float t_t = (s - startPos) / lineSpeed;                        float d = (tranDelay - moveTime + t_t) / tranDelay;                        if (d < 0.0) d = 0.0;                        c = mix(color, color2, d);                    }                }else{                    c = color;                }            }        }        else c = color;    }    material.emission = c.rgb;    material.alpha = c.a;    return material;}",defineProperties(PolylineDynMaterialProperty.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}}}),PolylineDynMaterialProperty.prototype.getType=function(e){return PolylineDynMaterialProperty.MaterialType},PolylineDynMaterialProperty.prototype.getValue=function(e,t){return defined(t)||(t={}),t.color=this.color,t.color2=this.color2,t.startPos=this.startPos,t.endPos=this.endPos,t.moveTime=this.moveTime,t.stopTime=this.stopTime,t.tranDelay=Delay,t.lineLength=this.lineLength,t.lineSpeed=this.lineSpeed,t};var Delay=1;PolylineDynMaterialProperty.prototype.update=function(e){this.moveTime+=e,this.stopTime?this.moveTime-this.stopTime>Delay&&(this.startPos=0,this.endPos=this.startPos,this.moveTime=0,this.stopTime=0):this.endPos>this.lineLength?this.stopTime=this.moveTime:this.endPos+=e*this.lineSpeed},PolylineDynMaterialProperty.prototype.equals=function(e){return this===e},Material._materialCache.addMaterial(PolylineDynMaterialProperty.MaterialType,{fabric:{type:PolylineDynMaterialProperty.MaterialType,uniforms:{color:new Color(1,1,1,1),color2:Color.RED,startPos:0,endPos:0,stopTime:0,moveTime:0,tranDelay:Delay,lineSpeed:1,lineLength:1},source:PolylineDynMaterialProperty.MaterialShader},translucent:!0}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.axios=t():e.axios=t()}(this,(function(){return function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){"use strict";function n(e){var t=new s(e),i=r(s.prototype.request,t);return o.extend(i,s.prototype,t),o.extend(i,t),i}var o=i(2),r=i(3),s=i(5),a=i(6),l=n(a);l.Axios=s,l.create=function(e){return n(o.merge(a,e))},l.Cancel=i(23),l.CancelToken=i(24),l.isCancel=i(20),l.all=function(e){return Promise.all(e)},l.spread=i(25),e.exports=l,e.exports.default=l},function(e,t,i){"use strict";function n(e){return"[object Array]"===u.call(e)}function o(e){return null!==e&&"object"==typeof e}function r(e){return"[object Function]"===u.call(e)}function s(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(var i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var a=i(3),l=i(4),u=Object.prototype.toString;e.exports={isArray:n,isArrayBuffer:function(e){return"[object ArrayBuffer]"===u.call(e)},isBuffer:l,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===u.call(e)},isFile:function(e){return"[object File]"===u.call(e)},isBlob:function(e){return"[object Blob]"===u.call(e)},isFunction:r,isStream:function(e){return o(e)&&r(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:s,merge:function e(){function t(t,n){"object"==typeof i[n]&&"object"==typeof t?i[n]=e(i[n],t):i[n]=t}for(var i={},n=0,o=arguments.length;n<o;n++)s(arguments[n],t);return i},extend:function(e,t,i){return s(t,(function(t,n){e[n]=i&&"function"==typeof t?a(t,i):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){"use strict";e.exports=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}}},function(e,t){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(i(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,i){"use strict";function n(e){this.defaults=e,this.interceptors={request:new s,response:new s}}var o=i(6),r=i(2),s=i(17),a=i(18);n.prototype.request=function(e){"string"==typeof e&&(e=r.merge({url:arguments[0]},arguments[1])),(e=r.merge(o,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[a,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)i=i.then(t.shift(),t.shift());return i},r.forEach(["delete","get","head","options"],(function(e){n.prototype[e]=function(t,i){return this.request(r.merge(i||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){n.prototype[e]=function(t,i,n){return this.request(r.merge(n||{},{method:e,url:t,data:i}))}})),e.exports=n},function(e,t,i){"use strict";function n(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o=i(2),r=i(7),s={"Content-Type":"application/x-www-form-urlencoded"},a={adapter:function(){var e;return("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process)&&(e=i(8)),e}(),transformRequest:[function(e,t){return r(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(n(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(n(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],(function(e){a.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){a.headers[e]=o.merge(s)})),e.exports=a},function(e,t,i){"use strict";var n=i(2);e.exports=function(e,t){n.forEach(e,(function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])}))}},function(e,t,i){"use strict";var n=i(2),o=i(9),r=i(12),s=i(13),a=i(14),l=i(10),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||i(15);e.exports=function(e){return new Promise((function(t,c){var h=e.data,p=e.headers;n.isFormData(h)&&delete p["Content-Type"];var f=new XMLHttpRequest,d="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in f||a(e.url)||(f=new window.XDomainRequest,d="onload",m=!0,f.onprogress=function(){},f.ontimeout=function(){}),e.auth){var g=e.auth.username||"",_=e.auth.password||"";p.Authorization="Basic "+u(g+":"+_)}if(f.open(e.method.toUpperCase(),r(e.url,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f[d]=function(){if(f&&(4===f.readyState||m)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:i,config:e,request:f};o(t,c,n),f=null}},f.onerror=function(){c(l("Network Error",e,null,f)),f=null},f.ontimeout=function(){c(l("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",f)),f=null},n.isStandardBrowserEnv()){var y=i(16),v=(e.withCredentials||a(e.url))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;v&&(p[e.xsrfHeaderName]=v)}if("setRequestHeader"in f&&n.forEach(p,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete p[t]:f.setRequestHeader(t,e)})),e.withCredentials&&(f.withCredentials=!0),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),c(e),f=null)})),void 0===h&&(h=null),f.send(h)}))}},function(e,t,i){"use strict";var n=i(10);e.exports=function(e,t,i){var o=i.config.validateStatus;i.status&&o&&!o(i.status)?t(n("Request failed with status code "+i.status,i.config,null,i.request,i)):e(i)}},function(e,t,i){"use strict";var n=i(11);e.exports=function(e,t,i,o,r){var s=new Error(e);return n(s,t,i,o,r)}},function(e,t){"use strict";e.exports=function(e,t,i,n,o){return e.config=t,i&&(e.code=i),e.request=n,e.response=o,e}},function(e,t,i){"use strict";function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=i(2);e.exports=function(e,t,i){if(!t)return e;var r;if(i)r=i(t);else if(o.isURLSearchParams(t))r=t.toString();else{var s=[];o.forEach(t,(function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,(function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),s.push(n(t)+"="+n(e))})))})),r=s.join("&")}return r&&(e+=(-1===e.indexOf("?")?"?":"&")+r),e}},function(e,t,i){"use strict";var n=i(2),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,i,r,s={};return e&&n.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=n.trim(e.substr(0,r)).toLowerCase(),i=n.trim(e.substr(r+1)),t){if(s[t]&&0<=o.indexOf(t))return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([i]):s[t]?s[t]+", "+i:i}})),s}},function(e,t,i){"use strict";var n=i(2);e.exports=n.isStandardBrowserEnv()?function(){function e(e){var t=e;return i&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,i=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(i){var o=n.isString(i)?e(i):i;return o.protocol===t.protocol&&o.host===t.host}}():function(){return!0}},function(e,t){"use strict";function i(){this.message="String contains an invalid character"}(i.prototype=new Error).code=5,i.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,n,o=String(e),r="",s=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.charAt(0|s)||(a="=",s%1);r+=a.charAt(63&t>>8-s%1*8)){if(255<(n=o.charCodeAt(s+=.75)))throw new i;t=t<<8|n}return r}},function(e,t,i){"use strict";var n=i(2);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,i,o,r,s){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),n.isString(o)&&a.push("path="+o),n.isString(r)&&a.push("domain="+r),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,i){"use strict";function n(){this.handlers=[]}var o=i(2);n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){o.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n},function(e,t,i){"use strict";function n(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=i(2),r=i(19),s=i(20),a=i(6),l=i(21),u=i(22);e.exports=function(e){return n(e),e.baseURL&&!l(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=r(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return n(e),t.data=r(t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(n(e),t&&t.response&&(t.response.data=r(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,i){"use strict";var n=i(2);e.exports=function(e,t,i){return n.forEach(i,(function(i){e=i(e,t)})),e}},function(e,t){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t){"use strict";function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,e.exports=i},function(e,t,i){"use strict";function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;e((function(e){i.reason||(i.reason=new o(e),t(i.reason))}))}var o=i(23);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n},function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}}])}));
