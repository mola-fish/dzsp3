!function(){var e="初始化参数错误，请检查类型",t="请确认传入的是函数",r="请确认传进来的是数组";function i(t,r){if("object"!=typeof t||"Init3DView"!==t.constructor.name)throw new Error(e);this.map3dView=t,this.viewer=t.cesium.viewer,this.scene=t.cesium.scene,this.range=Array.isArray(r)?r:[]}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.filter||(Array.prototype.filter=function(e,t){"use strict";if("Function"!=typeof e&&"function"!=typeof e||!this)throw new TypeError;var r=this.length>>>0,i=new Array(r),n=this,o=0,s=-1;if(void 0===t)for(;++s!==r;)s in this&&e(n[s],s,n)&&(i[o++]=n[s]);else for(;++s!==r;)s in this&&e.call(t,n[s],s,n)&&(i[o++]=n[s]);return i.length=o,i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var r;if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return-1;var o=+t||0;if(Math.abs(o)===1/0&&(o=0),o>=n)return-1;for(r=Math.max(o>=0?o:n-Math.abs(o),0);r<n;){if(r in i&&i[r]===e)return r;r++}return-1});var n=i.prototype;n._togglePerspectiveCall=function(e,r){if("function"!=typeof e)throw new Error(t);return this.scene.primitives._primitives.forEach((function(t,i,n){this._includeRange(t.id&&t.id.id)&&(e(t,i,n)&&t._nodeCommands&&t._nodeCommands.length>0&&(t._nodeCommands[0].show=r))}),this),this},n._togglePerspective=function(e,t){var r=this.getPrimitive(e);return r&&r._nodeCommands.length>0&&(r._nodeCommands[0].show=t),this},n._includeRange=function(e){if(0===this.range.length)return!0;for(var t=0,r=this.range.length;t<r;t++)if(e===this.range[t])return!0;return!1},n.getPrimitive=function(e){if(this._includeRange(e))for(var t=this.scene.primitives._primitives,r=0,i=t.length;r<i;r++){var n=t[r];if(n.id&&n.id.id&&n.id.id===e)return n}return null},n.setRange=function(e){if(Array.isArray(e))return this.range=e,this;throw new Error(r)},n.addRange=function(e){return Array.isArray(range)?this.range=this.range.concat(e):"string"!=typeof e&&"number"!=typeof e||this.range.push(e),this},n.removeRange=function(e){return Array.isArray(e)||(e=[e]),this.range=this.range.filter((function(t){return-1===e.indexOf(t)})),this},n.cleanRange=function(){return this.range=[],this},n.perspectiveById=function(e){this._togglePerspective(e,!1)},n.closePerspectiveById=function(e){this._togglePerspective(e,!0)},n.perspectiveCall=function(e){this._togglePerspectiveCall(e,!1)},n.closePerspectiveCall=function(e){this._togglePerspectiveCall(e,!1)},n.closeAll=function(){this._togglePerspectiveCall((function(){return!0}),!0)},n.openAll=function(){this._togglePerspectiveCall((function(){return!0}),!1)},n.__debug_half_open=function(){this._togglePerspectiveCall((function(e,t){return t%2==0}),!1)},n.__debug_random_half_open=function(){this._togglePerspectiveCall((function(e,t){return Math.random()>.5}),!1)},window.Perspective=i}();