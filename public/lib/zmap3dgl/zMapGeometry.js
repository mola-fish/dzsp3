var ZMAPGEOMETRY=function(i){this.map3dTool=i,this.viewer=i.GetView(),this.gifImage={}};ZMAPGEOMETRY.prototype.getModel=function(i){if(null==i||""==i)return null;var e=this.viewer.entities.getById(i);return e&&null!=e&&null!=e||(e=null),e},ZMAPGEOMETRY.prototype.getEntity=function(i){if(null==i||""==i)return null;var e=this.viewer.entities.getById(i);return e&&null!=e&&null!=e||(e=null),e},ZMAPGEOMETRY.prototype.removeEntity=function(i){return i&&null!=i&&""!=i?this.viewer.entities.contains(i)?this.removeEntityById(i._id):" The entity is useless ":" The model doesn't exist  "},ZMAPGEOMETRY.prototype.removeEntityById=function(i){if(!i||null==i||""==i)return" The modelId doesn't exist  ";var e=this.getModel(i);return e&&null!=e&&""!=e?this.viewer.entities.removeById(i):" The model doesn't exist  "},ZMAPGEOMETRY.prototype.removeAll=function(){this.viewer.entities.removeAll()},ZMAPGEOMETRY.prototype.showEntity=function(i){if(!this.viewer.entities.contains(i))return" The entity is useless ";i.show=!0},ZMAPGEOMETRY.prototype.unshowEntity=function(i){if(!this.viewer.entities.contains(i))return" The entity is useless ";i.show=!1},ZMAPGEOMETRY.prototype.addPoint=function(i,e){if(!i.id)return"you have to give a id ";var o=this.getModel(i.id);if(null!=o||null!=o)return" The id already exists ";var t=[];if(i.position){var a=i.position;t[0]=parseFloat(a[0]),t[1]=parseFloat(a[1]),t[2]=a[2]?parseFloat(a[2]):0}else t=[110.05254,25.002073,0];var n=GmMap3D.Cartesian3.fromDegrees(t[0],t[1],t[2]),l=this.viewer.entities.add({id:i.id,name:i.name||i.id,position:n,show:null==i.show||i.show,point:{color:i.dcolor?this.map3dTool.colorTransform(i.dcolor):GmMap3D.Color.WHITE,pixelSize:i.dpixelSize?i.dpixelSize:1,outlineColor:i.doutlineColor?this.map3dTool.colorTransform(i.doutlineColor):GmMap3D.Color.BLACK,outlineWidth:i.doutlineWidth?i.doutlineWidth:1,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8),scaleByDistance:i.fscaleByDistance?new GmMap3D.NearFarScalar(i.fscaleByDistance[0],i.fscaleByDistance[1],i.fscaleByDistance[2],i.fscaleByDistance[3]):new GmMap3D.NearFarScalar(0,1,1e8,1),disableDepthTestDistance:null==i.ddisableDepthTestDistance?0:i.ddisableDepthTestDistance}});return e&&this.viewer.camera.flyTo({destination:GmMap3D.Cartesian3.fromDegrees(t[0],t[1],t[2]+1e3)}),l},ZMAPGEOMETRY.prototype.addPoints=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position||0==i.position.length)return" please provide points ";for(var o=[],t=0;t<i.position.length;t++){var a=i.position[t],n=GmMap3D.Cartesian3.fromDegrees(a[0],a[1],a[2]),l=this.viewer.entities.add({id:i.id+t,name:i.name||i.id,position:n,show:null==i.show||i.show,point:{color:i.dcolor?this.map3dTool.colorTransform(i.dcolor):GmMap3D.Color.WHITE,pixelSize:i.dpixelSize?i.dpixelSize:1,outlineColor:i.doutlineColor?this.map3dTool.colorTransform(i.doutlineColor):GmMap3D.Color.BLACK,outlineWidth:i.doutlineWidth?i.doutlineWidth:1,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8),scaleByDistance:i.fscaleByDistance?new GmMap3D.NearFarScalar(i.fscaleByDistance[0],i.fscaleByDistance[1],i.fscaleByDistance[2],i.fscaleByDistance[3]):new GmMap3D.NearFarScalar(0,1,1e8,1),disableDepthTestDistance:null==i.ddisableDepthTestDistance?0:i.ddisableDepthTestDistance}});o.push(l)}return o},ZMAPGEOMETRY.prototype.addPolyline=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position||i.position.length<2)return" please provide points ";for(var o=[],t=0;t<i.position.length;t++){var a=i.position[t];o.push(a[0]),o.push(a[1]),o.push(a[2])}return this.viewer.entities.add({id:i.id,name:i.name||i.id,show:null==i.show||i.show,polyline:{positions:GmMap3D.Cartesian3.fromDegreesArrayHeights(o),followSurface:!!i.dfollowSurface&&i.dfollowSurface,clampToGround:!!i.dclampToGround&&i.dclampToGround,width:i.dwidth?i.dwidth:1,material:i.fcolor?this.map3dTool.colorTransform(i.fcolor):GmMap3D.Color.WHITE,shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,zIndex:i.fzIndex?i.fzIndex:0,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})},ZMAPGEOMETRY.prototype.addPolylineOutline=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position||i.position.length<2)return" please provide points ";for(var o=[],t=0;t<i.position.length;t++){var a=i.position[t];o.push(a[0]),o.push(a[1]),o.push(a[2])}return this.viewer.entities.add({id:i.id,name:i.name||i.id,position:GmMap3D.Cartesian3.fromDegreesArrayHeights(o),show:null==i.show||i.show,polyline:{followSurface:!!i.dfollowSurface&&i.dfollowSurface,clampToGround:!!i.dclampToGround&&i.dclampToGround,width:i.dwidth?i.dwidth:1,material:new Cesium.PolylineOutlineMaterialProperty({color:i.fcolor?this.map3dTool.colorTransform(i.fcolor):GmMap3D.Color.WHITE,outlineWidth:i.foutlineWidth?i.foutlineWidth:1,outlineColor:i.foutlineColor?this.map3dTool.colorTransform(i.foutlineColor):GmMap3D.Color.WHITE}),shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,zIndex:i.fzIndex?i.fzIndex:0,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})},ZMAPGEOMETRY.prototype.addPolylineArrow=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position||i.position.length<2)return" please provide points ";for(var o=[],t=0;t<i.position.length;t++){var a=i.position[t];o.push(a[0]),o.push(a[1]),o.push(a[2])}return this.viewer.entities.add({id:i.id,name:i.name||i.id,position:GmMap3D.Cartesian3.fromDegreesArrayHeights(o),show:null==i.show||i.show,polyline:{followSurface:!!i.dfollowSurface&&i.dfollowSurface,clampToGround:!!i.dclampToGround&&i.dclampToGround,width:i.dwidth?i.dwidth:1,material:new Cesium.PolylineArrowMaterialProperty(i.fcolor?this.map3dTool.colorTransform(i.fcolor):GmMap3D.Color.WHITE),shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,zIndex:i.fzIndex?i.fzIndex:0,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})},ZMAPGEOMETRY.prototype.addPolylineDash=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position||i.position.length<2)return" please provide points ";for(var o=[],t=0;t<i.position.length;t++){var a=i.position[t];o.push(a[0]),o.push(a[1]),o.push(a[2])}return this.viewer.entities.add({id:i.id,name:i.name||i.id,position:GmMap3D.Cartesian3.fromDegreesArrayHeights(o),show:null==i.show||i.show,polyline:{followSurface:!!i.dfollowSurface&&i.dfollowSurface,clampToGround:!!i.dclampToGround&&i.dclampToGround,width:i.dwidth?i.dwidth:1,material:new Cesium.PolylineDashMaterialProperty({color:i.fcolor?this.map3dTool.colorTransform(i.fcolor):GmMap3D.Color.WHITE,gapColor:i.fgapColor?this.map3dTool.colorTransform(i.fgapColor):GmMap3D.Color.TRANSPARENT,dashLength:i.fdashLength?i.fdashLength:1,dashPattern:i.ddashPattern?i.ddashPattern:255}),shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,zIndex:i.fzIndex?i.fzIndex:0,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})},ZMAPGEOMETRY.prototype.setAssistMaterial=function(i){var e=null,o=i;if(o){var t=o.materialName;if("dColorMaterial"===t)e=new GmMap3D.ColorMaterialProperty({color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):GmMap3D.Color.WHITE});else if("dGridMaterial"===t)e=new GmMap3D.GridMaterialProperty({color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):GmMap3D.Color.WHITE,cellAlpha:o.dcellAlpha?Number(o.dcellAlpha):.1,lineCount:o.dlineCount?new GmMap3D.Cartesian2(Number(o.dlineCount[0]),Number(o.dlineCount[1])):new GmMap3D.Cartesian2(8,8),lineThickness:o.dlineThickness?new GmMap3D.Cartesian2(Number(o.dlineThickness[0]),Number(o.dlineThickness[1])):new GmMap3D.Cartesian2(1,1),lineOffset:o.dlineOffset?new GmMap3D.Cartesian2(Number(o.dlineOffset[0]),Number(o.dlineOffset[1])):new GmMap3D.Cartesian2(0,0)});else if("dImageMaterial"===t)o.dimage&&(e=new GmMap3D.ImageMaterialProperty({image:o.dimage,repeat:o.drepeat?new GmMap3D.Cartesian2(Number(o.drepeat[0]),Number(o.drepeat[1])):new GmMap3D.Cartesian2(1,1),color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):GmMap3D.Color.WHITE,transparent:!!o.dtransparent&&o.dtransparent}));else if("dPolylineGlowMaterial"===t)e=new GmMap3D.PolylineGlowMaterialProperty({glowPower:o.dglowPower?Number(o.dglowPower):.25,color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):GmMap3D.Color.WHITE});else if("dPolylineOutlineMaterial"===t)e=new GmMap3D.PolylineGlowMaterialProperty({color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):GmMap3D.Color.WHITE,outlineColor:o.doutlineColor?this.map3dTool.colorTransform(o.doutlineColor):GmMap3D.Color.BLACK,outlineWidth:o.doutlineWidth?Number(o.doutlineWidth):1});else if("dPolylineOutlineMaterialProperty"===t)e=new Cesium.PolylineOutlineMaterialProperty({color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):GmMap3D.Color.WHITE,outlineColor:o.doutlineColor?this.map3dTool.colorTransform(o.doutlineColor):GmMap3D.Color.BLACK,outlineWidth:o.doutlineWidth?Number(o.doutlineWidth):1});else if("dStripeMaterial"===t){var a=o.drotation?180*Number(o.drotation)/Math.PI:0;e=new GmMap3D.StripeMaterialProperty({evenColor:o.devenColor?this.map3dTool.colorTransform(o.devenColor):GmMap3D.Color.WHITE,oddColor:o.doddColor?this.map3dTool.colorTransform(o.doddColor):GmMap3D.Color.WHITE,repeat:o.drepeat?Number(o.drepeat):1,offset:o.doffset?Number(o.doffset):0,orientation:a})}else e=o instanceof Cesium.PolylineArrowMaterialProperty?o:new GmMap3D.ColorMaterialProperty({color:GmMap3D.Color.WHITE})}else e=new GmMap3D.ColorMaterialProperty({color:GmMap3D.Color.WHITE});return e},ZMAPGEOMETRY.prototype.getAssistMaterial=function(i){var e=i.constructor.name,o=null;if("ColorMaterialProperty"===e)o={materialname:"dColorMaterial",color:i.color._value};else if("GridMaterialProperty"===e)o={materialname:"dGridMaterial",dcolor:i.color._value,dcellAlpha:i.cellAlpha._value,dlineCount:[i.lineCount._value.x,i.lineCount._value.y],dlineThickness:[i.lineThickness._value.x,i.lineThickness._value.y],dlineOffset:[i.lineOffset._value.x,i.lineOffset._value.y]};else if("ImageMaterialProperty"===e)o={materialname:"dImageMaterial",dimage:i.image._value,drepeat:[i.repeat._value.x,i.repeat._value.y],dcolor:i.color._value,dtransparent:i.transparent._value};else if("PolylineGlowMaterialProperty"===e)o={materialname:"dPolylineGlowMaterial",dglowPower:i.glowPower._value,dcolor:i.color._value};else if("PolylineOutlineMaterialProperty"===e)o={materialname:"dPolylineOutlineMaterial",dcolor:i.color._value,doutlineColor:i.outlineColor._value,doutlineWidth:i.outlineWidth._value};else if("StripeMaterialProperty"===e){var t=new Number(i.orientation._value*Math.PI/180).toFixed(2);o={materialname:"dStripeMaterial",devenColor:i.evenColor._value,doddColor:i.oddColor._value,drepeat:i.repeat._value,doffset:i.offset._value,drotation:t}}else o={materialname:"dColorMaterial",color:i.color._value};return o},ZMAPGEOMETRY.prototype.addPlane=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position)return" please provide points ";var o=i.position;return this.viewer.entities.add({id:i.id,name:i.name||i.id,position:GmMap3D.Cartesian3.fromDegrees(o[0],o[1],o[2]),show:null==i.show||i.show,plane:{plane:i.dplan?new GmMap3D.Plane(GmMap3D.Cartesian3.normalize(new GmMap3D.Cartesian3(i.dplan[0],i.dplan[1],i.dplan[2])),i.dplan[3]):new GmMap3D.Plane(GmMap3D.Cartesian3.UNIT_Y,0),dimensions:i.ddimensions?new GmMap3D.Cartesian2(i.ddimensions[0],i.ddimensions[1]):new Cesium.Cartesian2(4e5,3e5),fill:!i.dfill||i.dfill,material:i.fcolor?this.map3dTool.colorTransform(i.fcolor):GmMap3D.Color.WHITE,outline:!!i.doutline&&i.doutline,outlineColor:i.doutlineColor?this.map3dTool.colorTransform(i.doutlineColor):GmMap3D.Color.WHITE,outlineWidth:i.doutlineWidth?i.doutlineWidth:1,shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})},ZMAPGEOMETRY.prototype.addBox=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position)return" please provide points ";var o=i.position,t=GmMap3D.Cartesian3.fromDegrees(o[0],o[1],o[2]);return this.viewer.entities.add({id:i.id,name:i.name||i.id,position:t,orientation:modelOrientation,show:null==i.show||i.show,box:{dimensions:i.ddimensions?new CesiGmMap3Dum.Cartesian3(i.ddimensions[0],i.ddimensions[1],i.ddimensions[2]):new GmMap3D.Cartesian3(4e5,3e5,5e5),fill:!i.dfill||i.dfill,material:i.fcolor?this.map3dTool.colorTransform(i.fcolor):GmMap3D.Color.WHITE,outline:!!i.doutline&&i.doutline,outlineColor:i.doutlineColor?this.map3dTool.colorTransform(i.doutlineColor):GmMap3D.Color.WHITE,outlineWidth:i.doutlineWidth?i.doutlineWidth:1,shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})},ZMAPGEOMETRY.prototype.addcorridor=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position||i.position.length<2)return" please provide points ";for(var o=[],t=0;t<i.position.length;t++){var a=i.position[t];o.push(a[0]),o.push(a[1])}return this.viewer.entities.add({id:i.id,name:i.name||i.id,position:GmMap3D.Cartesian3.fromDegreesArray(o),show:null==i.show||i.show,corridor:{width:i.dwidth?i.dwidth:1e5,cornerType:i.dcornerType?GmMap3D.CornerType[i.dcornerType.toUpperCase()]:GmMap3D.CornerType.MITERED,height:i.dheight?i.dheight:1e4,extrudedHeight:i.dextrudedHeight?i.dextrudedHeight:1e4,fill:!i.dfill||i.dfill,material:i.fcolor?this.map3dTool.colorTransform(i.fcolor):GmMap3D.Color.WHITE,outline:!!i.doutline&&i.doutline,outlineColor:i.doutlineColor?this.map3dTool.colorTransform(i.doutlineColor):GmMap3D.Color.WHITE,outlineWidth:i.doutlineWidth?i.doutlineWidth:1,shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})},ZMAPGEOMETRY.prototype.addellipse=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position||0==i.position.length)return" please provide points ";for(var o=[],t=0;t<i.position.length;t++){var a=i.position[t];o.push(a[0]),o.push(a[1])}var n=this.setAssistMaterial(i.dmaterial);return this.viewer.entities.add({id:i.id,name:i.name||i.id,position:GmMap3D.Cartesian3.fromDegrees(o[0],o[1]),show:null==i.show||i.show,ellipse:{semiMajorAxis:i.dsemiMajorAxis?i.dsemiMajorAxis:3e4,semiMinorAxis:i.dsemiMinorAxis?i.dsemiMinorAxis:3e4,height:i.dheight?i.dheight:1e4,extrudedHeight:i.dextrudedHeight?i.dextrudedHeight:1e4,fill:!i.dfill||i.dfill,material:n,outline:!!i.doutline&&i.doutline,outlineColor:i.doutlineColor?this.map3dTool.colorTransform(i.doutlineColor):GmMap3D.Color.WHITE,outlineWidth:i.doutlineWidth?i.doutlineWidth:1,numberOfVerticalLines:i.dnumberOfVerticalLines?i.dnumberOfVerticalLines:16,shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})},ZMAPGEOMETRY.prototype.addellipsoid=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position||0==i.position.length)return" please provide points ";for(var o=[],t=0;t<i.position.length;t++){var a=i.position[t];o.push(a[0]),o.push(a[1]),o.push(a[2])}return this.viewer.entities.add({id:i.id,name:i.name||i.id,position:GmMap3D.Cartesian3.fromDegrees(o[0],o[1],o[2]),show:null==i.show||i.show,ellipsoid:{radii:i.dradii?new GmMap3D.Cartesian3(i.dradii[0],i.dradii[1],i.dradii[2]):new GmMap3D.Cartesian3(2e5,2e5,3e5),fill:!i.dfill||i.dfill,material:i.fcolor?this.map3dTool.colorTransform(i.fcolor):GmMap3D.Color.WHITE,outline:!!i.doutline&&i.doutline,outlineColor:i.doutlineColor?this.map3dTool.colorTransform(i.doutlineColor):GmMap3D.Color.WHITE,outlineWidth:i.doutlineWidth?i.doutlineWidth:1,subdivisions:i.dsubdivisions?i.dsubdivisions:128,shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})},ZMAPGEOMETRY.prototype.AddTextLabel=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position||0==i.position.length)return" please provide points ";var o=[109.234,34.24,0];i.position&&((o=i.position)[2]||(o[2]=0));var t=this.viewer.entities.add({id:i.id,name:i.name||i.id,position:GmMap3D.Cartesian3.fromDegrees(o[0],o[1],o[2]),show:null==i.show||i.show,label:{show:!0,text:i.dtext?i.dtext:"请配置内容",font:i.dfont?i.dfont:"13px 宋体",style:i.dstyle?GmMap3D.LabelStyle[i.dstyle.toUpperCase()]:GmMap3D.LabelStyle.FILL_AND_OUTLINE,pixelOffset:i.dpixelOffset?new GmMap3D.Cartesian2(i.dpixelOffset[0],i.dpixelOffset[1]):new GmMap3D.Cartesian2(0,0),fillColor:i.dfillColor?this.map3dTool.colorTransform(i.dfillColor):GmMap3D.Color.WHITE,outlineColor:i.doutlineColor?this.map3dTool.colorTransform(i.doutlineColor):GmMap3D.Color.BLACK,outlineWidth:i.doutlineWidth?i.doutlineWidth:1,showBackground:!!i.dshowBackground&&i.dshowBackground,scale:i.dscale?i.dscale:1,backgroundColor:i.dbackgroundColor?this.map3dTool.colorTransform(i.dbackgroundColor):new GmMap3D.Color(.165,.165,.165,.8),backgroundPadding:i.dbackgroundPadding?new GmMap3D.Cartesian2(i.dbackgroundPadding[0],i.dbackgroundPadding[1]):new GmMap3D.Cartesian2(7,5),horizontalOrigin:i.dhorizontalOrigin?GmMap3D.HorizontalOrigin[i.dhorizontalOrigin.toUpperCase()]:GmMap3D.HorizontalOrigin.CENTER,verticalOrigin:i.dverticalOrigin?GmMap3D.VerticalOrigin[i.dverticalOrigin.toUpperCase()]:GmMap3D.VerticalOrigin.CENTER,eyeOffset:i.deyeOffset?new GmMap3D.Cartesian3(i.deyeOffset[0],i.deyeOffset[1],i.deyeOffset[2]):new GmMap3D.Cartesian3(0,0,0),distanceDisplayCondition:i.ddistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.ddistanceDisplayCondition[0],i.ddistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8),scaleByDistance:i.dscaleByDistance?new GmMap3D.NearFarScalar(i.dscaleByDistance[0],i.dscaleByDistance[1],i.dscaleByDistance[2],i.dscaleByDistance[3]):new GmMap3D.NearFarScalar(0,1,1e8,0),disableDepthTestDistance:null==i.ddisableDepthTestDistance?0:i.ddisableDepthTestDistance}});return t.callfun=i.callfun,t},ZMAPGEOMETRY.prototype.setTextProperties=function(i,e){if(!this.viewer.entities.contains(i))return" The entity is useless ";if(!e)return" No need to set ";for(var o in e)if("position"!==o)"dtext"!==o?"dfont"!==o?"dstyle"!==o?"dfillColor"!==o?"doutlineColor"!==o?"doutlineWidth"!==o?"dshowBackground"!==o?"dbackgroundColor"!==o?"dscale"!==o?"dhorizontalOrigin"!==o?"dverticalOrigin"!==o?"dpixelOffset"!==o?"dscaleByDistance"!==o?"ddistanceDisplayCondition"!==o||e[o]&&2===e[o].length&&(i.label.distanceDisplayCondition=new GmMap3D.DistanceDisplayCondition(e.ddistanceDisplayCondition[0],e.ddistanceDisplayCondition[1])):e[o]&&4===e[o].length&&(i.label.scaleByDistance=new GmMap3D.NearFarScalar(e.dscaleByDistance[0],e.dscaleByDistance[1],e.dscaleByDistance[2],e.dscaleByDistance[3])):t&&t.length>1&&(i.label.pixelOffset=new GmMap3D.Cartesian2(e.dpixelOffset[0],e.dpixelOffset[1])):e[o]&&(i.label.verticalOrigin=GmMap3D.VerticalOrigin[e.dverticalOrigin.toUpperCase()]):e[o]&&(i.label.horizontalOrigin=GmMap3D.HorizontalOrigin[e.dhorizontalOrigin.toUpperCase()]):e[o]&&(i.label.scale=e.dscale):e[o]&&(i.label.backgroundColor=this.map3dTool.colorTransform(e.dbackgroundColor)):e[o]&&(i.label.showBackground=e.dshowBackground):e[o]&&(i.label.outlineWidth=e.doutlineWidth):e[o]&&(i.label.outlineColor=this.map3dTool.colorTransform(e.doutlineColor)):e[o]&&(i.label.fillColor=this.map3dTool.colorTransform(e.dfillColor)):e[o]&&(i.label.style=GmMap3D.LabelStyle[e.dstyle.toUpperCase()]):e[o]&&(i.label.font=e.dfont):e[o]&&(i.label.text=e.dtext);else{var t=e.position;t&&t.length>1&&(3===t.length?i.position=GmMap3D.Cartesian3.fromDegrees(e.position[0],e.position[1],e.position[2]):i.position=GmMap3D.Cartesian3.fromDegrees(e.position[0],e.position[1]))}},ZMAPGEOMETRY.prototype.getTextProperties=function(i,e){if(!this.viewer.entities.contains(i))return" The entity is useless ";if(!e)return" No need to get ";for(var o={},t=0;t<e.length;t++){var a=e[t];if("id"!==a)if("name"!==a)if("position"!==a)if("dtext"!==a)if("dfont"!==a)if("dstyle"!==a)if("dfillColor"!==a)if("doutlineColor"!==a)if("doutlineWidth"!==a)if("dshowBackground"!==a)if("dbackgroundColor"!==a)if("dscale"!==a)if("dhorizontalOrigin"!==a)if("dverticalOrigin"!==a)if("dpixelOffset"!==a)if("dscaleByDistance"!==a)if("ddistanceDisplayCondition"!==a);else{var n=i.label.distanceDisplayCondition._value;o.ddistanceDisplayCondition=[n._near,n._far]}else{var l=i.label.scaleByDistance._value;o.dscaleByDistance=[l.near,l.nearValue,l.far,l.farValue]}else{var r=i.label.pixelOffset;r&&(r=i.label.pixelOffset._value,o.dpixelOffset=[r.x,r.y])}else{var d=i.label.verticalOrigin;d&&(0!==(d=i.label.verticalOrigin._value)&&"0"!==d||(o.dverticalOrigin="CENTER"),1!==d&&"1"!==d||(o.dverticalOrigin="LEFT"),-1!==d&&"-1"!==d||(o.dverticalOrigin="RIGHT"))}else{var s=i.label.horizontalOrigin;s&&(0!==(s=i.label.horizontalOrigin._value)&&"0"!==s||(o.dhorizontalOrigin="CENTER"),1!==s&&"1"!==s||(o.dhorizontalOrigin="LEFT"),-1!==s&&"-1"!==s||(o.dhorizontalOrigin="RIGHT"))}else o.dscale=i.label.scale._value;else o.dbackgroundColor=i.label.backgroundColor._value;else o.dshowBackground=i.label.showBackground._value;else o.doutlineWidth=i.label.outlineWidth._value;else o.doutlineColor=i.label.outlineColor._value;else o.dfillColor=i.label.fillColor._value;else{var p=i.label.style;p&&(0!==(p=i.label.style._value)&&"0"!==p||(o.dstyle="FILL"),1!==p&&"1"!==p||(o.dstyle="OUTLINE"),2!==p&&"2"!==p||(o.dstyle="FILL_AND_OUTLINE"))}else o.dfont=i.label.font._value;else o.dtext=i.label.text._value;else{var u=this.map3dTool.cartesianTo2MapCoord(i.position._value);o.position=u}else o.name=i.name;else o.id=i.id}return o},ZMAPGEOMETRY.prototype.addLine=function(i,e){if(!i.id)return"you have to give a id ";var o=this.getModel(i.id);if(null!=o||null!=o)return" The id already exists ";if(!i.position||i.position.length<2)return" please provide points ";for(var t=[],a=0;a<i.position.length;a++){var n=i.position[a];t.push(n[0]),t.push(n[1]),Number(n[2])?t.push(n[2]):t.push(0)}var l=this.LineMaterial(i.dmaterial),r=this.viewer.entities.add({id:i.id,name:i.name||i.id,show:null==i.show||i.show,polyline:{positions:GmMap3D.Cartesian3.fromDegreesArrayHeights(t),followSurface:!!i.dfollowSurface&&i.dfollowSurface,clampToGround:!!i.dclampToGround&&i.dclampToGround,width:i.dwidth?i.dwidth:1,material:l||Cesium.Color.RED,shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,zIndex:i.fzIndex?i.fzIndex:0,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}});return e&&this.viewer.camera.flyTo({destination:GmMap3D.Cartesian3.fromDegrees(t[0],t[1],t[2]+1e3)}),r},ZMAPGEOMETRY.prototype.LineMaterial=function(i){var e=null,o=i;if(o){var t=o.materialName;e="dColorMaterial"===t?o.dcolor?this.map3dTool.colorTransform(o.dcolor):GmMap3D.Color.WHITE:"dPolylineGlowMaterial"===t?new GmMap3D.PolylineGlowMaterialProperty({glowPower:o.dglowPower?Number(o.dglowPower):.25,color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):GmMap3D.Color.WHITE}):"dPolylineOutlineMaterial"===t?new GmMap3D.PolylineOutlineMaterialProperty({color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):GmMap3D.Color.WHITE,outlineColor:o.doutlineColor?this.map3dTool.colorTransform(o.doutlineColor):GmMap3D.Color.BLACK,outlineWidth:o.doutlineWidth?Number(o.doutlineWidth):1}):"dPolylineArrowMaterial"===t?new Cesium.PolylineArrowMaterialProperty(o.dcolor?this.map3dTool.colorTransform(o.dcolor):GmMap3D.Color.WHITE):"dPolylineDashMaterial"===t?new Cesium.PolylineDashMaterialProperty({color:o.dcolor?this.map3dTool.colorTransform(o.dcolor):GmMap3D.Color.WHITE,gapColor:o.dgapColor?o.dgapColor:Color.TRANSPARENT,dashLength:o.ddashLength?o.ddashLength:16,dashPattern:o.ddashPattern?o.ddashPattern:255}):GmMap3D.Color.WHITE}else e=GmMap3D.Color.WHITE;return e},ZMAPGEOMETRY.prototype.Addpolygon=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position||i.position.length<3)return" please provide points ";for(var o=[],t=[],a=0;a<i.position.length;a++){var n=i.position[a];o.push(n[0]),t.push(n[0]),o.push(n[1]),t.push(n[1]),Number(n[2])?o.push(n[2]):o.push(0)}var l=null,r=null;i.dheight?(l=i.dheight,r=GmMap3D.Cartesian3.fromDegreesArray(t),i.dperPositionHeight&&(i.dperPositionHeight=!1)):r=GmMap3D.Cartesian3.fromDegreesArrayHeights(o);var d=i.dstRotation?GmMap3D.Math.toRadians(Number(i.dstRotation)):0,s=this.setAssistMaterial(i.dmaterial),p=this.viewer.entities.add({id:i.id,name:i.name?i.name:i.id,show:null==i.show||i.show,polygon:{hierarchy:r,height:l,extrudedHeight:i.dextrudedHeight?i.dextrudedHeight:null,fill:!i.dfill||i.dfill,material:s,outline:!!i.doutline&&i.doutline,outlineColor:i.doutlineColor?this.map3dTool.colorTransform(i.doutlineColor):GmMap3D.Color.WHITE,outlineWidth:i.doutlineWidth?i.doutlineWidth:1,stRotation:d,shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,distanceDisplayCondition:i.ddistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.ddistanceDisplayCondition[0],i.ddistanceDisplayCondition[1]):new GmMap3D.DistanceDisplayCondition(0,1e9),perPositionHeight:!!i.dperPositionHeight&&i.dperPositionHeight,closeTop:!i.dcloseTop||i.dcloseTop,closeBottom:!i.dcloseBottom||i.dcloseBottom}});return p.callfun=i.callfun,p},ZMAPGEOMETRY.prototype.setPolygonProperties=function(i,e){if(!this.viewer.entities.contains(i))return" The entity is useless ";if(!e)return" No need to set ";for(var o in e){if("dmaterial"===o&&e[o]){var t=this.setAssistMaterial(e.dmaterial);i.polygon.material=t}"dheight"!==o?"dextrudedHeight"!==o?"dfill"!==o?"doutline"!==o?"doutlineColor"!==o?"doutlineWidth"!==o?"dstRotation"!==o?"dperPositionHeight"!==o?"ddistanceDisplayCondition"!==o||e[o]&&2===e[o].length&&(i.polygon.distanceDisplayCondition=new GmMap3D.DistanceDisplayCondition(e.ddistanceDisplayCondition[0],e.ddistanceDisplayCondition[1])):null!=e[o]&&(i.polygon.perPositionHeight=e.dperPositionHeight):e[o]&&(i.polygon.stRotation=GmMap3D.Math.toRadians(Number(e.dstRotation))):e[o]&&(i.polygon.outlineWidth=e.doutlineWidth):e[o]&&(i.polygon.outlineColor=this.map3dTool.colorTransform(e.doutlineColor)):null!=e[o]&&(i.polygon.outline=e.doutline):null!=e[o]&&(i.polygon.fill=e.dfill):e[o]&&(i.polygon.extrudedHeight=e.dextrudedHeight):e[o]&&(i.polygon.height=e.dheight)}},ZMAPGEOMETRY.prototype.getPolygonProperties=function(i,e){if(!this.viewer.entities.contains(i))return" The entity is useless ";if(!e)return" No need to get ";for(var o={},t=0;t<e.length;t++){var a=e[t];if("dmaterial"===a){var n=this.getAssistMaterial(i.polygon.material);o.dmaterial=n}if("dheight"!==a)if("dextrudedHeight"!==a)if("dfill"!==a)if("doutline"!==a)if("doutlineColor"!==a)if("doutlineWidth"!==a)if("dstRotation"!==a)if("dperPositionHeight"!==a)if("ddistanceDisplayCondition"!==a);else{var l=i.polygon.distanceDisplayCondition._value;o.ddistanceDisplayCondition=[l._near,l._far]}else o.dperPositionHeight=i.polygon.perPositionHeight._value;else o.dstRotation=GmMap3D.Math.toDegrees(i.polygon.stRotation._value);else o.doutlineWidth=i.polygon.outlineWidth._value;else o.doutlineColor=i.polygon.outlineColor._value;else o.doutline=i.polygon.outline._value;else o.dfill=i.polygon.fill._value;else o.dextrudedHeight=i.polygon.extrudedHeight._value;else o.dheight=i.polygon.height._value}return o},ZMAPGEOMETRY.prototype.AddPolylineVolume=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position||i.position.length<2)return" please provide points ";for(var o=[],t=0;t<i.position.length;t++){var a=i.position[t];o.push(a[0]),o.push(a[1]),Number(a[2])?o.push(a[2]):o.push(0)}return this.viewer.entities.add({id:i.id,name:i.name||i.id,show:null==i.show||i.show,position:GmMap3D.Cartesian3.fromDegreesArrayHeights(o),polylineVolume:{shape:i.dshape?i.dshape:[new Cesium.Cartesian2(-5e4,-5e4),new Cesium.Cartesian2(5e4,-5e4),new Cesium.Cartesian2(5e4,5e4),new Cesium.Cartesian2(-5e4,5e4)],cornerType:i.dcornerType?GmMap3D.CornerType[i.dcornerType.toUpperCase()]:GmMap3D.CornerType.MITERED,fill:!i.dfill||i.dfill,material:i.fcolor?this.map3dTool.colorTransform(i.fcolor):GmMap3D.Color.WHITE,outline:!!i.doutline&&i.doutline,outlineColor:i.doutlineColor?this.map3dTool.colorTransform(i.doutlineColor):GmMap3D.Color.WHITE,outlineWidth:i.doutlineWidth?i.doutlineWidth:1,shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})},ZMAPGEOMETRY.prototype.AddRectangle=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position||2!=i.position.length)return" please provide points more than 2";for(var o=[],t=0;t<i.position.length;t++){var a=i.position[t];o.push(a[0]),o.push(a[1])}return this.viewer.entities.add({id:i.id,name:i.name||i.id,show:null==i.show||i.show,position:GmMap3D.Cartesian3.fromDegreesArrayHeights(o),rectangle:{coordinates:Cesium.Rectangle.fromDegrees(o[0],o[1],o[2],o[3]),height:i.dheight?i.dheight:0,extrudedHeight:i.dextrudedHeight?i.dextrudedHeight:0,fill:!i.dfill||i.dfill,material:i.fcolor?this.map3dTool.colorTransform(i.fcolor):GmMap3D.Color.WHITE,outline:!!i.doutline&&i.doutline,outlineColor:i.doutlineColor?this.map3dTool.colorTransform(i.doutlineColor):GmMap3D.Color.WHITE,outlineWidth:i.doutlineWidth?i.doutlineWidth:1,shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})},ZMAPGEOMETRY.prototype.AddRectangle=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position||2!=i.position.length)return" please provide points more than 2";for(var o=[],t=0;t<i.position.length;t++){var a=i.position[t];o.push(a[0]),o.push(a[1])}return this.viewer.entities.add({id:i.id,name:i.name||i.id,show:null==i.show||i.show,rectangle:{coordinates:Cesium.Rectangle.fromDegrees(o[0],o[1],o[2],o[3]),height:i.dheight?i.dheight:0,extrudedHeight:i.dextrudedHeight?i.dextrudedHeight:0,fill:!i.dfill||i.dfill,material:i.fcolor?this.map3dTool.colorTransform(i.fcolor):GmMap3D.Color.WHITE,outline:!!i.doutline&&i.doutline,outlineColor:i.doutlineColor?this.map3dTool.colorTransform(i.doutlineColor):GmMap3D.Color.WHITE,outlineWidth:i.doutlineWidth?i.doutlineWidth:1,shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})},ZMAPGEOMETRY.prototype.AddWall=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.dmaximumHeights||!i.dminimumHeights)return" please give dmaximumHeights and dminimumHeights ";if(!i.position||i.position.length<1)return" please provide points more than 1";for(var o=[],t=0;t<i.position.length;t++){var a=i.position[t];o.push(a[0]),o.push(a[1])}return i.dmaximumHeights.length!=i.position.length||i.dminimumHeights.length!=i.position.length?"  dmaximumHeights length and dminimumHeights length must equal to point length":this.viewer.entities.add({id:i.id,name:i.name||i.id,show:null==i.show||i.show,wall:{positions:GmMap3D.Cartesian3.fromDegreesArray(o),maximumHeights:i.dmaximumHeights,minimumHeights:i.dminimumHeights,fill:!i.dfill||i.dfill,material:i.fcolor?this.map3dTool.colorTransform(i.fcolor):GmMap3D.Color.WHITE,outline:!!i.doutline&&i.doutline,outlineColor:i.doutlineColor?this.map3dTool.colorTransform(i.doutlineColor):GmMap3D.Color.WHITE,outlineWidth:i.doutlineWidth?i.doutlineWidth:1,shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})},ZMAPGEOMETRY.prototype.AddCylinder=function(i){if(!i.id)return"you have to give a id ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position)return" please provide points ";for(var o=[],t=0;t<i.position.length;t++){var a=i.position[t];o.push(a[0]),o.push(a[1]),o.push(a[2])}return this.viewer.entities.add({id:i.id,name:i.name||i.id,show:null==i.show||i.show,position:Cesium.Cartesian3.fromDegrees(o[0],o[1],o[2]),cylinder:{length:i.dlength?i.dlength:1e4,topRadius:i.dtopRadius?i.dtopRadius:0,bottomRadius:i.dbottomRadius?i.dbottomRadius:1e4,fill:!i.dfill||i.dfill,material:i.fcolor?this.map3dTool.colorTransform(i.fcolor):GmMap3D.Color.WHITE,outline:!!i.doutline&&i.doutline,outlineColor:i.doutlineColor?this.map3dTool.colorTransform(i.doutlineColor):GmMap3D.Color.WHITE,outlineWidth:i.doutlineWidth?i.doutlineWidth:1,numberOfVerticalLines:i.dnumberOfVerticalLines?i.dnumberOfVerticalLines:16,shadows:i.dshadows?GmMap3D.ShadowMode[i.dshadows.toUpperCase()]:GmMap3D.ShadowMode.DISABLED,distanceDisplayCondition:i.fdistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.fdistanceDisplayCondition[0],i.fdistanceDisplayCondition[1]):new Cesium.DistanceDisplayCondition(0,1e8)}})},ZMAPGEOMETRY.prototype.addbillboard=function(i){if(!i.id)return"you have to give a id ";if(!i.imageUrl)return"you have to give a imageUrl ";var e=this.getModel(i.id);if(null!=e||null!=e)return" The id already exists ";if(!i.position||0==i.position.length)return" please provide points ";var o=i.imageUrl?i.imageUrl:"./images/Cesium_Logo_overlay.png";i.imageUrl&&"string"==typeof i.imageUrl&&i.imageUrl.indexOf(".gif")>-1&&(this.gifImage[i.imageUrl]=this.gifImage[i.imageUrl]||new GmMap3D.GifImageProperty({url:i.imageUrl}),o=this.gifImage[i.imageUrl]);var t=i.drotation?180*Number(i.drotation)/Math.PI:0,a=GmMap3D.Cartesian3.fromDegrees(i.position[0],i.position[1],i.position[2]),n={image:o,rotation:t,alignedAxis:GmMap3D.Cartesian3.ZERO,color:i.dcolor?this.map3dTool.colorTransform(i.dcolor):GmMap3D.Color.WHITE,scale:i.dscale?i.dscale:1,pixelOffset:i.dpixelOffset?new GmMap3D.Cartesian2(i.dpixelOffset[0],i.dpixelOffset[1]):new GmMap3D.Cartesian2(0,0),horizontalOrigin:i.dhorizontalOrigin?GmMap3D.HorizontalOrigin[i.dhorizontalOrigin.toUpperCase()]:GmMap3D.HorizontalOrigin.CENTER,verticalOrigin:i.dverticalOrigin?GmMap3D.VerticalOrigin[i.dverticalOrigin.toUpperCase()]:GmMap3D.VerticalOrigin.CENTER,distanceDisplayCondition:i.ddistanceDisplayCondition?new GmMap3D.DistanceDisplayCondition(i.ddistanceDisplayCondition[0],i.ddistanceDisplayCondition[1]):new GmMap3D.DistanceDisplayCondition(0,1e8),scaleByDistance:i.dscaleByDistance?new GmMap3D.NearFarScalar(i.dscaleByDistance[0],i.dscaleByDistance[1],i.dscaleByDistance[2],i.dscaleByDistance[3]):new GmMap3D.NearFarScalar(10,2,1e6,0),translucencyByDistance:i.dtranslucencyByDistance?new GmMap3D.NearFarScalar(i.dtranslucencyByDistance[0],i.dtranslucencyByDistance[1],i.dtranslucencyByDistance[2],i.dtranslucencyByDistance[3]):new GmMap3D.NearFarScalar(10,2,1e7,0),disableDepthTestDistance:null==i.ddisableDepthTestDistance?0:i.ddisableDepthTestDistance};i.dheight&&(n.height=i.dheight?Number(i.dheight):1),i.dwidth&&(n.width=i.dwidth?Number(i.dwidth):1);var l=this.viewer.entities.add({id:i.id,name:i.name||i.id,show:null==i.show||i.show,position:a,billboard:n});return l.callfun=i.callfun,l},ZMAPGEOMETRY.prototype.setbillboardProperties=function(i,e){if(!this.viewer.entities.contains(i))return" The entity is useless ";if(!e)return" No need to set ";for(var o in e)if("position"!==o)if("imageUrl"!==o)if("dscale"!==o)if("dhorizontalOrigin"!==o)if("dverticalOrigin"!==o)if("dpixelOffset"!==o){if("drotation"!==o)"dwidth"!==o?"dheight"!==o?"dcolor"!==o?"dscaleByDistance"!==o?"dtranslucencyByDistance"!==o?"ddistanceDisplayCondition"!==o||e[o]&&2===e[o].length&&(i.billboard.distanceDisplayCondition=new GmMap3D.DistanceDisplayCondition(e.ddistanceDisplayCondition[0],e.ddistanceDisplayCondition[1])):e[o]&&4===e[o].length&&(i.billboard.translucencyByDistance=new GmMap3D.NearFarScalar(e.dtranslucencyByDistance[0],e.dtranslucencyByDistance[1],e.dtranslucencyByDistance[2],e.dtranslucencyByDistance[3])):e[o]&&4===e[o].length&&(i.billboard.scaleByDistance=new GmMap3D.NearFarScalar(e.dscaleByDistance[0],e.dscaleByDistance[1],e.dscaleByDistance[2],e.dscaleByDistance[3])):e[o]&&(i.billboard.color=this.map3dTool.colorTransform(e.dcolor)):e[o]&&(i.billboard.height=e.dheight):e[o]&&(i.billboard.width=e.dwidth);else if(e[o]){var t=GmMap3D.Math.toRadians(Number(e.drotation));i.billboard.rotation=t}}else a&&a.length>1&&(i.billboard.pixelOffset=new GmMap3D.Cartesian2(e.dpixelOffset[0],e.dpixelOffset[1]));else e[o]&&(i.billboard.verticalOrigin=GmMap3D.VerticalOrigin[e.dverticalOrigin.toUpperCase()]);else e[o]&&(i.billboard.horizontalOrigin=GmMap3D.HorizontalOrigin[e.dhorizontalOrigin.toUpperCase()]);else e[o]&&(i.billboard.scale=e.dscale);else e[o]&&(i.billboard.image=e.imageUrl);else{var a=e.position;a&&a.length>1&&(3===a.length?i.position=GmMap3D.Cartesian3.fromDegrees(e.position[0],e.position[1],e.position[2]):i.position=GmMap3D.Cartesian3.fromDegrees(e.position[0],e.position[1]))}},ZMAPGEOMETRY.prototype.getbillboardProperties=function(i,e){if(!this.viewer.entities.contains(i))return" The entity is useless ";if(!e)return" No need to get ";for(var o={},t=0;t<e.length;t++){var a=e[t];if("id"!==a)if("name"!==a)if("position"!==a)if("imageUrl"!==a)if("dscale"!==a)if("dhorizontalOrigin"!==a)if("dverticalOrigin"!==a)if("dpixelOffset"!==a)if("drotation"!==a)if("dwidth"!==a)if("dheight"!==a)if("dcolor"!==a)if("dscaleByDistance"!==a)if("dtranslucencyByDistance"!==a)if("ddistanceDisplayCondition"!==a);else{var n=i.billboard.distanceDisplayCondition._value;o.ddistanceDisplayCondition=[n._near,n._far]}else{var l=i.billboard.translucencyByDistance._value;o.dtranslucencyByDistance=[l.near,l.nearValue,l.far,l.farValue]}else{var r=i.billboard.scaleByDistance._value;o.dscaleByDistance=[r.near,r.nearValue,r.far,r.farValue]}else o.dcolor=i.billboard.color._value;else o.dheight=i.billboard.height._value;else o.dwidth=i.billboard.width._value;else o.drotation=GmMap3D.Math.toDegrees(i.billboard.rotation._value);else{var d=i.billboard.pixelOffset._value;o.dpixelOffset=[d.x,d.y]}else{var s=textEntity.label.verticalOrigin._value;0!==s&&"0"!==s||(o.dverticalOrigin="CENTER"),1!==s&&"1"!==s||(o.dverticalOrigin="LEFT"),-1!==s&&"-1"!==s||(o.dverticalOrigin="RIGHT")}else{var p=textEntity.label.horizontalOrigin._value;0!==p&&"0"!==p||(o.dhorizontalOrigin="CENTER"),1!==p&&"1"!==p||(o.dhorizontalOrigin="LEFT"),-1!==p&&"-1"!==p||(o.dhorizontalOrigin="RIGHT")}else o.dscale=i.billboard.scale._value;else o.imageUrl=i.billboard.image._value;else{var u=this.map3dTool.cartesianTo2MapCoord(i.position._value);o.position=u}else o.name=i.name;else o.id=i.id}return o};