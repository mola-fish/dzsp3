function PathFly(a,e){computationTime(e);var t=null,n=null,i=new GmMap3D.JulianDate,o=new GmMap3D.JulianDate,r=0,l=0,m=null;!function(a){var e=a.path;t=new GmMap3D.SampledPositionProperty,n=new GmMap3D.SampledPositionProperty;for(var o=0;o<e.length;o++){var l=e[o],m=l.cameraPoint,p=l.targetPoint,s=l.time+r;r+=l.time;var D=GmMap3D.JulianDate.addSeconds(i,s,new GmMap3D.JulianDate),u=GmMap3D.Cartesian3.fromDegrees(p[0],p[1],p[2]),c=GmMap3D.Cartesian3.fromDegrees(m[0],m[1],m[2]);t.addSample(D,u),n.addSample(D,c)}}(e);var p=new GmMap3D.VelocityOrientationProperty(t),s=!1,D=!0;t.setInterpolationOptions({interpolationDegree:10,interpolationAlgorithm:GmMap3D.LagrangePolynomialApproximation}),this.play=function(){s?this.resume():(this.resume(),a._czdata.viewer.scene.postRender.addEventListener(c))},this.stop=function(){a._czdata.viewer.scene.postRender.removeEventListener(c),i=new GmMap3D.JulianDate,o=new GmMap3D.JulianDate,s=!1,a.camera.clearLookAt()},this.pause=function(){s=!0,m=Cesium.JulianDate.fromDate(new Date,m)},this.resume=function(){m&&!0===s&&(l+=GmMap3D.JulianDate.secondsDifference(Cesium.JulianDate.fromDate(new Date),m)),s=!1},this.lock=function(){D=!0},this.unlock=function(){D=!1,a.camera.clearLookAt()};var u=new GmMap3D.JulianDate;function c(e,m){if(!s)if(o.equals(u))m.clone(o);else{var c=GmMap3D.JulianDate.secondsDifference(m,o)-l;if(c>=r)return o=new GmMap3D.JulianDate,void(i=new GmMap3D.JulianDate);i=new GmMap3D.JulianDate,GmMap3D.JulianDate.addSeconds(i,c,i);var M=t.getValue(i),f=p.getValue(i);if(M&&f){var h=GmMap3D.Cartographic.fromCartesian(M);if(D){var d=n.getValue(i);d=GmMap3D.Cartographic.fromCartesian(d),a.camera.lookAtFromTo(d,h)}}}}}function computationTime(a){if(a){var e=a.path;a.path[0].time=0;for(var t=1;t<e.length;t++){var n=e[t-1],i=e[t],o=n.cameraPoint,r=i.cameraPoint,l=n.speed,m=i.speed;lat1=Math.PI/180*o[1],lat2=Math.PI/180*r[1],lon1=Math.PI/180*o[0],lon2=Math.PI/180*r[0];var p=Math.cos(lat1)*Math.cos(lat2)*Math.cos(lon1-lon2)+Math.sin(lat1)*Math.sin(lat2);p>1&&(p=1),p<-1&&(p=-1);var s=6378137*Math.acos(p),D=parseFloat(s/((l+m)/2));a.path[t].time=D}return a}}